function v7(e,t){for(var r=0;r<t.length;r++){const c=t[r];if(typeof c!="string"&&!Array.isArray(c)){for(const h in c)if(h!=="default"&&!(h in e)){const p=Object.getOwnPropertyDescriptor(c,h);p&&Object.defineProperty(e,h,p.get?p:{enumerable:!0,get:()=>c[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&c(y)}).observe(document,{childList:!0,subtree:!0});function r(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function c(h){if(h.ep)return;h.ep=!0;const p=r(h);fetch(h.href,p)}})();var fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ro(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var HS={exports:{}},g0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function x7(){if(Tk)return g0;Tk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(c,h,p){var y=null;if(p!==void 0&&(y=""+p),h.key!==void 0&&(y=""+h.key),"key"in h){p={};for(var b in h)b!=="key"&&(p[b]=h[b])}else p=h;return h=p.ref,{$$typeof:e,type:c,key:y,ref:h!==void 0?h:null,props:p}}return g0.Fragment=t,g0.jsx=r,g0.jsxs=r,g0}var Ek;function b7(){return Ek||(Ek=1,HS.exports=x7()),HS.exports}var X=b7(),WS={exports:{}},mr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck;function w7(){if(Ck)return mr;Ck=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),P=Symbol.iterator;function F(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=P&&Ce[P]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,q={};function Z(Ce,Ge,at){this.props=Ce,this.context=Ge,this.refs=q,this.updater=at||U}Z.prototype.isReactComponent={},Z.prototype.setState=function(Ce,Ge){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,Ge,"setState")},Z.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function Q(){}Q.prototype=Z.prototype;function Y(Ce,Ge,at){this.props=Ce,this.context=Ge,this.refs=q,this.updater=at||U}var J=Y.prototype=new Q;J.constructor=Y,N(J,Z.prototype),J.isPureReactComponent=!0;var re=Array.isArray;function ae(){}var fe={H:null,A:null,T:null,S:null},Se=Object.prototype.hasOwnProperty;function Te(Ce,Ge,at){var nt=at.ref;return{$$typeof:e,type:Ce,key:Ge,ref:nt!==void 0?nt:null,props:at}}function ue(Ce,Ge){return Te(Ce.type,Ge,Ce.props)}function _e(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===e}function se(Ce){var Ge={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(at){return Ge[at]})}var me=/\/+/g;function be(Ce,Ge){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?se(""+Ce.key):Ge.toString(36)}function Ie(Ce){switch(Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason;default:switch(typeof Ce.status=="string"?Ce.then(ae,ae):(Ce.status="pending",Ce.then(function(Ge){Ce.status==="pending"&&(Ce.status="fulfilled",Ce.value=Ge)},function(Ge){Ce.status==="pending"&&(Ce.status="rejected",Ce.reason=Ge)})),Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason}}throw Ce}function pe(Ce,Ge,at,nt,gt){var Pt=typeof Ce;(Pt==="undefined"||Pt==="boolean")&&(Ce=null);var Ct=!1;if(Ce===null)Ct=!0;else switch(Pt){case"bigint":case"string":case"number":Ct=!0;break;case"object":switch(Ce.$$typeof){case e:case t:Ct=!0;break;case R:return Ct=Ce._init,pe(Ct(Ce._payload),Ge,at,nt,gt)}}if(Ct)return gt=gt(Ce),Ct=nt===""?"."+be(Ce,0):nt,re(gt)?(at="",Ct!=null&&(at=Ct.replace(me,"$&/")+"/"),pe(gt,Ge,at,"",function(Rt){return Rt})):gt!=null&&(_e(gt)&&(gt=ue(gt,at+(gt.key==null||Ce&&Ce.key===gt.key?"":(""+gt.key).replace(me,"$&/")+"/")+Ct)),Ge.push(gt)),1;Ct=0;var Yt=nt===""?".":nt+":";if(re(Ce))for(var pt=0;pt<Ce.length;pt++)nt=Ce[pt],Pt=Yt+be(nt,pt),Ct+=pe(nt,Ge,at,Pt,gt);else if(pt=F(Ce),typeof pt=="function")for(Ce=pt.call(Ce),pt=0;!(nt=Ce.next()).done;)nt=nt.value,Pt=Yt+be(nt,pt++),Ct+=pe(nt,Ge,at,Pt,gt);else if(Pt==="object"){if(typeof Ce.then=="function")return pe(Ie(Ce),Ge,at,nt,gt);throw Ge=String(Ce),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.")}return Ct}function Pe(Ce,Ge,at){if(Ce==null)return Ce;var nt=[],gt=0;return pe(Ce,nt,"","",function(Pt){return Ge.call(at,Pt,gt++)}),nt}function et(Ce){if(Ce._status===-1){var Ge=Ce._result;Ge=Ge(),Ge.then(function(at){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=at)},function(at){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=at)}),Ce._status===-1&&(Ce._status=0,Ce._result=Ge)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var Be=typeof reportError=="function"?reportError:function(Ce){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ce=="object"&&Ce!==null&&typeof Ce.message=="string"?String(Ce.message):String(Ce),error:Ce});if(!window.dispatchEvent(Ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ce);return}console.error(Ce)},dt={map:Pe,forEach:function(Ce,Ge,at){Pe(Ce,function(){Ge.apply(this,arguments)},at)},count:function(Ce){var Ge=0;return Pe(Ce,function(){Ge++}),Ge},toArray:function(Ce){return Pe(Ce,function(Ge){return Ge})||[]},only:function(Ce){if(!_e(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}};return mr.Activity=L,mr.Children=dt,mr.Component=Z,mr.Fragment=r,mr.Profiler=h,mr.PureComponent=Y,mr.StrictMode=c,mr.Suspense=a,mr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,mr.__COMPILER_RUNTIME={__proto__:null,c:function(Ce){return fe.H.useMemoCache(Ce)}},mr.cache=function(Ce){return function(){return Ce.apply(null,arguments)}},mr.cacheSignal=function(){return null},mr.cloneElement=function(Ce,Ge,at){if(Ce==null)throw Error("The argument must be a React element, but you passed "+Ce+".");var nt=N({},Ce.props),gt=Ce.key;if(Ge!=null)for(Pt in Ge.key!==void 0&&(gt=""+Ge.key),Ge)!Se.call(Ge,Pt)||Pt==="key"||Pt==="__self"||Pt==="__source"||Pt==="ref"&&Ge.ref===void 0||(nt[Pt]=Ge[Pt]);var Pt=arguments.length-2;if(Pt===1)nt.children=at;else if(1<Pt){for(var Ct=Array(Pt),Yt=0;Yt<Pt;Yt++)Ct[Yt]=arguments[Yt+2];nt.children=Ct}return Te(Ce.type,gt,nt)},mr.createContext=function(Ce){return Ce={$$typeof:y,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null},Ce.Provider=Ce,Ce.Consumer={$$typeof:p,_context:Ce},Ce},mr.createElement=function(Ce,Ge,at){var nt,gt={},Pt=null;if(Ge!=null)for(nt in Ge.key!==void 0&&(Pt=""+Ge.key),Ge)Se.call(Ge,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(gt[nt]=Ge[nt]);var Ct=arguments.length-2;if(Ct===1)gt.children=at;else if(1<Ct){for(var Yt=Array(Ct),pt=0;pt<Ct;pt++)Yt[pt]=arguments[pt+2];gt.children=Yt}if(Ce&&Ce.defaultProps)for(nt in Ct=Ce.defaultProps,Ct)gt[nt]===void 0&&(gt[nt]=Ct[nt]);return Te(Ce,Pt,gt)},mr.createRef=function(){return{current:null}},mr.forwardRef=function(Ce){return{$$typeof:b,render:Ce}},mr.isValidElement=_e,mr.lazy=function(Ce){return{$$typeof:R,_payload:{_status:-1,_result:Ce},_init:et}},mr.memo=function(Ce,Ge){return{$$typeof:E,type:Ce,compare:Ge===void 0?null:Ge}},mr.startTransition=function(Ce){var Ge=fe.T,at={};fe.T=at;try{var nt=Ce(),gt=fe.S;gt!==null&&gt(at,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(ae,Be)}catch(Pt){Be(Pt)}finally{Ge!==null&&at.types!==null&&(Ge.types=at.types),fe.T=Ge}},mr.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},mr.use=function(Ce){return fe.H.use(Ce)},mr.useActionState=function(Ce,Ge,at){return fe.H.useActionState(Ce,Ge,at)},mr.useCallback=function(Ce,Ge){return fe.H.useCallback(Ce,Ge)},mr.useContext=function(Ce){return fe.H.useContext(Ce)},mr.useDebugValue=function(){},mr.useDeferredValue=function(Ce,Ge){return fe.H.useDeferredValue(Ce,Ge)},mr.useEffect=function(Ce,Ge){return fe.H.useEffect(Ce,Ge)},mr.useEffectEvent=function(Ce){return fe.H.useEffectEvent(Ce)},mr.useId=function(){return fe.H.useId()},mr.useImperativeHandle=function(Ce,Ge,at){return fe.H.useImperativeHandle(Ce,Ge,at)},mr.useInsertionEffect=function(Ce,Ge){return fe.H.useInsertionEffect(Ce,Ge)},mr.useLayoutEffect=function(Ce,Ge){return fe.H.useLayoutEffect(Ce,Ge)},mr.useMemo=function(Ce,Ge){return fe.H.useMemo(Ce,Ge)},mr.useOptimistic=function(Ce,Ge){return fe.H.useOptimistic(Ce,Ge)},mr.useReducer=function(Ce,Ge,at){return fe.H.useReducer(Ce,Ge,at)},mr.useRef=function(Ce){return fe.H.useRef(Ce)},mr.useState=function(Ce){return fe.H.useState(Ce)},mr.useSyncExternalStore=function(Ce,Ge,at){return fe.H.useSyncExternalStore(Ce,Ge,at)},mr.useTransition=function(){return fe.H.useTransition()},mr.version="19.2.0",mr}var Mk;function D3(){return Mk||(Mk=1,WS.exports=w7()),WS.exports}var V=D3();const sf=Ro(V),EA=v7({__proto__:null,default:sf},[V]);var ZS={exports:{}},y0={},XS={exports:{}},YS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak;function S7(){return Ak||(Ak=1,(function(e){function t(pe,Pe){var et=pe.length;pe.push(Pe);e:for(;0<et;){var Be=et-1>>>1,dt=pe[Be];if(0<h(dt,Pe))pe[Be]=Pe,pe[et]=dt,et=Be;else break e}}function r(pe){return pe.length===0?null:pe[0]}function c(pe){if(pe.length===0)return null;var Pe=pe[0],et=pe.pop();if(et!==Pe){pe[0]=et;e:for(var Be=0,dt=pe.length,Ce=dt>>>1;Be<Ce;){var Ge=2*(Be+1)-1,at=pe[Ge],nt=Ge+1,gt=pe[nt];if(0>h(at,et))nt<dt&&0>h(gt,at)?(pe[Be]=gt,pe[nt]=et,Be=nt):(pe[Be]=at,pe[Ge]=et,Be=Ge);else if(nt<dt&&0>h(gt,et))pe[Be]=gt,pe[nt]=et,Be=nt;else break e}}return Pe}function h(pe,Pe){var et=pe.sortIndex-Pe.sortIndex;return et!==0?et:pe.id-Pe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var y=Date,b=y.now();e.unstable_now=function(){return y.now()-b}}var a=[],E=[],R=1,L=null,P=3,F=!1,U=!1,N=!1,q=!1,Z=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function J(pe){for(var Pe=r(E);Pe!==null;){if(Pe.callback===null)c(E);else if(Pe.startTime<=pe)c(E),Pe.sortIndex=Pe.expirationTime,t(a,Pe);else break;Pe=r(E)}}function re(pe){if(N=!1,J(pe),!U)if(r(a)!==null)U=!0,ae||(ae=!0,se());else{var Pe=r(E);Pe!==null&&Ie(re,Pe.startTime-pe)}}var ae=!1,fe=-1,Se=5,Te=-1;function ue(){return q?!0:!(e.unstable_now()-Te<Se)}function _e(){if(q=!1,ae){var pe=e.unstable_now();Te=pe;var Pe=!0;try{e:{U=!1,N&&(N=!1,Q(fe),fe=-1),F=!0;var et=P;try{t:{for(J(pe),L=r(a);L!==null&&!(L.expirationTime>pe&&ue());){var Be=L.callback;if(typeof Be=="function"){L.callback=null,P=L.priorityLevel;var dt=Be(L.expirationTime<=pe);if(pe=e.unstable_now(),typeof dt=="function"){L.callback=dt,J(pe),Pe=!0;break t}L===r(a)&&c(a),J(pe)}else c(a);L=r(a)}if(L!==null)Pe=!0;else{var Ce=r(E);Ce!==null&&Ie(re,Ce.startTime-pe),Pe=!1}}break e}finally{L=null,P=et,F=!1}Pe=void 0}}finally{Pe?se():ae=!1}}}var se;if(typeof Y=="function")se=function(){Y(_e)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,be=me.port2;me.port1.onmessage=_e,se=function(){be.postMessage(null)}}else se=function(){Z(_e,0)};function Ie(pe,Pe){fe=Z(function(){pe(e.unstable_now())},Pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_next=function(pe){switch(P){case 1:case 2:case 3:var Pe=3;break;default:Pe=P}var et=P;P=Pe;try{return pe()}finally{P=et}},e.unstable_requestPaint=function(){q=!0},e.unstable_runWithPriority=function(pe,Pe){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var et=P;P=pe;try{return Pe()}finally{P=et}},e.unstable_scheduleCallback=function(pe,Pe,et){var Be=e.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?Be+et:Be):et=Be,pe){case 1:var dt=-1;break;case 2:dt=250;break;case 5:dt=1073741823;break;case 4:dt=1e4;break;default:dt=5e3}return dt=et+dt,pe={id:R++,callback:Pe,priorityLevel:pe,startTime:et,expirationTime:dt,sortIndex:-1},et>Be?(pe.sortIndex=et,t(E,pe),r(a)===null&&pe===r(E)&&(N?(Q(fe),fe=-1):N=!0,Ie(re,et-Be))):(pe.sortIndex=dt,t(a,pe),U||F||(U=!0,ae||(ae=!0,se()))),pe},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(pe){var Pe=P;return function(){var et=P;P=Pe;try{return pe.apply(this,arguments)}finally{P=et}}}})(YS)),YS}var Rk;function T7(){return Rk||(Rk=1,XS.exports=S7()),XS.exports}var KS={exports:{}},Wo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function E7(){if(kk)return Wo;kk=1;var e=D3();function t(a){var E="https://react.dev/errors/"+a;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)E+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+a+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var c={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},h=Symbol.for("react.portal");function p(a,E,R){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:L==null?null:""+L,children:a,containerInfo:E,implementation:R}}var y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(a,E){if(a==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return Wo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Wo.createPortal=function(a,E){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(t(299));return p(a,E,null,R)},Wo.flushSync=function(a){var E=y.T,R=c.p;try{if(y.T=null,c.p=2,a)return a()}finally{y.T=E,c.p=R,c.d.f()}},Wo.preconnect=function(a,E){typeof a=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,c.d.C(a,E))},Wo.prefetchDNS=function(a){typeof a=="string"&&c.d.D(a)},Wo.preinit=function(a,E){if(typeof a=="string"&&E&&typeof E.as=="string"){var R=E.as,L=b(R,E.crossOrigin),P=typeof E.integrity=="string"?E.integrity:void 0,F=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;R==="style"?c.d.S(a,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:L,integrity:P,fetchPriority:F}):R==="script"&&c.d.X(a,{crossOrigin:L,integrity:P,fetchPriority:F,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},Wo.preinitModule=function(a,E){if(typeof a=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var R=b(E.as,E.crossOrigin);c.d.M(a,{crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&c.d.M(a)},Wo.preload=function(a,E){if(typeof a=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var R=E.as,L=b(R,E.crossOrigin);c.d.L(a,R,{crossOrigin:L,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},Wo.preloadModule=function(a,E){if(typeof a=="string")if(E){var R=b(E.as,E.crossOrigin);c.d.m(a,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:R,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else c.d.m(a)},Wo.requestFormReset=function(a){c.d.r(a)},Wo.unstable_batchedUpdates=function(a,E){return a(E)},Wo.useFormState=function(a,E,R){return y.H.useFormState(a,E,R)},Wo.useFormStatus=function(){return y.H.useHostTransitionStatus()},Wo.version="19.2.0",Wo}var Ik;function HO(){if(Ik)return KS.exports;Ik=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),KS.exports=E7(),KS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk;function C7(){if(zk)return y0;zk=1;var e=T7(),t=D3(),r=HO();function c(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function p(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function y(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function b(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function a(l){if(p(l)!==l)throw Error(c(188))}function E(l){var u=l.alternate;if(!u){if(u=p(l),u===null)throw Error(c(188));return u!==l?null:l}for(var g=l,S=u;;){var I=g.return;if(I===null)break;var O=I.alternate;if(O===null){if(S=I.return,S!==null){g=S;continue}break}if(I.child===O.child){for(O=I.child;O;){if(O===g)return a(I),l;if(O===S)return a(I),u;O=O.sibling}throw Error(c(188))}if(g.return!==S.return)g=I,S=O;else{for(var te=!1,ge=I.child;ge;){if(ge===g){te=!0,g=I,S=O;break}if(ge===S){te=!0,S=I,g=O;break}ge=ge.sibling}if(!te){for(ge=O.child;ge;){if(ge===g){te=!0,g=O,S=I;break}if(ge===S){te=!0,S=O,g=I;break}ge=ge.sibling}if(!te)throw Error(c(189))}}if(g.alternate!==S)throw Error(c(190))}if(g.tag!==3)throw Error(c(188));return g.stateNode.current===g?l:u}function R(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=R(l),u!==null)return u;l=l.sibling}return null}var L=Object.assign,P=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),Te=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function se(l){return l===null||typeof l!="object"?null:(l=_e&&l[_e]||l["@@iterator"],typeof l=="function"?l:null)}var me=Symbol.for("react.client.reference");function be(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===me?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case N:return"Fragment";case Z:return"Profiler";case q:return"StrictMode";case re:return"Suspense";case ae:return"SuspenseList";case Te:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case U:return"Portal";case Y:return l.displayName||"Context";case Q:return(l._context.displayName||"Context")+".Consumer";case J:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case fe:return u=l.displayName||null,u!==null?u:be(l.type)||"Memo";case Se:u=l._payload,l=l._init;try{return be(l(u))}catch{}}return null}var Ie=Array.isArray,pe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},Be=[],dt=-1;function Ce(l){return{current:l}}function Ge(l){0>dt||(l.current=Be[dt],Be[dt]=null,dt--)}function at(l,u){dt++,Be[dt]=l.current,l.current=u}var nt=Ce(null),gt=Ce(null),Pt=Ce(null),Ct=Ce(null);function Yt(l,u){switch(at(Pt,u),at(gt,l),at(nt,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?lh(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=lh(u),l=qx(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Ge(nt),at(nt,l)}function pt(){Ge(nt),Ge(gt),Ge(Pt)}function Rt(l){l.memoizedState!==null&&at(Ct,l);var u=nt.current,g=qx(u,l.type);u!==g&&(at(gt,l),at(nt,g))}function kt(l){gt.current===l&&(Ge(nt),Ge(gt)),Ct.current===l&&(Ge(Ct),Id._currentValue=et)}var Xe,xn;function Vt(l){if(Xe===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Xe=u&&u[1]||"",xn=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+l+xn}var Kt=!1;function sn(l,u){if(!l||Kt)return"";Kt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(u){var qt=function(){throw Error()};if(Object.defineProperty(qt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qt,[])}catch(wt){var yt=wt}Reflect.construct(l,[],qt)}else{try{qt.call()}catch(wt){yt=wt}l.call(qt.prototype)}}else{try{throw Error()}catch(wt){yt=wt}(qt=l())&&typeof qt.catch=="function"&&qt.catch(function(){})}}catch(wt){if(wt&&yt&&typeof wt.stack=="string")return[wt.stack,yt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=S.DetermineComponentFrameRoot(),te=O[0],ge=O[1];if(te&&ge){var Ze=te.split(`
`),mt=ge.split(`
`);for(I=S=0;S<Ze.length&&!Ze[S].includes("DetermineComponentFrameRoot");)S++;for(;I<mt.length&&!mt[I].includes("DetermineComponentFrameRoot");)I++;if(S===Ze.length||I===mt.length)for(S=Ze.length-1,I=mt.length-1;1<=S&&0<=I&&Ze[S]!==mt[I];)I--;for(;1<=S&&0<=I;S--,I--)if(Ze[S]!==mt[I]){if(S!==1||I!==1)do if(S--,I--,0>I||Ze[S]!==mt[I]){var Dt=`
`+Ze[S].replace(" at new "," at ");return l.displayName&&Dt.includes("<anonymous>")&&(Dt=Dt.replace("<anonymous>",l.displayName)),Dt}while(1<=S&&0<=I);break}}}finally{Kt=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?Vt(g):""}function Jt(l,u){switch(l.tag){case 26:case 27:case 5:return Vt(l.type);case 16:return Vt("Lazy");case 13:return l.child!==u&&u!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return sn(l.type,!1);case 11:return sn(l.type.render,!1);case 1:return sn(l.type,!0);case 31:return Vt("Activity");default:return""}}function zn(l){try{var u="",g=null;do u+=Jt(l,g),g=l,l=l.return;while(l);return u}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var gn=Object.prototype.hasOwnProperty,yn=e.unstable_scheduleCallback,Cn=e.unstable_cancelCallback,Xt=e.unstable_shouldYield,jn=e.unstable_requestPaint,_n=e.unstable_now,er=e.unstable_getCurrentPriorityLevel,tr=e.unstable_ImmediatePriority,Tn=e.unstable_UserBlockingPriority,Ln=e.unstable_NormalPriority,Xn=e.unstable_LowPriority,lr=e.unstable_IdlePriority,Sn=e.log,zr=e.unstable_setDisableYieldValue,cr=null,un=null;function Wt(l){if(typeof Sn=="function"&&zr(l),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(cr,l)}catch{}}var fn=Math.clz32?Math.clz32:Zr,Nn=Math.log,fr=Math.LN2;function Zr(l){return l>>>=0,l===0?32:31-(Nn(l)/fr|0)|0}var Le=256,le=262144,ce=4194304;function Me(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Oe(l,u,g){var S=l.pendingLanes;if(S===0)return 0;var I=0,O=l.suspendedLanes,te=l.pingedLanes;l=l.warmLanes;var ge=S&134217727;return ge!==0?(S=ge&~O,S!==0?I=Me(S):(te&=ge,te!==0?I=Me(te):g||(g=ge&~l,g!==0&&(I=Me(g))))):(ge=S&~O,ge!==0?I=Me(ge):te!==0?I=Me(te):g||(g=S&~l,g!==0&&(I=Me(g)))),I===0?0:u!==0&&u!==I&&(u&O)===0&&(O=I&-I,g=u&-u,O>=g||O===32&&(g&4194048)!==0)?u:I}function Ue(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Qe(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qe(){var l=ce;return ce<<=1,(ce&62914560)===0&&(ce=4194304),l}function je(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function tt(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Tt(l,u,g,S,I,O){var te=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var ge=l.entanglements,Ze=l.expirationTimes,mt=l.hiddenUpdates;for(g=te&~g;0<g;){var Dt=31-fn(g),qt=1<<Dt;ge[Dt]=0,Ze[Dt]=-1;var yt=mt[Dt];if(yt!==null)for(mt[Dt]=null,Dt=0;Dt<yt.length;Dt++){var wt=yt[Dt];wt!==null&&(wt.lane&=-536870913)}g&=~qt}S!==0&&Lt(l,S,0),O!==0&&I===0&&l.tag!==0&&(l.suspendedLanes|=O&~(te&~u))}function Lt(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var S=31-fn(u);l.entangledLanes|=u,l.entanglements[S]=l.entanglements[S]|1073741824|g&261930}function Mt(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var S=31-fn(g),I=1<<S;I&u|l[S]&u&&(l[S]|=u),g&=~I}}function dn(l,u){var g=u&-u;return g=(g&42)!==0?1:bn(g),(g&(l.suspendedLanes|u))!==0?0:g}function bn(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function In(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Bn(){var l=Pe.p;return l!==0?l:(l=window.event,l===void 0?32:gh(l.type))}function Mn(l,u){var g=Pe.p;try{return Pe.p=l,u()}finally{Pe.p=g}}var nr=Math.random().toString(36).slice(2),Fn="__reactFiber$"+nr,pr="__reactProps$"+nr,Rr="__reactContainer$"+nr,Ci="__reactEvents$"+nr,Kr="__reactListeners$"+nr,Xr="__reactHandles$"+nr,qn="__reactResources$"+nr,kr="__reactMarker$"+nr;function gr(l){delete l[Fn],delete l[pr],delete l[Ci],delete l[Kr],delete l[Xr]}function On(l){var u=l[Fn];if(u)return u;for(var g=l.parentNode;g;){if(u=g[Rr]||g[Fn]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=Yx(l);l!==null;){if(g=l[Fn])return g;l=Yx(l)}return u}l=g,g=l.parentNode}return null}function Er(l){if(l=l[Fn]||l[Rr]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function Wn(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(c(33))}function Ur(l){var u=l[qn];return u||(u=l[qn]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function mi(l){l[kr]=!0}var Ji=new Set,Aa={};function ea(l,u){ko(l,u),ko(l+"Capture",u)}function ko(l,u){for(Aa[l]=u,l=0;l<u.length;l++)Ji.add(u[l])}var Yi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),oo={},Rn={};function _t(l){return gn.call(Rn,l)?!0:gn.call(oo,l)?!1:Yi.test(l)?Rn[l]=!0:(oo[l]=!0,!1)}function Xa(l,u,g){if(_t(u))if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var S=u.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+g)}}function Bi(l,u,g){if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+g)}}function Mi(l,u,g,S){if(S===null)l.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(u,g,""+S)}}function _o(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Jo(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ip(l,u,g){var S=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var I=S.get,O=S.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return I.call(this)},set:function(te){g=""+te,O.call(this,te)}}),Object.defineProperty(l,u,{enumerable:S.enumerable}),{getValue:function(){return g},setValue:function(te){g=""+te},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Oh(l){if(!l._valueTracker){var u=Jo(l)?"checked":"value";l._valueTracker=ip(l,u,""+l[u])}}function rc(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),S="";return l&&(S=Jo(l)?l.checked?"true":"false":l.value),l=S,l!==g?(u.setValue(l),!0):!1}function tn(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var hr=/[\n"\\]/g;function Vn(l){return l.replace(hr,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ya(l,u,g,S,I,O,te,ge){l.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?l.type=te:l.removeAttribute("type"),u!=null?te==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+_o(u)):l.value!==""+_o(u)&&(l.value=""+_o(u)):te!=="submit"&&te!=="reset"||l.removeAttribute("value"),u!=null?ar(l,te,_o(u)):g!=null?ar(l,te,_o(g)):S!=null&&l.removeAttribute("value"),I==null&&O!=null&&(l.defaultChecked=!!O),I!=null&&(l.checked=I&&typeof I!="function"&&typeof I!="symbol"),ge!=null&&typeof ge!="function"&&typeof ge!="symbol"&&typeof ge!="boolean"?l.name=""+_o(ge):l.removeAttribute("name")}function Io(l,u,g,S,I,O,te,ge){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.type=O),u!=null||g!=null){if(!(O!=="submit"&&O!=="reset"||u!=null)){Oh(l);return}g=g!=null?""+_o(g):"",u=u!=null?""+_o(u):g,ge||u===l.value||(l.value=u),l.defaultValue=u}S=S??I,S=typeof S!="function"&&typeof S!="symbol"&&!!S,l.checked=ge?l.checked:!!S,l.defaultChecked=!!S,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(l.name=te),Oh(l)}function ar(l,u,g){u==="number"&&tn(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function va(l,u,g,S){if(l=l.options,u){u={};for(var I=0;I<g.length;I++)u["$"+g[I]]=!0;for(g=0;g<l.length;g++)I=u.hasOwnProperty("$"+l[g].value),l[g].selected!==I&&(l[g].selected=I),I&&S&&(l[g].defaultSelected=!0)}else{for(g=""+_o(g),u=null,I=0;I<l.length;I++){if(l[I].value===g){l[I].selected=!0,S&&(l[I].defaultSelected=!0);return}u!==null||l[I].disabled||(u=l[I])}u!==null&&(u.selected=!0)}}function nu(l,u,g){if(u!=null&&(u=""+_o(u),u!==l.value&&(l.value=u),g==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=g!=null?""+_o(g):""}function ul(l,u,g,S){if(u==null){if(S!=null){if(g!=null)throw Error(c(92));if(Ie(S)){if(1<S.length)throw Error(c(93));S=S[0]}g=S}g==null&&(g=""),u=g}g=_o(u),l.defaultValue=g,S=l.textContent,S===g&&S!==""&&S!==null&&(l.value=S),Oh(l)}function Ra(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var Ai=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ap(l,u,g){var S=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":S?l.setProperty(u,g):typeof g!="number"||g===0||Ai.has(u)?u==="float"?l.cssFloat=g:l[u]=(""+g).trim():l[u]=g+"px"}function ys(l,u,g){if(u!=null&&typeof u!="object")throw Error(c(62));if(l=l.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||u!=null&&u.hasOwnProperty(S)||(S.indexOf("--")===0?l.setProperty(S,""):S==="float"?l.cssFloat="":l[S]="");for(var I in u)S=u[I],u.hasOwnProperty(I)&&g[I]!==S&&ap(l,I,S)}else for(var O in u)u.hasOwnProperty(O)&&ap(l,O,u[O])}function ic(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),op=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wf(l){return op.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function vo(){}var ac=null;function ru(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var es=null,da=null;function Ni(l){var u=Er(l);if(u&&(l=u.stateNode)){var g=l[pr]||null;e:switch(l=u.stateNode,u.type){case"input":if(Ya(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Vn(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var S=g[u];if(S!==l&&S.form===l.form){var I=S[pr]||null;if(!I)throw Error(c(90));Ya(S,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(u=0;u<g.length;u++)S=g[u],S.form===l.form&&rc(S)}break e;case"textarea":nu(l,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&va(l,!!g.multiple,u,!1)}}}var Sf=!1;function Bh(l,u,g){if(Sf)return l(u,g);Sf=!0;try{var S=l(u);return S}finally{if(Sf=!1,(es!==null||da!==null)&&(wd(),es&&(u=es,l=da,da=es=null,Ni(u),l)))for(u=0;u<l.length;u++)Ni(l[u])}}function xa(l,u){var g=l.stateNode;if(g===null)return null;var S=g[pr]||null;if(S===null)return null;g=S[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(c(231,u,typeof g));return g}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fh=!1;if(oa)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){Fh=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{Fh=!1}var Qr=null,oc=null,iu=null;function fl(){if(iu)return iu;var l,u=oc,g=u.length,S,I="value"in Qr?Qr.value:Qr.textContent,O=I.length;for(l=0;l<g&&u[l]===I[l];l++);var te=g-l;for(S=1;S<=te&&u[g-S]===I[O-S];S++);return iu=I.slice(l,1<S?1-S:void 0)}function sa(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function au(){return!0}function jh(){return!1}function Ki(l){function u(g,S,I,O,te){this._reactName=g,this._targetInst=I,this.type=S,this.nativeEvent=O,this.target=te,this.currentTarget=null;for(var ge in l)l.hasOwnProperty(ge)&&(g=l[ge],this[ge]=g?g(O):O[ge]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?au:jh,this.isPropagationStopped=jh,this}return L(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=au)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=au)},persist:function(){},isPersistent:au}),u}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sc=Ki(so),Tf=L({},so,{view:0,detail:0}),sp=Ki(Tf),hl,zo,lc,_s=L({},Tf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==lc&&(lc&&l.type==="mousemove"?(hl=l.screenX-lc.screenX,zo=l.screenY-lc.screenY):zo=hl=0,lc=l),hl)},movementY:function(l){return"movementY"in l?l.movementY:zo}}),vs=Ki(_s),Ef=L({},_s,{dataTransfer:0}),Us=Ki(Ef),Nh=L({},Tf,{relatedTarget:0}),dl=Ki(Nh),Cf=L({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),Vm=Ki(Cf),Uh=L({},so,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),lp=Ki(Uh),cp=L({},so,{data:0}),cc=Ki(cp),Or={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},up={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gm(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=up[l])?!!u[l]:!1}function Mf(){return Gm}var Hm=L({},Tf,{key:function(l){if(l.key){var u=Or[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=sa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Wy[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(l){return l.type==="keypress"?sa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?sa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),fp=Ki(Hm),ou=L({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Af=Ki(ou),su=L({},Tf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),$s=Ki(su),uc=L({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),$h=Ki(uc),Wm=L({},_s,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Rf=Ki(Wm),hp=L({},so,{newState:0,oldState:0}),dp=Ki(hp),qh=[9,13,27,32],lu=oa&&"CompositionEvent"in window,fc=null;oa&&"documentMode"in document&&(fc=document.documentMode);var Cr=oa&&"TextEvent"in window&&!fc,cu=oa&&(!lu||fc&&8<fc&&11>=fc),pp=" ",Vh=!1;function mp(l,u){switch(l){case"keyup":return qh.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pl(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ml=!1;function Zy(l,u){switch(l){case"compositionend":return pl(u);case"keypress":return u.which!==32?null:(Vh=!0,pp);case"textInput":return l=u.data,l===pp&&Vh?null:l;default:return null}}function Xy(l,u){if(ml)return l==="compositionend"||!lu&&mp(l,u)?(l=fl(),iu=oc=Qr=null,ml=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return cu&&u.locale!=="ko"?null:u.data;default:return null}}var Yy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Yy[l.type]:u==="textarea"}function Hh(l,u,g,S){es?da?da.push(S):da=[S]:es=S,u=oh(u,"onChange"),0<u.length&&(g=new sc("onChange","change",null,g,S),l.push({event:g,listeners:u}))}var hc=null,gl=null;function Zm(l){N_(l,0)}function kf(l){var u=Wn(l);if(rc(u))return l}function Xm(l,u){if(l==="change")return u}var uu=!1;if(oa){var yl;if(oa){var If="oninput"in document;if(!If){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),If=typeof fu.oninput=="function"}yl=If}else yl=!1;uu=yl&&(!document.documentMode||9<document.documentMode)}function Wh(){hc&&(hc.detachEvent("onpropertychange",ts),gl=hc=null)}function ts(l){if(l.propertyName==="value"&&kf(gl)){var u=[];Hh(u,gl,l,ru(l)),Bh(Zm,u)}}function Zh(l,u,g){l==="focusin"?(Wh(),hc=u,gl=g,hc.attachEvent("onpropertychange",ts)):l==="focusout"&&Wh()}function gp(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return kf(gl)}function Xh(l,u){if(l==="click")return kf(u)}function Ym(l,u){if(l==="input"||l==="change")return kf(u)}function yp(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var xo=typeof Object.is=="function"?Object.is:yp;function dc(l,u){if(xo(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),S=Object.keys(u);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var I=g[S];if(!gn.call(u,I)||!xo(l[I],u[I]))return!1}return!0}function zf(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function hu(l,u){var g=zf(l);l=0;for(var S;g;){if(g.nodeType===3){if(S=l+g.textContent.length,l<=u&&S>=u)return{node:g,offset:u-l};l=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=zf(g)}}function _p(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?_p(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Yh(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=tn(l.document);u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=tn(l.document)}return u}function vp(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var xp=oa&&"documentMode"in document&&11>=document.documentMode,pc=null,mc=null,du=null,pu=!1;function bp(l,u,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;pu||pc==null||pc!==tn(S)||(S=pc,"selectionStart"in S&&vp(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),du&&dc(du,S)||(du=S,S=oh(mc,"onSelect"),0<S.length&&(u=new sc("onSelect","select",null,u,g),l.push({event:u,listeners:S}),u.target=pc)))}function Lo(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var mu={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionrun:Lo("Transition","TransitionRun"),transitionstart:Lo("Transition","TransitionStart"),transitioncancel:Lo("Transition","TransitionCancel"),transitionend:Lo("Transition","TransitionEnd")},wp={},Km={};oa&&(Km=document.createElement("div").style,"AnimationEvent"in window||(delete mu.animationend.animation,delete mu.animationiteration.animation,delete mu.animationstart.animation),"TransitionEvent"in window||delete mu.transitionend.transition);function gc(l){if(wp[l])return wp[l];if(!mu[l])return l;var u=mu[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in Km)return wp[l]=u[g];return l}var Qm=gc("animationend"),Sp=gc("animationiteration"),Lf=gc("animationstart"),gu=gc("transitionrun"),Jm=gc("transitionstart"),eg=gc("transitioncancel"),xs=gc("transitionend"),Pf=new Map,lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lo.push("scrollEnd");function Ka(l,u){Pf.set(l,u),ea(u,[l])}var Df=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ba=[],ns=0,yu=0;function yc(){for(var l=ns,u=yu=ns=0;u<l;){var g=ba[u];ba[u++]=null;var S=ba[u];ba[u++]=null;var I=ba[u];ba[u++]=null;var O=ba[u];if(ba[u++]=null,S!==null&&I!==null){var te=S.pending;te===null?I.next=I:(I.next=te.next,te.next=I),S.pending=I}O!==0&&Of(g,I,O)}}function yr(l,u,g,S){ba[ns++]=l,ba[ns++]=u,ba[ns++]=g,ba[ns++]=S,yu|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function _c(l,u,g,S){return yr(l,u,g,S),qs(l)}function _l(l,u){return yr(l,null,null,u),qs(l)}function Of(l,u,g){l.lanes|=g;var S=l.alternate;S!==null&&(S.lanes|=g);for(var I=!1,O=l.return;O!==null;)O.childLanes|=g,S=O.alternate,S!==null&&(S.childLanes|=g),O.tag===22&&(l=O.stateNode,l===null||l._visibility&1||(I=!0)),l=O,O=O.return;return l.tag===3?(O=l.stateNode,I&&u!==null&&(I=31-fn(g),l=O.hiddenUpdates,S=l[I],S===null?l[I]=[u]:S.push(u),u.lane=g|536870912),O):null}function qs(l){if(50<Pi)throw Pi=0,xd=null,Error(c(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var vc={};function Kh(l,u,g,S){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(l,u,g,S){return new Kh(l,u,g,S)}function Qh(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Po(l,u){var g=l.alternate;return g===null?(g=ta(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function xc(l,u){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Vs(l,u,g,S,I,O){var te=0;if(S=l,typeof l=="function")Qh(l)&&(te=1);else if(typeof l=="string")te=nb(l,g,nt.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case Te:return l=ta(31,g,u,I),l.elementType=Te,l.lanes=O,l;case N:return Gs(g.children,I,O,u);case q:te=8,I|=24;break;case Z:return l=ta(12,g,u,I|2),l.elementType=Z,l.lanes=O,l;case re:return l=ta(13,g,u,I),l.elementType=re,l.lanes=O,l;case ae:return l=ta(19,g,u,I),l.elementType=ae,l.lanes=O,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Y:te=10;break e;case Q:te=9;break e;case J:te=11;break e;case fe:te=14;break e;case Se:te=16,S=null;break e}te=29,g=Error(c(130,l===null?"null":typeof l,"")),S=null}return u=ta(te,g,u,I),u.elementType=l,u.type=S,u.lanes=O,u}function Gs(l,u,g,S){return l=ta(7,l,S,u),l.lanes=g,l}function bc(l,u,g){return l=ta(6,l,null,u),l.lanes=g,l}function _u(l){var u=ta(18,null,null,0);return u.stateNode=l,u}function vu(l,u,g){return u=ta(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Bf=new WeakMap;function Qt(l,u){if(typeof l=="object"&&l!==null){var g=Bf.get(l);return g!==void 0?g:(u={value:l,source:u,stack:zn(u)},Bf.set(l,u),u)}return{value:l,source:u,stack:zn(u)}}var Oa=[],wc=0,vl=null,Hs=0,ti=[],Ba=0,rs=null,Do=1,bo="";function bs(l,u){Oa[wc++]=Hs,Oa[wc++]=vl,vl=l,Hs=u}function Ff(l,u,g){ti[Ba++]=Do,ti[Ba++]=bo,ti[Ba++]=rs,rs=l;var S=Do;l=bo;var I=32-fn(S)-1;S&=~(1<<I),g+=1;var O=32-fn(u)+I;if(30<O){var te=I-I%5;O=(S&(1<<te)-1).toString(32),S>>=te,I-=te,Do=1<<32-fn(u)+I|g<<I|S,bo=O+l}else Do=1<<O|g<<I|S,bo=l}function xl(l){l.return!==null&&(bs(l,1),Ff(l,1,0))}function jf(l){for(;l===vl;)vl=Oa[--wc],Oa[wc]=null,Hs=Oa[--wc],Oa[wc]=null;for(;l===rs;)rs=ti[--Ba],ti[Ba]=null,bo=ti[--Ba],ti[Ba]=null,Do=ti[--Ba],ti[Ba]=null}function tg(l,u){ti[Ba++]=Do,ti[Ba++]=bo,ti[Ba++]=rs,Do=u.id,bo=u.overflow,rs=l}var wa=null,Jr=null,Mr=!1,ws=null,co=!1,xu=Error(c(519));function Oo(l){var u=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bo(Qt(u,l)),xu}function bu(l){var u=l.stateNode,g=l.type,S=l.memoizedProps;switch(u[Fn]=l,u[pr]=S,g){case"dialog":Ir("cancel",u),Ir("close",u);break;case"iframe":case"object":case"embed":Ir("load",u);break;case"video":case"audio":for(g=0;g<Ll.length;g++)Ir(Ll[g],u);break;case"source":Ir("error",u);break;case"img":case"image":case"link":Ir("error",u),Ir("load",u);break;case"details":Ir("toggle",u);break;case"input":Ir("invalid",u),Io(u,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Ir("invalid",u);break;case"textarea":Ir("invalid",u),ul(u,S.value,S.defaultValue,S.children)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||S.suppressHydrationWarning===!0||Nx(u.textContent,g)?(S.popover!=null&&(Ir("beforetoggle",u),Ir("toggle",u)),S.onScroll!=null&&Ir("scroll",u),S.onScrollEnd!=null&&Ir("scrollend",u),S.onClick!=null&&(u.onclick=vo),u=!0):u=!1,u||Oo(l,!0)}function Jh(l){for(wa=l.return;wa;)switch(wa.tag){case 5:case 31:case 13:co=!1;return;case 27:case 3:co=!0;return;default:wa=wa.return}}function Sc(l){if(l!==wa)return!1;if(!Mr)return Jh(l),Mr=!0,!1;var u=l.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||H_(l.type,l.memoizedProps)),g=!g),g&&Jr&&Oo(l),Jh(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));Jr=Xx(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));Jr=Xx(l)}else u===27?(u=Jr,Pl(l.type)?(l=Q_,Q_=null,Jr=l):Jr=u):Jr=wa?Rs(l.stateNode.nextSibling):null;return!0}function Ws(){Jr=wa=null,Mr=!1}function ed(){var l=ws;return l!==null&&(Eo===null?Eo=l:Eo.push.apply(Eo,l),ws=null),l}function Bo(l){ws===null?ws=[l]:ws.push(l)}var td=Ce(null),bl=null,Zs=null;function Xs(l,u,g){at(td,u._currentValue),u._currentValue=g}function is(l){l._currentValue=td.current,Ge(td)}function nd(l,u,g){for(;l!==null;){var S=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),l===g)break;l=l.return}}function rd(l,u,g,S){var I=l.child;for(I!==null&&(I.return=l);I!==null;){var O=I.dependencies;if(O!==null){var te=I.child;O=O.firstContext;e:for(;O!==null;){var ge=O;O=I;for(var Ze=0;Ze<u.length;Ze++)if(ge.context===u[Ze]){O.lanes|=g,ge=O.alternate,ge!==null&&(ge.lanes|=g),nd(O.return,g,l),S||(te=null);break e}O=ge.next}}else if(I.tag===18){if(te=I.return,te===null)throw Error(c(341));te.lanes|=g,O=te.alternate,O!==null&&(O.lanes|=g),nd(te,g,l),te=null}else te=I.child;if(te!==null)te.return=I;else for(te=I;te!==null;){if(te===l){te=null;break}if(I=te.sibling,I!==null){I.return=te.return,te=I;break}te=te.return}I=te}}function na(l,u,g,S){l=null;for(var I=u,O=!1;I!==null;){if(!O){if((I.flags&524288)!==0)O=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var te=I.alternate;if(te===null)throw Error(c(387));if(te=te.memoizedProps,te!==null){var ge=I.type;xo(I.pendingProps.value,te.value)||(l!==null?l.push(ge):l=[ge])}}else if(I===Ct.current){if(te=I.alternate,te===null)throw Error(c(387));te.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(l!==null?l.push(Id):l=[Id])}I=I.return}l!==null&&rd(u,l,g,S),u.flags|=262144}function id(l){for(l=l.firstContext;l!==null;){if(!xo(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function wl(l){bl=l,Zs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ka(l){return wo(bl,l)}function ad(l,u){return bl===null&&wl(l),wo(l,u)}function wo(l,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},Zs===null){if(l===null)throw Error(c(308));Zs=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Zs=Zs.next=u;return g}var ng=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,S){l.push(S)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},Ky=e.unstable_scheduleCallback,as=e.unstable_NormalPriority,ni={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ys(){return{controller:new ng,data:new Map,refCount:0}}function Sl(l){l.refCount--,l.refCount===0&&Ky(as,function(){l.controller.abort()})}var ln=null,Nf=0,Tl=0,os=null;function Tc(l,u){if(ln===null){var g=ln=[];Nf=0,Tl=Lg(),os={status:"pending",value:void 0,then:function(S){g.push(S)}}}return Nf++,u.then(nn,nn),u}function nn(){if(--Nf===0&&ln!==null){os!==null&&(os.status="fulfilled");var l=ln;ln=null,Tl=0,os=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Tp(l,u){var g=[],S={status:"pending",value:null,reason:null,then:function(I){g.push(I)}};return l.then(function(){S.status="fulfilled",S.value=u;for(var I=0;I<g.length;I++)(0,g[I])(u)},function(I){for(S.status="rejected",S.reason=I,I=0;I<g.length;I++)(0,g[I])(void 0)}),S}var rg=pe.S;pe.S=function(l,u){vx=_n(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&Tc(l,u),rg!==null&&rg(l,u)};var El=Ce(null);function Uf(){var l=El.current;return l!==null?l:Ri.pooledCache}function $f(l,u){u===null?at(El,El.current):at(El,u.pool)}function Ep(){var l=Uf();return l===null?null:{parent:ni._currentValue,pool:l}}var wu=Error(c(460)),Cp=Error(c(474)),Su=Error(c(542)),Tu={then:function(){}};function od(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Ec(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(vo,vo),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,x(l),l;default:if(typeof u.status=="string")u.then(vo,vo);else{if(l=Ri,l!==null&&100<l.shellSuspendCounter)throw Error(c(482));l=u,l.status="pending",l.then(function(S){if(u.status==="pending"){var I=u;I.status="fulfilled",I.value=S}},function(S){if(u.status==="pending"){var I=u;I.status="rejected",I.reason=S}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,x(l),l}throw s=u,wu}}function _(l){try{var u=l._init;return u(l._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(s=g,wu):g}}var s=null;function d(){if(s===null)throw Error(c(459));var l=s;return s=null,l}function x(l){if(l===wu||l===Su)throw Error(c(483))}var T=null,M=0;function z(l){var u=M;return M+=1,T===null&&(T=[]),Ec(T,l,u)}function D(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function j(l,u){throw u.$$typeof===P?Error(c(525)):(l=Object.prototype.toString.call(u),Error(c(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function W(l){function u(it,Ye){if(l){var ft=it.deletions;ft===null?(it.deletions=[Ye],it.flags|=16):ft.push(Ye)}}function g(it,Ye){if(!l)return null;for(;Ye!==null;)u(it,Ye),Ye=Ye.sibling;return null}function S(it){for(var Ye=new Map;it!==null;)it.key!==null?Ye.set(it.key,it):Ye.set(it.index,it),it=it.sibling;return Ye}function I(it,Ye){return it=Po(it,Ye),it.index=0,it.sibling=null,it}function O(it,Ye,ft){return it.index=ft,l?(ft=it.alternate,ft!==null?(ft=ft.index,ft<Ye?(it.flags|=67108866,Ye):ft):(it.flags|=67108866,Ye)):(it.flags|=1048576,Ye)}function te(it){return l&&it.alternate===null&&(it.flags|=67108866),it}function ge(it,Ye,ft,Ot){return Ye===null||Ye.tag!==6?(Ye=bc(ft,it.mode,Ot),Ye.return=it,Ye):(Ye=I(Ye,ft),Ye.return=it,Ye)}function Ze(it,Ye,ft,Ot){var Gn=ft.type;return Gn===N?Dt(it,Ye,ft.props.children,Ot,ft.key):Ye!==null&&(Ye.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===Se&&_(Gn)===Ye.type)?(Ye=I(Ye,ft.props),D(Ye,ft),Ye.return=it,Ye):(Ye=Vs(ft.type,ft.key,ft.props,null,it.mode,Ot),D(Ye,ft),Ye.return=it,Ye)}function mt(it,Ye,ft,Ot){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==ft.containerInfo||Ye.stateNode.implementation!==ft.implementation?(Ye=vu(ft,it.mode,Ot),Ye.return=it,Ye):(Ye=I(Ye,ft.children||[]),Ye.return=it,Ye)}function Dt(it,Ye,ft,Ot,Gn){return Ye===null||Ye.tag!==7?(Ye=Gs(ft,it.mode,Ot,Gn),Ye.return=it,Ye):(Ye=I(Ye,ft),Ye.return=it,Ye)}function qt(it,Ye,ft){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=bc(""+Ye,it.mode,ft),Ye.return=it,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case F:return ft=Vs(Ye.type,Ye.key,Ye.props,null,it.mode,ft),D(ft,Ye),ft.return=it,ft;case U:return Ye=vu(Ye,it.mode,ft),Ye.return=it,Ye;case Se:return Ye=_(Ye),qt(it,Ye,ft)}if(Ie(Ye)||se(Ye))return Ye=Gs(Ye,it.mode,ft,null),Ye.return=it,Ye;if(typeof Ye.then=="function")return qt(it,z(Ye),ft);if(Ye.$$typeof===Y)return qt(it,ad(it,Ye),ft);j(it,Ye)}return null}function yt(it,Ye,ft,Ot){var Gn=Ye!==null?Ye.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Gn!==null?null:ge(it,Ye,""+ft,Ot);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case F:return ft.key===Gn?Ze(it,Ye,ft,Ot):null;case U:return ft.key===Gn?mt(it,Ye,ft,Ot):null;case Se:return ft=_(ft),yt(it,Ye,ft,Ot)}if(Ie(ft)||se(ft))return Gn!==null?null:Dt(it,Ye,ft,Ot,null);if(typeof ft.then=="function")return yt(it,Ye,z(ft),Ot);if(ft.$$typeof===Y)return yt(it,Ye,ad(it,ft),Ot);j(it,ft)}return null}function wt(it,Ye,ft,Ot,Gn){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return it=it.get(ft)||null,ge(Ye,it,""+Ot,Gn);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case F:return it=it.get(Ot.key===null?ft:Ot.key)||null,Ze(Ye,it,Ot,Gn);case U:return it=it.get(Ot.key===null?ft:Ot.key)||null,mt(Ye,it,Ot,Gn);case Se:return Ot=_(Ot),wt(it,Ye,ft,Ot,Gn)}if(Ie(Ot)||se(Ot))return it=it.get(ft)||null,Dt(Ye,it,Ot,Gn,null);if(typeof Ot.then=="function")return wt(it,Ye,ft,z(Ot),Gn);if(Ot.$$typeof===Y)return wt(it,Ye,ft,ad(Ye,Ot),Gn);j(Ye,Ot)}return null}function wn(it,Ye,ft,Ot){for(var Gn=null,Wr=null,Dn=Ye,ur=Ye=0,jr=null;Dn!==null&&ur<ft.length;ur++){Dn.index>ur?(jr=Dn,Dn=null):jr=Dn.sibling;var ei=yt(it,Dn,ft[ur],Ot);if(ei===null){Dn===null&&(Dn=jr);break}l&&Dn&&ei.alternate===null&&u(it,Dn),Ye=O(ei,Ye,ur),Wr===null?Gn=ei:Wr.sibling=ei,Wr=ei,Dn=jr}if(ur===ft.length)return g(it,Dn),Mr&&bs(it,ur),Gn;if(Dn===null){for(;ur<ft.length;ur++)Dn=qt(it,ft[ur],Ot),Dn!==null&&(Ye=O(Dn,Ye,ur),Wr===null?Gn=Dn:Wr.sibling=Dn,Wr=Dn);return Mr&&bs(it,ur),Gn}for(Dn=S(Dn);ur<ft.length;ur++)jr=wt(Dn,it,ur,ft[ur],Ot),jr!==null&&(l&&jr.alternate!==null&&Dn.delete(jr.key===null?ur:jr.key),Ye=O(jr,Ye,ur),Wr===null?Gn=jr:Wr.sibling=jr,Wr=jr);return l&&Dn.forEach(function(Hu){return u(it,Hu)}),Mr&&bs(it,ur),Gn}function Hn(it,Ye,ft,Ot){if(ft==null)throw Error(c(151));for(var Gn=null,Wr=null,Dn=Ye,ur=Ye=0,jr=null,ei=ft.next();Dn!==null&&!ei.done;ur++,ei=ft.next()){Dn.index>ur?(jr=Dn,Dn=null):jr=Dn.sibling;var Hu=yt(it,Dn,ei.value,Ot);if(Hu===null){Dn===null&&(Dn=jr);break}l&&Dn&&Hu.alternate===null&&u(it,Dn),Ye=O(Hu,Ye,ur),Wr===null?Gn=Hu:Wr.sibling=Hu,Wr=Hu,Dn=jr}if(ei.done)return g(it,Dn),Mr&&bs(it,ur),Gn;if(Dn===null){for(;!ei.done;ur++,ei=ft.next())ei=qt(it,ei.value,Ot),ei!==null&&(Ye=O(ei,Ye,ur),Wr===null?Gn=ei:Wr.sibling=ei,Wr=ei);return Mr&&bs(it,ur),Gn}for(Dn=S(Dn);!ei.done;ur++,ei=ft.next())ei=wt(Dn,it,ur,ei.value,Ot),ei!==null&&(l&&ei.alternate!==null&&Dn.delete(ei.key===null?ur:ei.key),Ye=O(ei,Ye,ur),Wr===null?Gn=ei:Wr.sibling=ei,Wr=ei);return l&&Dn.forEach(function(RS){return u(it,RS)}),Mr&&bs(it,ur),Gn}function oi(it,Ye,ft,Ot){if(typeof ft=="object"&&ft!==null&&ft.type===N&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case F:e:{for(var Gn=ft.key;Ye!==null;){if(Ye.key===Gn){if(Gn=ft.type,Gn===N){if(Ye.tag===7){g(it,Ye.sibling),Ot=I(Ye,ft.props.children),Ot.return=it,it=Ot;break e}}else if(Ye.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===Se&&_(Gn)===Ye.type){g(it,Ye.sibling),Ot=I(Ye,ft.props),D(Ot,ft),Ot.return=it,it=Ot;break e}g(it,Ye);break}else u(it,Ye);Ye=Ye.sibling}ft.type===N?(Ot=Gs(ft.props.children,it.mode,Ot,ft.key),Ot.return=it,it=Ot):(Ot=Vs(ft.type,ft.key,ft.props,null,it.mode,Ot),D(Ot,ft),Ot.return=it,it=Ot)}return te(it);case U:e:{for(Gn=ft.key;Ye!==null;){if(Ye.key===Gn)if(Ye.tag===4&&Ye.stateNode.containerInfo===ft.containerInfo&&Ye.stateNode.implementation===ft.implementation){g(it,Ye.sibling),Ot=I(Ye,ft.children||[]),Ot.return=it,it=Ot;break e}else{g(it,Ye);break}else u(it,Ye);Ye=Ye.sibling}Ot=vu(ft,it.mode,Ot),Ot.return=it,it=Ot}return te(it);case Se:return ft=_(ft),oi(it,Ye,ft,Ot)}if(Ie(ft))return wn(it,Ye,ft,Ot);if(se(ft)){if(Gn=se(ft),typeof Gn!="function")throw Error(c(150));return ft=Gn.call(ft),Hn(it,Ye,ft,Ot)}if(typeof ft.then=="function")return oi(it,Ye,z(ft),Ot);if(ft.$$typeof===Y)return oi(it,Ye,ad(it,ft),Ot);j(it,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint"?(ft=""+ft,Ye!==null&&Ye.tag===6?(g(it,Ye.sibling),Ot=I(Ye,ft),Ot.return=it,it=Ot):(g(it,Ye),Ot=bc(ft,it.mode,Ot),Ot.return=it,it=Ot),te(it)):g(it,Ye)}return function(it,Ye,ft,Ot){try{M=0;var Gn=oi(it,Ye,ft,Ot);return T=null,Gn}catch(Dn){if(Dn===wu||Dn===Su)throw Dn;var Wr=ta(29,Dn,null,it.mode);return Wr.lanes=Ot,Wr.return=it,Wr}finally{}}}var H=W(!0),ne=W(!1),he=!1;function ve(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function we(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function xe(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ee(l,u,g){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(ii&2)!==0){var I=S.pending;return I===null?u.next=u:(u.next=I.next,I.next=u),S.pending=u,u=qs(l),Of(l,null,g),u}return yr(l,S,u,g),qs(l)}function ie(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var S=u.lanes;S&=l.pendingLanes,g|=S,u.lanes=g,Mt(l,g)}}function ye(l,u){var g=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var I=null,O=null;if(g=g.firstBaseUpdate,g!==null){do{var te={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};O===null?I=O=te:O=O.next=te,g=g.next}while(g!==null);O===null?I=O=u:O=O.next=u}else I=O=u;g={baseState:S.baseState,firstBaseUpdate:I,lastBaseUpdate:O,shared:S.shared,callbacks:S.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}var ke=!1;function ze(){if(ke){var l=os;if(l!==null)throw l}}function Ve(l,u,g,S){ke=!1;var I=l.updateQueue;he=!1;var O=I.firstBaseUpdate,te=I.lastBaseUpdate,ge=I.shared.pending;if(ge!==null){I.shared.pending=null;var Ze=ge,mt=Ze.next;Ze.next=null,te===null?O=mt:te.next=mt,te=Ze;var Dt=l.alternate;Dt!==null&&(Dt=Dt.updateQueue,ge=Dt.lastBaseUpdate,ge!==te&&(ge===null?Dt.firstBaseUpdate=mt:ge.next=mt,Dt.lastBaseUpdate=Ze))}if(O!==null){var qt=I.baseState;te=0,Dt=mt=Ze=null,ge=O;do{var yt=ge.lane&-536870913,wt=yt!==ge.lane;if(wt?(Fr&yt)===yt:(S&yt)===yt){yt!==0&&yt===Tl&&(ke=!0),Dt!==null&&(Dt=Dt.next={lane:0,tag:ge.tag,payload:ge.payload,callback:null,next:null});e:{var wn=l,Hn=ge;yt=u;var oi=g;switch(Hn.tag){case 1:if(wn=Hn.payload,typeof wn=="function"){qt=wn.call(oi,qt,yt);break e}qt=wn;break e;case 3:wn.flags=wn.flags&-65537|128;case 0:if(wn=Hn.payload,yt=typeof wn=="function"?wn.call(oi,qt,yt):wn,yt==null)break e;qt=L({},qt,yt);break e;case 2:he=!0}}yt=ge.callback,yt!==null&&(l.flags|=64,wt&&(l.flags|=8192),wt=I.callbacks,wt===null?I.callbacks=[yt]:wt.push(yt))}else wt={lane:yt,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},Dt===null?(mt=Dt=wt,Ze=qt):Dt=Dt.next=wt,te|=yt;if(ge=ge.next,ge===null){if(ge=I.shared.pending,ge===null)break;wt=ge,ge=wt.next,wt.next=null,I.lastBaseUpdate=wt,I.shared.pending=null}}while(!0);Dt===null&&(Ze=qt),I.baseState=Ze,I.firstBaseUpdate=mt,I.lastBaseUpdate=Dt,O===null&&(I.shared.lanes=0),zl|=te,l.lanes=te,l.memoizedState=qt}}function We(l,u){if(typeof l!="function")throw Error(c(191,l));l.call(u)}function He(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)We(g[l],u)}var Je=Ce(null),Ke=Ce(0);function ct(l,u){l=ca,at(Ke,l),at(Je,u),ca=l|u.baseLanes}function $t(){at(Ke,ca),at(Je,Je.current)}function rt(){ca=Ke.current,Ge(Je),Ge(Ke)}var vt=Ce(null),lt=null;function Ft(l){var u=l.alternate;at(At,At.current&1),at(vt,l),lt===null&&(u===null||Je.current!==null||u.memoizedState!==null)&&(lt=l)}function ot(l){at(At,At.current),at(vt,l),lt===null&&(lt=l)}function St(l){l.tag===22?(at(At,At.current),at(vt,l),lt===null&&(lt=l)):jt()}function jt(){at(At,At.current),at(vt,vt.current)}function Et(l){Ge(vt),lt===l&&(lt=null),Ge(At)}var At=Ce(0);function vn(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Y_(g)||K_(g)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Pn=0,Nt=null,rn=null,kn=null,Yn=!1,pn=!1,_r=!1,$r=0,Br=0,Lr=null,Fa=0;function vr(){throw Error(c(321))}function uo(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!xo(l[g],u[g]))return!1;return!0}function Fo(l,u,g,S,I,O){return Pn=O,Nt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,pe.H=l===null||l.memoizedState===null?ug:fg,_r=!1,O=g(S,I),_r=!1,pn&&(O=Yr(u,g,S,I)),gi(l),O}function gi(l){pe.H=cs;var u=rn!==null&&rn.next!==null;if(Pn=0,kn=rn=Nt=null,Yn=!1,Br=0,Lr=null,u)throw Error(c(300));l===null||pa||(l=l.dependencies,l!==null&&id(l)&&(pa=!0))}function Yr(l,u,g,S){Nt=l;var I=0;do{if(pn&&(Lr=null),Br=0,pn=!1,25<=I)throw Error(c(301));if(I+=1,kn=rn=null,l.updateQueue!=null){var O=l.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}pe.H=ud,O=u(g,S)}while(pn);return O}function Pr(){var l=pe.H,u=l.useState()[0];return u=typeof u.then=="function"?Ks(u):u,l=l.useState()[0],(rn!==null?rn.memoizedState:null)!==l&&(Nt.flags|=1024),u}function Ui(){var l=$r!==0;return $r=0,l}function Ia(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function ri(l){if(Yn){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Yn=!1}Pn=0,kn=rn=Nt=null,pn=!1,Br=$r=0,Lr=null}function si(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Nt.memoizedState=kn=l:kn=kn.next=l,kn}function Fi(){if(rn===null){var l=Nt.alternate;l=l!==null?l.memoizedState:null}else l=rn.next;var u=kn===null?Nt.memoizedState:kn.next;if(u!==null)kn=u,rn=l;else{if(l===null)throw Nt.alternate===null?Error(c(467)):Error(c(310));rn=l,l={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},kn===null?Nt.memoizedState=kn=l:kn=kn.next=l}return kn}function Ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ks(l){var u=Br;return Br+=1,Lr===null&&(Lr=[]),l=Ec(Lr,l,u),u=Nt,(kn===null?u.memoizedState:kn.next)===null&&(u=u.alternate,pe.H=u===null||u.memoizedState===null?ug:fg),l}function jo(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ks(l);if(l.$$typeof===Y)return ka(l)}throw Error(c(438,String(l)))}function Ts(l){var u=null,g=Nt.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var S=Nt.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(u={data:S.data.map(function(I){return I.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=Ss(),Nt.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),S=0;S<l;S++)g[S]=ue;return u.index++,g}function Qa(l,u){return typeof u=="function"?u(l):u}function Cc(l){var u=Fi();return Mc(u,rn,l)}function Mc(l,u,g){var S=l.queue;if(S===null)throw Error(c(311));S.lastRenderedReducer=g;var I=l.baseQueue,O=S.pending;if(O!==null){if(I!==null){var te=I.next;I.next=O.next,O.next=te}u.baseQueue=I=O,S.pending=null}if(O=l.baseState,I===null)l.memoizedState=O;else{u=I.next;var ge=te=null,Ze=null,mt=u,Dt=!1;do{var qt=mt.lane&-536870913;if(qt!==mt.lane?(Fr&qt)===qt:(Pn&qt)===qt){var yt=mt.revertLane;if(yt===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),qt===Tl&&(Dt=!0);else if((Pn&yt)===yt){mt=mt.next,yt===Tl&&(Dt=!0);continue}else qt={lane:0,revertLane:mt.revertLane,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},Ze===null?(ge=Ze=qt,te=O):Ze=Ze.next=qt,Nt.lanes|=yt,zl|=yt;qt=mt.action,_r&&g(O,qt),O=mt.hasEagerState?mt.eagerState:g(O,qt)}else yt={lane:qt,revertLane:mt.revertLane,gesture:mt.gesture,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},Ze===null?(ge=Ze=yt,te=O):Ze=Ze.next=yt,Nt.lanes|=qt,zl|=qt;mt=mt.next}while(mt!==null&&mt!==u);if(Ze===null?te=O:Ze.next=ge,!xo(O,l.memoizedState)&&(pa=!0,Dt&&(g=os,g!==null)))throw g;l.memoizedState=O,l.baseState=te,l.baseQueue=Ze,S.lastRenderedState=O}return I===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function qf(l){var u=Fi(),g=u.queue;if(g===null)throw Error(c(311));g.lastRenderedReducer=l;var S=g.dispatch,I=g.pending,O=u.memoizedState;if(I!==null){g.pending=null;var te=I=I.next;do O=l(O,te.action),te=te.next;while(te!==I);xo(O,u.memoizedState)||(pa=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),g.lastRenderedState=O}return[O,S]}function Qy(l,u,g){var S=Nt,I=Fi(),O=Mr;if(O){if(g===void 0)throw Error(c(407));g=g()}else g=u();var te=!xo((rn||I).memoizedState,g);if(te&&(I.memoizedState=g,pa=!0),I=I.queue,i_(ig.bind(null,S,I,l),[l]),I.getSnapshot!==u||te||kn!==null&&kn.memoizedState.tag&1){if(S.flags|=2048,ss(9,{destroy:void 0},Qv.bind(null,S,I,g,u),null),Ri===null)throw Error(c(349));O||(Pn&127)!==0||Jy(S,u,g)}return g}function Jy(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=Nt.updateQueue,u===null?(u=Ss(),Nt.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function Qv(l,u,g,S){u.value=g,u.getSnapshot=S,Mp(u)&&e_(l)}function ig(l,u,g){return g(function(){Mp(u)&&e_(l)})}function Mp(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!xo(l,g)}catch{return!0}}function e_(l){var u=_l(l,2);u!==null&&no(u,l,2)}function Ap(l){var u=si();if(typeof l=="function"){var g=l;if(l=g(),_r){Wt(!0);try{g()}finally{Wt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:l},u}function Rp(l,u,g,S){return l.baseState=g,Mc(l,rn,typeof S=="function"?S:Qa)}function Ac(l,u,g,S,I){if(Lp(l))throw Error(c(485));if(l=u.action,l!==null){var O={payload:I,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){O.listeners.push(te)}};pe.T!==null?g(!0):O.isTransition=!1,S(O),g=u.pending,g===null?(O.next=u.pending=O,kp(u,O)):(O.next=g.next,u.pending=g.next=O)}}function kp(l,u){var g=u.action,S=u.payload,I=l.state;if(u.isTransition){var O=pe.T,te={};pe.T=te;try{var ge=g(I,S),Ze=pe.S;Ze!==null&&Ze(te,ge),t_(l,u,ge)}catch(mt){r_(l,u,mt)}finally{O!==null&&te.types!==null&&(O.types=te.types),pe.T=O}}else try{O=g(I,S),t_(l,u,O)}catch(mt){r_(l,u,mt)}}function t_(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){n_(l,u,S)},function(S){return r_(l,u,S)}):n_(l,u,g)}function n_(l,u,g){u.status="fulfilled",u.value=g,Jv(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,kp(l,g)))}function r_(l,u,g){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do u.status="rejected",u.reason=g,Jv(u),u=u.next;while(u!==S)}l.action=null}function Jv(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function ex(l,u){return u}function ag(l,u){if(Mr){var g=Ri.formState;if(g!==null){e:{var S=Nt;if(Mr){if(Jr){t:{for(var I=Jr,O=co;I.nodeType!==8;){if(!O){I=null;break t}if(I=Rs(I.nextSibling),I===null){I=null;break t}}O=I.data,I=O==="F!"||O==="F"?I:null}if(I){Jr=Rs(I.nextSibling),S=I.data==="F!";break e}}Oo(S)}S=!1}S&&(u=g[0])}}return g=si(),g.memoizedState=g.baseState=u,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ex,lastRenderedState:u},g.queue=S,g=l_.bind(null,Nt,S),S.dispatch=g,S=Ap(!1),O=zp.bind(null,Nt,!1,S.queue),S=si(),I={state:u,dispatch:null,action:l,pending:null},S.queue=I,g=Ac.bind(null,Nt,I,O,g),I.dispatch=g,S.memoizedState=l,[u,g,!1]}function sd(l){var u=Fi();return Vf(u,rn,l)}function Vf(l,u,g){if(u=Mc(l,u,ex)[0],l=Cc(Qa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var S=Ks(u)}catch(te){throw te===wu?Su:te}else S=u;u=Fi();var I=u.queue,O=I.dispatch;return g!==u.memoizedState&&(Nt.flags|=2048,ss(9,{destroy:void 0},Rc.bind(null,I,g),null)),[S,O,l]}function Rc(l,u){l.action=u}function Es(l){var u=Fi(),g=rn;if(g!==null)return Vf(u,g,l);Fi(),u=u.memoizedState,g=Fi();var S=g.queue.dispatch;return g.memoizedState=l,[u,S,!1]}function ss(l,u,g,S){return l={tag:l,create:g,deps:S,inst:u,next:null},u=Nt.updateQueue,u===null&&(u=Ss(),Nt.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(S=g.next,g.next=l,l.next=S,u.lastEffect=l),l}function kc(){return Fi().memoizedState}function Cl(l,u,g,S){var I=si();Nt.flags|=l,I.memoizedState=ss(1|u,{destroy:void 0},g,S===void 0?null:S)}function og(l,u,g,S){var I=Fi();S=S===void 0?null:S;var O=I.memoizedState.inst;rn!==null&&S!==null&&uo(S,rn.memoizedState.deps)?I.memoizedState=ss(u,O,g,S):(Nt.flags|=l,I.memoizedState=ss(1|u,O,g,S))}function tx(l,u){Cl(8390656,8,l,u)}function i_(l,u){og(2048,8,l,u)}function yS(l){Nt.flags|=4;var u=Nt.updateQueue;if(u===null)u=Ss(),Nt.updateQueue=u,u.events=[l];else{var g=u.events;g===null?u.events=[l]:g.push(l)}}function a_(l){var u=Fi().memoizedState;return yS({ref:u,nextImpl:l}),function(){if((ii&2)!==0)throw Error(c(440));return u.impl.apply(void 0,arguments)}}function o_(l,u){return og(4,2,l,u)}function Cs(l,u){return og(4,4,l,u)}function nx(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function rx(l,u,g){g=g!=null?g.concat([l]):null,og(4,4,nx.bind(null,u,l),g)}function $i(){}function En(l,u){var g=Fi();u=u===void 0?null:u;var S=g.memoizedState;return u!==null&&uo(u,S[1])?S[0]:(g.memoizedState=[l,u],l)}function Ic(l,u){var g=Fi();u=u===void 0?null:u;var S=g.memoizedState;if(u!==null&&uo(u,S[1]))return S[0];if(S=l(),_r){Wt(!0);try{l()}finally{Wt(!1)}}return g.memoizedState=[S,u],S}function ld(l,u,g){return g===void 0||(Pn&1073741824)!==0&&(Fr&261930)===0?l.memoizedState=u:(l.memoizedState=g,l=Bp(),Nt.lanes|=l,zl|=l,g)}function So(l,u,g,S){return xo(g,u)?g:Je.current!==null?(l=ld(l,g,S),xo(l,u)||(pa=!0),l):(Pn&42)===0||(Pn&1073741824)!==0&&(Fr&261930)===0?(pa=!0,l.memoizedState=g):(l=Bp(),Nt.lanes|=l,zl|=l,u)}function s_(l,u,g,S,I){var O=Pe.p;Pe.p=O!==0&&8>O?O:8;var te=pe.T,ge={};pe.T=ge,zp(l,!1,u,g);try{var Ze=I(),mt=pe.S;if(mt!==null&&mt(ge,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Dt=Tp(Ze,S);Ip(l,u,Dt,qo(l))}else Ip(l,u,S,qo(l))}catch(qt){Ip(l,u,{then:function(){},status:"rejected",reason:qt},qo())}finally{Pe.p=O,te!==null&&ge.types!==null&&(te.types=ge.types),pe.T=te}}function ix(){}function ls(l,u,g,S){if(l.tag!==5)throw Error(c(476));var I=sg(l).queue;s_(l,I,u,et,g===null?ix:function(){return Eu(l),g(S)})}function sg(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:et},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Eu(l){var u=sg(l);u.next===null&&(u=l.alternate.memoizedState),Ip(l,u.next.queue,{},qo())}function Gf(){return ka(Id)}function Cu(){return Fi().memoizedState}function lg(){return Fi().memoizedState}function cg(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=qo();l=xe(g);var S=Ee(u,l,g);S!==null&&(no(S,u,g),ie(S,u,g)),u={cache:Ys()},l.payload=u;return}u=u.return}}function ax(l,u,g){var S=qo();g={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Lp(l)?cd(u,g):(g=_c(l,u,g,S),g!==null&&(no(g,l,S),Hf(g,u,S)))}function l_(l,u,g){var S=qo();Ip(l,u,g,S)}function Ip(l,u,g,S){var I={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Lp(l))cd(u,I);else{var O=l.alternate;if(l.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var te=u.lastRenderedState,ge=O(te,g);if(I.hasEagerState=!0,I.eagerState=ge,xo(ge,te))return yr(l,u,I,0),Ri===null&&yc(),!1}catch{}finally{}if(g=_c(l,u,I,S),g!==null)return no(g,l,S),Hf(g,u,S),!0}return!1}function zp(l,u,g,S){if(S={lane:2,revertLane:Lg(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Lp(l)){if(u)throw Error(c(479))}else u=_c(l,g,S,2),u!==null&&no(u,l,2)}function Lp(l){var u=l.alternate;return l===Nt||u!==null&&u===Nt}function cd(l,u){pn=Yn=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function Hf(l,u,g){if((g&4194048)!==0){var S=u.lanes;S&=l.pendingLanes,g|=S,u.lanes=g,Mt(l,g)}}var cs={readContext:ka,use:jo,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useLayoutEffect:vr,useInsertionEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useSyncExternalStore:vr,useId:vr,useHostTransitionStatus:vr,useFormState:vr,useActionState:vr,useOptimistic:vr,useMemoCache:vr,useCacheRefresh:vr};cs.useEffectEvent=vr;var ug={readContext:ka,use:jo,useCallback:function(l,u){return si().memoizedState=[l,u===void 0?null:u],l},useContext:ka,useEffect:tx,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,Cl(4194308,4,nx.bind(null,u,l),g)},useLayoutEffect:function(l,u){return Cl(4194308,4,l,u)},useInsertionEffect:function(l,u){Cl(4,2,l,u)},useMemo:function(l,u){var g=si();u=u===void 0?null:u;var S=l();if(_r){Wt(!0);try{l()}finally{Wt(!1)}}return g.memoizedState=[S,u],S},useReducer:function(l,u,g){var S=si();if(g!==void 0){var I=g(u);if(_r){Wt(!0);try{g(u)}finally{Wt(!1)}}}else I=u;return S.memoizedState=S.baseState=I,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:I},S.queue=l,l=l.dispatch=ax.bind(null,Nt,l),[S.memoizedState,l]},useRef:function(l){var u=si();return l={current:l},u.memoizedState=l},useState:function(l){l=Ap(l);var u=l.queue,g=l_.bind(null,Nt,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:$i,useDeferredValue:function(l,u){var g=si();return ld(g,l,u)},useTransition:function(){var l=Ap(!1);return l=s_.bind(null,Nt,l.queue,!0,!1),si().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var S=Nt,I=si();if(Mr){if(g===void 0)throw Error(c(407));g=g()}else{if(g=u(),Ri===null)throw Error(c(349));(Fr&127)!==0||Jy(S,u,g)}I.memoizedState=g;var O={value:g,getSnapshot:u};return I.queue=O,tx(ig.bind(null,S,O,l),[l]),S.flags|=2048,ss(9,{destroy:void 0},Qv.bind(null,S,O,g,u),null),g},useId:function(){var l=si(),u=Ri.identifierPrefix;if(Mr){var g=bo,S=Do;g=(S&~(1<<32-fn(S)-1)).toString(32)+g,u="_"+u+"R_"+g,g=$r++,0<g&&(u+="H"+g.toString(32)),u+="_"}else g=Fa++,u="_"+u+"r_"+g.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:Gf,useFormState:ag,useActionState:ag,useOptimistic:function(l){var u=si();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=zp.bind(null,Nt,!0,g),g.dispatch=u,[l,u]},useMemoCache:Ts,useCacheRefresh:function(){return si().memoizedState=cg.bind(null,Nt)},useEffectEvent:function(l){var u=si(),g={impl:l};return u.memoizedState=g,function(){if((ii&2)!==0)throw Error(c(440));return g.impl.apply(void 0,arguments)}}},fg={readContext:ka,use:jo,useCallback:En,useContext:ka,useEffect:i_,useImperativeHandle:rx,useInsertionEffect:o_,useLayoutEffect:Cs,useMemo:Ic,useReducer:Cc,useRef:kc,useState:function(){return Cc(Qa)},useDebugValue:$i,useDeferredValue:function(l,u){var g=Fi();return So(g,rn.memoizedState,l,u)},useTransition:function(){var l=Cc(Qa)[0],u=Fi().memoizedState;return[typeof l=="boolean"?l:Ks(l),u]},useSyncExternalStore:Qy,useId:Cu,useHostTransitionStatus:Gf,useFormState:sd,useActionState:sd,useOptimistic:function(l,u){var g=Fi();return Rp(g,rn,l,u)},useMemoCache:Ts,useCacheRefresh:lg};fg.useEffectEvent=a_;var ud={readContext:ka,use:jo,useCallback:En,useContext:ka,useEffect:i_,useImperativeHandle:rx,useInsertionEffect:o_,useLayoutEffect:Cs,useMemo:Ic,useReducer:qf,useRef:kc,useState:function(){return qf(Qa)},useDebugValue:$i,useDeferredValue:function(l,u){var g=Fi();return rn===null?ld(g,l,u):So(g,rn.memoizedState,l,u)},useTransition:function(){var l=qf(Qa)[0],u=Fi().memoizedState;return[typeof l=="boolean"?l:Ks(l),u]},useSyncExternalStore:Qy,useId:Cu,useHostTransitionStatus:Gf,useFormState:Es,useActionState:Es,useOptimistic:function(l,u){var g=Fi();return rn!==null?Rp(g,rn,l,u):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:Ts,useCacheRefresh:lg};ud.useEffectEvent=a_;function Wf(l,u,g,S){u=l.memoizedState,g=g(S,u),g=g==null?u:L({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var To={enqueueSetState:function(l,u,g){l=l._reactInternals;var S=qo(),I=xe(S);I.payload=u,g!=null&&(I.callback=g),u=Ee(l,I,S),u!==null&&(no(u,l,S),ie(u,l,S))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var S=qo(),I=xe(S);I.tag=1,I.payload=u,g!=null&&(I.callback=g),u=Ee(l,I,S),u!==null&&(no(u,l,S),ie(u,l,S))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=qo(),S=xe(g);S.tag=2,u!=null&&(S.callback=u),u=Ee(l,S,g),u!==null&&(no(u,l,g),ie(u,l,g))}};function fd(l,u,g,S,I,O,te){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,O,te):u.prototype&&u.prototype.isPureReactComponent?!dc(g,S)||!dc(I,O):!0}function Ja(l,u,g,S){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,S),u.state!==l&&To.enqueueReplaceState(u,u.state,null)}function ja(l,u){var g=u;if("ref"in u){g={};for(var S in u)S!=="ref"&&(g[S]=u[S])}if(l=l.defaultProps){g===u&&(g=L({},g));for(var I in l)g[I]===void 0&&(g[I]=l[I])}return g}function hg(l){Df(l)}function qi(l){console.error(l)}function c_(l){Df(l)}function Mu(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(S){setTimeout(function(){throw S})}}function Ms(l,u,g){try{var S=l.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function u_(l,u,g){return g=xe(g),g.tag=3,g.payload={element:null},g.callback=function(){Mu(l,u)},g}function ox(l){return l=xe(l),l.tag=3,l}function f_(l,u,g,S){var I=g.type.getDerivedStateFromError;if(typeof I=="function"){var O=S.value;l.payload=function(){return I(O)},l.callback=function(){Ms(u,g,S)}}var te=g.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(l.callback=function(){Ms(u,g,S),typeof I!="function"&&(Pu===null?Pu=new Set([this]):Pu.add(this));var ge=S.stack;this.componentDidCatch(S.value,{componentStack:ge!==null?ge:""})})}function sx(l,u,g,S,I){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(u=g.alternate,u!==null&&na(u,g,I,!0),g=vt.current,g!==null){switch(g.tag){case 31:case 13:return lt===null?Td():g.alternate===null&&ua===0&&(ua=3),g.flags&=-257,g.flags|=65536,g.lanes=I,S===Tu?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([S]):u.add(S),Ig(l,S,I)),!1;case 22:return g.flags|=65536,S===Tu?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([S]):g.add(S)),Ig(l,S,I)),!1}throw Error(c(435,g.tag))}return Ig(l,S,I),Td(),!1}if(Mr)return u=vt.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=I,S!==xu&&(l=Error(c(422),{cause:S}),Bo(Qt(l,g)))):(S!==xu&&(u=Error(c(423),{cause:S}),Bo(Qt(u,g))),l=l.current.alternate,l.flags|=65536,I&=-I,l.lanes|=I,S=Qt(S,g),I=u_(l.stateNode,S,I),ye(l,I),ua!==4&&(ua=2)),!1;var O=Error(c(520),{cause:S});if(O=Qt(O,g),zu===null?zu=[O]:zu.push(O),ua!==4&&(ua=2),u===null)return!0;S=Qt(S,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=I&-I,g.lanes|=l,l=u_(g.stateNode,S,l),ye(g,l),!1;case 1:if(u=g.type,O=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Pu===null||!Pu.has(O))))return g.flags|=65536,I&=-I,g.lanes|=I,I=ox(I),f_(I,l,g,S),ye(g,I),!1}g=g.return}while(g!==null);return!1}var zc=Error(c(461)),pa=!1;function Na(l,u,g,S){u.child=l===null?ne(u,null,g,S):H(u,l.child,g,S)}function h_(l,u,g,S,I){g=g.render;var O=u.ref;if("ref"in S){var te={};for(var ge in S)ge!=="ref"&&(te[ge]=S[ge])}else te=S;return wl(u),S=Fo(l,u,g,te,O,I),ge=Ui(),l!==null&&!pa?(Ia(l,u,I),$a(l,u,I)):(Mr&&ge&&xl(u),u.flags|=1,Na(l,u,S,I),u.child)}function d_(l,u,g,S,I){if(l===null){var O=g.type;return typeof O=="function"&&!Qh(O)&&O.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=O,lx(l,u,O,S,I)):(l=Vs(g.type,null,S,u,u.mode,I),l.ref=u.ref,l.return=u,u.child=l)}if(O=l.child,!Pc(l,I)){var te=O.memoizedProps;if(g=g.compare,g=g!==null?g:dc,g(te,S)&&l.ref===u.ref)return $a(l,u,I)}return u.flags|=1,l=Po(O,S),l.ref=u.ref,l.return=u,u.child=l}function lx(l,u,g,S,I){if(l!==null){var O=l.memoizedProps;if(dc(O,S)&&l.ref===u.ref)if(pa=!1,u.pendingProps=S=O,Pc(l,I))(l.flags&131072)!==0&&(pa=!0);else return u.lanes=l.lanes,$a(l,u,I)}return Ua(l,u,g,S,I)}function cx(l,u,g,S){var I=S.children,O=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((u.flags&128)!==0){if(O=O!==null?O.baseLanes|g:g,l!==null){for(S=u.child=l.child,I=0;S!==null;)I=I|S.lanes|S.childLanes,S=S.sibling;S=I&~O}else S=0,u.child=null;return p_(l,u,O,g,S)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&$f(u,O!==null?O.cachePool:null),O!==null?ct(u,O):$t(),St(u);else return S=u.lanes=536870912,p_(l,u,O!==null?O.baseLanes|g:g,g,S)}else O!==null?($f(u,O.cachePool),ct(u,O),jt(),u.memoizedState=null):(l!==null&&$f(u,null),$t(),jt());return Na(l,u,I,g),u.child}function hd(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function p_(l,u,g,S,I){var O=Uf();return O=O===null?null:{parent:ni._currentValue,pool:O},u.memoizedState={baseLanes:g,cachePool:O},l!==null&&$f(u,null),$t(),St(u),l!==null&&na(l,u,S,!0),u.childLanes=I,null}function Au(l,u){return u=mg({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function dg(l,u,g){return H(u,l.child,null,g),l=Au(u,u.pendingProps),l.flags|=2,Et(u),u.memoizedState=null,l}function m_(l,u,g){var S=u.pendingProps,I=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Mr){if(S.mode==="hidden")return l=Au(u,S),u.lanes=536870912,hd(null,l);if(ot(u),(l=Jr)?(l=Zx(l,co),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:rs!==null?{id:Do,overflow:bo}:null,retryLane:536870912,hydrationErrors:null},g=_u(l),g.return=u,u.child=g,wa=u,Jr=null)):l=null,l===null)throw Oo(u);return u.lanes=536870912,null}return Au(u,S)}var O=l.memoizedState;if(O!==null){var te=O.dehydrated;if(ot(u),I)if(u.flags&256)u.flags&=-257,u=dg(l,u,g);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(c(558));else if(pa||na(l,u,g,!1),I=(g&l.childLanes)!==0,pa||I){if(S=Ri,S!==null&&(te=dn(S,g),te!==0&&te!==O.retryLane))throw O.retryLane=te,_l(l,te),no(S,l,te),zc;Td(),u=dg(l,u,g)}else l=O.treeContext,Jr=Rs(te.nextSibling),wa=u,Mr=!0,ws=null,co=!1,l!==null&&tg(u,l),u=Au(u,S),u.flags|=4096;return u}return l=Po(l.child,{mode:S.mode,children:S.children}),l.ref=u.ref,u.child=l,l.return=u,l}function dd(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(c(284));(l===null||l.ref!==g)&&(u.flags|=4194816)}}function Ua(l,u,g,S,I){return wl(u),g=Fo(l,u,g,S,void 0,I),S=Ui(),l!==null&&!pa?(Ia(l,u,I),$a(l,u,I)):(Mr&&S&&xl(u),u.flags|=1,Na(l,u,g,I),u.child)}function pg(l,u,g,S,I,O){return wl(u),u.updateQueue=null,g=Yr(u,S,g,I),gi(l),S=Ui(),l!==null&&!pa?(Ia(l,u,O),$a(l,u,O)):(Mr&&S&&xl(u),u.flags|=1,Na(l,u,g,O),u.child)}function g_(l,u,g,S,I){if(wl(u),u.stateNode===null){var O=vc,te=g.contextType;typeof te=="object"&&te!==null&&(O=ka(te)),O=new g(S,O),u.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=To,u.stateNode=O,O._reactInternals=u,O=u.stateNode,O.props=S,O.state=u.memoizedState,O.refs={},ve(u),te=g.contextType,O.context=typeof te=="object"&&te!==null?ka(te):vc,O.state=u.memoizedState,te=g.getDerivedStateFromProps,typeof te=="function"&&(Wf(u,g,te,S),O.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(te=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),te!==O.state&&To.enqueueReplaceState(O,O.state,null),Ve(u,S,O,I),ze(),O.state=u.memoizedState),typeof O.componentDidMount=="function"&&(u.flags|=4194308),S=!0}else if(l===null){O=u.stateNode;var ge=u.memoizedProps,Ze=ja(g,ge);O.props=Ze;var mt=O.context,Dt=g.contextType;te=vc,typeof Dt=="object"&&Dt!==null&&(te=ka(Dt));var qt=g.getDerivedStateFromProps;Dt=typeof qt=="function"||typeof O.getSnapshotBeforeUpdate=="function",ge=u.pendingProps!==ge,Dt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ge||mt!==te)&&Ja(u,O,S,te),he=!1;var yt=u.memoizedState;O.state=yt,Ve(u,S,O,I),ze(),mt=u.memoizedState,ge||yt!==mt||he?(typeof qt=="function"&&(Wf(u,g,qt,S),mt=u.memoizedState),(Ze=he||fd(u,g,Ze,S,yt,mt,te))?(Dt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=mt),O.props=S,O.state=mt,O.context=te,S=Ze):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{O=u.stateNode,we(l,u),te=u.memoizedProps,Dt=ja(g,te),O.props=Dt,qt=u.pendingProps,yt=O.context,mt=g.contextType,Ze=vc,typeof mt=="object"&&mt!==null&&(Ze=ka(mt)),ge=g.getDerivedStateFromProps,(mt=typeof ge=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(te!==qt||yt!==Ze)&&Ja(u,O,S,Ze),he=!1,yt=u.memoizedState,O.state=yt,Ve(u,S,O,I),ze();var wt=u.memoizedState;te!==qt||yt!==wt||he||l!==null&&l.dependencies!==null&&id(l.dependencies)?(typeof ge=="function"&&(Wf(u,g,ge,S),wt=u.memoizedState),(Dt=he||fd(u,g,Dt,S,yt,wt,Ze)||l!==null&&l.dependencies!==null&&id(l.dependencies))?(mt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(S,wt,Ze),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(S,wt,Ze)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||te===l.memoizedProps&&yt===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||te===l.memoizedProps&&yt===l.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=wt),O.props=S,O.state=wt,O.context=Ze,S=Dt):(typeof O.componentDidUpdate!="function"||te===l.memoizedProps&&yt===l.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||te===l.memoizedProps&&yt===l.memoizedState||(u.flags|=1024),S=!1)}return O=S,dd(l,u),S=(u.flags&128)!==0,O||S?(O=u.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:O.render(),u.flags|=1,l!==null&&S?(u.child=H(u,l.child,null,I),u.child=H(u,null,g,I)):Na(l,u,g,I),u.memoizedState=O.state,l=u.child):l=$a(l,u,I),l}function Qs(l,u,g,S){return Ws(),u.flags|=256,Na(l,u,g,S),u.child}var y_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lc(l){return{baseLanes:l,cachePool:Ep()}}function Zf(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=hs),l}function us(l,u,g){var S=u.pendingProps,I=!1,O=(u.flags&128)!==0,te;if((te=O)||(te=l!==null&&l.memoizedState===null?!1:(At.current&2)!==0),te&&(I=!0,u.flags&=-129),te=(u.flags&32)!==0,u.flags&=-33,l===null){if(Mr){if(I?Ft(u):jt(),(l=Jr)?(l=Zx(l,co),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:rs!==null?{id:Do,overflow:bo}:null,retryLane:536870912,hydrationErrors:null},g=_u(l),g.return=u,u.child=g,wa=u,Jr=null)):l=null,l===null)throw Oo(u);return K_(l)?u.lanes=32:u.lanes=536870912,null}var ge=S.children;return S=S.fallback,I?(jt(),I=u.mode,ge=mg({mode:"hidden",children:ge},I),S=Gs(S,I,g,null),ge.return=u,S.return=u,ge.sibling=S,u.child=ge,S=u.child,S.memoizedState=Lc(g),S.childLanes=Zf(l,te,g),u.memoizedState=y_,hd(null,S)):(Ft(u),No(u,ge))}var Ze=l.memoizedState;if(Ze!==null&&(ge=Ze.dehydrated,ge!==null)){if(O)u.flags&256?(Ft(u),u.flags&=-257,u=pd(l,u,g)):u.memoizedState!==null?(jt(),u.child=l.child,u.flags|=128,u=null):(jt(),ge=S.fallback,I=u.mode,S=mg({mode:"visible",children:S.children},I),ge=Gs(ge,I,g,null),ge.flags|=2,S.return=u,ge.return=u,S.sibling=ge,u.child=S,H(u,l.child,null,g),S=u.child,S.memoizedState=Lc(g),S.childLanes=Zf(l,te,g),u.memoizedState=y_,u=hd(null,S));else if(Ft(u),K_(ge)){if(te=ge.nextSibling&&ge.nextSibling.dataset,te)var mt=te.dgst;te=mt,S=Error(c(419)),S.stack="",S.digest=te,Bo({value:S,source:null,stack:null}),u=pd(l,u,g)}else if(pa||na(l,u,g,!1),te=(g&l.childLanes)!==0,pa||te){if(te=Ri,te!==null&&(S=dn(te,g),S!==0&&S!==Ze.retryLane))throw Ze.retryLane=S,_l(l,S),no(te,l,S),zc;Y_(ge)||Td(),u=pd(l,u,g)}else Y_(ge)?(u.flags|=192,u.child=l.child,u=null):(l=Ze.treeContext,Jr=Rs(ge.nextSibling),wa=u,Mr=!0,ws=null,co=!1,l!==null&&tg(u,l),u=No(u,S.children),u.flags|=4096);return u}return I?(jt(),ge=S.fallback,I=u.mode,Ze=l.child,mt=Ze.sibling,S=Po(Ze,{mode:"hidden",children:S.children}),S.subtreeFlags=Ze.subtreeFlags&65011712,mt!==null?ge=Po(mt,ge):(ge=Gs(ge,I,g,null),ge.flags|=2),ge.return=u,S.return=u,S.sibling=ge,u.child=S,hd(null,S),S=u.child,ge=l.child.memoizedState,ge===null?ge=Lc(g):(I=ge.cachePool,I!==null?(Ze=ni._currentValue,I=I.parent!==Ze?{parent:Ze,pool:Ze}:I):I=Ep(),ge={baseLanes:ge.baseLanes|g,cachePool:I}),S.memoizedState=ge,S.childLanes=Zf(l,te,g),u.memoizedState=y_,hd(l.child,S)):(Ft(u),g=l.child,l=g.sibling,g=Po(g,{mode:"visible",children:S.children}),g.return=u,g.sibling=null,l!==null&&(te=u.deletions,te===null?(u.deletions=[l],u.flags|=16):te.push(l)),u.child=g,u.memoizedState=null,g)}function No(l,u){return u=mg({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function mg(l,u){return l=ta(22,l,null,u),l.lanes=0,l}function pd(l,u,g){return H(u,l.child,null,g),l=No(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function __(l,u,g){l.lanes|=u;var S=l.alternate;S!==null&&(S.lanes|=u),nd(l.return,u,g)}function v_(l,u,g,S,I,O){var te=l.memoizedState;te===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:I,treeForkCount:O}:(te.isBackwards=u,te.rendering=null,te.renderingStartTime=0,te.last=S,te.tail=g,te.tailMode=I,te.treeForkCount=O)}function gg(l,u,g){var S=u.pendingProps,I=S.revealOrder,O=S.tail;S=S.children;var te=At.current,ge=(te&2)!==0;if(ge?(te=te&1|2,u.flags|=128):te&=1,at(At,te),Na(l,u,S,g),S=Mr?Hs:0,!ge&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&__(l,g,u);else if(l.tag===19)__(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(I){case"forwards":for(g=u.child,I=null;g!==null;)l=g.alternate,l!==null&&vn(l)===null&&(I=g),g=g.sibling;g=I,g===null?(I=u.child,u.child=null):(I=g.sibling,g.sibling=null),v_(u,!1,I,g,O,S);break;case"backwards":case"unstable_legacy-backwards":for(g=null,I=u.child,u.child=null;I!==null;){if(l=I.alternate,l!==null&&vn(l)===null){u.child=I;break}l=I.sibling,I.sibling=g,g=I,I=l}v_(u,!0,g,null,O,S);break;case"together":v_(u,!1,null,null,void 0,S);break;default:u.memoizedState=null}return u.child}function $a(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),zl|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(na(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(c(153));if(u.child!==null){for(l=u.child,g=Po(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=Po(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function Pc(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&id(l)))}function ux(l,u,g){switch(u.tag){case 3:Yt(u,u.stateNode.containerInfo),Xs(u,ni,l.memoizedState.cache),Ws();break;case 27:case 5:Rt(u);break;case 4:Yt(u,u.stateNode.containerInfo);break;case 10:Xs(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,ot(u),null;break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(Ft(u),u.flags|=128,null):(g&u.child.childLanes)!==0?us(l,u,g):(Ft(u),l=$a(l,u,g),l!==null?l.sibling:null);Ft(u);break;case 19:var I=(l.flags&128)!==0;if(S=(g&u.childLanes)!==0,S||(na(l,u,g,!1),S=(g&u.childLanes)!==0),I){if(S)return gg(l,u,g);u.flags|=128}if(I=u.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),at(At,At.current),S)break;return null;case 22:return u.lanes=0,cx(l,u,g,u.pendingProps);case 24:Xs(u,ni,l.memoizedState.cache)}return $a(l,u,g)}function x_(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)pa=!0;else{if(!Pc(l,g)&&(u.flags&128)===0)return pa=!1,ux(l,u,g);pa=(l.flags&131072)!==0}else pa=!1,Mr&&(u.flags&1048576)!==0&&Ff(u,Hs,u.index);switch(u.lanes=0,u.tag){case 16:e:{var S=u.pendingProps;if(l=_(u.elementType),u.type=l,typeof l=="function")Qh(l)?(S=ja(l,S),u.tag=1,u=g_(null,u,l,S,g)):(u.tag=0,u=Ua(null,u,l,S,g));else{if(l!=null){var I=l.$$typeof;if(I===J){u.tag=11,u=h_(null,u,l,S,g);break e}else if(I===fe){u.tag=14,u=d_(null,u,l,S,g);break e}}throw u=be(l)||l,Error(c(306,u,""))}}return u;case 0:return Ua(l,u,u.type,u.pendingProps,g);case 1:return S=u.type,I=ja(S,u.pendingProps),g_(l,u,S,I,g);case 3:e:{if(Yt(u,u.stateNode.containerInfo),l===null)throw Error(c(387));S=u.pendingProps;var O=u.memoizedState;I=O.element,we(l,u),Ve(u,S,null,g);var te=u.memoizedState;if(S=te.cache,Xs(u,ni,S),S!==O.cache&&rd(u,[ni],g,!0),ze(),S=te.element,O.isDehydrated)if(O={element:S,isDehydrated:!1,cache:te.cache},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){u=Qs(l,u,S,g);break e}else if(S!==I){I=Qt(Error(c(424)),u),Bo(I),u=Qs(l,u,S,g);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Jr=Rs(l.firstChild),wa=u,Mr=!0,ws=null,co=!0,g=ne(u,null,S,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Ws(),S===I){u=$a(l,u,g);break e}Na(l,u,S,g)}u=u.child}return u;case 26:return dd(l,u),l===null?(g=fh(u.type,null,u.pendingProps,null))?u.memoizedState=g:Mr||(g=u.type,l=u.pendingProps,S=sh(Pt.current).createElement(g),S[Fn]=u,S[pr]=l,ro(S,g,l),mi(S),u.stateNode=S):u.memoizedState=fh(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Rt(u),l===null&&Mr&&(S=u.stateNode=Kx(u.type,u.pendingProps,Pt.current),wa=u,co=!0,I=Jr,Pl(u.type)?(Q_=I,Jr=Rs(S.firstChild)):Jr=I),Na(l,u,u.pendingProps.children,g),dd(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Mr&&((I=S=Jr)&&(S=Rd(S,u.type,u.pendingProps,co),S!==null?(u.stateNode=S,wa=u,Jr=Rs(S.firstChild),co=!1,I=!0):I=!1),I||Oo(u)),Rt(u),I=u.type,O=u.pendingProps,te=l!==null?l.memoizedProps:null,S=O.children,H_(I,O)?S=null:te!==null&&H_(I,te)&&(u.flags|=32),u.memoizedState!==null&&(I=Fo(l,u,Pr,null,null,g),Id._currentValue=I),dd(l,u),Na(l,u,S,g),u.child;case 6:return l===null&&Mr&&((l=g=Jr)&&(g=Wx(g,u.pendingProps,co),g!==null?(u.stateNode=g,wa=u,Jr=null,l=!0):l=!1),l||Oo(u)),null;case 13:return us(l,u,g);case 4:return Yt(u,u.stateNode.containerInfo),S=u.pendingProps,l===null?u.child=H(u,null,S,g):Na(l,u,S,g),u.child;case 11:return h_(l,u,u.type,u.pendingProps,g);case 7:return Na(l,u,u.pendingProps,g),u.child;case 8:return Na(l,u,u.pendingProps.children,g),u.child;case 12:return Na(l,u,u.pendingProps.children,g),u.child;case 10:return S=u.pendingProps,Xs(u,u.type,S.value),Na(l,u,S.children,g),u.child;case 9:return I=u.type._context,S=u.pendingProps.children,wl(u),I=ka(I),S=S(I),u.flags|=1,Na(l,u,S,g),u.child;case 14:return d_(l,u,u.type,u.pendingProps,g);case 15:return lx(l,u,u.type,u.pendingProps,g);case 19:return gg(l,u,g);case 31:return m_(l,u,g);case 22:return cx(l,u,g,u.pendingProps);case 24:return wl(u),S=ka(ni),l===null?(I=Uf(),I===null&&(I=Ri,O=Ys(),I.pooledCache=O,O.refCount++,O!==null&&(I.pooledCacheLanes|=g),I=O),u.memoizedState={parent:S,cache:I},ve(u),Xs(u,ni,I)):((l.lanes&g)!==0&&(we(l,u),Ve(u,null,null,g),ze()),I=l.memoizedState,O=u.memoizedState,I.parent!==S?(I={parent:S,cache:S},u.memoizedState=I,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=I),Xs(u,ni,S)):(S=O.cache,Xs(u,ni,S),S!==I.cache&&rd(u,[ni],g,!0))),Na(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(c(156,u.tag))}function Dc(l){l.flags|=4}function md(l,u,g,S,I){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(I&335544128)===I)if(l.stateNode.complete)l.flags|=8192;else if(R_())l.flags|=8192;else throw s=Tu,Cp}else l.flags&=-16777217}function yg(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!a0(u))if(R_())l.flags|=8192;else throw s=Tu,Cp}function Oc(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?qe():536870912,l.lanes|=u,Iu|=u)}function Ml(l,u){if(!Mr)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function yi(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,S=0;if(u)for(var I=l.child;I!==null;)g|=I.lanes|I.childLanes,S|=I.subtreeFlags&65011712,S|=I.flags&65011712,I.return=l,I=I.sibling;else for(I=l.child;I!==null;)g|=I.lanes|I.childLanes,S|=I.subtreeFlags,S|=I.flags,I.return=l,I=I.sibling;return l.subtreeFlags|=S,l.childLanes=g,u}function _g(l,u,g){var S=u.pendingProps;switch(jf(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(u),null;case 1:return yi(u),null;case 3:return g=u.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),u.memoizedState.cache!==S&&(u.flags|=2048),is(ni),pt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Sc(u)?Dc(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ed())),yi(u),null;case 26:var I=u.type,O=u.memoizedState;return l===null?(Dc(u),O!==null?(yi(u),yg(u,O)):(yi(u),md(u,I,null,S,g))):O?O!==l.memoizedState?(Dc(u),yi(u),yg(u,O)):(yi(u),u.flags&=-16777217):(l=l.memoizedProps,l!==S&&Dc(u),yi(u),md(u,I,l,S,g)),null;case 27:if(kt(u),g=Pt.current,I=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==S&&Dc(u);else{if(!S){if(u.stateNode===null)throw Error(c(166));return yi(u),null}l=nt.current,Sc(u)?bu(u):(l=Kx(I,S,g),u.stateNode=l,Dc(u))}return yi(u),null;case 5:if(kt(u),I=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==S&&Dc(u);else{if(!S){if(u.stateNode===null)throw Error(c(166));return yi(u),null}if(O=nt.current,Sc(u))bu(u);else{var te=sh(Pt.current);switch(O){case 1:O=te.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:O=te.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":O=te.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":O=te.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":O=te.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof S.is=="string"?te.createElement("select",{is:S.is}):te.createElement("select"),S.multiple?O.multiple=!0:S.size&&(O.size=S.size);break;default:O=typeof S.is=="string"?te.createElement(I,{is:S.is}):te.createElement(I)}}O[Fn]=u,O[pr]=S;e:for(te=u.child;te!==null;){if(te.tag===5||te.tag===6)O.appendChild(te.stateNode);else if(te.tag!==4&&te.tag!==27&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===u)break e;for(;te.sibling===null;){if(te.return===null||te.return===u)break e;te=te.return}te.sibling.return=te.return,te=te.sibling}u.stateNode=O;e:switch(ro(O,I,S),I){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&Dc(u)}}return yi(u),md(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,g),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==S&&Dc(u);else{if(typeof S!="string"&&u.stateNode===null)throw Error(c(166));if(l=Pt.current,Sc(u)){if(l=u.stateNode,g=u.memoizedProps,S=null,I=wa,I!==null)switch(I.tag){case 27:case 5:S=I.memoizedProps}l[Fn]=u,l=!!(l.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||Nx(l.nodeValue,g)),l||Oo(u,!0)}else l=sh(l).createTextNode(S),l[Fn]=u,u.stateNode=l}return yi(u),null;case 31:if(g=u.memoizedState,l===null||l.memoizedState!==null){if(S=Sc(u),g!==null){if(l===null){if(!S)throw Error(c(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(557));l[Fn]=u}else Ws(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yi(u),l=!1}else g=ed(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=g),l=!0;if(!l)return u.flags&256?(Et(u),u):(Et(u),null);if((u.flags&128)!==0)throw Error(c(558))}return yi(u),null;case 13:if(S=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(I=Sc(u),S!==null&&S.dehydrated!==null){if(l===null){if(!I)throw Error(c(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(c(317));I[Fn]=u}else Ws(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yi(u),I=!1}else I=ed(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=I),I=!0;if(!I)return u.flags&256?(Et(u),u):(Et(u),null)}return Et(u),(u.flags&128)!==0?(u.lanes=g,u):(g=S!==null,l=l!==null&&l.memoizedState!==null,g&&(S=u.child,I=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(I=S.alternate.memoizedState.cachePool.pool),O=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(O=S.memoizedState.cachePool.pool),O!==I&&(S.flags|=2048)),g!==l&&g&&(u.child.flags|=8192),Oc(u,u.updateQueue),yi(u),null);case 4:return pt(),l===null&&$_(u.stateNode.containerInfo),yi(u),null;case 10:return is(u.type),yi(u),null;case 19:if(Ge(At),S=u.memoizedState,S===null)return yi(u),null;if(I=(u.flags&128)!==0,O=S.rendering,O===null)if(I)Ml(S,!1);else{if(ua!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(O=vn(l),O!==null){for(u.flags|=128,Ml(S,!1),l=O.updateQueue,u.updateQueue=l,Oc(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)xc(g,l),g=g.sibling;return at(At,At.current&1|2),Mr&&bs(u,S.treeForkCount),u.child}l=l.sibling}S.tail!==null&&_n()>Cg&&(u.flags|=128,I=!0,Ml(S,!1),u.lanes=4194304)}else{if(!I)if(l=vn(O),l!==null){if(u.flags|=128,I=!0,l=l.updateQueue,u.updateQueue=l,Oc(u,l),Ml(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!Mr)return yi(u),null}else 2*_n()-S.renderingStartTime>Cg&&g!==536870912&&(u.flags|=128,I=!0,Ml(S,!1),u.lanes=4194304);S.isBackwards?(O.sibling=u.child,u.child=O):(l=S.last,l!==null?l.sibling=O:u.child=O,S.last=O)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=_n(),l.sibling=null,g=At.current,at(At,I?g&1|2:g&1),Mr&&bs(u,S.treeForkCount),l):(yi(u),null);case 22:case 23:return Et(u),rt(),S=u.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(u.flags|=8192):S&&(u.flags|=8192),S?(g&536870912)!==0&&(u.flags&128)===0&&(yi(u),u.subtreeFlags&6&&(u.flags|=8192)):yi(u),g=u.updateQueue,g!==null&&Oc(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),S=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(S=u.memoizedState.cachePool.pool),S!==g&&(u.flags|=2048),l!==null&&Ge(El),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),is(ni),yi(u),null;case 25:return null;case 30:return null}throw Error(c(156,u.tag))}function fx(l,u){switch(jf(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return is(ni),pt(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return kt(u),null;case 31:if(u.memoizedState!==null){if(Et(u),u.alternate===null)throw Error(c(340));Ws()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Et(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(c(340));Ws()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Ge(At),null;case 4:return pt(),null;case 10:return is(u.type),null;case 22:case 23:return Et(u),rt(),l!==null&&Ge(El),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return is(ni),null;case 25:return null;default:return null}}function gd(l,u){switch(jf(u),u.tag){case 3:is(ni),pt();break;case 26:case 27:case 5:kt(u);break;case 4:pt();break;case 31:u.memoizedState!==null&&Et(u);break;case 13:Et(u);break;case 19:Ge(At);break;case 10:is(u.type);break;case 22:case 23:Et(u),rt(),l!==null&&Ge(El);break;case 24:is(ni)}}function Xf(l,u){try{var g=u.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var I=S.next;g=I;do{if((g.tag&l)===l){S=void 0;var O=g.create,te=g.inst;S=O(),te.destroy=S}g=g.next}while(g!==I)}}catch(ge){ci(u,u.return,ge)}}function Bc(l,u,g){try{var S=u.updateQueue,I=S!==null?S.lastEffect:null;if(I!==null){var O=I.next;S=O;do{if((S.tag&l)===l){var te=S.inst,ge=te.destroy;if(ge!==void 0){te.destroy=void 0,I=u;var Ze=g,mt=ge;try{mt()}catch(Dt){ci(I,Ze,Dt)}}}S=S.next}while(S!==O)}}catch(Dt){ci(u,u.return,Dt)}}function Yf(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{He(u,g)}catch(S){ci(l,l.return,S)}}}function b_(l,u,g){g.props=ja(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(S){ci(l,u,S)}}function Kf(l,u){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var S=l.stateNode;break;case 30:S=l.stateNode;break;default:S=l.stateNode}typeof g=="function"?l.refCleanup=g(S):g.current=S}}catch(I){ci(l,u,I)}}function Js(l,u){var g=l.ref,S=l.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(I){ci(l,u,I)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(I){ci(l,u,I)}else g.current=null}function hx(l){var u=l.type,g=l.memoizedProps,S=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break e;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(I){ci(l,l.return,I)}}function w_(l,u,g){try{var S=l.stateNode;Ux(S,l.type,g,u),S[pr]=u}catch(I){ci(l,l.return,I)}}function yd(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Pl(l.type)||l.tag===4}function vg(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||yd(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Pl(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Al(l,u,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(l),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=vo));else if(S!==4&&(S===27&&Pl(l.type)&&(g=l.stateNode,u=null),l=l.child,l!==null))for(Al(l,u,g),l=l.sibling;l!==null;)Al(l,u,g),l=l.sibling}function qr(l,u,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(S!==4&&(S===27&&Pl(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(qr(l,u,g),l=l.sibling;l!==null;)qr(l,u,g),l=l.sibling}function xg(l){var u=l.stateNode,g=l.memoizedProps;try{for(var S=l.type,I=u.attributes;I.length;)u.removeAttributeNode(I[0]);ro(u,S,g),u[Fn]=l,u[pr]=g}catch(O){ci(l,l.return,O)}}var qa=!1,_i=!1,fs=!1,Uo=typeof WeakSet=="function"?WeakSet:Set,Vr=null;function dx(l,u){if(l=l.containerInfo,ds=mh,l=Yh(l),vp(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var I=S.anchorOffset,O=S.focusNode;S=S.focusOffset;try{g.nodeType,O.nodeType}catch{g=null;break e}var te=0,ge=-1,Ze=-1,mt=0,Dt=0,qt=l,yt=null;t:for(;;){for(var wt;qt!==g||I!==0&&qt.nodeType!==3||(ge=te+I),qt!==O||S!==0&&qt.nodeType!==3||(Ze=te+S),qt.nodeType===3&&(te+=qt.nodeValue.length),(wt=qt.firstChild)!==null;)yt=qt,qt=wt;for(;;){if(qt===l)break t;if(yt===g&&++mt===I&&(ge=te),yt===O&&++Dt===S&&(Ze=te),(wt=qt.nextSibling)!==null)break;qt=yt,yt=qt.parentNode}qt=wt}g=ge===-1||Ze===-1?null:{start:ge,end:Ze}}else g=null}g=g||{start:0,end:0}}else g=null;for(qp={focusedElem:l,selectionRange:g},mh=!1,Vr=u;Vr!==null;)if(u=Vr,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Vr=l;else for(;Vr!==null;){switch(u=Vr,O=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(g=0;g<l.length;g++)I=l[g],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&O!==null){l=void 0,g=u,I=O.memoizedProps,O=O.memoizedState,S=g.stateNode;try{var wn=ja(g.type,I);l=S.getSnapshotBeforeUpdate(wn,O),S.__reactInternalSnapshotBeforeUpdate=l}catch(Hn){ci(g,g.return,Hn)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,g=l.nodeType,g===9)il(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":il(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(c(163))}if(l=u.sibling,l!==null){l.return=u.return,Vr=l;break}Vr=u.return}}function za(l,u,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:kl(l,g),S&4&&Xf(5,g);break;case 1:if(kl(l,g),S&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch(te){ci(g,g.return,te)}else{var I=ja(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(I,u,l.__reactInternalSnapshotBeforeUpdate)}catch(te){ci(g,g.return,te)}}S&64&&Yf(g),S&512&&Kf(g,g.return);break;case 3:if(kl(l,g),S&64&&(l=g.updateQueue,l!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{He(l,u)}catch(te){ci(g,g.return,te)}}break;case 27:u===null&&S&4&&xg(g);case 26:case 5:kl(l,g),u===null&&S&4&&hx(g),S&512&&Kf(g,g.return);break;case 12:kl(l,g);break;case 31:kl(l,g),S&4&&px(l,g);break;case 13:kl(l,g),S&4&&wg(l,g),S&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=xS.bind(null,g),TS(l,g))));break;case 22:if(S=g.memoizedState!==null||qa,!S){u=u!==null&&u.memoizedState!==null||_i,I=qa;var O=_i;qa=S,(_i=u)&&!O?Il(l,g,(g.subtreeFlags&8772)!==0):kl(l,g),qa=I,_i=O}break;case 30:break;default:kl(l,g)}}function S_(l){var u=l.alternate;u!==null&&(l.alternate=null,S_(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&gr(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var vi=null,fo=!1;function Rl(l,u,g){for(g=g.child;g!==null;)bg(l,u,g),g=g.sibling}function bg(l,u,g){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(cr,g)}catch{}switch(g.tag){case 26:_i||Js(g,u),Rl(l,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:_i||Js(g,u);var S=vi,I=fo;Pl(g.type)&&(vi=g.stateNode,fo=!1),Rl(l,u,g),ju(g.stateNode),vi=S,fo=I;break;case 5:_i||Js(g,u);case 6:if(S=vi,I=fo,vi=null,Rl(l,u,g),vi=S,fo=I,vi!==null)if(fo)try{(vi.nodeType===9?vi.body:vi.nodeName==="HTML"?vi.ownerDocument.body:vi).removeChild(g.stateNode)}catch(O){ci(g,u,O)}else try{vi.removeChild(g.stateNode)}catch(O){ci(g,u,O)}break;case 18:vi!==null&&(fo?(l=vi,Z_(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),Pd(l)):Z_(vi,g.stateNode));break;case 4:S=vi,I=fo,vi=g.stateNode.containerInfo,fo=!0,Rl(l,u,g),vi=S,fo=I;break;case 0:case 11:case 14:case 15:Bc(2,g,u),_i||Bc(4,g,u),Rl(l,u,g);break;case 1:_i||(Js(g,u),S=g.stateNode,typeof S.componentWillUnmount=="function"&&b_(g,u,S)),Rl(l,u,g);break;case 21:Rl(l,u,g);break;case 22:_i=(S=_i)||g.memoizedState!==null,Rl(l,u,g),_i=S;break;default:Rl(l,u,g)}}function px(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Pd(l)}catch(g){ci(u,u.return,g)}}}function wg(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Pd(l)}catch(g){ci(u,u.return,g)}}function mx(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new Uo),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new Uo),u;default:throw Error(c(435,l.tag))}}function Sg(l,u){var g=mx(l);u.forEach(function(S){if(!g.has(S)){g.add(S);var I=P_.bind(null,l,S);S.then(I,I)}})}function la(l,u){var g=u.deletions;if(g!==null)for(var S=0;S<g.length;S++){var I=g[S],O=l,te=u,ge=te;e:for(;ge!==null;){switch(ge.tag){case 27:if(Pl(ge.type)){vi=ge.stateNode,fo=!1;break e}break;case 5:vi=ge.stateNode,fo=!1;break e;case 3:case 4:vi=ge.stateNode.containerInfo,fo=!0;break e}ge=ge.return}if(vi===null)throw Error(c(160));bg(O,te,I),vi=null,fo=!1,O=I.alternate,O!==null&&(O.return=null),I.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Pp(u,l),u=u.sibling}var eo=null;function Pp(l,u){var g=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:la(u,l),to(l),S&4&&(Bc(3,l,l.return),Xf(3,l),Bc(5,l,l.return));break;case 1:la(u,l),to(l),S&512&&(_i||g===null||Js(g,g.return)),S&64&&qa&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var I=eo;if(la(u,l),to(l),S&512&&(_i||g===null||Js(g,g.return)),S&4){var O=g!==null?g.memoizedState:null;if(S=l.memoizedState,g===null)if(S===null)if(l.stateNode===null){e:{S=l.type,g=l.memoizedProps,I=I.ownerDocument||I;t:switch(S){case"title":O=I.getElementsByTagName("title")[0],(!O||O[kr]||O[Fn]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=I.createElement(S),I.head.insertBefore(O,I.querySelector("head > title"))),ro(O,S,g),O[Fn]=l,mi(O),S=O;break e;case"link":var te=i0("link","href",I).get(S+(g.href||""));if(te){for(var ge=0;ge<te.length;ge++)if(O=te[ge],O.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&O.getAttribute("rel")===(g.rel==null?null:g.rel)&&O.getAttribute("title")===(g.title==null?null:g.title)&&O.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){te.splice(ge,1);break t}}O=I.createElement(S),ro(O,S,g),I.head.appendChild(O);break;case"meta":if(te=i0("meta","content",I).get(S+(g.content||""))){for(ge=0;ge<te.length;ge++)if(O=te[ge],O.getAttribute("content")===(g.content==null?null:""+g.content)&&O.getAttribute("name")===(g.name==null?null:g.name)&&O.getAttribute("property")===(g.property==null?null:g.property)&&O.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&O.getAttribute("charset")===(g.charSet==null?null:g.charSet)){te.splice(ge,1);break t}}O=I.createElement(S),ro(O,S,g),I.head.appendChild(O);break;default:throw Error(c(468,S))}O[Fn]=l,mi(O),S=O}l.stateNode=S}else Dl(I,l.type,l.stateNode);else l.stateNode=r0(I,S,l.memoizedProps);else O!==S?(O===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):O.count--,S===null?Dl(I,l.type,l.stateNode):r0(I,S,l.memoizedProps)):S===null&&l.stateNode!==null&&w_(l,l.memoizedProps,g.memoizedProps)}break;case 27:la(u,l),to(l),S&512&&(_i||g===null||Js(g,g.return)),g!==null&&S&4&&w_(l,l.memoizedProps,g.memoizedProps);break;case 5:if(la(u,l),to(l),S&512&&(_i||g===null||Js(g,g.return)),l.flags&32){I=l.stateNode;try{Ra(I,"")}catch(wn){ci(l,l.return,wn)}}S&4&&l.stateNode!=null&&(I=l.memoizedProps,w_(l,I,g!==null?g.memoizedProps:I)),S&1024&&(fs=!0);break;case 6:if(la(u,l),to(l),S&4){if(l.stateNode===null)throw Error(c(162));S=l.memoizedProps,g=l.stateNode;try{g.nodeValue=S}catch(wn){ci(l,l.return,wn)}}break;case 3:if(Bg=null,I=eo,eo=uh(u.containerInfo),la(u,l),eo=I,to(l),S&4&&g!==null&&g.memoizedState.isDehydrated)try{Pd(u.containerInfo)}catch(wn){ci(l,l.return,wn)}fs&&(fs=!1,Tg(l));break;case 4:S=eo,eo=uh(l.stateNode.containerInfo),la(u,l),to(l),eo=S;break;case 12:la(u,l),to(l);break;case 31:la(u,l),to(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Sg(l,S)));break;case 13:la(u,l),to(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Lu=_n()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Sg(l,S)));break;case 22:I=l.memoizedState!==null;var Ze=g!==null&&g.memoizedState!==null,mt=qa,Dt=_i;if(qa=mt||I,_i=Dt||Ze,la(u,l),_i=Dt,qa=mt,to(l),S&8192)e:for(u=l.stateNode,u._visibility=I?u._visibility&-2:u._visibility|1,I&&(g===null||Ze||qa||_i||Qf(l)),g=null,u=l;;){if(u.tag===5||u.tag===26){if(g===null){Ze=g=u;try{if(O=Ze.stateNode,I)te=O.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{ge=Ze.stateNode;var qt=Ze.memoizedProps.style,yt=qt!=null&&qt.hasOwnProperty("display")?qt.display:null;ge.style.display=yt==null||typeof yt=="boolean"?"":(""+yt).trim()}}catch(wn){ci(Ze,Ze.return,wn)}}}else if(u.tag===6){if(g===null){Ze=u;try{Ze.stateNode.nodeValue=I?"":Ze.memoizedProps}catch(wn){ci(Ze,Ze.return,wn)}}}else if(u.tag===18){if(g===null){Ze=u;try{var wt=Ze.stateNode;I?X_(wt,!0):X_(Ze.stateNode,!1)}catch(wn){ci(Ze,Ze.return,wn)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}S&4&&(S=l.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Sg(l,g))));break;case 19:la(u,l),to(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Sg(l,S)));break;case 30:break;case 21:break;default:la(u,l),to(l)}}function to(l){var u=l.flags;if(u&2){try{for(var g,S=l.return;S!==null;){if(yd(S)){g=S;break}S=S.return}if(g==null)throw Error(c(160));switch(g.tag){case 27:var I=g.stateNode,O=vg(l);qr(l,O,I);break;case 5:var te=g.stateNode;g.flags&32&&(Ra(te,""),g.flags&=-33);var ge=vg(l);qr(l,ge,te);break;case 3:case 4:var Ze=g.stateNode.containerInfo,mt=vg(l);Al(l,mt,Ze);break;default:throw Error(c(161))}}catch(Dt){ci(l,l.return,Dt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Tg(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Tg(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function kl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)za(l,u.alternate,u),u=u.sibling}function Qf(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Bc(4,u,u.return),Qf(u);break;case 1:Js(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&b_(u,u.return,g),Qf(u);break;case 27:ju(u.stateNode);case 26:case 5:Js(u,u.return),Qf(u);break;case 22:u.memoizedState===null&&Qf(u);break;case 30:Qf(u);break;default:Qf(u)}l=l.sibling}}function Il(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var S=u.alternate,I=l,O=u,te=O.flags;switch(O.tag){case 0:case 11:case 15:Il(I,O,g),Xf(4,O);break;case 1:if(Il(I,O,g),S=O,I=S.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(mt){ci(S,S.return,mt)}if(S=O,I=S.updateQueue,I!==null){var ge=S.stateNode;try{var Ze=I.shared.hiddenCallbacks;if(Ze!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Ze.length;I++)We(Ze[I],ge)}catch(mt){ci(S,S.return,mt)}}g&&te&64&&Yf(O),Kf(O,O.return);break;case 27:xg(O);case 26:case 5:Il(I,O,g),g&&S===null&&te&4&&hx(O),Kf(O,O.return);break;case 12:Il(I,O,g);break;case 31:Il(I,O,g),g&&te&4&&px(I,O);break;case 13:Il(I,O,g),g&&te&4&&wg(I,O);break;case 22:O.memoizedState===null&&Il(I,O,g),Kf(O,O.return);break;case 30:break;default:Il(I,O,g)}u=u.sibling}}function T_(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&Sl(g))}function Dp(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Sl(l))}function el(l,u,g,S){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Eg(l,u,g,S),u=u.sibling}function Eg(l,u,g,S){var I=u.flags;switch(u.tag){case 0:case 11:case 15:el(l,u,g,S),I&2048&&Xf(9,u);break;case 1:el(l,u,g,S);break;case 3:el(l,u,g,S),I&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Sl(l)));break;case 12:if(I&2048){el(l,u,g,S),l=u.stateNode;try{var O=u.memoizedProps,te=O.id,ge=O.onPostCommit;typeof ge=="function"&&ge(te,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ze){ci(u,u.return,Ze)}}else el(l,u,g,S);break;case 31:el(l,u,g,S);break;case 13:el(l,u,g,S);break;case 23:break;case 22:O=u.stateNode,te=u.alternate,u.memoizedState!==null?O._visibility&2?el(l,u,g,S):_d(l,u):O._visibility&2?el(l,u,g,S):(O._visibility|=2,Jf(l,u,g,S,(u.subtreeFlags&10256)!==0||!1)),I&2048&&T_(te,u);break;case 24:el(l,u,g,S),I&2048&&Dp(u.alternate,u);break;default:el(l,u,g,S)}}function Jf(l,u,g,S,I){for(I=I&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var O=l,te=u,ge=g,Ze=S,mt=te.flags;switch(te.tag){case 0:case 11:case 15:Jf(O,te,ge,Ze,I),Xf(8,te);break;case 23:break;case 22:var Dt=te.stateNode;te.memoizedState!==null?Dt._visibility&2?Jf(O,te,ge,Ze,I):_d(O,te):(Dt._visibility|=2,Jf(O,te,ge,Ze,I)),I&&mt&2048&&T_(te.alternate,te);break;case 24:Jf(O,te,ge,Ze,I),I&&mt&2048&&Dp(te.alternate,te);break;default:Jf(O,te,ge,Ze,I)}u=u.sibling}}function _d(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,S=u,I=S.flags;switch(S.tag){case 22:_d(g,S),I&2048&&T_(S.alternate,S);break;case 24:_d(g,S),I&2048&&Dp(S.alternate,S);break;default:_d(g,S)}u=u.sibling}}var tl=8192;function eh(l,u,g){if(l.subtreeFlags&tl)for(l=l.child;l!==null;)gx(l,u,g),l=l.sibling}function gx(l,u,g){switch(l.tag){case 26:eh(l,u,g),l.flags&tl&&l.memoizedState!==null&&rb(g,eo,l.memoizedState,l.memoizedProps);break;case 5:eh(l,u,g);break;case 3:case 4:var S=eo;eo=uh(l.stateNode.containerInfo),eh(l,u,g),eo=S;break;case 22:l.memoizedState===null&&(S=l.alternate,S!==null&&S.memoizedState!==null?(S=tl,tl=16777216,eh(l,u,g),tl=S):eh(l,u,g));break;default:eh(l,u,g)}}function th(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Ru(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var S=u[g];Vr=S,yx(S,l)}th(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)E_(l),l=l.sibling}function E_(l){switch(l.tag){case 0:case 11:case 15:Ru(l),l.flags&2048&&Bc(9,l,l.return);break;case 3:Ru(l);break;case 12:Ru(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Op(l)):Ru(l);break;default:Ru(l)}}function Op(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var S=u[g];Vr=S,yx(S,l)}th(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Bc(8,u,u.return),Op(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,Op(u));break;default:Op(u)}l=l.sibling}}function yx(l,u){for(;Vr!==null;){var g=Vr;switch(g.tag){case 0:case 11:case 15:Bc(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Sl(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,Vr=S;else e:for(g=l;Vr!==null;){S=Vr;var I=S.sibling,O=S.return;if(S_(S),S===g){Vr=null;break e}if(I!==null){I.return=O,Vr=I;break e}Vr=O}}}var _S={getCacheForType:function(l){var u=ka(ni),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g},cacheSignal:function(){return ka(ni).controller.signal}},_x=typeof WeakMap=="function"?WeakMap:Map,ii=0,Ri=null,Dr=null,Fr=0,li=0,$o=null,Fc=!1,ku=!1,nl=!1,ca=0,ua=0,zl=0,nh=0,C_=0,hs=0,Iu=0,zu=null,Eo=null,jc=!1,Lu=0,vx=0,Cg=1/0,Mg=null,Pu=null,La=0,Du=null,vd=null,rl=0,M_=0,Ou=null,xx=null,Pi=0,xd=null;function qo(){return(ii&2)!==0&&Fr!==0?Fr&-Fr:pe.T!==null?Lg():Bn()}function Bp(){if(hs===0)if((Fr&536870912)===0||Mr){var l=le;le<<=1,(le&3932160)===0&&(le=262144),hs=l}else hs=536870912;return l=vt.current,l!==null&&(l.flags|=32),hs}function no(l,u,g){(l===Ri&&(li===2||li===9)||l.cancelPendingCommit!==null)&&(Bu(l,0),As(l,Fr,hs,!1)),tt(l,g),((ii&2)===0||l!==Ri)&&(l===Ri&&((ii&2)===0&&(nh|=g),ua===4&&As(l,Fr,hs,!1)),Vo(l))}function bd(l,u,g){if((ii&6)!==0)throw Error(c(327));var S=!g&&(u&127)===0&&(u&l.expiredLanes)===0||Ue(l,u),I=S?z_(l,u):k_(l,u,!0),O=S;do{if(I===0){ku&&!S&&As(l,u,0,!1);break}else{if(g=l.current.alternate,O&&!bx(g)){I=k_(l,u,!1),O=!1;continue}if(I===2){if(O=u,l.errorRecoveryDisabledLanes&O)var te=0;else te=l.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){u=te;e:{var ge=l;I=zu;var Ze=ge.current.memoizedState.isDehydrated;if(Ze&&(Bu(ge,te).flags|=256),te=k_(ge,te,!1),te!==2){if(nl&&!Ze){ge.errorRecoveryDisabledLanes|=O,nh|=O,I=4;break e}O=Eo,Eo=I,O!==null&&(Eo===null?Eo=O:Eo.push.apply(Eo,O))}I=te}if(O=!1,I!==2)continue}}if(I===1){Bu(l,0),As(l,u,0,!0);break}e:{switch(S=l,O=I,O){case 0:case 1:throw Error(c(345));case 4:if((u&4194048)!==u)break;case 6:As(S,u,hs,!Fc);break e;case 2:Eo=null;break;case 3:case 5:break;default:throw Error(c(329))}if((u&62914560)===u&&(I=Lu+300-_n(),10<I)){if(As(S,u,hs,!Fc),Oe(S,0,!0)!==0)break e;rl=u,S.timeoutHandle=Vx(A_.bind(null,S,g,Eo,Mg,jc,u,hs,nh,Iu,Fc,O,"Throttled",-0,0),I);break e}A_(S,g,Eo,Mg,jc,u,hs,nh,Iu,Fc,O,null,-0,0)}}break}while(!0);Vo(l)}function A_(l,u,g,S,I,O,te,ge,Ze,mt,Dt,qt,yt,wt){if(l.timeoutHandle=-1,qt=u.subtreeFlags,qt&8192||(qt&16785408)===16785408){qt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vo},gx(u,O,qt);var wn=(O&62914560)===O?Lu-_n():(O&4194048)===O?vx-_n():0;if(wn=MS(qt,wn),wn!==null){rl=O,l.cancelPendingCommit=wn(Mx.bind(null,l,u,O,g,S,I,te,ge,Ze,Dt,qt,null,yt,wt)),As(l,O,te,!mt);return}}Mx(l,u,O,g,S,I,te,ge,Ze)}function bx(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var I=g[S],O=I.getSnapshot;I=I.value;try{if(!xo(O(),I))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function As(l,u,g,S){u&=~C_,u&=~nh,l.suspendedLanes|=u,l.pingedLanes&=~u,S&&(l.warmLanes|=u),S=l.expirationTimes;for(var I=u;0<I;){var O=31-fn(I),te=1<<O;S[O]=-1,I&=~te}g!==0&&Lt(l,g,u)}function wd(){return(ii&6)===0?(Md(0),!1):!0}function Fp(){if(Dr!==null){if(li===0)var l=Dr.return;else l=Dr,Zs=bl=null,ri(l),T=null,M=0,l=Dr;for(;l!==null;)gd(l.alternate,l),l=l.return;Dr=null}}function Bu(l,u){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,Gx(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),rl=0,Fp(),Ri=l,Dr=g=Po(l.current,null),Fr=u,li=0,$o=null,Fc=!1,ku=Ue(l,u),nl=!1,Iu=hs=C_=nh=zl=ua=0,Eo=zu=null,jc=!1,(u&8)!==0&&(u|=u&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=u;0<S;){var I=31-fn(S),O=1<<I;u|=l[I],S&=~O}return ca=u,yc(),g}function wx(l,u){Nt=null,pe.H=cs,u===wu||u===Su?(u=d(),li=3):u===Cp?(u=d(),li=4):li=u===zc?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,$o=u,Dr===null&&(ua=1,Mu(l,Qt(u,l.current)))}function R_(){var l=vt.current;return l===null?!0:(Fr&4194048)===Fr?lt===null:(Fr&62914560)===Fr||(Fr&536870912)!==0?l===lt:!1}function Sd(){var l=pe.H;return pe.H=cs,l===null?cs:l}function Sx(){var l=pe.A;return pe.A=_S,l}function Td(){ua=4,Fc||(Fr&4194048)!==Fr&&vt.current!==null||(ku=!0),(zl&134217727)===0&&(nh&134217727)===0||Ri===null||As(Ri,Fr,hs,!1)}function k_(l,u,g){var S=ii;ii|=2;var I=Sd(),O=Sx();(Ri!==l||Fr!==u)&&(Mg=null,Bu(l,u)),u=!1;var te=ua;e:do try{if(li!==0&&Dr!==null){var ge=Dr,Ze=$o;switch(li){case 8:Fp(),te=6;break e;case 3:case 2:case 9:case 6:vt.current===null&&(u=!0);var mt=li;if(li=0,$o=null,Ed(l,ge,Ze,mt),g&&ku){te=0;break e}break;default:mt=li,li=0,$o=null,Ed(l,ge,Ze,mt)}}I_(),te=ua;break}catch(Dt){wx(l,Dt)}while(!0);return u&&l.shellSuspendCounter++,Zs=bl=null,ii=S,pe.H=I,pe.A=O,Dr===null&&(Ri=null,Fr=0,yc()),te}function I_(){for(;Dr!==null;)Tx(Dr)}function z_(l,u){var g=ii;ii|=2;var S=Sd(),I=Sx();Ri!==l||Fr!==u?(Mg=null,Cg=_n()+500,Bu(l,u)):ku=Ue(l,u);e:do try{if(li!==0&&Dr!==null){u=Dr;var O=$o;t:switch(li){case 1:li=0,$o=null,Ed(l,u,O,1);break;case 2:case 9:if(od(O)){li=0,$o=null,Ex(u);break}u=function(){li!==2&&li!==9||Ri!==l||(li=7),Vo(l)},O.then(u,u);break e;case 3:li=7;break e;case 4:li=5;break e;case 7:od(O)?(li=0,$o=null,Ex(u)):(li=0,$o=null,Ed(l,u,O,7));break;case 5:var te=null;switch(Dr.tag){case 26:te=Dr.memoizedState;case 5:case 27:var ge=Dr;if(te?a0(te):ge.stateNode.complete){li=0,$o=null;var Ze=ge.sibling;if(Ze!==null)Dr=Ze;else{var mt=ge.return;mt!==null?(Dr=mt,Rg(mt)):Dr=null}break t}}li=0,$o=null,Ed(l,u,O,5);break;case 6:li=0,$o=null,Ed(l,u,O,6);break;case 8:Fp(),ua=6;break e;default:throw Error(c(462))}}Ag();break}catch(Dt){wx(l,Dt)}while(!0);return Zs=bl=null,pe.H=S,pe.A=I,ii=g,Dr!==null?0:(Ri=null,Fr=0,yc(),ua)}function Ag(){for(;Dr!==null&&!Xt();)Tx(Dr)}function Tx(l){var u=x_(l.alternate,l,ca);l.memoizedProps=l.pendingProps,u===null?Rg(l):Dr=u}function Ex(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=pg(g,u,u.pendingProps,u.type,void 0,Fr);break;case 11:u=pg(g,u,u.pendingProps,u.type.render,u.ref,Fr);break;case 5:ri(u);default:gd(g,u),u=Dr=xc(u,ca),u=x_(g,u,ca)}l.memoizedProps=l.pendingProps,u===null?Rg(l):Dr=u}function Ed(l,u,g,S){Zs=bl=null,ri(u),T=null,M=0;var I=u.return;try{if(sx(l,I,u,g,Fr)){ua=1,Mu(l,Qt(g,l.current)),Dr=null;return}}catch(O){if(I!==null)throw Dr=I,O;ua=1,Mu(l,Qt(g,l.current)),Dr=null;return}u.flags&32768?(Mr||S===1?l=!0:ku||(Fr&536870912)!==0?l=!1:(Fc=l=!0,(S===2||S===9||S===3||S===6)&&(S=vt.current,S!==null&&S.tag===13&&(S.flags|=16384))),Cx(u,l)):Rg(u)}function Rg(l){var u=l;do{if((u.flags&32768)!==0){Cx(u,Fc);return}l=u.return;var g=_g(u.alternate,u,ca);if(g!==null){Dr=g;return}if(u=u.sibling,u!==null){Dr=u;return}Dr=u=l}while(u!==null);ua===0&&(ua=5)}function Cx(l,u){do{var g=fx(l.alternate,l);if(g!==null){g.flags&=32767,Dr=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){Dr=l;return}Dr=l=g}while(l!==null);ua=6,Dr=null}function Mx(l,u,g,S,I,O,te,ge,Ze){l.cancelPendingCommit=null;do kg();while(La!==0);if((ii&6)!==0)throw Error(c(327));if(u!==null){if(u===l.current)throw Error(c(177));if(O=u.lanes|u.childLanes,O|=yu,Tt(l,g,O,te,ge,Ze),l===Ri&&(Dr=Ri=null,Fr=0),vd=u,Du=l,rl=g,M_=O,Ou=I,xx=S,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,zg(Ln,function(){return Rx(),null})):(l.callbackNode=null,l.callbackPriority=0),S=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||S){S=pe.T,pe.T=null,I=Pe.p,Pe.p=2,te=ii,ii|=4;try{dx(l,u,g)}finally{ii=te,Pe.p=I,pe.T=S}}La=1,jp(),Ax(),L_()}}function jp(){if(La===1){La=0;var l=Du,u=vd,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=pe.T,pe.T=null;var S=Pe.p;Pe.p=2;var I=ii;ii|=4;try{Pp(u,l);var O=qp,te=Yh(l.containerInfo),ge=O.focusedElem,Ze=O.selectionRange;if(te!==ge&&ge&&ge.ownerDocument&&_p(ge.ownerDocument.documentElement,ge)){if(Ze!==null&&vp(ge)){var mt=Ze.start,Dt=Ze.end;if(Dt===void 0&&(Dt=mt),"selectionStart"in ge)ge.selectionStart=mt,ge.selectionEnd=Math.min(Dt,ge.value.length);else{var qt=ge.ownerDocument||document,yt=qt&&qt.defaultView||window;if(yt.getSelection){var wt=yt.getSelection(),wn=ge.textContent.length,Hn=Math.min(Ze.start,wn),oi=Ze.end===void 0?Hn:Math.min(Ze.end,wn);!wt.extend&&Hn>oi&&(te=oi,oi=Hn,Hn=te);var it=hu(ge,Hn),Ye=hu(ge,oi);if(it&&Ye&&(wt.rangeCount!==1||wt.anchorNode!==it.node||wt.anchorOffset!==it.offset||wt.focusNode!==Ye.node||wt.focusOffset!==Ye.offset)){var ft=qt.createRange();ft.setStart(it.node,it.offset),wt.removeAllRanges(),Hn>oi?(wt.addRange(ft),wt.extend(Ye.node,Ye.offset)):(ft.setEnd(Ye.node,Ye.offset),wt.addRange(ft))}}}}for(qt=[],wt=ge;wt=wt.parentNode;)wt.nodeType===1&&qt.push({element:wt,left:wt.scrollLeft,top:wt.scrollTop});for(typeof ge.focus=="function"&&ge.focus(),ge=0;ge<qt.length;ge++){var Ot=qt[ge];Ot.element.scrollLeft=Ot.left,Ot.element.scrollTop=Ot.top}}mh=!!ds,qp=ds=null}finally{ii=I,Pe.p=S,pe.T=g}}l.current=u,La=2}}function Ax(){if(La===2){La=0;var l=Du,u=vd,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=pe.T,pe.T=null;var S=Pe.p;Pe.p=2;var I=ii;ii|=4;try{za(l,u.alternate,u)}finally{ii=I,Pe.p=S,pe.T=g}}La=3}}function L_(){if(La===4||La===3){La=0,jn();var l=Du,u=vd,g=rl,S=xx;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?La=5:(La=0,vd=Du=null,rh(l,l.pendingLanes));var I=l.pendingLanes;if(I===0&&(Pu=null),In(g),u=u.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(cr,u,void 0,(u.current.flags&128)===128)}catch{}if(S!==null){u=pe.T,I=Pe.p,Pe.p=2,pe.T=null;try{for(var O=l.onRecoverableError,te=0;te<S.length;te++){var ge=S[te];O(ge.value,{componentStack:ge.stack})}}finally{pe.T=u,Pe.p=I}}(rl&3)!==0&&kg(),Vo(l),I=l.pendingLanes,(g&261930)!==0&&(I&42)!==0?l===xd?Pi++:(Pi=0,xd=l):Pi=0,Md(0)}}function rh(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Sl(u)))}function kg(){return jp(),Ax(),L_(),Rx()}function Rx(){if(La!==5)return!1;var l=Du,u=M_;M_=0;var g=In(rl),S=pe.T,I=Pe.p;try{Pe.p=32>g?32:g,pe.T=null,g=Ou,Ou=null;var O=Du,te=rl;if(La=0,vd=Du=null,rl=0,(ii&6)!==0)throw Error(c(331));var ge=ii;if(ii|=4,E_(O.current),Eg(O,O.current,te,g),ii=ge,Md(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(cr,O)}catch{}return!0}finally{Pe.p=I,pe.T=S,rh(l,u)}}function kx(l,u,g){u=Qt(g,u),u=u_(l.stateNode,u,2),l=Ee(l,u,2),l!==null&&(tt(l,2),Vo(l))}function ci(l,u,g){if(l.tag===3)kx(l,l,g);else for(;u!==null;){if(u.tag===3){kx(u,l,g);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Pu===null||!Pu.has(S))){l=Qt(g,l),g=ox(2),S=Ee(u,g,2),S!==null&&(f_(g,S,u,l),tt(S,2),Vo(S));break}}u=u.return}}function Ig(l,u,g){var S=l.pingCache;if(S===null){S=l.pingCache=new _x;var I=new Set;S.set(u,I)}else I=S.get(u),I===void 0&&(I=new Set,S.set(u,I));I.has(g)||(nl=!0,I.add(g),l=vS.bind(null,l,u,g),u.then(l,l))}function vS(l,u,g){var S=l.pingCache;S!==null&&S.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Ri===l&&(Fr&g)===g&&(ua===4||ua===3&&(Fr&62914560)===Fr&&300>_n()-Lu?(ii&2)===0&&Bu(l,0):C_|=g,Iu===Fr&&(Iu=0)),Vo(l)}function Ix(l,u){u===0&&(u=qe()),l=_l(l,u),l!==null&&(tt(l,u),Vo(l))}function xS(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),Ix(l,g)}function P_(l,u){var g=0;switch(l.tag){case 31:case 13:var S=l.stateNode,I=l.memoizedState;I!==null&&(g=I.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(c(314))}S!==null&&S.delete(u),Ix(l,g)}function zg(l,u){return yn(l,u)}var ih=null,Cd=null,D_=!1,Fu=!1,ah=!1,Nc=0;function Vo(l){l!==Cd&&l.next===null&&(Cd===null?ih=Cd=l:Cd=Cd.next=l),Fu=!0,D_||(D_=!0,zx())}function Md(l,u){if(!ah&&Fu){ah=!0;do for(var g=!1,S=ih;S!==null;){if(l!==0){var I=S.pendingLanes;if(I===0)var O=0;else{var te=S.suspendedLanes,ge=S.pingedLanes;O=(1<<31-fn(42|l)+1)-1,O&=I&~(te&~ge),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(g=!0,j_(S,O))}else O=Fr,O=Oe(S,S===Ri?O:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(O&3)===0||Ue(S,O)||(g=!0,j_(S,O));S=S.next}while(g);ah=!1}}function bS(){O_()}function O_(){Fu=D_=!1;var l=0;Nc!==0&&SS()&&(l=Nc);for(var u=_n(),g=null,S=ih;S!==null;){var I=S.next,O=B_(S,u);O===0?(S.next=null,g===null?ih=I:g.next=I,I===null&&(Cd=g)):(g=S,(l!==0||(O&3)!==0)&&(Fu=!0)),S=I}La!==0&&La!==5||Md(l),Nc!==0&&(Nc=0)}function B_(l,u){for(var g=l.suspendedLanes,S=l.pingedLanes,I=l.expirationTimes,O=l.pendingLanes&-62914561;0<O;){var te=31-fn(O),ge=1<<te,Ze=I[te];Ze===-1?((ge&g)===0||(ge&S)!==0)&&(I[te]=Qe(ge,u)):Ze<=u&&(l.expiredLanes|=ge),O&=~ge}if(u=Ri,g=Fr,g=Oe(l,l===u?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S=l.callbackNode,g===0||l===u&&(li===2||li===9)||l.cancelPendingCommit!==null)return S!==null&&S!==null&&Cn(S),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Ue(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(S!==null&&Cn(S),In(g)){case 2:case 8:g=Tn;break;case 32:g=Ln;break;case 268435456:g=lr;break;default:g=Ln}return S=F_.bind(null,l),g=yn(g,S),l.callbackPriority=u,l.callbackNode=g,u}return S!==null&&S!==null&&Cn(S),l.callbackPriority=2,l.callbackNode=null,2}function F_(l,u){if(La!==0&&La!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(kg()&&l.callbackNode!==g)return null;var S=Fr;return S=Oe(l,l===Ri?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S===0?null:(bd(l,S,u),B_(l,_n()),l.callbackNode!=null&&l.callbackNode===g?F_.bind(null,l):null)}function j_(l,u){if(kg())return null;bd(l,u,!0)}function zx(){Hx(function(){(ii&6)!==0?yn(tr,bS):O_()})}function Lg(){if(Nc===0){var l=Tl;l===0&&(l=Le,Le<<=1,(Le&261888)===0&&(Le=256)),Nc=l}return Nc}function Lx(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:wf(""+l)}function Px(l,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,l.id&&g.setAttribute("form",l.id),u.parentNode.insertBefore(g,u),l=new FormData(l),g.parentNode.removeChild(g),l}function Dx(l,u,g,S,I){if(u==="submit"&&g&&g.stateNode===I){var O=Lx((I[pr]||null).action),te=S.submitter;te&&(u=(u=te[pr]||null)?Lx(u.formAction):te.getAttribute("formAction"),u!==null&&(O=u,te=null));var ge=new sc("action","action",null,S,I);l.push({event:ge,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Nc!==0){var Ze=te?Px(I,te):new FormData(I);ls(g,{pending:!0,data:Ze,method:I.method,action:O},null,Ze)}}else typeof O=="function"&&(ge.preventDefault(),Ze=te?Px(I,te):new FormData(I),ls(g,{pending:!0,data:Ze,method:I.method,action:O},O,Ze))},currentTarget:I}]})}}for(var Ad=0;Ad<lo.length;Ad++){var Pg=lo[Ad],ho=Pg.toLowerCase(),Np=Pg[0].toUpperCase()+Pg.slice(1);Ka(ho,"on"+Np)}Ka(Qm,"onAnimationEnd"),Ka(Sp,"onAnimationIteration"),Ka(Lf,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(gu,"onTransitionRun"),Ka(Jm,"onTransitionStart"),Ka(eg,"onTransitionCancel"),Ka(xs,"onTransitionEnd"),ko("onMouseEnter",["mouseout","mouseover"]),ko("onMouseLeave",["mouseout","mouseover"]),ko("onPointerEnter",["pointerout","pointerover"]),ko("onPointerLeave",["pointerout","pointerover"]),ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Up=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function N_(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var S=l[g],I=S.event;S=S.listeners;e:{var O=void 0;if(u)for(var te=S.length-1;0<=te;te--){var ge=S[te],Ze=ge.instance,mt=ge.currentTarget;if(ge=ge.listener,Ze!==O&&I.isPropagationStopped())break e;O=ge,I.currentTarget=mt;try{O(I)}catch(Dt){Df(Dt)}I.currentTarget=null,O=Ze}else for(te=0;te<S.length;te++){if(ge=S[te],Ze=ge.instance,mt=ge.currentTarget,ge=ge.listener,Ze!==O&&I.isPropagationStopped())break e;O=ge,I.currentTarget=mt;try{O(I)}catch(Dt){Df(Dt)}I.currentTarget=null,O=Ze}}}}function Ir(l,u){var g=u[Ci];g===void 0&&(g=u[Ci]=new Set);var S=l+"__bubble";g.has(S)||(Ox(u,l,2,!1),g.add(S))}function U_(l,u,g){var S=0;u&&(S|=4),Ox(g,l,S,u)}var Dg="_reactListening"+Math.random().toString(36).slice(2);function $_(l){if(!l[Dg]){l[Dg]=!0,Ji.forEach(function(g){g!=="selectionchange"&&(Up.has(g)||U_(g,!1,l),U_(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Dg]||(u[Dg]=!0,U_("selectionchange",!1,u))}}function Ox(l,u,g,S){switch(gh(u)){case 2:var I=$g;break;case 8:I=AS;break;default:I=s0}g=I.bind(null,u,g,l),I=void 0,!Fh||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(I=!0),S?I!==void 0?l.addEventListener(u,g,{capture:!0,passive:I}):l.addEventListener(u,g,!0):I!==void 0?l.addEventListener(u,g,{passive:I}):l.addEventListener(u,g,!1)}function q_(l,u,g,S,I){var O=S;if((u&1)===0&&(u&2)===0&&S!==null)e:for(;;){if(S===null)return;var te=S.tag;if(te===3||te===4){var ge=S.stateNode.containerInfo;if(ge===I)break;if(te===4)for(te=S.return;te!==null;){var Ze=te.tag;if((Ze===3||Ze===4)&&te.stateNode.containerInfo===I)return;te=te.return}for(;ge!==null;){if(te=On(ge),te===null)return;if(Ze=te.tag,Ze===5||Ze===6||Ze===26||Ze===27){S=O=te;continue e}ge=ge.parentNode}}S=S.return}Bh(function(){var mt=O,Dt=ru(g),qt=[];e:{var yt=Pf.get(l);if(yt!==void 0){var wt=sc,wn=l;switch(l){case"keypress":if(sa(g)===0)break e;case"keydown":case"keyup":wt=fp;break;case"focusin":wn="focus",wt=dl;break;case"focusout":wn="blur",wt=dl;break;case"beforeblur":case"afterblur":wt=dl;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=Us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=$s;break;case Qm:case Sp:case Lf:wt=Vm;break;case xs:wt=$h;break;case"scroll":case"scrollend":wt=sp;break;case"wheel":wt=Rf;break;case"copy":case"cut":case"paste":wt=lp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=Af;break;case"toggle":case"beforetoggle":wt=dp}var Hn=(u&4)!==0,oi=!Hn&&(l==="scroll"||l==="scrollend"),it=Hn?yt!==null?yt+"Capture":null:yt;Hn=[];for(var Ye=mt,ft;Ye!==null;){var Ot=Ye;if(ft=Ot.stateNode,Ot=Ot.tag,Ot!==5&&Ot!==26&&Ot!==27||ft===null||it===null||(Ot=xa(Ye,it),Ot!=null&&Hn.push($p(Ye,Ot,ft))),oi)break;Ye=Ye.return}0<Hn.length&&(yt=new wt(yt,wn,null,g,Dt),qt.push({event:yt,listeners:Hn}))}}if((u&7)===0){e:{if(yt=l==="mouseover"||l==="pointerover",wt=l==="mouseout"||l==="pointerout",yt&&g!==ac&&(wn=g.relatedTarget||g.fromElement)&&(On(wn)||wn[Rr]))break e;if((wt||yt)&&(yt=Dt.window===Dt?Dt:(yt=Dt.ownerDocument)?yt.defaultView||yt.parentWindow:window,wt?(wn=g.relatedTarget||g.toElement,wt=mt,wn=wn?On(wn):null,wn!==null&&(oi=p(wn),Hn=wn.tag,wn!==oi||Hn!==5&&Hn!==27&&Hn!==6)&&(wn=null)):(wt=null,wn=mt),wt!==wn)){if(Hn=vs,Ot="onMouseLeave",it="onMouseEnter",Ye="mouse",(l==="pointerout"||l==="pointerover")&&(Hn=Af,Ot="onPointerLeave",it="onPointerEnter",Ye="pointer"),oi=wt==null?yt:Wn(wt),ft=wn==null?yt:Wn(wn),yt=new Hn(Ot,Ye+"leave",wt,g,Dt),yt.target=oi,yt.relatedTarget=ft,Ot=null,On(Dt)===mt&&(Hn=new Hn(it,Ye+"enter",wn,g,Dt),Hn.target=ft,Hn.relatedTarget=oi,Ot=Hn),oi=Ot,wt&&wn)t:{for(Hn=wS,it=wt,Ye=wn,ft=0,Ot=it;Ot;Ot=Hn(Ot))ft++;Ot=0;for(var Gn=Ye;Gn;Gn=Hn(Gn))Ot++;for(;0<ft-Ot;)it=Hn(it),ft--;for(;0<Ot-ft;)Ye=Hn(Ye),Ot--;for(;ft--;){if(it===Ye||Ye!==null&&it===Ye.alternate){Hn=it;break t}it=Hn(it),Ye=Hn(Ye)}Hn=null}else Hn=null;wt!==null&&V_(qt,yt,wt,Hn,!1),wn!==null&&oi!==null&&V_(qt,oi,wn,Hn,!0)}}e:{if(yt=mt?Wn(mt):window,wt=yt.nodeName&&yt.nodeName.toLowerCase(),wt==="select"||wt==="input"&&yt.type==="file")var Wr=Xm;else if(Gh(yt))if(uu)Wr=Ym;else{Wr=gp;var Dn=Zh}else wt=yt.nodeName,!wt||wt.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?mt&&ic(mt.elementType)&&(Wr=Xm):Wr=Xh;if(Wr&&(Wr=Wr(l,mt))){Hh(qt,Wr,g,Dt);break e}Dn&&Dn(l,yt,mt),l==="focusout"&&mt&&yt.type==="number"&&mt.memoizedProps.value!=null&&ar(yt,"number",yt.value)}switch(Dn=mt?Wn(mt):window,l){case"focusin":(Gh(Dn)||Dn.contentEditable==="true")&&(pc=Dn,mc=mt,du=null);break;case"focusout":du=mc=pc=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,bp(qt,g,Dt);break;case"selectionchange":if(xp)break;case"keydown":case"keyup":bp(qt,g,Dt)}var ur;if(lu)e:{switch(l){case"compositionstart":var jr="onCompositionStart";break e;case"compositionend":jr="onCompositionEnd";break e;case"compositionupdate":jr="onCompositionUpdate";break e}jr=void 0}else ml?mp(l,g)&&(jr="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(jr="onCompositionStart");jr&&(cu&&g.locale!=="ko"&&(ml||jr!=="onCompositionStart"?jr==="onCompositionEnd"&&ml&&(ur=fl()):(Qr=Dt,oc="value"in Qr?Qr.value:Qr.textContent,ml=!0)),Dn=oh(mt,jr),0<Dn.length&&(jr=new cc(jr,l,null,g,Dt),qt.push({event:jr,listeners:Dn}),ur?jr.data=ur:(ur=pl(g),ur!==null&&(jr.data=ur)))),(ur=Cr?Zy(l,g):Xy(l,g))&&(jr=oh(mt,"onBeforeInput"),0<jr.length&&(Dn=new cc("onBeforeInput","beforeinput",null,g,Dt),qt.push({event:Dn,listeners:jr}),Dn.data=ur)),Dx(qt,l,mt,g,Dt)}N_(qt,u)})}function $p(l,u,g){return{instance:l,listener:u,currentTarget:g}}function oh(l,u){for(var g=u+"Capture",S=[];l!==null;){var I=l,O=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||O===null||(I=xa(l,g),I!=null&&S.unshift($p(l,I,O)),I=xa(l,u),I!=null&&S.push($p(l,I,O))),l.tag===3)return S;l=l.return}return[]}function wS(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function V_(l,u,g,S,I){for(var O=u._reactName,te=[];g!==null&&g!==S;){var ge=g,Ze=ge.alternate,mt=ge.stateNode;if(ge=ge.tag,Ze!==null&&Ze===S)break;ge!==5&&ge!==26&&ge!==27||mt===null||(Ze=mt,I?(mt=xa(g,O),mt!=null&&te.unshift($p(g,mt,Ze))):I||(mt=xa(g,O),mt!=null&&te.push($p(g,mt,Ze)))),g=g.return}te.length!==0&&l.push({event:u,listeners:te})}var Bx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function jx(l){return(typeof l=="string"?l:""+l).replace(Bx,`
`).replace(Fx,"")}function Nx(l,u){return u=jx(u),jx(l)===u}function ki(l,u,g,S,I,O){switch(g){case"children":typeof S=="string"?u==="body"||u==="textarea"&&S===""||Ra(l,S):(typeof S=="number"||typeof S=="bigint")&&u!=="body"&&Ra(l,""+S);break;case"className":Bi(l,"class",S);break;case"tabIndex":Bi(l,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(l,g,S);break;case"style":ys(l,S,O);break;case"data":if(u!=="object"){Bi(l,"data",S);break}case"src":case"href":if(S===""&&(u!=="a"||g!=="href")){l.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(g);break}S=wf(""+S),l.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(g==="formAction"?(u!=="input"&&ki(l,u,"name",I.name,I,null),ki(l,u,"formEncType",I.formEncType,I,null),ki(l,u,"formMethod",I.formMethod,I,null),ki(l,u,"formTarget",I.formTarget,I,null)):(ki(l,u,"encType",I.encType,I,null),ki(l,u,"method",I.method,I,null),ki(l,u,"target",I.target,I,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(g);break}S=wf(""+S),l.setAttribute(g,S);break;case"onClick":S!=null&&(l.onclick=vo);break;case"onScroll":S!=null&&Ir("scroll",l);break;case"onScrollEnd":S!=null&&Ir("scrollend",l);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(c(61));if(g=S.__html,g!=null){if(I.children!=null)throw Error(c(60));l.innerHTML=g}}break;case"multiple":l.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":l.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){l.removeAttribute("xlink:href");break}g=wf(""+S),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(g,""+S):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":S===!0?l.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(g,S):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?l.setAttribute(g,S):l.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?l.removeAttribute(g):l.setAttribute(g,S);break;case"popover":Ir("beforetoggle",l),Ir("toggle",l),Xa(l,"popover",S);break;case"xlinkActuate":Mi(l,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Mi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Mi(l,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Mi(l,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Mi(l,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Mi(l,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Mi(l,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Mi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Mi(l,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Xa(l,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=bf.get(g)||g,Xa(l,g,S))}}function G_(l,u,g,S,I,O){switch(g){case"style":ys(l,S,O);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(c(61));if(g=S.__html,g!=null){if(I.children!=null)throw Error(c(60));l.innerHTML=g}}break;case"children":typeof S=="string"?Ra(l,S):(typeof S=="number"||typeof S=="bigint")&&Ra(l,""+S);break;case"onScroll":S!=null&&Ir("scroll",l);break;case"onScrollEnd":S!=null&&Ir("scrollend",l);break;case"onClick":S!=null&&(l.onclick=vo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Aa.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(I=g.endsWith("Capture"),u=g.slice(2,I?g.length-7:void 0),O=l[pr]||null,O=O!=null?O[g]:null,typeof O=="function"&&l.removeEventListener(u,O,I),typeof S=="function")){typeof O!="function"&&O!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(u,S,I);break e}g in l?l[g]=S:S===!0?l.setAttribute(g,""):Xa(l,g,S)}}}function ro(l,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ir("error",l),Ir("load",l);var S=!1,I=!1,O;for(O in g)if(g.hasOwnProperty(O)){var te=g[O];if(te!=null)switch(O){case"src":S=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,u));default:ki(l,u,O,te,g,null)}}I&&ki(l,u,"srcSet",g.srcSet,g,null),S&&ki(l,u,"src",g.src,g,null);return;case"input":Ir("invalid",l);var ge=O=te=I=null,Ze=null,mt=null;for(S in g)if(g.hasOwnProperty(S)){var Dt=g[S];if(Dt!=null)switch(S){case"name":I=Dt;break;case"type":te=Dt;break;case"checked":Ze=Dt;break;case"defaultChecked":mt=Dt;break;case"value":O=Dt;break;case"defaultValue":ge=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(c(137,u));break;default:ki(l,u,S,Dt,g,null)}}Io(l,O,ge,Ze,mt,te,I,!1);return;case"select":Ir("invalid",l),S=te=O=null;for(I in g)if(g.hasOwnProperty(I)&&(ge=g[I],ge!=null))switch(I){case"value":O=ge;break;case"defaultValue":te=ge;break;case"multiple":S=ge;default:ki(l,u,I,ge,g,null)}u=O,g=te,l.multiple=!!S,u!=null?va(l,!!S,u,!1):g!=null&&va(l,!!S,g,!0);return;case"textarea":Ir("invalid",l),O=I=S=null;for(te in g)if(g.hasOwnProperty(te)&&(ge=g[te],ge!=null))switch(te){case"value":S=ge;break;case"defaultValue":I=ge;break;case"children":O=ge;break;case"dangerouslySetInnerHTML":if(ge!=null)throw Error(c(91));break;default:ki(l,u,te,ge,g,null)}ul(l,S,I,O);return;case"option":for(Ze in g)if(g.hasOwnProperty(Ze)&&(S=g[Ze],S!=null))switch(Ze){case"selected":l.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:ki(l,u,Ze,S,g,null)}return;case"dialog":Ir("beforetoggle",l),Ir("toggle",l),Ir("cancel",l),Ir("close",l);break;case"iframe":case"object":Ir("load",l);break;case"video":case"audio":for(S=0;S<Ll.length;S++)Ir(Ll[S],l);break;case"image":Ir("error",l),Ir("load",l);break;case"details":Ir("toggle",l);break;case"embed":case"source":case"link":Ir("error",l),Ir("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in g)if(g.hasOwnProperty(mt)&&(S=g[mt],S!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,u));default:ki(l,u,mt,S,g,null)}return;default:if(ic(u)){for(Dt in g)g.hasOwnProperty(Dt)&&(S=g[Dt],S!==void 0&&G_(l,u,Dt,S,g,void 0));return}}for(ge in g)g.hasOwnProperty(ge)&&(S=g[ge],S!=null&&ki(l,u,ge,S,g,null))}function Ux(l,u,g,S){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,O=null,te=null,ge=null,Ze=null,mt=null,Dt=null;for(wt in g){var qt=g[wt];if(g.hasOwnProperty(wt)&&qt!=null)switch(wt){case"checked":break;case"value":break;case"defaultValue":Ze=qt;default:S.hasOwnProperty(wt)||ki(l,u,wt,null,S,qt)}}for(var yt in S){var wt=S[yt];if(qt=g[yt],S.hasOwnProperty(yt)&&(wt!=null||qt!=null))switch(yt){case"type":O=wt;break;case"name":I=wt;break;case"checked":mt=wt;break;case"defaultChecked":Dt=wt;break;case"value":te=wt;break;case"defaultValue":ge=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(c(137,u));break;default:wt!==qt&&ki(l,u,yt,wt,S,qt)}}Ya(l,te,ge,Ze,mt,Dt,O,I);return;case"select":wt=te=ge=yt=null;for(O in g)if(Ze=g[O],g.hasOwnProperty(O)&&Ze!=null)switch(O){case"value":break;case"multiple":wt=Ze;default:S.hasOwnProperty(O)||ki(l,u,O,null,S,Ze)}for(I in S)if(O=S[I],Ze=g[I],S.hasOwnProperty(I)&&(O!=null||Ze!=null))switch(I){case"value":yt=O;break;case"defaultValue":ge=O;break;case"multiple":te=O;default:O!==Ze&&ki(l,u,I,O,S,Ze)}u=ge,g=te,S=wt,yt!=null?va(l,!!g,yt,!1):!!S!=!!g&&(u!=null?va(l,!!g,u,!0):va(l,!!g,g?[]:"",!1));return;case"textarea":wt=yt=null;for(ge in g)if(I=g[ge],g.hasOwnProperty(ge)&&I!=null&&!S.hasOwnProperty(ge))switch(ge){case"value":break;case"children":break;default:ki(l,u,ge,null,S,I)}for(te in S)if(I=S[te],O=g[te],S.hasOwnProperty(te)&&(I!=null||O!=null))switch(te){case"value":yt=I;break;case"defaultValue":wt=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(c(91));break;default:I!==O&&ki(l,u,te,I,S,O)}nu(l,yt,wt);return;case"option":for(var wn in g)if(yt=g[wn],g.hasOwnProperty(wn)&&yt!=null&&!S.hasOwnProperty(wn))switch(wn){case"selected":l.selected=!1;break;default:ki(l,u,wn,null,S,yt)}for(Ze in S)if(yt=S[Ze],wt=g[Ze],S.hasOwnProperty(Ze)&&yt!==wt&&(yt!=null||wt!=null))switch(Ze){case"selected":l.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:ki(l,u,Ze,yt,S,wt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Hn in g)yt=g[Hn],g.hasOwnProperty(Hn)&&yt!=null&&!S.hasOwnProperty(Hn)&&ki(l,u,Hn,null,S,yt);for(mt in S)if(yt=S[mt],wt=g[mt],S.hasOwnProperty(mt)&&yt!==wt&&(yt!=null||wt!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(c(137,u));break;default:ki(l,u,mt,yt,S,wt)}return;default:if(ic(u)){for(var oi in g)yt=g[oi],g.hasOwnProperty(oi)&&yt!==void 0&&!S.hasOwnProperty(oi)&&G_(l,u,oi,void 0,S,yt);for(Dt in S)yt=S[Dt],wt=g[Dt],!S.hasOwnProperty(Dt)||yt===wt||yt===void 0&&wt===void 0||G_(l,u,Dt,yt,S,wt);return}}for(var it in g)yt=g[it],g.hasOwnProperty(it)&&yt!=null&&!S.hasOwnProperty(it)&&ki(l,u,it,null,S,yt);for(qt in S)yt=S[qt],wt=g[qt],!S.hasOwnProperty(qt)||yt===wt||yt==null&&wt==null||ki(l,u,qt,yt,S,wt)}function $x(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Pa(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,g=performance.getEntriesByType("resource"),S=0;S<g.length;S++){var I=g[S],O=I.transferSize,te=I.initiatorType,ge=I.duration;if(O&&ge&&$x(te)){for(te=0,ge=I.responseEnd,S+=1;S<g.length;S++){var Ze=g[S],mt=Ze.startTime;if(mt>ge)break;var Dt=Ze.transferSize,qt=Ze.initiatorType;Dt&&$x(qt)&&(Ze=Ze.responseEnd,te+=Dt*(Ze<ge?1:(ge-mt)/(Ze-mt)))}if(--S,u+=8*(O+te)/(I.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var ds=null,qp=null;function sh(l){return l.nodeType===9?l:l.ownerDocument}function lh(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qx(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function H_(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var ch=null;function SS(){var l=window.event;return l&&l.type==="popstate"?l===ch?!1:(ch=l,!0):(ch=null,!1)}var Vx=typeof setTimeout=="function"?setTimeout:void 0,Gx=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,Hx=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(l){return W_.resolve(null).then(l).catch(ai)}:Vx;function ai(l){setTimeout(function(){throw l})}function Pl(l){return l==="head"}function Z_(l,u){var g=u,S=0;do{var I=g.nextSibling;if(l.removeChild(g),I&&I.nodeType===8)if(g=I.data,g==="/$"||g==="/&"){if(S===0){l.removeChild(I),Pd(u);return}S--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")S++;else if(g==="html")ju(l.ownerDocument.documentElement);else if(g==="head"){g=l.ownerDocument.head,ju(g);for(var O=g.firstChild;O;){var te=O.nextSibling,ge=O.nodeName;O[kr]||ge==="SCRIPT"||ge==="STYLE"||ge==="LINK"&&O.rel.toLowerCase()==="stylesheet"||g.removeChild(O),O=te}}else g==="body"&&ju(l.ownerDocument.body);g=I}while(g);Pd(u)}function X_(l,u){var g=l;l=0;do{var S=g.nextSibling;if(g.nodeType===1?u?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(u?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),S&&S.nodeType===8)if(g=S.data,g==="/$"){if(l===0)break;l--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||l++;g=S}while(g)}function il(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":il(g),gr(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function Rd(l,u,g,S){for(;l.nodeType===1;){var I=g;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!S&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(S){if(!l[kr])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(O=l.getAttribute("rel"),O==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(O!==I.rel||l.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||l.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||l.getAttribute("title")!==(I.title==null?null:I.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(O=l.getAttribute("src"),(O!==(I.src==null?null:I.src)||l.getAttribute("type")!==(I.type==null?null:I.type)||l.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&O&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var O=I.name==null?null:""+I.name;if(I.type==="hidden"&&l.getAttribute("name")===O)return l}else return l;if(l=Rs(l.nextSibling),l===null)break}return null}function Wx(l,u,g){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Rs(l.nextSibling),l===null))return null;return l}function Zx(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Rs(l.nextSibling),l===null))return null;return l}function Y_(l){return l.data==="$?"||l.data==="$~"}function K_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function TS(l,u){var g=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||g.readyState!=="loading")u();else{var S=function(){u(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),l._reactRetry=S}}function Rs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var Q_=null;function Xx(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"||g==="/&"){if(u===0)return Rs(l.nextSibling);u--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||u++}l=l.nextSibling}return null}function Yx(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(u===0)return l;u--}else g!=="/$"&&g!=="/&"||u++}l=l.previousSibling}return null}function Kx(l,u,g){switch(u=sh(g),l){case"html":if(l=u.documentElement,!l)throw Error(c(452));return l;case"head":if(l=u.head,!l)throw Error(c(453));return l;case"body":if(l=u.body,!l)throw Error(c(454));return l;default:throw Error(c(451))}}function ju(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);gr(l)}var io=new Map,J_=new Set;function uh(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var al=Pe.d;Pe.d={f:ES,r:CS,D:t0,C:Co,L:n0,m:Qx,X:Jx,S:ps,M:Vp};function ES(){var l=al.f(),u=wd();return l||u}function CS(l){var u=Er(l);u!==null&&u.tag===5&&u.type==="form"?Eu(u):al.r(l)}var kd=typeof document>"u"?null:document;function e0(l,u,g){var S=kd;if(S&&typeof u=="string"&&u){var I=Vn(u);I='link[rel="'+l+'"][href="'+I+'"]',typeof g=="string"&&(I+='[crossorigin="'+g+'"]'),J_.has(I)||(J_.add(I),l={rel:l,crossOrigin:g,href:u},S.querySelector(I)===null&&(u=S.createElement("link"),ro(u,"link",l),mi(u),S.head.appendChild(u)))}}function t0(l){al.D(l),e0("dns-prefetch",l,null)}function Co(l,u){al.C(l,u),e0("preconnect",l,u)}function n0(l,u,g){al.L(l,u,g);var S=kd;if(S&&l&&u){var I='link[rel="preload"][as="'+Vn(u)+'"]';u==="image"&&g&&g.imageSrcSet?(I+='[imagesrcset="'+Vn(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(I+='[imagesizes="'+Vn(g.imageSizes)+'"]')):I+='[href="'+Vn(l)+'"]';var O=I;switch(u){case"style":O=Nu(l);break;case"script":O=hh(l)}io.has(O)||(l=L({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:l,as:u},g),io.set(O,l),S.querySelector(I)!==null||u==="style"&&S.querySelector(Uu(O))||u==="script"&&S.querySelector(Gp(O))||(u=S.createElement("link"),ro(u,"link",l),mi(u),S.head.appendChild(u)))}}function Qx(l,u){al.m(l,u);var g=kd;if(g&&l){var S=u&&typeof u.as=="string"?u.as:"script",I='link[rel="modulepreload"][as="'+Vn(S)+'"][href="'+Vn(l)+'"]',O=I;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=hh(l)}if(!io.has(O)&&(l=L({rel:"modulepreload",href:l},u),io.set(O,l),g.querySelector(I)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Gp(O)))return}S=g.createElement("link"),ro(S,"link",l),mi(S),g.head.appendChild(S)}}}function ps(l,u,g){al.S(l,u,g);var S=kd;if(S&&l){var I=Ur(S).hoistableStyles,O=Nu(l);u=u||"default";var te=I.get(O);if(!te){var ge={loading:0,preload:null};if(te=S.querySelector(Uu(O)))ge.loading=5;else{l=L({rel:"stylesheet",href:l,"data-precedence":u},g),(g=io.get(O))&&Wp(l,g);var Ze=te=S.createElement("link");mi(Ze),ro(Ze,"link",l),Ze._p=new Promise(function(mt,Dt){Ze.onload=mt,Ze.onerror=Dt}),Ze.addEventListener("load",function(){ge.loading|=1}),Ze.addEventListener("error",function(){ge.loading|=2}),ge.loading|=4,Hp(te,u,S)}te={type:"stylesheet",instance:te,count:1,state:ge},I.set(O,te)}}}function Jx(l,u){al.X(l,u);var g=kd;if(g&&l){var S=Ur(g).hoistableScripts,I=hh(l),O=S.get(I);O||(O=g.querySelector(Gp(I)),O||(l=L({src:l,async:!0},u),(u=io.get(I))&&Og(l,u),O=g.createElement("script"),mi(O),ro(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(I,O))}}function Vp(l,u){al.M(l,u);var g=kd;if(g&&l){var S=Ur(g).hoistableScripts,I=hh(l),O=S.get(I);O||(O=g.querySelector(Gp(I)),O||(l=L({src:l,async:!0,type:"module"},u),(u=io.get(I))&&Og(l,u),O=g.createElement("script"),mi(O),ro(O,"link",l),g.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(I,O))}}function fh(l,u,g,S){var I=(I=Pt.current)?uh(I):null;if(!I)throw Error(c(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=Nu(g.href),g=Ur(I).hoistableStyles,S=g.get(u),S||(S={type:"style",instance:null,count:0,state:null},g.set(u,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=Nu(g.href);var O=Ur(I).hoistableStyles,te=O.get(l);if(te||(I=I.ownerDocument||I,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(l,te),(O=I.querySelector(Uu(l)))&&!O._p&&(te.instance=O,te.state.loading=5),io.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},io.set(l,g),O||tb(I,l,g,te.state))),u&&S===null)throw Error(c(528,""));return te}if(u&&S!==null)throw Error(c(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=hh(g),g=Ur(I).hoistableScripts,S=g.get(u),S||(S={type:"script",instance:null,count:0,state:null},g.set(u,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,l))}}function Nu(l){return'href="'+Vn(l)+'"'}function Uu(l){return'link[rel="stylesheet"]['+l+"]"}function eb(l){return L({},l,{"data-precedence":l.precedence,precedence:null})}function tb(l,u,g,S){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?S.loading=1:(u=l.createElement("link"),S.preload=u,u.addEventListener("load",function(){return S.loading|=1}),u.addEventListener("error",function(){return S.loading|=2}),ro(u,"link",g),mi(u),l.head.appendChild(u))}function hh(l){return'[src="'+Vn(l)+'"]'}function Gp(l){return"script[async]"+l}function r0(l,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var S=l.querySelector('style[data-href~="'+Vn(g.href)+'"]');if(S)return u.instance=S,mi(S),S;var I=L({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(l.ownerDocument||l).createElement("style"),mi(S),ro(S,"style",I),Hp(S,g.precedence,l),u.instance=S;case"stylesheet":I=Nu(g.href);var O=l.querySelector(Uu(I));if(O)return u.state.loading|=4,u.instance=O,mi(O),O;S=eb(g),(I=io.get(I))&&Wp(S,I),O=(l.ownerDocument||l).createElement("link"),mi(O);var te=O;return te._p=new Promise(function(ge,Ze){te.onload=ge,te.onerror=Ze}),ro(O,"link",S),u.state.loading|=4,Hp(O,g.precedence,l),u.instance=O;case"script":return O=hh(g.src),(I=l.querySelector(Gp(O)))?(u.instance=I,mi(I),I):(S=g,(I=io.get(O))&&(S=L({},g),Og(S,I)),l=l.ownerDocument||l,I=l.createElement("script"),mi(I),ro(I,"link",S),l.head.appendChild(I),u.instance=I);case"void":return null;default:throw Error(c(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(S=u.instance,u.state.loading|=4,Hp(S,g.precedence,l));return u.instance}function Hp(l,u,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=S.length?S[S.length-1]:null,O=I,te=0;te<S.length;te++){var ge=S[te];if(ge.dataset.precedence===u)O=ge;else if(O!==I)break}O?O.parentNode.insertBefore(l,O.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(l,u.firstChild))}function Wp(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function Og(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Bg=null;function i0(l,u,g){if(Bg===null){var S=new Map,I=Bg=new Map;I.set(g,S)}else I=Bg,S=I.get(g),S||(S=new Map,I.set(g,S));if(S.has(l))return S;for(S.set(l,null),g=g.getElementsByTagName(l),I=0;I<g.length;I++){var O=g[I];if(!(O[kr]||O[Fn]||l==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var te=O.getAttribute(u)||"";te=l+te;var ge=S.get(te);ge?ge.push(O):S.set(te,[O])}}return S}function Dl(l,u,g){l=l.ownerDocument||l,l.head.insertBefore(g,u==="title"?l.querySelector("head > title"):null)}function nb(l,u,g){if(g===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function a0(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function rb(l,u,g,S){if(g.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var I=Nu(S.href),O=u.querySelector(Uu(I));if(O){u=O._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=jg.bind(l),u.then(l,l)),g.state.loading|=4,g.instance=O,mi(O);return}O=u.ownerDocument||u,S=eb(S),(I=io.get(I))&&Wp(S,I),O=O.createElement("link"),mi(O);var te=O;te._p=new Promise(function(ge,Ze){te.onload=ge,te.onerror=Ze}),ro(O,"link",S),g.instance=O}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(g,u),(u=g.state.preload)&&(g.state.loading&3)===0&&(l.count++,g=jg.bind(l),u.addEventListener("load",g),u.addEventListener("error",g))}}var Fg=0;function MS(l,u){return l.stylesheets&&l.count===0&&Xp(l,l.stylesheets),0<l.count||0<l.imgCount?function(g){var S=setTimeout(function(){if(l.stylesheets&&Xp(l,l.stylesheets),l.unsuspend){var O=l.unsuspend;l.unsuspend=null,O()}},6e4+u);0<l.imgBytes&&Fg===0&&(Fg=62500*Pa());var I=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Xp(l,l.stylesheets),l.unsuspend)){var O=l.unsuspend;l.unsuspend=null,O()}},(l.imgBytes>Fg?50:800)+u);return l.unsuspend=g,function(){l.unsuspend=null,clearTimeout(S),clearTimeout(I)}}:null}function jg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xp(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Zp=null;function Xp(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Zp=new Map,u.forEach(Yp,l),Zp=null,jg.call(l))}function Yp(l,u){if(!(u.state.loading&4)){var g=Zp.get(l);if(g)var S=g.get(null);else{g=new Map,Zp.set(l,g);for(var I=l.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<I.length;O++){var te=I[O];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(g.set(te.dataset.precedence,te),S=te)}S&&g.set(null,S)}I=u.instance,te=I.getAttribute("data-precedence"),O=g.get(te)||S,O===S&&g.set(null,I),g.set(te,I),this.count++,S=jg.bind(this),I.addEventListener("load",S),I.addEventListener("error",S),O?O.parentNode.insertBefore(I,O.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(I,l.firstChild)),u.state.loading|=4}}var Id={$$typeof:Y,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function ib(l,u,g,S,I,O,te,ge,Ze){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=S,this.onUncaughtError=I,this.onCaughtError=O,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ze,this.incompleteTransitions=new Map}function ks(l,u,g,S,I,O,te,ge,Ze,mt,Dt,qt){return l=new ib(l,u,g,te,Ze,mt,Dt,qt,ge),u=1,O===!0&&(u|=24),O=ta(3,null,null,u),l.current=O,O.stateNode=l,u=Ys(),u.refCount++,l.pooledCache=u,u.refCount++,O.memoizedState={element:S,isDehydrated:g,cache:u},ve(O),l}function Ng(l){return l?(l=vc,l):vc}function dh(l,u,g,S,I,O){I=Ng(I),S.context===null?S.context=I:S.pendingContext=I,S=xe(u),S.payload={element:g},O=O===void 0?null:O,O!==null&&(S.callback=O),g=Ee(l,S,u),g!==null&&(no(g,l,u),ie(g,l,u))}function ph(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function Ug(l,u){ph(l,u),(l=l.alternate)&&ph(l,u)}function Kp(l){if(l.tag===13||l.tag===31){var u=_l(l,67108864);u!==null&&no(u,l,67108864),Ug(l,67108864)}}function o0(l){if(l.tag===13||l.tag===31){var u=qo();u=bn(u);var g=_l(l,u);g!==null&&no(g,l,u),Ug(l,u)}}var mh=!0;function $g(l,u,g,S){var I=pe.T;pe.T=null;var O=Pe.p;try{Pe.p=2,s0(l,u,g,S)}finally{Pe.p=O,pe.T=I}}function AS(l,u,g,S){var I=pe.T;pe.T=null;var O=Pe.p;try{Pe.p=8,s0(l,u,g,S)}finally{Pe.p=O,pe.T=I}}function s0(l,u,g,S){if(mh){var I=l0(S);if(I===null)q_(l,u,S,qg,g),$c(l,S);else if(ab(I,l,u,g,S))S.stopPropagation();else if($c(l,S),u&4&&-1<Jp.indexOf(l)){for(;I!==null;){var O=Er(I);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var te=Me(O.pendingLanes);if(te!==0){var ge=O;for(ge.pendingLanes|=2,ge.entangledLanes|=2;te;){var Ze=1<<31-fn(te);ge.entanglements[1]|=Ze,te&=~Ze}Vo(O),(ii&6)===0&&(Cg=_n()+500,Md(0))}}break;case 31:case 13:ge=_l(O,2),ge!==null&&no(ge,O,2),wd(),Ug(O,2)}if(O=l0(S),O===null&&q_(l,u,S,qg,g),O===I)break;I=O}I!==null&&S.stopPropagation()}else q_(l,u,S,null,g)}}function l0(l){return l=ru(l),c0(l)}var qg=null;function c0(l){if(qg=null,l=On(l),l!==null){var u=p(l);if(u===null)l=null;else{var g=u.tag;if(g===13){if(l=y(u),l!==null)return l;l=null}else if(g===31){if(l=b(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return qg=l,null}function gh(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case tr:return 2;case Tn:return 8;case Ln:case Xn:return 32;case lr:return 268435456;default:return 32}default:return 32}}var $u=!1,Ol=null,qu=null,Uc=null,Qp=new Map,yh=new Map,Vu=[],Jp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $c(l,u){switch(l){case"focusin":case"focusout":Ol=null;break;case"dragenter":case"dragleave":qu=null;break;case"mouseover":case"mouseout":Uc=null;break;case"pointerover":case"pointerout":Qp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":yh.delete(u.pointerId)}}function zd(l,u,g,S,I,O){return l===null||l.nativeEvent!==O?(l={blockedOn:u,domEventName:g,eventSystemFlags:S,nativeEvent:O,targetContainers:[I]},u!==null&&(u=Er(u),u!==null&&Kp(u)),l):(l.eventSystemFlags|=S,u=l.targetContainers,I!==null&&u.indexOf(I)===-1&&u.push(I),l)}function ab(l,u,g,S,I){switch(u){case"focusin":return Ol=zd(Ol,l,u,g,S,I),!0;case"dragenter":return qu=zd(qu,l,u,g,S,I),!0;case"mouseover":return Uc=zd(Uc,l,u,g,S,I),!0;case"pointerover":var O=I.pointerId;return Qp.set(O,zd(Qp.get(O)||null,l,u,g,S,I)),!0;case"gotpointercapture":return O=I.pointerId,yh.set(O,zd(yh.get(O)||null,l,u,g,S,I)),!0}return!1}function em(l){var u=On(l.target);if(u!==null){var g=p(u);if(g!==null){if(u=g.tag,u===13){if(u=y(g),u!==null){l.blockedOn=u,Mn(l.priority,function(){o0(g)});return}}else if(u===31){if(u=b(g),u!==null){l.blockedOn=u,Mn(l.priority,function(){o0(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ld(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=l0(l.nativeEvent);if(g===null){g=l.nativeEvent;var S=new g.constructor(g.type,g);ac=S,g.target.dispatchEvent(S),ac=null}else return u=Er(g),u!==null&&Kp(u),l.blockedOn=g,!1;u.shift()}return!0}function ob(l,u,g){Ld(l)&&g.delete(u)}function sb(){$u=!1,Ol!==null&&Ld(Ol)&&(Ol=null),qu!==null&&Ld(qu)&&(qu=null),Uc!==null&&Ld(Uc)&&(Uc=null),Qp.forEach(ob),yh.forEach(ob)}function Bl(l,u){l.blockedOn===u&&(l.blockedOn=null,$u||($u=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sb)))}var Vg=null;function qc(l){Vg!==l&&(Vg=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Vg===l&&(Vg=null);for(var u=0;u<l.length;u+=3){var g=l[u],S=l[u+1],I=l[u+2];if(typeof S!="function"){if(c0(S||g)===null)continue;break}var O=Er(g);O!==null&&(l.splice(u,3),u-=3,ls(O,{pending:!0,data:I,method:g.method,action:S},S,I))}}))}function Pd(l){function u(Ze){return Bl(Ze,l)}Ol!==null&&Bl(Ol,l),qu!==null&&Bl(qu,l),Uc!==null&&Bl(Uc,l),Qp.forEach(u),yh.forEach(u);for(var g=0;g<Vu.length;g++){var S=Vu[g];S.blockedOn===l&&(S.blockedOn=null)}for(;0<Vu.length&&(g=Vu[0],g.blockedOn===null);)em(g),g.blockedOn===null&&Vu.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var I=g[S],O=g[S+1],te=I[pr]||null;if(typeof O=="function")te||qc(g);else if(te){var ge=null;if(O&&O.hasAttribute("formAction")){if(I=O,te=O[pr]||null)ge=te.formAction;else if(c0(I)!==null)continue}else ge=te.action;typeof ge=="function"?g[S+1]=ge:(g.splice(S,3),S-=3),qc(g)}}}function Dd(){function l(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(te){return I=te})},focusReset:"manual",scroll:"manual"})}function u(){I!==null&&(I(),I=null),S||setTimeout(g,20)}function g(){if(!S&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,I=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(g,100),function(){S=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),I!==null&&(I(),I=null)}}}function _h(l){this._internalRoot=l}Gu.prototype.render=_h.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(c(409));var g=u.current,S=qo();dh(g,S,l,u,null,null)},Gu.prototype.unmount=_h.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;dh(l.current,2,null,l,null,null),wd(),u[Rr]=null}};function Gu(l){this._internalRoot=l}Gu.prototype.unstable_scheduleHydration=function(l){if(l){var u=Bn();l={blockedOn:null,target:l,priority:u};for(var g=0;g<Vu.length&&u!==0&&u<Vu[g].priority;g++);Vu.splice(g,0,l),g===0&&em(l)}};var Od=t.version;if(Od!=="19.2.0")throw Error(c(527,Od,"19.2.0"));Pe.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(c(188)):(l=Object.keys(l).join(","),Error(c(268,l)));return l=E(u),l=l!==null?R(l):null,l=l===null?null:l.stateNode,l};var Gg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hg.isDisabled&&Hg.supportsFiber)try{cr=Hg.inject(Gg),un=Hg}catch{}}return y0.createRoot=function(l,u){if(!h(l))throw Error(c(299));var g=!1,S="",I=hg,O=qi,te=c_;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(S=u.identifierPrefix),u.onUncaughtError!==void 0&&(I=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(te=u.onRecoverableError)),u=ks(l,1,!1,null,null,g,S,null,I,O,te,Dd),l[Rr]=u.current,$_(l),new _h(u)},y0.hydrateRoot=function(l,u,g){if(!h(l))throw Error(c(299));var S=!1,I="",O=hg,te=qi,ge=c_,Ze=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onUncaughtError!==void 0&&(O=g.onUncaughtError),g.onCaughtError!==void 0&&(te=g.onCaughtError),g.onRecoverableError!==void 0&&(ge=g.onRecoverableError),g.formState!==void 0&&(Ze=g.formState)),u=ks(l,1,!0,u,g??null,S,I,Ze,O,te,ge,Dd),u.context=Ng(null),g=u.current,S=qo(),S=bn(S),I=xe(S),I.callback=null,Ee(g,I,S),g=S,u.current.lanes=g,tt(u,g),Vo(u),l[Rr]=u.current,$_(l),new Gu(u)},y0.version="19.2.0",y0}var Lk;function M7(){if(Lk)return ZS.exports;Lk=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ZS.exports=C7(),ZS.exports}var A7=M7();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pk="popstate";function R7(e={}){function t(c,h){let{pathname:p,search:y,hash:b}=c.location;return CA("",{pathname:p,search:y,hash:b},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function r(c,h){return typeof h=="string"?h:tv(h)}return I7(t,r,null,e)}function ha(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function k7(){return Math.random().toString(36).substring(2,10)}function Dk(e,t){return{usr:e.state,key:e.key,idx:t}}function CA(e,t,r=null,c){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ay(t):t,state:r,key:t&&t.key||c||k7()}}function tv({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ay(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let c=e.indexOf("?");c>=0&&(t.search=e.substring(c),e=e.substring(0,c)),e&&(t.pathname=e)}return t}function I7(e,t,r,c={}){let{window:h=document.defaultView,v5Compat:p=!1}=c,y=h.history,b="POP",a=null,E=R();E==null&&(E=0,y.replaceState({...y.state,idx:E},""));function R(){return(y.state||{idx:null}).idx}function L(){b="POP";let q=R(),Z=q==null?null:q-E;E=q,a&&a({action:b,location:N.location,delta:Z})}function P(q,Z){b="PUSH";let Q=CA(N.location,q,Z);E=R()+1;let Y=Dk(Q,E),J=N.createHref(Q);try{y.pushState(Y,"",J)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;h.location.assign(J)}p&&a&&a({action:b,location:N.location,delta:1})}function F(q,Z){b="REPLACE";let Q=CA(N.location,q,Z);E=R();let Y=Dk(Q,E),J=N.createHref(Q);y.replaceState(Y,"",J),p&&a&&a({action:b,location:N.location,delta:0})}function U(q){return z7(q)}let N={get action(){return b},get location(){return e(h,y)},listen(q){if(a)throw new Error("A history only accepts one active listener");return h.addEventListener(Pk,L),a=q,()=>{h.removeEventListener(Pk,L),a=null}},createHref(q){return t(h,q)},createURL:U,encodeLocation(q){let Z=U(q);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:P,replace:F,go(q){return y.go(q)}};return N}function z7(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ha(r,"No window.location.(origin|href) available to create URL");let c=typeof e=="string"?e:tv(e);return c=c.replace(/ $/,"%20"),!t&&c.startsWith("//")&&(c=r+c),new URL(c,r)}function WO(e,t,r="/"){return L7(e,t,r,!1)}function L7(e,t,r,c){let h=typeof t=="string"?Ay(t):t,p=Ah(h.pathname||"/",r);if(p==null)return null;let y=ZO(e);P7(y);let b=null;for(let a=0;b==null&&a<y.length;++a){let E=G7(p);b=q7(y[a],E,c)}return b}function ZO(e,t=[],r=[],c="",h=!1){let p=(y,b,a=h,E)=>{let R={relativePath:E===void 0?y.path||"":E,caseSensitive:y.caseSensitive===!0,childrenIndex:b,route:y};if(R.relativePath.startsWith("/")){if(!R.relativePath.startsWith(c)&&a)return;ha(R.relativePath.startsWith(c),`Absolute route path "${R.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),R.relativePath=R.relativePath.slice(c.length)}let L=Eh([c,R.relativePath]),P=r.concat(R);y.children&&y.children.length>0&&(ha(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${L}".`),ZO(y.children,t,P,L,a)),!(y.path==null&&!y.index)&&t.push({path:L,score:U7(L,y.index),routesMeta:P})};return e.forEach((y,b)=>{if(y.path===""||!y.path?.includes("?"))p(y,b);else for(let a of XO(y.path))p(y,b,!0,a)}),t}function XO(e){let t=e.split("/");if(t.length===0)return[];let[r,...c]=t,h=r.endsWith("?"),p=r.replace(/\?$/,"");if(c.length===0)return h?[p,""]:[p];let y=XO(c.join("/")),b=[];return b.push(...y.map(a=>a===""?p:[p,a].join("/"))),h&&b.push(...y),b.map(a=>e.startsWith("/")&&a===""?"/":a)}function P7(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:$7(t.routesMeta.map(c=>c.childrenIndex),r.routesMeta.map(c=>c.childrenIndex)))}var D7=/^:[\w-]+$/,O7=3,B7=2,F7=1,j7=10,N7=-2,Ok=e=>e==="*";function U7(e,t){let r=e.split("/"),c=r.length;return r.some(Ok)&&(c+=N7),t&&(c+=B7),r.filter(h=>!Ok(h)).reduce((h,p)=>h+(D7.test(p)?O7:p===""?F7:j7),c)}function $7(e,t){return e.length===t.length&&e.slice(0,-1).every((c,h)=>c===t[h])?e[e.length-1]-t[t.length-1]:0}function q7(e,t,r=!1){let{routesMeta:c}=e,h={},p="/",y=[];for(let b=0;b<c.length;++b){let a=c[b],E=b===c.length-1,R=p==="/"?t:t.slice(p.length)||"/",L=Hb({path:a.relativePath,caseSensitive:a.caseSensitive,end:E},R),P=a.route;if(!L&&E&&r&&!c[c.length-1].route.index&&(L=Hb({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},R)),!L)return null;Object.assign(h,L.params),y.push({params:h,pathname:Eh([p,L.pathname]),pathnameBase:X7(Eh([p,L.pathnameBase])),route:P}),L.pathnameBase!=="/"&&(p=Eh([p,L.pathnameBase]))}return y}function Hb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,c]=V7(e.path,e.caseSensitive,e.end),h=t.match(r);if(!h)return null;let p=h[0],y=p.replace(/(.)\/+$/,"$1"),b=h.slice(1);return{params:c.reduce((E,{paramName:R,isOptional:L},P)=>{if(R==="*"){let U=b[P]||"";y=p.slice(0,p.length-U.length).replace(/(.)\/+$/,"$1")}const F=b[P];return L&&!F?E[R]=void 0:E[R]=(F||"").replace(/%2F/g,"/"),E},{}),pathname:p,pathnameBase:y,pattern:e}}function V7(e,t=!1,r=!0){Yc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let c=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,a)=>(c.push({paramName:b,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(c.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,t?void 0:"i"),c]}function G7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ah(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,c=e.charAt(r);return c&&c!=="/"?null:e.slice(r)||"/"}function H7(e,t="/"){let{pathname:r,search:c="",hash:h=""}=typeof e=="string"?Ay(e):e;return{pathname:r?r.startsWith("/")?r:W7(r,t):t,search:Y7(c),hash:K7(h)}}function W7(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?r.length>1&&r.pop():h!=="."&&r.push(h)}),r.length>1?r.join("/"):"/"}function QS(e,t,r,c){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Z7(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function O3(e){let t=Z7(e);return t.map((r,c)=>c===t.length-1?r.pathname:r.pathnameBase)}function B3(e,t,r,c=!1){let h;typeof e=="string"?h=Ay(e):(h={...e},ha(!h.pathname||!h.pathname.includes("?"),QS("?","pathname","search",h)),ha(!h.pathname||!h.pathname.includes("#"),QS("#","pathname","hash",h)),ha(!h.search||!h.search.includes("#"),QS("#","search","hash",h)));let p=e===""||h.pathname==="",y=p?"/":h.pathname,b;if(y==null)b=r;else{let L=t.length-1;if(!c&&y.startsWith("..")){let P=y.split("/");for(;P[0]==="..";)P.shift(),L-=1;h.pathname=P.join("/")}b=L>=0?t[L]:"/"}let a=H7(h,b),E=y&&y!=="/"&&y.endsWith("/"),R=(p||y===".")&&r.endsWith("/");return!a.pathname.endsWith("/")&&(E||R)&&(a.pathname+="/"),a}var Eh=e=>e.join("/").replace(/\/\/+/g,"/"),X7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,K7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var YO=["POST","PUT","PATCH","DELETE"];new Set(YO);var J7=["GET",...YO];new Set(J7);var Ry=V.createContext(null);Ry.displayName="DataRouter";var T1=V.createContext(null);T1.displayName="DataRouterState";V.createContext(!1);var KO=V.createContext({isTransitioning:!1});KO.displayName="ViewTransition";var e9=V.createContext(new Map);e9.displayName="Fetchers";var t9=V.createContext(null);t9.displayName="Await";var eu=V.createContext(null);eu.displayName="Navigation";var kv=V.createContext(null);kv.displayName="Location";var ec=V.createContext({outlet:null,matches:[],isDataRoute:!1});ec.displayName="Route";var F3=V.createContext(null);F3.displayName="RouteError";function n9(e,{relative:t}={}){ha(ky(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:c}=V.useContext(eu),{hash:h,pathname:p,search:y}=Iv(e,{relative:t}),b=p;return r!=="/"&&(b=p==="/"?r:Eh([r,p])),c.createHref({pathname:b,search:y,hash:h})}function ky(){return V.useContext(kv)!=null}function tp(){return ha(ky(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(kv).location}var QO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JO(e){V.useContext(eu).static||V.useLayoutEffect(e)}function j3(){let{isDataRoute:e}=V.useContext(ec);return e?_9():r9()}function r9(){ha(ky(),"useNavigate() may be used only in the context of a <Router> component.");let e=V.useContext(Ry),{basename:t,navigator:r}=V.useContext(eu),{matches:c}=V.useContext(ec),{pathname:h}=tp(),p=JSON.stringify(O3(c)),y=V.useRef(!1);return JO(()=>{y.current=!0}),V.useCallback((a,E={})=>{if(Yc(y.current,QO),!y.current)return;if(typeof a=="number"){r.go(a);return}let R=B3(a,JSON.parse(p),h,E.relative==="path");e==null&&t!=="/"&&(R.pathname=R.pathname==="/"?t:Eh([t,R.pathname])),(E.replace?r.replace:r.push)(R,E.state,E)},[t,r,p,h,e])}var i9=V.createContext(null);function a9(e){let t=V.useContext(ec).outlet;return V.useMemo(()=>t&&V.createElement(i9.Provider,{value:e},t),[t,e])}function o9(){let{matches:e}=V.useContext(ec),t=e[e.length-1];return t?t.params:{}}function Iv(e,{relative:t}={}){let{matches:r}=V.useContext(ec),{pathname:c}=tp(),h=JSON.stringify(O3(r));return V.useMemo(()=>B3(e,JSON.parse(h),c,t==="path"),[e,h,c,t])}function s9(e,t){return e6(e,t)}function e6(e,t,r,c,h){ha(ky(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=V.useContext(eu),{matches:y}=V.useContext(ec),b=y[y.length-1],a=b?b.params:{},E=b?b.pathname:"/",R=b?b.pathnameBase:"/",L=b&&b.route;{let Q=L&&L.path||"";t6(E,!L||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let P=tp(),F;if(t){let Q=typeof t=="string"?Ay(t):t;ha(R==="/"||Q.pathname?.startsWith(R),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${R}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),F=Q}else F=P;let U=F.pathname||"/",N=U;if(R!=="/"){let Q=R.replace(/^\//,"").split("/");N="/"+U.replace(/^\//,"").split("/").slice(Q.length).join("/")}let q=WO(e,{pathname:N});Yc(L||q!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),Yc(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=h9(q&&q.map(Q=>Object.assign({},Q,{params:Object.assign({},a,Q.params),pathname:Eh([R,p.encodeLocation?p.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?R:Eh([R,p.encodeLocation?p.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),y,r,c,h);return t&&Z?V.createElement(kv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},Z):Z}function l9(){let e=y9(),t=Q7(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,c="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:c},p={padding:"2px 4px",backgroundColor:c},y=null;return console.error("Error handled by React Router default ErrorBoundary:",e),y=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:p},"ErrorBoundary")," or"," ",V.createElement("code",{style:p},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},t),r?V.createElement("pre",{style:h},r):null,y)}var c9=V.createElement(l9,null),u9=class extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?V.createElement(ec.Provider,{value:this.props.routeContext},V.createElement(F3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f9({routeContext:e,match:t,children:r}){let c=V.useContext(Ry);return c&&c.static&&c.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(ec.Provider,{value:e},r)}function h9(e,t=[],r=null,c=null,h=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let p=e,y=r?.errors;if(y!=null){let E=p.findIndex(R=>R.route.id&&y?.[R.route.id]!==void 0);ha(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),p=p.slice(0,Math.min(p.length,E+1))}let b=!1,a=-1;if(r)for(let E=0;E<p.length;E++){let R=p[E];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(a=E),R.route.id){let{loaderData:L,errors:P}=r,F=R.route.loader&&!L.hasOwnProperty(R.route.id)&&(!P||P[R.route.id]===void 0);if(R.route.lazy||F){b=!0,a>=0?p=p.slice(0,a+1):p=[p[0]];break}}}return p.reduceRight((E,R,L)=>{let P,F=!1,U=null,N=null;r&&(P=y&&R.route.id?y[R.route.id]:void 0,U=R.route.errorElement||c9,b&&(a<0&&L===0?(t6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,N=null):a===L&&(F=!0,N=R.route.hydrateFallbackElement||null)));let q=t.concat(p.slice(0,L+1)),Z=()=>{let Q;return P?Q=U:F?Q=N:R.route.Component?Q=V.createElement(R.route.Component,null):R.route.element?Q=R.route.element:Q=E,V.createElement(f9,{match:R,routeContext:{outlet:E,matches:q,isDataRoute:r!=null},children:Q})};return r&&(R.route.ErrorBoundary||R.route.errorElement||L===0)?V.createElement(u9,{location:r.location,revalidation:r.revalidation,component:U,error:P,children:Z(),routeContext:{outlet:null,matches:q,isDataRoute:!0},unstable_onError:c}):Z()},null)}function N3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d9(e){let t=V.useContext(Ry);return ha(t,N3(e)),t}function p9(e){let t=V.useContext(T1);return ha(t,N3(e)),t}function m9(e){let t=V.useContext(ec);return ha(t,N3(e)),t}function U3(e){let t=m9(e),r=t.matches[t.matches.length-1];return ha(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function g9(){return U3("useRouteId")}function y9(){let e=V.useContext(F3),t=p9("useRouteError"),r=U3("useRouteError");return e!==void 0?e:t.errors?.[r]}function _9(){let{router:e}=d9("useNavigate"),t=U3("useNavigate"),r=V.useRef(!1);return JO(()=>{r.current=!0}),V.useCallback(async(h,p={})=>{Yc(r.current,QO),r.current&&(typeof h=="number"?e.navigate(h):await e.navigate(h,{fromRouteId:t,...p}))},[e,t])}var Bk={};function t6(e,t,r){!t&&!Bk[e]&&(Bk[e]=!0,Yc(!1,r))}V.memo(v9);function v9({routes:e,future:t,state:r,unstable_onError:c}){return e6(e,void 0,r,c,t)}function x9({to:e,replace:t,state:r,relative:c}){ha(ky(),"<Navigate> may be used only in the context of a <Router> component.");let{static:h}=V.useContext(eu);Yc(!h,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=V.useContext(ec),{pathname:y}=tp(),b=j3(),a=B3(e,O3(p),y,c==="path"),E=JSON.stringify(a);return V.useEffect(()=>{b(JSON.parse(E),{replace:t,state:r,relative:c})},[b,E,c,t,r]),null}function b9(e){return a9(e.context)}function $d(e){ha(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function w9({basename:e="/",children:t=null,location:r,navigationType:c="POP",navigator:h,static:p=!1}){ha(!ky(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=e.replace(/^\/*/,"/"),b=V.useMemo(()=>({basename:y,navigator:h,static:p,future:{}}),[y,h,p]);typeof r=="string"&&(r=Ay(r));let{pathname:a="/",search:E="",hash:R="",state:L=null,key:P="default"}=r,F=V.useMemo(()=>{let U=Ah(a,y);return U==null?null:{location:{pathname:U,search:E,hash:R,state:L,key:P},navigationType:c}},[y,a,E,R,L,P,c]);return Yc(F!=null,`<Router basename="${y}"> is not able to match the URL "${a}${E}${R}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:V.createElement(eu.Provider,{value:b},V.createElement(kv.Provider,{children:t,value:F}))}function S9({children:e,location:t}){return s9(MA(e),t)}function MA(e,t=[]){let r=[];return V.Children.forEach(e,(c,h)=>{if(!V.isValidElement(c))return;let p=[...t,h];if(c.type===V.Fragment){r.push.apply(r,MA(c.props.children,p));return}ha(c.type===$d,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ha(!c.props.index||!c.props.children,"An index route cannot have child routes.");let y={id:c.props.id||p.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(y.children=MA(c.props.children,p)),r.push(y)}),r}var Ib="get",zb="application/x-www-form-urlencoded";function E1(e){return e!=null&&typeof e.tagName=="string"}function T9(e){return E1(e)&&e.tagName.toLowerCase()==="button"}function E9(e){return E1(e)&&e.tagName.toLowerCase()==="form"}function C9(e){return E1(e)&&e.tagName.toLowerCase()==="input"}function M9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function A9(e,t){return e.button===0&&(!t||t==="_self")&&!M9(e)}var hb=null;function R9(){if(hb===null)try{new FormData(document.createElement("form"),0),hb=!1}catch{hb=!0}return hb}var k9=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function JS(e){return e!=null&&!k9.has(e)?(Yc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zb}"`),null):e}function I9(e,t){let r,c,h,p,y;if(E9(e)){let b=e.getAttribute("action");c=b?Ah(b,t):null,r=e.getAttribute("method")||Ib,h=JS(e.getAttribute("enctype"))||zb,p=new FormData(e)}else if(T9(e)||C9(e)&&(e.type==="submit"||e.type==="image")){let b=e.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||b.getAttribute("action");if(c=a?Ah(a,t):null,r=e.getAttribute("formmethod")||b.getAttribute("method")||Ib,h=JS(e.getAttribute("formenctype"))||JS(b.getAttribute("enctype"))||zb,p=new FormData(b,e),!R9()){let{name:E,type:R,value:L}=e;if(R==="image"){let P=E?`${E}.`:"";p.append(`${P}x`,"0"),p.append(`${P}y`,"0")}else E&&p.append(E,L)}}else{if(E1(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ib,c=null,h=zb,y=e}return p&&h==="text/plain"&&(y=p,p=void 0),{action:c,method:r.toLowerCase(),encType:h,formData:p,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $3(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function z9(e,t,r){let c=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return c.pathname==="/"?c.pathname=`_root.${r}`:t&&Ah(c.pathname,t)==="/"?c.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${r}`,c}async function L9(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P9(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function D9(e,t,r){let c=await Promise.all(e.map(async h=>{let p=t.routes[h.route.id];if(p){let y=await L9(p,r);return y.links?y.links():[]}return[]}));return j9(c.flat(1).filter(P9).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function Fk(e,t,r,c,h,p){let y=(a,E)=>r[E]?a.route.id!==r[E].route.id:!0,b=(a,E)=>r[E].pathname!==a.pathname||r[E].route.path?.endsWith("*")&&r[E].params["*"]!==a.params["*"];return p==="assets"?t.filter((a,E)=>y(a,E)||b(a,E)):p==="data"?t.filter((a,E)=>{let R=c.routes[a.route.id];if(!R||!R.hasLoader)return!1;if(y(a,E)||b(a,E))return!0;if(a.route.shouldRevalidate){let L=a.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof L=="boolean")return L}return!0}):[]}function O9(e,t,{includeHydrateFallback:r}={}){return B9(e.map(c=>{let h=t.routes[c.route.id];if(!h)return[];let p=[h.module];return h.clientActionModule&&(p=p.concat(h.clientActionModule)),h.clientLoaderModule&&(p=p.concat(h.clientLoaderModule)),r&&h.hydrateFallbackModule&&(p=p.concat(h.hydrateFallbackModule)),h.imports&&(p=p.concat(h.imports)),p}).flat(1))}function B9(e){return[...new Set(e)]}function F9(e){let t={},r=Object.keys(e).sort();for(let c of r)t[c]=e[c];return t}function j9(e,t){let r=new Set;return new Set(t),e.reduce((c,h)=>{let p=JSON.stringify(F9(h));return r.has(p)||(r.add(p),c.push({key:p,link:h})),c},[])}function n6(){let e=V.useContext(Ry);return $3(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function N9(){let e=V.useContext(T1);return $3(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var q3=V.createContext(void 0);q3.displayName="FrameworkContext";function r6(){let e=V.useContext(q3);return $3(e,"You must render this element inside a <HydratedRouter> element"),e}function U9(e,t){let r=V.useContext(q3),[c,h]=V.useState(!1),[p,y]=V.useState(!1),{onFocus:b,onBlur:a,onMouseEnter:E,onMouseLeave:R,onTouchStart:L}=t,P=V.useRef(null);V.useEffect(()=>{if(e==="render"&&y(!0),e==="viewport"){let N=Z=>{Z.forEach(Q=>{y(Q.isIntersecting)})},q=new IntersectionObserver(N,{threshold:.5});return P.current&&q.observe(P.current),()=>{q.disconnect()}}},[e]),V.useEffect(()=>{if(c){let N=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(N)}}},[c]);let F=()=>{h(!0)},U=()=>{h(!1),y(!1)};return r?e!=="intent"?[p,P,{}]:[p,P,{onFocus:_0(b,F),onBlur:_0(a,U),onMouseEnter:_0(E,F),onMouseLeave:_0(R,U),onTouchStart:_0(L,F)}]:[!1,P,{}]}function _0(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function $9({page:e,...t}){let{router:r}=n6(),c=V.useMemo(()=>WO(r.routes,e,r.basename),[r.routes,e,r.basename]);return c?V.createElement(V9,{page:e,matches:c,...t}):null}function q9(e){let{manifest:t,routeModules:r}=r6(),[c,h]=V.useState([]);return V.useEffect(()=>{let p=!1;return D9(e,t,r).then(y=>{p||h(y)}),()=>{p=!0}},[e,t,r]),c}function V9({page:e,matches:t,...r}){let c=tp(),{manifest:h,routeModules:p}=r6(),{basename:y}=n6(),{loaderData:b,matches:a}=N9(),E=V.useMemo(()=>Fk(e,t,a,h,c,"data"),[e,t,a,h,c]),R=V.useMemo(()=>Fk(e,t,a,h,c,"assets"),[e,t,a,h,c]),L=V.useMemo(()=>{if(e===c.pathname+c.search+c.hash)return[];let U=new Set,N=!1;if(t.forEach(Z=>{let Q=h.routes[Z.route.id];!Q||!Q.hasLoader||(!E.some(Y=>Y.route.id===Z.route.id)&&Z.route.id in b&&p[Z.route.id]?.shouldRevalidate||Q.hasClientLoader?N=!0:U.add(Z.route.id))}),U.size===0)return[];let q=z9(e,y,"data");return N&&U.size>0&&q.searchParams.set("_routes",t.filter(Z=>U.has(Z.route.id)).map(Z=>Z.route.id).join(",")),[q.pathname+q.search]},[y,b,c,h,E,t,e,p]),P=V.useMemo(()=>O9(R,h),[R,h]),F=q9(R);return V.createElement(V.Fragment,null,L.map(U=>V.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...r})),P.map(U=>V.createElement("link",{key:U,rel:"modulepreload",href:U,...r})),F.map(({key:U,link:N})=>V.createElement("link",{key:U,nonce:r.nonce,...N})))}function G9(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var i6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{i6&&(window.__reactRouterVersion="7.9.4")}catch{}function H9({basename:e,children:t,window:r}){let c=V.useRef();c.current==null&&(c.current=R7({window:r,v5Compat:!0}));let h=c.current,[p,y]=V.useState({action:h.action,location:h.location}),b=V.useCallback(a=>{V.startTransition(()=>y(a))},[y]);return V.useLayoutEffect(()=>h.listen(b),[h,b]),V.createElement(w9,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:h})}var a6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C1=V.forwardRef(function({onClick:t,discover:r="render",prefetch:c="none",relative:h,reloadDocument:p,replace:y,state:b,target:a,to:E,preventScrollReset:R,viewTransition:L,...P},F){let{basename:U}=V.useContext(eu),N=typeof E=="string"&&a6.test(E),q,Z=!1;if(typeof E=="string"&&N&&(q=E,i6))try{let Te=new URL(window.location.href),ue=E.startsWith("//")?new URL(Te.protocol+E):new URL(E),_e=Ah(ue.pathname,U);ue.origin===Te.origin&&_e!=null?E=_e+ue.search+ue.hash:Z=!0}catch{Yc(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=n9(E,{relative:h}),[Y,J,re]=U9(c,P),ae=X9(E,{replace:y,state:b,target:a,preventScrollReset:R,relative:h,viewTransition:L});function fe(Te){t&&t(Te),Te.defaultPrevented||ae(Te)}let Se=V.createElement("a",{...P,...re,href:q||Q,onClick:Z||p?t:fe,ref:G9(F,J),target:a,"data-discover":!N&&r==="render"?"true":void 0});return Y&&!N?V.createElement(V.Fragment,null,Se,V.createElement($9,{page:Q})):Se});C1.displayName="Link";var Lb=V.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:c="",end:h=!1,style:p,to:y,viewTransition:b,children:a,...E},R){let L=Iv(y,{relative:E.relative}),P=tp(),F=V.useContext(T1),{navigator:U,basename:N}=V.useContext(eu),q=F!=null&&eN(L)&&b===!0,Z=U.encodeLocation?U.encodeLocation(L).pathname:L.pathname,Q=P.pathname,Y=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;r||(Q=Q.toLowerCase(),Y=Y?Y.toLowerCase():null,Z=Z.toLowerCase()),Y&&N&&(Y=Ah(Y,N)||Y);const J=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let re=Q===Z||!h&&Q.startsWith(Z)&&Q.charAt(J)==="/",ae=Y!=null&&(Y===Z||!h&&Y.startsWith(Z)&&Y.charAt(Z.length)==="/"),fe={isActive:re,isPending:ae,isTransitioning:q},Se=re?t:void 0,Te;typeof c=="function"?Te=c(fe):Te=[c,re?"active":null,ae?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let ue=typeof p=="function"?p(fe):p;return V.createElement(C1,{...E,"aria-current":Se,className:Te,ref:R,style:ue,to:y,viewTransition:b},typeof a=="function"?a(fe):a)});Lb.displayName="NavLink";var W9=V.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:c,replace:h,state:p,method:y=Ib,action:b,onSubmit:a,relative:E,preventScrollReset:R,viewTransition:L,...P},F)=>{let U=Q9(),N=J9(b,{relative:E}),q=y.toLowerCase()==="get"?"get":"post",Z=typeof b=="string"&&a6.test(b),Q=Y=>{if(a&&a(Y),Y.defaultPrevented)return;Y.preventDefault();let J=Y.nativeEvent.submitter,re=J?.getAttribute("formmethod")||y;U(J||Y.currentTarget,{fetcherKey:t,method:re,navigate:r,replace:h,state:p,relative:E,preventScrollReset:R,viewTransition:L})};return V.createElement("form",{ref:F,method:q,action:N,onSubmit:c?a:Q,...P,"data-discover":!Z&&e==="render"?"true":void 0})});W9.displayName="Form";function Z9(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o6(e){let t=V.useContext(Ry);return ha(t,Z9(e)),t}function X9(e,{target:t,replace:r,state:c,preventScrollReset:h,relative:p,viewTransition:y}={}){let b=j3(),a=tp(),E=Iv(e,{relative:p});return V.useCallback(R=>{if(A9(R,t)){R.preventDefault();let L=r!==void 0?r:tv(a)===tv(E);b(e,{replace:L,state:c,preventScrollReset:h,relative:p,viewTransition:y})}},[a,b,E,r,c,t,e,h,p,y])}var Y9=0,K9=()=>`__${String(++Y9)}__`;function Q9(){let{router:e}=o6("useSubmit"),{basename:t}=V.useContext(eu),r=g9();return V.useCallback(async(c,h={})=>{let{action:p,method:y,encType:b,formData:a,body:E}=I9(c,t);if(h.navigate===!1){let R=h.fetcherKey||K9();await e.fetch(R,r,h.action||p,{preventScrollReset:h.preventScrollReset,formData:a,body:E,formMethod:h.method||y,formEncType:h.encType||b,flushSync:h.flushSync})}else await e.navigate(h.action||p,{preventScrollReset:h.preventScrollReset,formData:a,body:E,formMethod:h.method||y,formEncType:h.encType||b,replace:h.replace,state:h.state,fromRouteId:r,flushSync:h.flushSync,viewTransition:h.viewTransition})},[e,t,r])}function J9(e,{relative:t}={}){let{basename:r}=V.useContext(eu),c=V.useContext(ec);ha(c,"useFormAction must be used inside a RouteContext");let[h]=c.matches.slice(-1),p={...Iv(e||".",{relative:t})},y=tp();if(e==null){p.search=y.search;let b=new URLSearchParams(p.search),a=b.getAll("index");if(a.some(R=>R==="")){b.delete("index"),a.filter(L=>L).forEach(L=>b.append("index",L));let R=b.toString();p.search=R?`?${R}`:""}}return(!e||e===".")&&h.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(p.pathname=p.pathname==="/"?r:Eh([r,p.pathname])),tv(p)}function eN(e,{relative:t}={}){let r=V.useContext(KO);ha(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=o6("useViewTransitionState"),h=Iv(e,{relative:t});if(!r.isTransitioning)return!1;let p=Ah(r.currentLocation.pathname,c)||r.currentLocation.pathname,y=Ah(r.nextLocation.pathname,c)||r.nextLocation.pathname;return Hb(h.pathname,y)!=null||Hb(h.pathname,p)!=null}var V3=HO();const db=Ro(V3);var zv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tN={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},nN=class{#e=tN;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},fm=new nN;function rN(e){setTimeout(e,0)}var Sm=typeof window>"u"||"Deno"in globalThis;function Ls(){}function iN(e,t){return typeof e=="function"?e(t):e}function AA(e){return typeof e=="number"&&e>=0&&e!==1/0}function s6(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Hd(e,t){return typeof e=="function"?e(t):e}function jl(e,t){return typeof e=="function"?e(t):e}function jk(e,t){const{type:r="all",exact:c,fetchStatus:h,predicate:p,queryKey:y,stale:b}=e;if(y){if(c){if(t.queryHash!==G3(y,t.options))return!1}else if(!rv(t.queryKey,y))return!1}if(r!=="all"){const a=t.isActive();if(r==="active"&&!a||r==="inactive"&&a)return!1}return!(typeof b=="boolean"&&t.isStale()!==b||h&&h!==t.state.fetchStatus||p&&!p(t))}function Nk(e,t){const{exact:r,status:c,predicate:h,mutationKey:p}=e;if(p){if(!t.options.mutationKey)return!1;if(r){if(nv(t.options.mutationKey)!==nv(p))return!1}else if(!rv(t.options.mutationKey,p))return!1}return!(c&&t.state.status!==c||h&&!h(t))}function G3(e,t){return(t?.queryKeyHashFn||nv)(e)}function nv(e){return JSON.stringify(e,(t,r)=>kA(r)?Object.keys(r).sort().reduce((c,h)=>(c[h]=r[h],c),{}):r)}function rv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>rv(e[r],t[r])):!1}var aN=Object.prototype.hasOwnProperty;function l6(e,t){if(e===t)return e;const r=Uk(e)&&Uk(t);if(!r&&!(kA(e)&&kA(t)))return t;const h=(r?e:Object.keys(e)).length,p=r?t:Object.keys(t),y=p.length,b=r?new Array(y):{};let a=0;for(let E=0;E<y;E++){const R=r?E:p[E],L=e[R],P=t[R];if(L===P){b[R]=L,(r?E<h:aN.call(e,R))&&a++;continue}if(L===null||P===null||typeof L!="object"||typeof P!="object"){b[R]=P;continue}const F=l6(L,P);b[R]=F,F===L&&a++}return h===y&&a===h?e:b}function RA(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Uk(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kA(e){if(!$k(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!$k(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function $k(e){return Object.prototype.toString.call(e)==="[object Object]"}function oN(e){return new Promise(t=>{fm.setTimeout(t,e)})}function IA(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?l6(e,t):t}function sN(e,t,r=0){const c=[...e,t];return r&&c.length>r?c.slice(1):c}function lN(e,t,r=0){const c=[t,...e];return r&&c.length>r?c.slice(0,-1):c}var H3=Symbol();function c6(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===H3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function cN(e,t){return typeof e=="function"?e(...t):!!e}var uN=class extends zv{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Sm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},W3=new uN;function zA(){let e,t;const r=new Promise((h,p)=>{e=h,t=p});r.status="pending",r.catch(()=>{});function c(h){Object.assign(r,h),delete r.resolve,delete r.reject}return r.resolve=h=>{c({status:"fulfilled",value:h}),e(h)},r.reject=h=>{c({status:"rejected",reason:h}),t(h)},r}var fN=rN;function hN(){let e=[],t=0,r=b=>{b()},c=b=>{b()},h=fN;const p=b=>{t?e.push(b):h(()=>{r(b)})},y=()=>{const b=e;e=[],b.length&&h(()=>{c(()=>{b.forEach(a=>{r(a)})})})};return{batch:b=>{let a;t++;try{a=b()}finally{t--,t||y()}return a},batchCalls:b=>(...a)=>{p(()=>{b(...a)})},schedule:p,setNotifyFunction:b=>{r=b},setBatchNotifyFunction:b=>{c=b},setScheduler:b=>{h=b}}}var Ao=hN(),dN=class extends zv{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Sm&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Wb=new dN;function pN(e){return Math.min(1e3*2**e,3e4)}function u6(e){return(e??"online")==="online"?Wb.isOnline():!0}var LA=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function f6(e){let t=!1,r=0,c;const h=zA(),p=()=>h.status!=="pending",y=N=>{if(!p()){const q=new LA(N);P(q),e.onCancel?.(q)}},b=()=>{t=!0},a=()=>{t=!1},E=()=>W3.isFocused()&&(e.networkMode==="always"||Wb.isOnline())&&e.canRun(),R=()=>u6(e.networkMode)&&e.canRun(),L=N=>{p()||(c?.(),h.resolve(N))},P=N=>{p()||(c?.(),h.reject(N))},F=()=>new Promise(N=>{c=q=>{(p()||E())&&N(q)},e.onPause?.()}).then(()=>{c=void 0,p()||e.onContinue?.()}),U=()=>{if(p())return;let N;const q=r===0?e.initialPromise:void 0;try{N=q??e.fn()}catch(Z){N=Promise.reject(Z)}Promise.resolve(N).then(L).catch(Z=>{if(p())return;const Q=e.retry??(Sm?0:3),Y=e.retryDelay??pN,J=typeof Y=="function"?Y(r,Z):Y,re=Q===!0||typeof Q=="number"&&r<Q||typeof Q=="function"&&Q(r,Z);if(t||!re){P(Z);return}r++,e.onFail?.(r,Z),oN(J).then(()=>E()?void 0:F()).then(()=>{t?P(Z):U()})})};return{promise:h,status:()=>h.status,cancel:y,continue:()=>(c?.(),h),cancelRetry:b,continueRetry:a,canStart:R,start:()=>(R()?U():F().then(U),h)}}var h6=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),AA(this.gcTime)&&(this.#e=fm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sm?1/0:300*1e3))}clearGcTimeout(){this.#e&&(fm.clearTimeout(this.#e),this.#e=void 0)}},mN=class extends h6{#e;#t;#n;#i;#r;#s;#o;constructor(e){super(),this.#o=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=qk(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=qk(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const r=IA(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Ls).catch(Ls):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>jl(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===H3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Hd(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!s6(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(a=>a.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,c=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},h=()=>{const b=c6(this.options,t),E=(()=>{const R={client:this.#i,queryKey:this.queryKey,meta:this.meta};return c(R),R})();return this.#o=!1,this.options.persister?this.options.persister(b,E,this):b(E)},y=(()=>{const b={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:h};return c(b),b})();this.options.behavior?.onFetch(y,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==y.fetchOptions?.meta)&&this.#a({type:"fetch",meta:y.fetchOptions?.meta}),this.#r=f6({initialPromise:t?.initialPromise,fn:y.fetchFn,onCancel:b=>{b instanceof LA&&b.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(b,a)=>{this.#a({type:"failed",failureCount:b,error:a})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode,canRun:()=>!0});try{const b=await this.#r.start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),this.#n.config.onSuccess?.(b,this),this.#n.config.onSettled?.(b,this.state.error,this),b}catch(b){if(b instanceof LA){if(b.silent)return this.#r.promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw this.#a({type:"error",error:b}),this.#n.config.onError?.(b,this),this.#n.config.onSettled?.(this.state.data,b,this),b}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...d6(r.data,this.options),fetchMeta:e.meta??null};case"success":const c={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?c:void 0,c;case"error":const h=e.error;return{...r,error:h,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ao.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function d6(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:u6(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qk(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,c=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var gN=class extends zv{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=zA(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#s;#o;#a;#m;#h;#d;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Vk(this.#t,this.options)?this.#f():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return PA(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return PA(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof jl(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),t._defaulted&&!RA(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const c=this.hasListeners();c&&Gk(this.#t,r,this.options,t)&&this.#f(),this.updateResult(),c&&(this.#t!==r||jl(this.options.enabled,this.#t)!==jl(t.enabled,this.#t)||Hd(this.options.staleTime,this.#t)!==Hd(t.staleTime,this.#t))&&this.#g();const h=this.#y();c&&(this.#t!==r||jl(this.options.enabled,this.#t)!==jl(t.enabled,this.#t)||h!==this.#l)&&this.#_(h)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return _N(this,r)&&(this.#i=r,this.#s=this.options,this.#r=this.#t.state),r}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(r,c)=>(this.trackProp(c),t?.(c),c==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,c))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#f(e){this.#w();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Ls)),t}#g(){this.#x();const e=Hd(this.options.staleTime,this.#t);if(Sm||this.#i.isStale||!AA(e))return;const r=s6(this.#i.dataUpdatedAt,e)+1;this.#c=fm.setTimeout(()=>{this.#i.isStale||this.updateResult()},r)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(e){this.#b(),this.#l=e,!(Sm||jl(this.options.enabled,this.#t)===!1||!AA(this.#l)||this.#l===0)&&(this.#u=fm.setInterval(()=>{(this.options.refetchIntervalInBackground||W3.isFocused())&&this.#f()},this.#l))}#v(){this.#g(),this.#_(this.#y())}#x(){this.#c&&(fm.clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(fm.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,c=this.options,h=this.#i,p=this.#r,y=this.#s,a=e!==r?e.state:this.#n,{state:E}=e;let R={...E},L=!1,P;if(t._optimisticResults){const Se=this.hasListeners(),Te=!Se&&Vk(e,t),ue=Se&&Gk(e,r,t,c);(Te||ue)&&(R={...R,...d6(E.data,e.options)}),t._optimisticResults==="isRestoring"&&(R.fetchStatus="idle")}let{error:F,errorUpdatedAt:U,status:N}=R;P=R.data;let q=!1;if(t.placeholderData!==void 0&&P===void 0&&N==="pending"){let Se;h?.isPlaceholderData&&t.placeholderData===y?.placeholderData?(Se=h.data,q=!0):Se=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,Se!==void 0&&(N="success",P=IA(h?.data,Se,t),L=!0)}if(t.select&&P!==void 0&&!q)if(h&&P===p?.data&&t.select===this.#m)P=this.#h;else try{this.#m=t.select,P=t.select(P),P=IA(h?.data,P,t),this.#h=P,this.#a=null}catch(Se){this.#a=Se}this.#a&&(F=this.#a,P=this.#h,U=Date.now(),N="error");const Z=R.fetchStatus==="fetching",Q=N==="pending",Y=N==="error",J=Q&&Z,re=P!==void 0,fe={status:N,fetchStatus:R.fetchStatus,isPending:Q,isSuccess:N==="success",isError:Y,isInitialLoading:J,isLoading:J,data:P,dataUpdatedAt:R.dataUpdatedAt,error:F,errorUpdatedAt:U,failureCount:R.fetchFailureCount,failureReason:R.fetchFailureReason,errorUpdateCount:R.errorUpdateCount,isFetched:R.dataUpdateCount>0||R.errorUpdateCount>0,isFetchedAfterMount:R.dataUpdateCount>a.dataUpdateCount||R.errorUpdateCount>a.errorUpdateCount,isFetching:Z,isRefetching:Z&&!Q,isLoadingError:Y&&!re,isPaused:R.fetchStatus==="paused",isPlaceholderData:L,isRefetchError:Y&&re,isStale:Z3(e,t),refetch:this.refetch,promise:this.#o,isEnabled:jl(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const Se=_e=>{fe.status==="error"?_e.reject(fe.error):fe.data!==void 0&&_e.resolve(fe.data)},Te=()=>{const _e=this.#o=fe.promise=zA();Se(_e)},ue=this.#o;switch(ue.status){case"pending":e.queryHash===r.queryHash&&Se(ue);break;case"fulfilled":(fe.status==="error"||fe.data!==ue.value)&&Te();break;case"rejected":(fe.status!=="error"||fe.error!==ue.reason)&&Te();break}}return fe}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#s=this.options,this.#r.data!==void 0&&(this.#d=this.#t),RA(t,e))return;this.#i=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:c}=this.options,h=typeof c=="function"?c():c;if(h==="all"||!h&&!this.#p.size)return!0;const p=new Set(h??this.#p);return this.options.throwOnError&&p.add("error"),Object.keys(this.#i).some(y=>{const b=y;return this.#i[b]!==e[b]&&p.has(b)})};this.#S({listeners:r()})}#w(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(e){Ao.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function yN(e,t){return jl(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Vk(e,t){return yN(e,t)||e.state.data!==void 0&&PA(e,t,t.refetchOnMount)}function PA(e,t,r){if(jl(t.enabled,e)!==!1&&Hd(t.staleTime,e)!=="static"){const c=typeof r=="function"?r(e):r;return c==="always"||c!==!1&&Z3(e,t)}return!1}function Gk(e,t,r,c){return(e!==t||jl(c.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Z3(e,r)}function Z3(e,t){return jl(t.enabled,e)!==!1&&e.isStaleByTime(Hd(t.staleTime,e))}function _N(e,t){return!RA(e.getCurrentResult(),t)}function Hk(e){return{onFetch:(t,r)=>{const c=t.options,h=t.fetchOptions?.meta?.fetchMore?.direction,p=t.state.data?.pages||[],y=t.state.data?.pageParams||[];let b={pages:[],pageParams:[]},a=0;const E=async()=>{let R=!1;const L=U=>{Object.defineProperty(U,"signal",{enumerable:!0,get:()=>(t.signal.aborted?R=!0:t.signal.addEventListener("abort",()=>{R=!0}),t.signal)})},P=c6(t.options,t.fetchOptions),F=async(U,N,q)=>{if(R)return Promise.reject();if(N==null&&U.pages.length)return Promise.resolve(U);const Q=(()=>{const ae={client:t.client,queryKey:t.queryKey,pageParam:N,direction:q?"backward":"forward",meta:t.options.meta};return L(ae),ae})(),Y=await P(Q),{maxPages:J}=t.options,re=q?lN:sN;return{pages:re(U.pages,Y,J),pageParams:re(U.pageParams,N,J)}};if(h&&p.length){const U=h==="backward",N=U?vN:Wk,q={pages:p,pageParams:y},Z=N(c,q);b=await F(q,Z,U)}else{const U=e??p.length;do{const N=a===0?y[0]??c.initialPageParam:Wk(c,b);if(a>0&&N==null)break;b=await F(b,N),a++}while(a<U)}return b};t.options.persister?t.fetchFn=()=>t.options.persister?.(E,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=E}}}function Wk(e,{pages:t,pageParams:r}){const c=t.length-1;return t.length>0?e.getNextPageParam(t[c],t,r[c],r):void 0}function vN(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var xN=class extends h6{#e;#t;#n;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||bN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=f6({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(p,y)=>{this.#r({type:"failed",failureCount:p,error:y})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const c=this.state.status==="pending",h=!this.#i.canStart();try{if(c)t();else{this.#r({type:"pending",variables:e,isPaused:h}),await this.#n.config.onMutate?.(e,this,r);const y=await this.options.onMutate?.(e,r);y!==this.state.context&&this.#r({type:"pending",context:y,variables:e,isPaused:h})}const p=await this.#i.start();return await this.#n.config.onSuccess?.(p,e,this.state.context,this,r),await this.options.onSuccess?.(p,e,this.state.context,r),await this.#n.config.onSettled?.(p,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(p,null,e,this.state.context,r),this.#r({type:"success",data:p}),p}catch(p){try{throw await this.#n.config.onError?.(p,e,this.state.context,this,r),await this.options.onError?.(p,e,this.state.context,r),await this.#n.config.onSettled?.(void 0,p,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,p,e,this.state.context,r),p}finally{this.#r({type:"error",error:p})}}finally{this.#n.runNext(this)}}#r(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ao.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function bN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wN=class extends zv{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,r){const c=new xN({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:r});return this.add(c),c}add(e){this.#e.add(e);const t=pb(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=pb(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const c=r.indexOf(e);c!==-1&&r.splice(c,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=pb(e);if(typeof t=="string"){const c=this.#t.get(t)?.find(h=>h.state.status==="pending");return!c||c===e}else return!0}runNext(e){const t=pb(e);return typeof t=="string"?this.#t.get(t)?.find(c=>c!==e&&c.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ao.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Nk(t,r))}findAll(e={}){return this.getAll().filter(t=>Nk(e,t))}notify(e){Ao.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ao.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ls))))}};function pb(e){return e.options.scope?.id}var SN=class extends zv{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const c=t.queryKey,h=t.queryHash??G3(c,t);let p=this.get(h);return p||(p=new mN({client:e,queryKey:c,queryHash:h,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(c)}),this.add(p)),p}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ao.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>jk(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>jk(e,r)):t}notify(e){Ao.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ao.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ao.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},TN=class{#e;#t;#n;#i;#r;#s;#o;#a;constructor(e={}){this.#e=e.queryCache||new SN,this.#t=e.mutationCache||new wN,this.#n=e.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=W3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Wb.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),c=r.state.data;return c===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Hd(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(c))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const c=r.data;return[t,c]})}setQueryData(e,t,r){const c=this.defaultQueryOptions({queryKey:e}),p=this.#e.get(c.queryHash)?.state.data,y=iN(t,p);if(y!==void 0)return this.#e.build(this,c).setData(y,{...r,manual:!0})}setQueriesData(e,t,r){return Ao.batch(()=>this.#e.findAll(e).map(({queryKey:c})=>[c,this.setQueryData(c,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ao.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ao.batch(()=>(r.findAll(e).forEach(c=>{c.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},c=Ao.batch(()=>this.#e.findAll(e).map(h=>h.cancel(r)));return Promise.all(c).then(Ls).catch(Ls)}invalidateQueries(e,t={}){return Ao.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},c=Ao.batch(()=>this.#e.findAll(e).filter(h=>!h.isDisabled()&&!h.isStatic()).map(h=>{let p=h.fetch(void 0,r);return r.throwOnError||(p=p.catch(Ls)),h.state.fetchStatus==="paused"?Promise.resolve():p}));return Promise.all(c).then(Ls)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Hd(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ls).catch(Ls)}fetchInfiniteQuery(e){return e.behavior=Hk(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ls).catch(Ls)}ensureInfiniteQueryData(e){return e.behavior=Hk(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Wb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#i.set(nv(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(c=>{rv(e,c.queryKey)&&Object.assign(r,c.defaultOptions)}),r}setMutationDefaults(e,t){this.#r.set(nv(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],r={};return t.forEach(c=>{rv(e,c.mutationKey)&&Object.assign(r,c.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=G3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===H3&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},p6=V.createContext(void 0),EN=e=>{const t=V.useContext(p6);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},CN=({client:e,children:t})=>(V.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(p6.Provider,{value:e,children:t})),m6=V.createContext(!1),MN=()=>V.useContext(m6);m6.Provider;function AN(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var RN=V.createContext(AN()),kN=()=>V.useContext(RN),IN=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},zN=e=>{V.useEffect(()=>{e.clearReset()},[e])},LN=({result:e,errorResetBoundary:t,throwOnError:r,query:c,suspense:h})=>e.isError&&!t.isReset()&&!e.isFetching&&c&&(h&&e.data===void 0||cN(r,[e.error,c])),PN=e=>{if(e.suspense){const r=h=>h==="static"?h:Math.max(h??1e3,1e3),c=e.staleTime;e.staleTime=typeof c=="function"?(...h)=>r(c(...h)):r(c),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},DN=(e,t)=>e.isLoading&&e.isFetching&&!t,ON=(e,t)=>e?.suspense&&t.isPending,Zk=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function BN(e,t,r){const c=MN(),h=kN(),p=EN(),y=p.defaultQueryOptions(e);p.getDefaultOptions().queries?._experimental_beforeQuery?.(y),y._optimisticResults=c?"isRestoring":"optimistic",PN(y),IN(y,h),zN(h);const b=!p.getQueryCache().get(y.queryHash),[a]=V.useState(()=>new t(p,y)),E=a.getOptimisticResult(y),R=!c&&e.subscribed!==!1;if(V.useSyncExternalStore(V.useCallback(L=>{const P=R?a.subscribe(Ao.batchCalls(L)):Ls;return a.updateResult(),P},[a,R]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),V.useEffect(()=>{a.setOptions(y)},[y,a]),ON(y,E))throw Zk(y,a,h);if(LN({result:E,errorResetBoundary:h,throwOnError:y.throwOnError,query:p.getQueryCache().get(y.queryHash),suspense:y.suspense}))throw E.error;return p.getDefaultOptions().queries?._experimental_afterQuery?.(y,E),y.experimental_prefetchInRender&&!Sm&&DN(E,c)&&(b?Zk(y,a,h):p.getQueryCache().get(y.queryHash)?.promise)?.catch(Ls).finally(()=>{a.updateResult()}),y.notifyOnChangeProps?E:a.trackResult(E)}function g6(e,t){return BN(e,gN)}var FN=function(){return null};const iv={black:"#000",white:"#fff"},Xg={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Yg={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Kg={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Qg={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Jg={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},v0={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},DA={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Rh(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(c=>r.searchParams.append("args[]",c)),`Minified MUI error #${e}; visit ${r} for the full message.`}const lf="$$material";function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},Zb.apply(null,arguments)}function jN(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function NN(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var UN=(function(){function e(r){var c=this;this._insertTag=function(h){var p;c.tags.length===0?c.insertionPoint?p=c.insertionPoint.nextSibling:c.prepend?p=c.container.firstChild:p=c.before:p=c.tags[c.tags.length-1].nextSibling,c.container.insertBefore(h,p),c.tags.push(h)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(c){c.forEach(this._insertTag)},t.insert=function(c){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(NN(this));var h=this.tags[this.tags.length-1];if(this.isSpeedy){var p=jN(h);try{p.insertRule(c,p.cssRules.length)}catch{}}else h.appendChild(document.createTextNode(c));this.ctr++},t.flush=function(){this.tags.forEach(function(c){var h;return(h=c.parentNode)==null?void 0:h.removeChild(c)}),this.tags=[],this.ctr=0},e})(),Xo="-ms-",Xb="-moz-",Si="-webkit-",y6="comm",X3="rule",Y3="decl",$N="@import",_6="@keyframes",qN="@layer",VN=Math.abs,M1=String.fromCharCode,GN=Object.assign;function HN(e,t){return Mo(e,0)^45?(((t<<2^Mo(e,0))<<2^Mo(e,1))<<2^Mo(e,2))<<2^Mo(e,3):0}function v6(e){return e.trim()}function WN(e,t){return(e=t.exec(e))?e[0]:e}function Ti(e,t,r){return e.replace(t,r)}function OA(e,t){return e.indexOf(t)}function Mo(e,t){return e.charCodeAt(t)|0}function av(e,t,r){return e.slice(t,r)}function nf(e){return e.length}function K3(e){return e.length}function mb(e,t){return t.push(e),e}function ZN(e,t){return e.map(t).join("")}var A1=1,_y=1,x6=0,Fs=0,Wa=0,Iy="";function R1(e,t,r,c,h,p,y){return{value:e,root:t,parent:r,type:c,props:h,children:p,line:A1,column:_y,length:y,return:""}}function x0(e,t){return GN(R1("",null,null,"",null,null,0),e,{length:-e.length},t)}function XN(){return Wa}function YN(){return Wa=Fs>0?Mo(Iy,--Fs):0,_y--,Wa===10&&(_y=1,A1--),Wa}function sl(){return Wa=Fs<x6?Mo(Iy,Fs++):0,_y++,Wa===10&&(_y=1,A1++),Wa}function cf(){return Mo(Iy,Fs)}function Pb(){return Fs}function Lv(e,t){return av(Iy,e,t)}function ov(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function b6(e){return A1=_y=1,x6=nf(Iy=e),Fs=0,[]}function w6(e){return Iy="",e}function Db(e){return v6(Lv(Fs-1,BA(e===91?e+2:e===40?e+1:e)))}function KN(e){for(;(Wa=cf())&&Wa<33;)sl();return ov(e)>2||ov(Wa)>3?"":" "}function QN(e,t){for(;--t&&sl()&&!(Wa<48||Wa>102||Wa>57&&Wa<65||Wa>70&&Wa<97););return Lv(e,Pb()+(t<6&&cf()==32&&sl()==32))}function BA(e){for(;sl();)switch(Wa){case e:return Fs;case 34:case 39:e!==34&&e!==39&&BA(Wa);break;case 40:e===41&&BA(e);break;case 92:sl();break}return Fs}function JN(e,t){for(;sl()&&e+Wa!==57;)if(e+Wa===84&&cf()===47)break;return"/*"+Lv(t,Fs-1)+"*"+M1(e===47?e:sl())}function eU(e){for(;!ov(cf());)sl();return Lv(e,Fs)}function tU(e){return w6(Ob("",null,null,null,[""],e=b6(e),0,[0],e))}function Ob(e,t,r,c,h,p,y,b,a){for(var E=0,R=0,L=y,P=0,F=0,U=0,N=1,q=1,Z=1,Q=0,Y="",J=h,re=p,ae=c,fe=Y;q;)switch(U=Q,Q=sl()){case 40:if(U!=108&&Mo(fe,L-1)==58){OA(fe+=Ti(Db(Q),"&","&\f"),"&\f")!=-1&&(Z=-1);break}case 34:case 39:case 91:fe+=Db(Q);break;case 9:case 10:case 13:case 32:fe+=KN(U);break;case 92:fe+=QN(Pb()-1,7);continue;case 47:switch(cf()){case 42:case 47:mb(nU(JN(sl(),Pb()),t,r),a);break;default:fe+="/"}break;case 123*N:b[E++]=nf(fe)*Z;case 125*N:case 59:case 0:switch(Q){case 0:case 125:q=0;case 59+R:Z==-1&&(fe=Ti(fe,/\f/g,"")),F>0&&nf(fe)-L&&mb(F>32?Yk(fe+";",c,r,L-1):Yk(Ti(fe," ","")+";",c,r,L-2),a);break;case 59:fe+=";";default:if(mb(ae=Xk(fe,t,r,E,R,h,b,Y,J=[],re=[],L),p),Q===123)if(R===0)Ob(fe,t,ae,ae,J,p,L,b,re);else switch(P===99&&Mo(fe,3)===110?100:P){case 100:case 108:case 109:case 115:Ob(e,ae,ae,c&&mb(Xk(e,ae,ae,0,0,h,b,Y,h,J=[],L),re),h,re,L,b,c?J:re);break;default:Ob(fe,ae,ae,ae,[""],re,0,b,re)}}E=R=F=0,N=Z=1,Y=fe="",L=y;break;case 58:L=1+nf(fe),F=U;default:if(N<1){if(Q==123)--N;else if(Q==125&&N++==0&&YN()==125)continue}switch(fe+=M1(Q),Q*N){case 38:Z=R>0?1:(fe+="\f",-1);break;case 44:b[E++]=(nf(fe)-1)*Z,Z=1;break;case 64:cf()===45&&(fe+=Db(sl())),P=cf(),R=L=nf(Y=fe+=eU(Pb())),Q++;break;case 45:U===45&&nf(fe)==2&&(N=0)}}return p}function Xk(e,t,r,c,h,p,y,b,a,E,R){for(var L=h-1,P=h===0?p:[""],F=K3(P),U=0,N=0,q=0;U<c;++U)for(var Z=0,Q=av(e,L+1,L=VN(N=y[U])),Y=e;Z<F;++Z)(Y=v6(N>0?P[Z]+" "+Q:Ti(Q,/&\f/g,P[Z])))&&(a[q++]=Y);return R1(e,t,r,h===0?X3:b,a,E,R)}function nU(e,t,r){return R1(e,t,r,y6,M1(XN()),av(e,2,-2),0)}function Yk(e,t,r,c){return R1(e,t,r,Y3,av(e,0,c),av(e,c+1,-1),c)}function fy(e,t){for(var r="",c=K3(e),h=0;h<c;h++)r+=t(e[h],h,e,t)||"";return r}function rU(e,t,r,c){switch(e.type){case qN:if(e.children.length)break;case $N:case Y3:return e.return=e.return||e.value;case y6:return"";case _6:return e.return=e.value+"{"+fy(e.children,c)+"}";case X3:e.value=e.props.join(",")}return nf(r=fy(e.children,c))?e.return=e.value+"{"+r+"}":""}function iU(e){var t=K3(e);return function(r,c,h,p){for(var y="",b=0;b<t;b++)y+=e[b](r,c,h,p)||"";return y}}function aU(e){return function(t){t.root||(t=t.return)&&e(t)}}function S6(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var oU=function(t,r,c){for(var h=0,p=0;h=p,p=cf(),h===38&&p===12&&(r[c]=1),!ov(p);)sl();return Lv(t,Fs)},sU=function(t,r){var c=-1,h=44;do switch(ov(h)){case 0:h===38&&cf()===12&&(r[c]=1),t[c]+=oU(Fs-1,r,c);break;case 2:t[c]+=Db(h);break;case 4:if(h===44){t[++c]=cf()===58?"&\f":"",r[c]=t[c].length;break}default:t[c]+=M1(h)}while(h=sl());return t},lU=function(t,r){return w6(sU(b6(t),r))},Kk=new WeakMap,cU=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,c=t.parent,h=t.column===c.column&&t.line===c.line;c.type!=="rule";)if(c=c.parent,!c)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Kk.get(c))&&!h){Kk.set(t,!0);for(var p=[],y=lU(r,p),b=c.props,a=0,E=0;a<y.length;a++)for(var R=0;R<b.length;R++,E++)t.props[E]=p[a]?y[a].replace(/&\f/g,b[R]):b[R]+" "+y[a]}}},uU=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function T6(e,t){switch(HN(e,t)){case 5103:return Si+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Si+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Si+e+Xb+e+Xo+e+e;case 6828:case 4268:return Si+e+Xo+e+e;case 6165:return Si+e+Xo+"flex-"+e+e;case 5187:return Si+e+Ti(e,/(\w+).+(:[^]+)/,Si+"box-$1$2"+Xo+"flex-$1$2")+e;case 5443:return Si+e+Xo+"flex-item-"+Ti(e,/flex-|-self/,"")+e;case 4675:return Si+e+Xo+"flex-line-pack"+Ti(e,/align-content|flex-|-self/,"")+e;case 5548:return Si+e+Xo+Ti(e,"shrink","negative")+e;case 5292:return Si+e+Xo+Ti(e,"basis","preferred-size")+e;case 6060:return Si+"box-"+Ti(e,"-grow","")+Si+e+Xo+Ti(e,"grow","positive")+e;case 4554:return Si+Ti(e,/([^-])(transform)/g,"$1"+Si+"$2")+e;case 6187:return Ti(Ti(Ti(e,/(zoom-|grab)/,Si+"$1"),/(image-set)/,Si+"$1"),e,"")+e;case 5495:case 3959:return Ti(e,/(image-set\([^]*)/,Si+"$1$`$1");case 4968:return Ti(Ti(e,/(.+:)(flex-)?(.*)/,Si+"box-pack:$3"+Xo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Si+e+e;case 4095:case 3583:case 4068:case 2532:return Ti(e,/(.+)-inline(.+)/,Si+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(nf(e)-1-t>6)switch(Mo(e,t+1)){case 109:if(Mo(e,t+4)!==45)break;case 102:return Ti(e,/(.+:)(.+)-([^]+)/,"$1"+Si+"$2-$3$1"+Xb+(Mo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~OA(e,"stretch")?T6(Ti(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Mo(e,t+1)!==115)break;case 6444:switch(Mo(e,nf(e)-3-(~OA(e,"!important")&&10))){case 107:return Ti(e,":",":"+Si)+e;case 101:return Ti(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Si+(Mo(e,14)===45?"inline-":"")+"box$3$1"+Si+"$2$3$1"+Xo+"$2box$3")+e}break;case 5936:switch(Mo(e,t+11)){case 114:return Si+e+Xo+Ti(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Si+e+Xo+Ti(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Si+e+Xo+Ti(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Si+e+Xo+e+e}return e}var fU=function(t,r,c,h){if(t.length>-1&&!t.return)switch(t.type){case Y3:t.return=T6(t.value,t.length);break;case _6:return fy([x0(t,{value:Ti(t.value,"@","@"+Si)})],h);case X3:if(t.length)return ZN(t.props,function(p){switch(WN(p,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return fy([x0(t,{props:[Ti(p,/:(read-\w+)/,":"+Xb+"$1")]})],h);case"::placeholder":return fy([x0(t,{props:[Ti(p,/:(plac\w+)/,":"+Si+"input-$1")]}),x0(t,{props:[Ti(p,/:(plac\w+)/,":"+Xb+"$1")]}),x0(t,{props:[Ti(p,/:(plac\w+)/,Xo+"input-$1")]})],h)}return""})}},hU=[fU],dU=function(t){var r=t.key;if(r==="css"){var c=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(c,function(N){var q=N.getAttribute("data-emotion");q.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var h=t.stylisPlugins||hU,p={},y,b=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(N){for(var q=N.getAttribute("data-emotion").split(" "),Z=1;Z<q.length;Z++)p[q[Z]]=!0;b.push(N)});var a,E=[cU,uU];{var R,L=[rU,aU(function(N){R.insert(N)})],P=iU(E.concat(h,L)),F=function(q){return fy(tU(q),P)};a=function(q,Z,Q,Y){R=Q,F(q?q+"{"+Z.styles+"}":Z.styles),Y&&(U.inserted[Z.name]=!0)}}var U={key:r,sheet:new UN({key:r,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:p,registered:{},insert:a};return U.sheet.hydrate(b),U},eT={exports:{}},zi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qk;function pU(){if(Qk)return zi;Qk=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,c=e?Symbol.for("react.fragment"):60107,h=e?Symbol.for("react.strict_mode"):60108,p=e?Symbol.for("react.profiler"):60114,y=e?Symbol.for("react.provider"):60109,b=e?Symbol.for("react.context"):60110,a=e?Symbol.for("react.async_mode"):60111,E=e?Symbol.for("react.concurrent_mode"):60111,R=e?Symbol.for("react.forward_ref"):60112,L=e?Symbol.for("react.suspense"):60113,P=e?Symbol.for("react.suspense_list"):60120,F=e?Symbol.for("react.memo"):60115,U=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,q=e?Symbol.for("react.fundamental"):60117,Z=e?Symbol.for("react.responder"):60118,Q=e?Symbol.for("react.scope"):60119;function Y(re){if(typeof re=="object"&&re!==null){var ae=re.$$typeof;switch(ae){case t:switch(re=re.type,re){case a:case E:case c:case p:case h:case L:return re;default:switch(re=re&&re.$$typeof,re){case b:case R:case U:case F:case y:return re;default:return ae}}case r:return ae}}}function J(re){return Y(re)===E}return zi.AsyncMode=a,zi.ConcurrentMode=E,zi.ContextConsumer=b,zi.ContextProvider=y,zi.Element=t,zi.ForwardRef=R,zi.Fragment=c,zi.Lazy=U,zi.Memo=F,zi.Portal=r,zi.Profiler=p,zi.StrictMode=h,zi.Suspense=L,zi.isAsyncMode=function(re){return J(re)||Y(re)===a},zi.isConcurrentMode=J,zi.isContextConsumer=function(re){return Y(re)===b},zi.isContextProvider=function(re){return Y(re)===y},zi.isElement=function(re){return typeof re=="object"&&re!==null&&re.$$typeof===t},zi.isForwardRef=function(re){return Y(re)===R},zi.isFragment=function(re){return Y(re)===c},zi.isLazy=function(re){return Y(re)===U},zi.isMemo=function(re){return Y(re)===F},zi.isPortal=function(re){return Y(re)===r},zi.isProfiler=function(re){return Y(re)===p},zi.isStrictMode=function(re){return Y(re)===h},zi.isSuspense=function(re){return Y(re)===L},zi.isValidElementType=function(re){return typeof re=="string"||typeof re=="function"||re===c||re===E||re===p||re===h||re===L||re===P||typeof re=="object"&&re!==null&&(re.$$typeof===U||re.$$typeof===F||re.$$typeof===y||re.$$typeof===b||re.$$typeof===R||re.$$typeof===q||re.$$typeof===Z||re.$$typeof===Q||re.$$typeof===N)},zi.typeOf=Y,zi}var Jk;function mU(){return Jk||(Jk=1,eT.exports=pU()),eT.exports}var tT,e4;function gU(){if(e4)return tT;e4=1;var e=mU(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},c={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},p={};p[e.ForwardRef]=c,p[e.Memo]=h;function y(U){return e.isMemo(U)?h:p[U.$$typeof]||t}var b=Object.defineProperty,a=Object.getOwnPropertyNames,E=Object.getOwnPropertySymbols,R=Object.getOwnPropertyDescriptor,L=Object.getPrototypeOf,P=Object.prototype;function F(U,N,q){if(typeof N!="string"){if(P){var Z=L(N);Z&&Z!==P&&F(U,Z,q)}var Q=a(N);E&&(Q=Q.concat(E(N)));for(var Y=y(U),J=y(N),re=0;re<Q.length;++re){var ae=Q[re];if(!r[ae]&&!(q&&q[ae])&&!(J&&J[ae])&&!(Y&&Y[ae])){var fe=R(N,ae);try{b(U,ae,fe)}catch{}}}}return U}return tT=F,tT}gU();var yU=!0;function E6(e,t,r){var c="";return r.split(" ").forEach(function(h){e[h]!==void 0?t.push(e[h]+";"):h&&(c+=h+" ")}),c}var Q3=function(t,r,c){var h=t.key+"-"+r.name;(c===!1||yU===!1)&&t.registered[h]===void 0&&(t.registered[h]=r.styles)},J3=function(t,r,c){Q3(t,r,c);var h=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var p=r;do t.insert(r===p?"."+h:"",p,t.sheet,!0),p=p.next;while(p!==void 0)}};function _U(e){for(var t=0,r,c=0,h=e.length;h>=4;++c,h-=4)r=e.charCodeAt(c)&255|(e.charCodeAt(++c)&255)<<8|(e.charCodeAt(++c)&255)<<16|(e.charCodeAt(++c)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(h){case 3:t^=(e.charCodeAt(c+2)&255)<<16;case 2:t^=(e.charCodeAt(c+1)&255)<<8;case 1:t^=e.charCodeAt(c)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var vU={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xU=/[A-Z]|^ms/g,bU=/_EMO_([^_]+?)_([^]*?)_EMO_/g,C6=function(t){return t.charCodeAt(1)===45},t4=function(t){return t!=null&&typeof t!="boolean"},nT=S6(function(e){return C6(e)?e:e.replace(xU,"-$&").toLowerCase()}),n4=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(bU,function(c,h,p){return rf={name:h,styles:p,next:rf},h})}return vU[t]!==1&&!C6(t)&&typeof r=="number"&&r!==0?r+"px":r};function sv(e,t,r){if(r==null)return"";var c=r;if(c.__emotion_styles!==void 0)return c;switch(typeof r){case"boolean":return"";case"object":{var h=r;if(h.anim===1)return rf={name:h.name,styles:h.styles,next:rf},h.name;var p=r;if(p.styles!==void 0){var y=p.next;if(y!==void 0)for(;y!==void 0;)rf={name:y.name,styles:y.styles,next:rf},y=y.next;var b=p.styles+";";return b}return wU(e,t,r)}case"function":{if(e!==void 0){var a=rf,E=r(e);return rf=a,sv(e,t,E)}break}}var R=r;if(t==null)return R;var L=t[R];return L!==void 0?L:R}function wU(e,t,r){var c="";if(Array.isArray(r))for(var h=0;h<r.length;h++)c+=sv(e,t,r[h])+";";else for(var p in r){var y=r[p];if(typeof y!="object"){var b=y;t!=null&&t[b]!==void 0?c+=p+"{"+t[b]+"}":t4(b)&&(c+=nT(p)+":"+n4(p,b)+";")}else if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var a=0;a<y.length;a++)t4(y[a])&&(c+=nT(p)+":"+n4(p,y[a])+";");else{var E=sv(e,t,y);switch(p){case"animation":case"animationName":{c+=nT(p)+":"+E+";";break}default:c+=p+"{"+E+"}"}}}return c}var r4=/label:\s*([^\s;{]+)\s*(;|$)/g,rf;function Pv(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var c=!0,h="";rf=void 0;var p=e[0];if(p==null||p.raw===void 0)c=!1,h+=sv(r,t,p);else{var y=p;h+=y[0]}for(var b=1;b<e.length;b++)if(h+=sv(r,t,e[b]),c){var a=p;h+=a[b]}r4.lastIndex=0;for(var E="",R;(R=r4.exec(h))!==null;)E+="-"+R[1];var L=_U(h)+E;return{name:L,styles:h,next:rf}}var SU=function(t){return t()},M6=EA.useInsertionEffect?EA.useInsertionEffect:!1,A6=M6||SU,i4=M6||V.useLayoutEffect,R6=V.createContext(typeof HTMLElement<"u"?dU({key:"css"}):null);R6.Provider;var eR=function(t){return V.forwardRef(function(r,c){var h=V.useContext(R6);return t(r,h,c)})},Dv=V.createContext({}),tR={}.hasOwnProperty,FA="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",TU=function(t,r){var c={};for(var h in r)tR.call(r,h)&&(c[h]=r[h]);return c[FA]=t,c},EU=function(t){var r=t.cache,c=t.serialized,h=t.isStringTag;return Q3(r,c,h),A6(function(){return J3(r,c,h)}),null},CU=eR(function(e,t,r){var c=e.css;typeof c=="string"&&t.registered[c]!==void 0&&(c=t.registered[c]);var h=e[FA],p=[c],y="";typeof e.className=="string"?y=E6(t.registered,p,e.className):e.className!=null&&(y=e.className+" ");var b=Pv(p,void 0,V.useContext(Dv));y+=t.key+"-"+b.name;var a={};for(var E in e)tR.call(e,E)&&E!=="css"&&E!==FA&&(a[E]=e[E]);return a.className=y,r&&(a.ref=r),V.createElement(V.Fragment,null,V.createElement(EU,{cache:t,serialized:b,isStringTag:typeof h=="string"}),V.createElement(h,a))}),MU=CU,a4=function(t,r){var c=arguments;if(r==null||!tR.call(r,"css"))return V.createElement.apply(void 0,c);var h=c.length,p=new Array(h);p[0]=MU,p[1]=TU(t,r);for(var y=2;y<h;y++)p[y]=c[y];return V.createElement.apply(null,p)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(a4||(a4={}));var AU=eR(function(e,t){var r=e.styles,c=Pv([r],void 0,V.useContext(Dv)),h=V.useRef();return i4(function(){var p=t.key+"-global",y=new t.sheet.constructor({key:p,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),b=!1,a=document.querySelector('style[data-emotion="'+p+" "+c.name+'"]');return t.sheet.tags.length&&(y.before=t.sheet.tags[0]),a!==null&&(b=!0,a.setAttribute("data-emotion",p),y.hydrate([a])),h.current=[y,b],function(){y.flush()}},[t]),i4(function(){var p=h.current,y=p[0],b=p[1];if(b){p[1]=!1;return}if(c.next!==void 0&&J3(t,c.next,!0),y.tags.length){var a=y.tags[y.tags.length-1].nextElementSibling;y.before=a,y.flush()}t.insert("",c,y,!1)},[t,c.name]),null});function nR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Pv(t)}function Ov(){var e=nR.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var RU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kU=S6(function(e){return RU.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),IU=kU,zU=function(t){return t!=="theme"},o4=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?IU:zU},s4=function(t,r,c){var h;if(r){var p=r.shouldForwardProp;h=t.__emotion_forwardProp&&p?function(y){return t.__emotion_forwardProp(y)&&p(y)}:p}return typeof h!="function"&&c&&(h=t.__emotion_forwardProp),h},LU=function(t){var r=t.cache,c=t.serialized,h=t.isStringTag;return Q3(r,c,h),A6(function(){return J3(r,c,h)}),null},PU=function e(t,r){var c=t.__emotion_real===t,h=c&&t.__emotion_base||t,p,y;r!==void 0&&(p=r.label,y=r.target);var b=s4(t,r,c),a=b||o4(h),E=!a("as");return function(){var R=arguments,L=c&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(p!==void 0&&L.push("label:"+p+";"),R[0]==null||R[0].raw===void 0)L.push.apply(L,R);else{var P=R[0];L.push(P[0]);for(var F=R.length,U=1;U<F;U++)L.push(R[U],P[U])}var N=eR(function(q,Z,Q){var Y=E&&q.as||h,J="",re=[],ae=q;if(q.theme==null){ae={};for(var fe in q)ae[fe]=q[fe];ae.theme=V.useContext(Dv)}typeof q.className=="string"?J=E6(Z.registered,re,q.className):q.className!=null&&(J=q.className+" ");var Se=Pv(L.concat(re),Z.registered,ae);J+=Z.key+"-"+Se.name,y!==void 0&&(J+=" "+y);var Te=E&&b===void 0?o4(Y):a,ue={};for(var _e in q)E&&_e==="as"||Te(_e)&&(ue[_e]=q[_e]);return ue.className=J,Q&&(ue.ref=Q),V.createElement(V.Fragment,null,V.createElement(LU,{cache:Z,serialized:Se,isStringTag:typeof Y=="string"}),V.createElement(Y,ue))});return N.displayName=p!==void 0?p:"Styled("+(typeof h=="string"?h:h.displayName||h.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=h,N.__emotion_styles=L,N.__emotion_forwardProp=b,Object.defineProperty(N,"toString",{value:function(){return"."+y}}),N.withComponent=function(q,Z){var Q=e(q,Zb({},r,Z,{shouldForwardProp:s4(N,Z,!0)}));return Q.apply(void 0,L)},N}},DU=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jA=PU.bind(null);DU.forEach(function(e){jA[e]=jA(e)});function OU(e){return e==null||Object.keys(e).length===0}function k6(e){const{styles:t,defaultTheme:r={}}=e,c=typeof t=="function"?h=>t(OU(h)?r:h):t;return X.jsx(AU,{styles:c})}function I6(e,t){return jA(e,t)}function BU(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const l4=[];function Wd(e){return l4[0]=e,Pv(l4)}var rT={exports:{}},ji={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4;function FU(){if(c4)return ji;c4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),P=Symbol.for("react.view_transition"),F=Symbol.for("react.client.reference");function U(N){if(typeof N=="object"&&N!==null){var q=N.$$typeof;switch(q){case e:switch(N=N.type,N){case r:case h:case c:case a:case E:case P:return N;default:switch(N=N&&N.$$typeof,N){case y:case b:case L:case R:return N;case p:return N;default:return q}}case t:return q}}}return ji.ContextConsumer=p,ji.ContextProvider=y,ji.Element=e,ji.ForwardRef=b,ji.Fragment=r,ji.Lazy=L,ji.Memo=R,ji.Portal=t,ji.Profiler=h,ji.StrictMode=c,ji.Suspense=a,ji.SuspenseList=E,ji.isContextConsumer=function(N){return U(N)===p},ji.isContextProvider=function(N){return U(N)===y},ji.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},ji.isForwardRef=function(N){return U(N)===b},ji.isFragment=function(N){return U(N)===r},ji.isLazy=function(N){return U(N)===L},ji.isMemo=function(N){return U(N)===R},ji.isPortal=function(N){return U(N)===t},ji.isProfiler=function(N){return U(N)===h},ji.isStrictMode=function(N){return U(N)===c},ji.isSuspense=function(N){return U(N)===a},ji.isSuspenseList=function(N){return U(N)===E},ji.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===h||N===c||N===a||N===E||typeof N=="object"&&N!==null&&(N.$$typeof===L||N.$$typeof===R||N.$$typeof===y||N.$$typeof===p||N.$$typeof===b||N.$$typeof===F||N.getModuleId!==void 0)},ji.typeOf=U,ji}var u4;function jU(){return u4||(u4=1,rT.exports=FU()),rT.exports}var z6=jU();function af(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function L6(e){if(V.isValidElement(e)||z6.isValidElementType(e)||!af(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=L6(e[r])}),t}function po(e,t,r={clone:!0}){const c=r.clone?{...e}:e;return af(e)&&af(t)&&Object.keys(t).forEach(h=>{V.isValidElement(t[h])||z6.isValidElementType(t[h])?c[h]=t[h]:af(t[h])&&Object.prototype.hasOwnProperty.call(e,h)&&af(e[h])?c[h]=po(e[h],t[h],r):r.clone?c[h]=af(t[h])?L6(t[h]):t[h]:c[h]=t[h]}),c}const NU=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,c)=>r.val-c.val),t.reduce((r,c)=>({...r,[c.key]:c.val}),{})};function UU(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:c=5,...h}=e,p=NU(t),y=Object.keys(p);function b(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r})`}function a(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-c/100}${r})`}function E(P,F){const U=y.indexOf(F);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r}) and (max-width:${(U!==-1&&typeof t[y[U]]=="number"?t[y[U]]:F)-c/100}${r})`}function R(P){return y.indexOf(P)+1<y.length?E(P,y[y.indexOf(P)+1]):b(P)}function L(P){const F=y.indexOf(P);return F===0?b(y[1]):F===y.length-1?a(y[F]):E(P,y[y.indexOf(P)+1]).replace("@media","@media not all and")}return{keys:y,values:p,up:b,down:a,between:E,only:R,not:L,unit:r,...h}}function f4(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(c=>c.startsWith("@container")).sort((c,h)=>{const p=/min-width:\s*([0-9.]+)/;return+(c.match(p)?.[1]||0)-+(h.match(p)?.[1]||0)});return r.length?r.reduce((c,h)=>{const p=t[h];return delete c[h],c[h]=p,c},{...t}):t}function $U(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function qU(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,c,h]=r,p=Number.isNaN(+c)?c||0:+c;return e.containerQueries(h).up(p)}function VU(e){const t=(p,y)=>p.replace("@media",y?`@container ${y}`:"@container");function r(p,y){p.up=(...b)=>t(e.breakpoints.up(...b),y),p.down=(...b)=>t(e.breakpoints.down(...b),y),p.between=(...b)=>t(e.breakpoints.between(...b),y),p.only=(...b)=>t(e.breakpoints.only(...b),y),p.not=(...b)=>{const a=t(e.breakpoints.not(...b),y);return a.includes("not all and")?a.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):a}}const c={},h=p=>(r(c,p),c);return r(h),{...e,containerQueries:h}}const GU={borderRadius:4};function V0(e,t){return t?po(e,t,{clone:!1}):e}const k1={xs:0,sm:600,md:900,lg:1200,xl:1536},h4={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${k1[e]}px)`},HU={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:k1[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Kc(e,t,r){const c=e.theme||{};if(Array.isArray(t)){const p=c.breakpoints||h4;return t.reduce((y,b,a)=>(y[p.up(p.keys[a])]=r(t[a]),y),{})}if(typeof t=="object"){const p=c.breakpoints||h4;return Object.keys(t).reduce((y,b)=>{if($U(p.keys,b)){const a=qU(c.containerQueries?c:HU,b);a&&(y[a]=r(t[b],b))}else if(Object.keys(p.values||k1).includes(b)){const a=p.up(b);y[a]=r(t[b],b)}else{const a=b;y[a]=t[a]}return y},{})}return r(t)}function P6(e={}){return e.keys?.reduce((r,c)=>{const h=e.up(c);return r[h]={},r},{})||{}}function NA(e,t){return e.reduce((r,c)=>{const h=r[c];return(!h||Object.keys(h).length===0)&&delete r[c],r},t)}function WU(e,...t){const r=P6(e),c=[r,...t].reduce((h,p)=>po(h,p),{});return NA(Object.keys(r),c)}function ZU(e,t){if(typeof e!="object")return{};const r={},c=Object.keys(t);return Array.isArray(e)?c.forEach((h,p)=>{p<e.length&&(r[h]=!0)}):c.forEach(h=>{e[h]!=null&&(r[h]=!0)}),r}function iT({values:e,breakpoints:t,base:r}){const c=r||ZU(e,t),h=Object.keys(c);if(h.length===0)return e;let p;return h.reduce((y,b,a)=>(Array.isArray(e)?(y[b]=e[a]!=null?e[a]:e[p],p=a):typeof e=="object"?(y[b]=e[b]!=null?e[b]:e[p],p=b):y[b]=e,y),{})}function sr(e){if(typeof e!="string")throw new Error(Rh(7));return e.charAt(0).toUpperCase()+e.slice(1)}function I1(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const c=`vars.${t}`.split(".").reduce((h,p)=>h&&h[p]?h[p]:null,e);if(c!=null)return c}return t.split(".").reduce((c,h)=>c&&c[h]!=null?c[h]:null,e)}function Yb(e,t,r,c=r){let h;return typeof e=="function"?h=e(r):Array.isArray(e)?h=e[r]||c:h=I1(e,r)||c,t&&(h=t(h,c,e)),h}function Da(e){const{prop:t,cssProperty:r=e.prop,themeKey:c,transform:h}=e,p=y=>{if(y[t]==null)return null;const b=y[t],a=y.theme,E=I1(a,c)||{};return Kc(y,b,L=>{let P=Yb(E,h,L);return L===P&&typeof L=="string"&&(P=Yb(E,h,`${t}${L==="default"?"":sr(L)}`,L)),r===!1?P:{[r]:P}})};return p.propTypes={},p.filterProps=[t],p}function XU(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const YU={m:"margin",p:"padding"},KU={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},d4={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},QU=XU(e=>{if(e.length>2)if(d4[e])e=d4[e];else return[e];const[t,r]=e.split(""),c=YU[t],h=KU[r]||"";return Array.isArray(h)?h.map(p=>c+p):[c+h]}),rR=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],iR=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...rR,...iR];function Bv(e,t,r,c){const h=I1(e,t,!0)??r;return typeof h=="number"||typeof h=="string"?p=>typeof p=="string"?p:typeof h=="string"?h.startsWith("var(")&&p===0?0:h.startsWith("var(")&&p===1?h:`calc(${p} * ${h})`:h*p:Array.isArray(h)?p=>{if(typeof p=="string")return p;const y=Math.abs(p),b=h[y];return p>=0?b:typeof b=="number"?-b:typeof b=="string"&&b.startsWith("var(")?`calc(-1 * ${b})`:`-${b}`}:typeof h=="function"?h:()=>{}}function z1(e){return Bv(e,"spacing",8)}function Tm(e,t){return typeof t=="string"||t==null?t:e(t)}function JU(e,t){return r=>e.reduce((c,h)=>(c[h]=Tm(t,r),c),{})}function e2(e,t,r,c){if(!t.includes(r))return null;const h=QU(r),p=JU(h,c),y=e[r];return Kc(e,y,p)}function D6(e,t){const r=z1(e.theme);return Object.keys(e).map(c=>e2(e,t,c,r)).reduce(V0,{})}function Ta(e){return D6(e,rR)}Ta.propTypes={};Ta.filterProps=rR;function Ea(e){return D6(e,iR)}Ea.propTypes={};Ea.filterProps=iR;function O6(e=8,t=z1({spacing:e})){if(e.mui)return e;const r=(...c)=>(c.length===0?[1]:c).map(p=>{const y=t(p);return typeof y=="number"?`${y}px`:y}).join(" ");return r.mui=!0,r}function L1(...e){const t=e.reduce((c,h)=>(h.filterProps.forEach(p=>{c[p]=h}),c),{}),r=c=>Object.keys(c).reduce((h,p)=>t[p]?V0(h,t[p](c)):h,{});return r.propTypes={},r.filterProps=e.reduce((c,h)=>c.concat(h.filterProps),[]),r}function Ul(e){return typeof e!="number"?e:`${e}px solid`}function tc(e,t){return Da({prop:e,themeKey:"borders",transform:t})}const t2=tc("border",Ul),n2=tc("borderTop",Ul),r2=tc("borderRight",Ul),i2=tc("borderBottom",Ul),a2=tc("borderLeft",Ul),o2=tc("borderColor"),s2=tc("borderTopColor"),l2=tc("borderRightColor"),c2=tc("borderBottomColor"),u2=tc("borderLeftColor"),f2=tc("outline",Ul),h2=tc("outlineColor"),P1=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Bv(e.theme,"shape.borderRadius",4),r=c=>({borderRadius:Tm(t,c)});return Kc(e,e.borderRadius,r)}return null};P1.propTypes={};P1.filterProps=["borderRadius"];L1(t2,n2,r2,i2,a2,o2,s2,l2,c2,u2,P1,f2,h2);const D1=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Bv(e.theme,"spacing",8),r=c=>({gap:Tm(t,c)});return Kc(e,e.gap,r)}return null};D1.propTypes={};D1.filterProps=["gap"];const O1=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Bv(e.theme,"spacing",8),r=c=>({columnGap:Tm(t,c)});return Kc(e,e.columnGap,r)}return null};O1.propTypes={};O1.filterProps=["columnGap"];const B1=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Bv(e.theme,"spacing",8),r=c=>({rowGap:Tm(t,c)});return Kc(e,e.rowGap,r)}return null};B1.propTypes={};B1.filterProps=["rowGap"];const d2=Da({prop:"gridColumn"}),p2=Da({prop:"gridRow"}),m2=Da({prop:"gridAutoFlow"}),g2=Da({prop:"gridAutoColumns"}),y2=Da({prop:"gridAutoRows"}),_2=Da({prop:"gridTemplateColumns"}),v2=Da({prop:"gridTemplateRows"}),x2=Da({prop:"gridTemplateAreas"}),b2=Da({prop:"gridArea"});L1(D1,O1,B1,d2,p2,m2,g2,y2,_2,v2,x2,b2);function hy(e,t){return t==="grey"?t:e}const w2=Da({prop:"color",themeKey:"palette",transform:hy}),S2=Da({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:hy}),T2=Da({prop:"backgroundColor",themeKey:"palette",transform:hy});L1(w2,S2,T2);function ol(e){return e<=1&&e!==0?`${e*100}%`:e}const E2=Da({prop:"width",transform:ol}),aR=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{const c=e.theme?.breakpoints?.values?.[r]||k1[r];return c?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${c}${e.theme.breakpoints.unit}`}:{maxWidth:c}:{maxWidth:ol(r)}};return Kc(e,e.maxWidth,t)}return null};aR.filterProps=["maxWidth"];const C2=Da({prop:"minWidth",transform:ol}),M2=Da({prop:"height",transform:ol}),A2=Da({prop:"maxHeight",transform:ol}),R2=Da({prop:"minHeight",transform:ol});Da({prop:"size",cssProperty:"width",transform:ol});Da({prop:"size",cssProperty:"height",transform:ol});const k2=Da({prop:"boxSizing"});L1(E2,aR,C2,M2,A2,R2,k2);const Fv={border:{themeKey:"borders",transform:Ul},borderTop:{themeKey:"borders",transform:Ul},borderRight:{themeKey:"borders",transform:Ul},borderBottom:{themeKey:"borders",transform:Ul},borderLeft:{themeKey:"borders",transform:Ul},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ul},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:P1},color:{themeKey:"palette",transform:hy},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:hy},backgroundColor:{themeKey:"palette",transform:hy},p:{style:Ea},pt:{style:Ea},pr:{style:Ea},pb:{style:Ea},pl:{style:Ea},px:{style:Ea},py:{style:Ea},padding:{style:Ea},paddingTop:{style:Ea},paddingRight:{style:Ea},paddingBottom:{style:Ea},paddingLeft:{style:Ea},paddingX:{style:Ea},paddingY:{style:Ea},paddingInline:{style:Ea},paddingInlineStart:{style:Ea},paddingInlineEnd:{style:Ea},paddingBlock:{style:Ea},paddingBlockStart:{style:Ea},paddingBlockEnd:{style:Ea},m:{style:Ta},mt:{style:Ta},mr:{style:Ta},mb:{style:Ta},ml:{style:Ta},mx:{style:Ta},my:{style:Ta},margin:{style:Ta},marginTop:{style:Ta},marginRight:{style:Ta},marginBottom:{style:Ta},marginLeft:{style:Ta},marginX:{style:Ta},marginY:{style:Ta},marginInline:{style:Ta},marginInlineStart:{style:Ta},marginInlineEnd:{style:Ta},marginBlock:{style:Ta},marginBlockStart:{style:Ta},marginBlockEnd:{style:Ta},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:D1},rowGap:{style:B1},columnGap:{style:O1},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ol},maxWidth:{style:aR},minWidth:{transform:ol},height:{transform:ol},maxHeight:{transform:ol},minHeight:{transform:ol},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function I2(...e){const t=e.reduce((c,h)=>c.concat(Object.keys(h)),[]),r=new Set(t);return e.every(c=>r.size===Object.keys(c).length)}function z2(e,t){return typeof e=="function"?e(t):e}function L2(){function e(r,c,h,p){const y={[r]:c,theme:h},b=p[r];if(!b)return{[r]:c};const{cssProperty:a=r,themeKey:E,transform:R,style:L}=b;if(c==null)return null;if(E==="typography"&&c==="inherit")return{[r]:c};const P=I1(h,E)||{};return L?L(y):Kc(y,c,U=>{let N=Yb(P,R,U);return U===N&&typeof U=="string"&&(N=Yb(P,R,`${r}${U==="default"?"":sr(U)}`,U)),a===!1?N:{[a]:N}})}function t(r){const{sx:c,theme:h={},nested:p}=r||{};if(!c)return null;const y=h.unstable_sxConfig??Fv;function b(a){let E=a;if(typeof a=="function")E=a(h);else if(typeof a!="object")return a;if(!E)return null;const R=P6(h.breakpoints),L=Object.keys(R);let P=R;return Object.keys(E).forEach(F=>{const U=z2(E[F],h);if(U!=null)if(typeof U=="object")if(y[F])P=V0(P,e(F,U,h,y));else{const N=Kc({theme:h},U,q=>({[F]:q}));I2(N,U)?P[F]=t({sx:U,theme:h,nested:!0}):P=V0(P,N)}else P=V0(P,e(F,U,h,y))}),!p&&h.modularCssLayers?{"@layer sx":f4(h,NA(L,P))}:f4(h,NA(L,P))}return Array.isArray(c)?c.map(b):b(c)}return t}const Xd=L2();Xd.filterProps=["sx"];function P2(e,t){const r=this;if(r.vars){if(!r.colorSchemes?.[e]||typeof r.getColorSchemeSelector!="function")return{};let c=r.getColorSchemeSelector(e);return c==="&"?t:((c.includes("data-")||c.includes("."))&&(c=`*:where(${c.replace(/\s*&$/,"")}) &`),{[c]:t})}return r.palette.mode===e?t:{}}function zy(e={},...t){const{breakpoints:r={},palette:c={},spacing:h,shape:p={},...y}=e,b=UU(r),a=O6(h);let E=po({breakpoints:b,direction:"ltr",components:{},palette:{mode:"light",...c},spacing:a,shape:{...GU,...p}},y);return E=VU(E),E.applyStyles=P2,E=t.reduce((R,L)=>po(R,L),E),E.unstable_sxConfig={...Fv,...y?.unstable_sxConfig},E.unstable_sx=function(L){return Xd({sx:L,theme:this})},E}function D2(e){return Object.keys(e).length===0}function oR(e=null){const t=V.useContext(Dv);return!t||D2(t)?e:t}const O2=zy();function jv(e=O2){return oR(e)}function aT(e){const t=Wd(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function B6({styles:e,themeId:t,defaultTheme:r={}}){const c=jv(r),h=t&&c[t]||c;let p=typeof e=="function"?e(h):e;return h.modularCssLayers&&(Array.isArray(p)?p=p.map(y=>aT(typeof y=="function"?y(h):y)):p=aT(p)),X.jsx(k6,{styles:p})}const B2=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??Fv;return Object.keys(e).forEach(c=>{r[c]?t.systemProps[c]=e[c]:t.otherProps[c]=e[c]}),t};function F1(e){const{sx:t,...r}=e,{systemProps:c,otherProps:h}=B2(r);let p;return Array.isArray(t)?p=[c,...t]:typeof t=="function"?p=(...y)=>{const b=t(...y);return af(b)?{...c,...b}:c}:p={...c,...t},{...h,sx:p}}const p4=e=>e,F2=()=>{let e=p4;return{configure(t){e=t},generate(t){return e(t)},reset(){e=p4}}},F6=F2();function j6(e){var t,r,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(r=j6(e[t]))&&(c&&(c+=" "),c+=r)}else for(r in e)e[r]&&(c&&(c+=" "),c+=r);return c}function $n(){for(var e,t,r=0,c="",h=arguments.length;r<h;r++)(e=arguments[r])&&(t=j6(e))&&(c&&(c+=" "),c+=t);return c}function j2(e={}){const{themeId:t,defaultTheme:r,defaultClassName:c="MuiBox-root",generateClassName:h}=e,p=I6("div",{shouldForwardProp:b=>b!=="theme"&&b!=="sx"&&b!=="as"})(Xd);return V.forwardRef(function(a,E){const R=jv(r),{className:L,component:P="div",...F}=F1(a);return X.jsx(p,{as:P,ref:E,className:$n(L,h?h(c):c),theme:t&&R[t]||R,...F})})}const N2={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function br(e,t,r="Mui"){const c=N2[t];return c?`${r}-${c}`:`${F6.generate(e)}-${t}`}function wr(e,t,r="Mui"){const c={};return t.forEach(h=>{c[h]=br(e,h,r)}),c}function N6(e){const{variants:t,...r}=e,c={variants:t,style:Wd(r),isProcessed:!0};return c.style===r||t&&t.forEach(h=>{typeof h.style!="function"&&(h.style=Wd(h.style))}),c}const U2=zy();function oT(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function hm(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function $2(e){return e?(t,r)=>r[e]:null}function q2(e,t,r){e.theme=G2(e.theme)?r:e.theme[t]||e.theme}function Bb(e,t,r){const c=typeof t=="function"?t(e):t;if(Array.isArray(c))return c.flatMap(h=>Bb(e,h,r));if(Array.isArray(c?.variants)){let h;if(c.isProcessed)h=r?hm(c.style,r):c.style;else{const{variants:p,...y}=c;h=r?hm(Wd(y),r):y}return U6(e,c.variants,[h],r)}return c?.isProcessed?r?hm(Wd(c.style),r):c.style:r?hm(Wd(c),r):c}function U6(e,t,r=[],c=void 0){let h;e:for(let p=0;p<t.length;p+=1){const y=t[p];if(typeof y.props=="function"){if(h??={...e,...e.ownerState,ownerState:e.ownerState},!y.props(h))continue}else for(const b in y.props)if(e[b]!==y.props[b]&&e.ownerState?.[b]!==y.props[b])continue e;typeof y.style=="function"?(h??={...e,...e.ownerState,ownerState:e.ownerState},r.push(c?hm(Wd(y.style(h)),c):y.style(h))):r.push(c?hm(Wd(y.style),c):y.style)}return r}function $6(e={}){const{themeId:t,defaultTheme:r=U2,rootShouldForwardProp:c=oT,slotShouldForwardProp:h=oT}=e;function p(b){q2(b,t,r)}return(b,a={})=>{BU(b,ae=>ae.filter(fe=>fe!==Xd));const{name:E,slot:R,skipVariantsResolver:L,skipSx:P,overridesResolver:F=$2(W2(R)),...U}=a,N=E&&E.startsWith("Mui")||R?"components":"custom",q=L!==void 0?L:R&&R!=="Root"&&R!=="root"||!1,Z=P||!1;let Q=oT;R==="Root"||R==="root"?Q=c:R?Q=h:H2(b)&&(Q=void 0);const Y=I6(b,{shouldForwardProp:Q,label:V2(),...U}),J=ae=>{if(ae.__emotion_real===ae)return ae;if(typeof ae=="function")return function(Se){return Bb(Se,ae,Se.theme.modularCssLayers?N:void 0)};if(af(ae)){const fe=N6(ae);return function(Te){return fe.variants?Bb(Te,fe,Te.theme.modularCssLayers?N:void 0):Te.theme.modularCssLayers?hm(fe.style,N):fe.style}}return ae},re=(...ae)=>{const fe=[],Se=ae.map(J),Te=[];if(fe.push(p),E&&F&&Te.push(function(me){const Ie=me.theme.components?.[E]?.styleOverrides;if(!Ie)return null;const pe={};for(const Pe in Ie)pe[Pe]=Bb(me,Ie[Pe],me.theme.modularCssLayers?"theme":void 0);return F(me,pe)}),E&&!q&&Te.push(function(me){const Ie=me.theme?.components?.[E]?.variants;return Ie?U6(me,Ie,[],me.theme.modularCssLayers?"theme":void 0):null}),Z||Te.push(Xd),Array.isArray(Se[0])){const se=Se.shift(),me=new Array(fe.length).fill(""),be=new Array(Te.length).fill("");let Ie;Ie=[...me,...se,...be],Ie.raw=[...me,...se.raw,...be],fe.unshift(Ie)}const ue=[...fe,...Se,...Te],_e=Y(...ue);return b.muiName&&(_e.muiName=b.muiName),_e};return Y.withConfig&&(re.withConfig=Y.withConfig),re}}function V2(e,t){return void 0}function G2(e){for(const t in e)return!1;return!0}function H2(e){return typeof e=="string"&&e.charCodeAt(0)>96}function W2(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const sR=$6();function Kb(e,t,r=!1){const c={...t};for(const h in e)if(Object.prototype.hasOwnProperty.call(e,h)){const p=h;if(p==="components"||p==="slots")c[p]={...e[p],...c[p]};else if(p==="componentsProps"||p==="slotProps"){const y=e[p],b=t[p];if(!b)c[p]=y||{};else if(!y)c[p]=b;else{c[p]={...b};for(const a in y)if(Object.prototype.hasOwnProperty.call(y,a)){const E=a;c[p][E]=Kb(y[E],b[E],r)}}}else p==="className"&&r&&t.className?c.className=$n(e?.className,t?.className):p==="style"&&r&&t.style?c.style={...e?.style,...t?.style}:c[p]===void 0&&(c[p]=e[p])}return c}function Z2(e){const{theme:t,name:r,props:c}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?c:Kb(t.components[r].defaultProps,c)}function lR({props:e,name:t,defaultTheme:r,themeId:c}){let h=jv(r);return c&&(h=h[c]||h),Z2({theme:h,name:t,props:e})}const Yl=typeof window<"u"?V.useLayoutEffect:V.useEffect;function X2(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function cR(e,t=0,r=1){return X2(e,t,r)}function Y2(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(c=>c+c)),r?`rgb${r.length===4?"a":""}(${r.map((c,h)=>h<3?parseInt(c,16):Math.round(parseInt(c,16)/255*1e3)/1e3).join(", ")})`:""}function Yd(e){if(e.type)return e;if(e.charAt(0)==="#")return Yd(Y2(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(Rh(9,e));let c=e.substring(t+1,e.length-1),h;if(r==="color"){if(c=c.split(" "),h=c.shift(),c.length===4&&c[3].charAt(0)==="/"&&(c[3]=c[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(h))throw new Error(Rh(10,h))}else c=c.split(",");return c=c.map(p=>parseFloat(p)),{type:r,values:c,colorSpace:h}}const K2=e=>{const t=Yd(e);return t.values.slice(0,3).map((r,c)=>t.type.includes("hsl")&&c!==0?`${r}%`:r).join(" ")},O0=(e,t)=>{try{return K2(e)}catch{return e}};function j1(e){const{type:t,colorSpace:r}=e;let{values:c}=e;return t.includes("rgb")?c=c.map((h,p)=>p<3?parseInt(h,10):h):t.includes("hsl")&&(c[1]=`${c[1]}%`,c[2]=`${c[2]}%`),t.includes("color")?c=`${r} ${c.join(" ")}`:c=`${c.join(", ")}`,`${t}(${c})`}function q6(e){e=Yd(e);const{values:t}=e,r=t[0],c=t[1]/100,h=t[2]/100,p=c*Math.min(h,1-h),y=(E,R=(E+r/30)%12)=>h-p*Math.max(Math.min(R-3,9-R,1),-1);let b="rgb";const a=[Math.round(y(0)*255),Math.round(y(8)*255),Math.round(y(4)*255)];return e.type==="hsla"&&(b+="a",a.push(t[3])),j1({type:b,values:a})}function UA(e){e=Yd(e);let t=e.type==="hsl"||e.type==="hsla"?Yd(q6(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Q2(e,t){const r=UA(e),c=UA(t);return(Math.max(r,c)+.05)/(Math.min(r,c)+.05)}function Qb(e,t){return e=Yd(e),t=cR(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,j1(e)}function im(e,t,r){try{return Qb(e,t)}catch{return e}}function N1(e,t){if(e=Yd(e),t=cR(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return j1(e)}function Di(e,t,r){try{return N1(e,t)}catch{return e}}function U1(e,t){if(e=Yd(e),t=cR(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return j1(e)}function Oi(e,t,r){try{return U1(e,t)}catch{return e}}function J2(e,t=.15){return UA(e)>.5?N1(e,t):U1(e,t)}function gb(e,t,r){try{return J2(e,t)}catch{return e}}const V6=V.createContext(null);function uR(){return V.useContext(V6)}const e$=typeof Symbol=="function"&&Symbol.for,t$=e$?Symbol.for("mui.nested"):"__THEME_NESTED__";function n$(e,t){return typeof t=="function"?t(e):{...e,...t}}function r$(e){const{children:t,theme:r}=e,c=uR(),h=V.useMemo(()=>{const p=c===null?{...r}:n$(c,r);return p!=null&&(p[t$]=c!==null),p},[r,c]);return X.jsx(V6.Provider,{value:h,children:t})}const G6=V.createContext();function i$({value:e,...t}){return X.jsx(G6.Provider,{value:e??!0,...t})}const $1=()=>V.useContext(G6)??!1,H6=V.createContext(void 0);function a$({value:e,children:t}){return X.jsx(H6.Provider,{value:e,children:t})}function o$(e){const{theme:t,name:r,props:c}=e;if(!t||!t.components||!t.components[r])return c;const h=t.components[r];return h.defaultProps?Kb(h.defaultProps,c,t.components.mergeClassNameAndStyle):!h.styleOverrides&&!h.variants?Kb(h,c,t.components.mergeClassNameAndStyle):c}function s$({props:e,name:t}){const r=V.useContext(H6);return o$({props:e,name:t,theme:{components:r}})}let m4=0;function l$(e){const[t,r]=V.useState(e),c=e||t;return V.useEffect(()=>{t==null&&(m4+=1,r(`mui-${m4}`))},[t]),c}const c$={...EA},g4=c$.useId;function Em(e){if(g4!==void 0){const t=g4();return e??t}return l$(e)}function u$(e){const t=oR(),r=Em()||"",{modularCssLayers:c}=e;let h="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!c||t!==null?h="":typeof c=="string"?h=c.replace(/mui(?!\.)/g,h):h=`@layer ${h};`,Yl(()=>{const p=document.querySelector("head");if(!p)return;const y=p.firstChild;if(h){if(y&&y.hasAttribute?.("data-mui-layer-order")&&y.getAttribute("data-mui-layer-order")===r)return;const b=document.createElement("style");b.setAttribute("data-mui-layer-order",r),b.textContent=h,p.prepend(b)}else p.querySelector(`style[data-mui-layer-order="${r}"]`)?.remove()},[h,r]),h?X.jsx(B6,{styles:h}):null}const y4={};function _4(e,t,r,c=!1){return V.useMemo(()=>{const h=e&&t[e]||t;if(typeof r=="function"){const p=r(h),y=e?{...t,[e]:p}:p;return c?()=>y:y}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,c])}function W6(e){const{children:t,theme:r,themeId:c}=e,h=oR(y4),p=uR()||y4,y=_4(c,h,r),b=_4(c,p,r,!0),a=(c?y[c]:y).direction==="rtl",E=u$(y);return X.jsx(r$,{theme:b,children:X.jsx(Dv.Provider,{value:y,children:X.jsx(i$,{value:a,children:X.jsxs(a$,{value:c?y[c].components:y.components,children:[E,t]})})})})}const v4={theme:void 0};function f$(e){let t,r;return function(h){let p=t;return(p===void 0||h.theme!==r)&&(v4.theme=h.theme,p=N6(e(v4)),t=p,r=h.theme),p}}const fR="mode",hR="color-scheme",h$="data-color-scheme";function d$(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:c="dark",modeStorageKey:h=fR,colorSchemeStorageKey:p=hR,attribute:y=h$,colorSchemeNode:b="document.documentElement",nonce:a}=e||{};let E="",R=y;if(y==="class"&&(R=".%s"),y==="data"&&(R="[data-%s]"),R.startsWith(".")){const P=R.substring(1);E+=`${b}.classList.remove('${P}'.replace('%s', light), '${P}'.replace('%s', dark));
      ${b}.classList.add('${P}'.replace('%s', colorScheme));`}const L=R.match(/\[([^[\]]+)\]/);if(L){const[P,F]=L[1].split("=");F||(E+=`${b}.removeAttribute('${P}'.replace('%s', light));
      ${b}.removeAttribute('${P}'.replace('%s', dark));`),E+=`
      ${b}.setAttribute('${P}'.replace('%s', colorScheme), ${F?`${F}.replace('%s', colorScheme)`:'""'});`}else E+=`${b}.setAttribute('${R}', colorScheme);`;return X.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?a:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${h}') || '${t}';
  const dark = localStorage.getItem('${p}-dark') || '${c}';
  const light = localStorage.getItem('${p}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${E}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function p$(){}const m$=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let c;try{c=t.localStorage.getItem(e)}catch{}return c||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return p$;const c=h=>{const p=h.newValue;h.key===e&&r(p)};return t.addEventListener("storage",c),()=>{t.removeEventListener("storage",c)}}});function sT(){}function x4(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Z6(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function g$(e){return Z6(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function y$(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:c,supportedColorSchemes:h=[],modeStorageKey:p=fR,colorSchemeStorageKey:y=hR,storageWindow:b=typeof window>"u"?void 0:window,storageManager:a=m$,noSsr:E=!1}=e,R=h.join(","),L=h.length>1,P=V.useMemo(()=>a?.({key:p,storageWindow:b}),[a,p,b]),F=V.useMemo(()=>a?.({key:`${y}-light`,storageWindow:b}),[a,y,b]),U=V.useMemo(()=>a?.({key:`${y}-dark`,storageWindow:b}),[a,y,b]),[N,q]=V.useState(()=>{const Se=P?.get(t)||t,Te=F?.get(r)||r,ue=U?.get(c)||c;return{mode:Se,systemMode:x4(Se),lightColorScheme:Te,darkColorScheme:ue}}),[Z,Q]=V.useState(E||!L);V.useEffect(()=>{Q(!0)},[]);const Y=g$(N),J=V.useCallback(Se=>{q(Te=>{if(Se===Te.mode)return Te;const ue=Se??t;return P?.set(ue),{...Te,mode:ue,systemMode:x4(ue)}})},[P,t]),re=V.useCallback(Se=>{Se?typeof Se=="string"?Se&&!R.includes(Se)?console.error(`\`${Se}\` does not exist in \`theme.colorSchemes\`.`):q(Te=>{const ue={...Te};return Z6(Te,_e=>{_e==="light"&&(F?.set(Se),ue.lightColorScheme=Se),_e==="dark"&&(U?.set(Se),ue.darkColorScheme=Se)}),ue}):q(Te=>{const ue={...Te},_e=Se.light===null?r:Se.light,se=Se.dark===null?c:Se.dark;return _e&&(R.includes(_e)?(ue.lightColorScheme=_e,F?.set(_e)):console.error(`\`${_e}\` does not exist in \`theme.colorSchemes\`.`)),se&&(R.includes(se)?(ue.darkColorScheme=se,U?.set(se)):console.error(`\`${se}\` does not exist in \`theme.colorSchemes\`.`)),ue}):q(Te=>(F?.set(r),U?.set(c),{...Te,lightColorScheme:r,darkColorScheme:c}))},[R,F,U,r,c]),ae=V.useCallback(Se=>{N.mode==="system"&&q(Te=>{const ue=Se?.matches?"dark":"light";return Te.systemMode===ue?Te:{...Te,systemMode:ue}})},[N.mode]),fe=V.useRef(ae);return fe.current=ae,V.useEffect(()=>{if(typeof window.matchMedia!="function"||!L)return;const Se=(...ue)=>fe.current(...ue),Te=window.matchMedia("(prefers-color-scheme: dark)");return Te.addListener(Se),Se(Te),()=>{Te.removeListener(Se)}},[L]),V.useEffect(()=>{if(L){const Se=P?.subscribe(_e=>{(!_e||["light","dark","system"].includes(_e))&&J(_e||t)})||sT,Te=F?.subscribe(_e=>{(!_e||R.match(_e))&&re({light:_e})})||sT,ue=U?.subscribe(_e=>{(!_e||R.match(_e))&&re({dark:_e})})||sT;return()=>{Se(),Te(),ue()}}},[re,J,R,t,b,L,P,F,U]),{...N,mode:Z?N.mode:void 0,systemMode:Z?N.systemMode:void 0,colorScheme:Z?Y:void 0,setMode:J,setColorScheme:re}}const _$="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function v$(e){const{themeId:t,theme:r={},modeStorageKey:c=fR,colorSchemeStorageKey:h=hR,disableTransitionOnChange:p=!1,defaultColorScheme:y,resolveTheme:b}=e,a={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},E=V.createContext(void 0),R=()=>V.useContext(E)||a,L={},P={};function F(Z){const{children:Q,theme:Y,modeStorageKey:J=c,colorSchemeStorageKey:re=h,disableTransitionOnChange:ae=p,storageManager:fe,storageWindow:Se=typeof window>"u"?void 0:window,documentNode:Te=typeof document>"u"?void 0:document,colorSchemeNode:ue=typeof document>"u"?void 0:document.documentElement,disableNestedContext:_e=!1,disableStyleSheetGeneration:se=!1,defaultMode:me="system",forceThemeRerender:be=!1,noSsr:Ie}=Z,pe=V.useRef(!1),Pe=uR(),et=V.useContext(E),Be=!!et&&!_e,dt=V.useMemo(()=>Y||(typeof r=="function"?r():r),[Y]),Ce=dt[t],Ge=Ce||dt,{colorSchemes:at=L,components:nt=P,cssVarPrefix:gt}=Ge,Pt=Object.keys(at).filter(tr=>!!at[tr]).join(","),Ct=V.useMemo(()=>Pt.split(","),[Pt]),Yt=typeof y=="string"?y:y.light,pt=typeof y=="string"?y:y.dark,Rt=at[Yt]&&at[pt]?me:at[Ge.defaultColorScheme]?.palette?.mode||Ge.palette?.mode,{mode:kt,setMode:Xe,systemMode:xn,lightColorScheme:Vt,darkColorScheme:Kt,colorScheme:sn,setColorScheme:Jt}=y$({supportedColorSchemes:Ct,defaultLightColorScheme:Yt,defaultDarkColorScheme:pt,modeStorageKey:J,colorSchemeStorageKey:re,defaultMode:Rt,storageManager:fe,storageWindow:Se,noSsr:Ie});let zn=kt,gn=sn;Be&&(zn=et.mode,gn=et.colorScheme);let yn=gn||Ge.defaultColorScheme;Ge.vars&&!be&&(yn=Ge.defaultColorScheme);const Cn=V.useMemo(()=>{const tr=Ge.generateThemeVars?.()||Ge.vars,Tn={...Ge,components:nt,colorSchemes:at,cssVarPrefix:gt,vars:tr};if(typeof Tn.generateSpacing=="function"&&(Tn.spacing=Tn.generateSpacing()),yn){const Ln=at[yn];Ln&&typeof Ln=="object"&&Object.keys(Ln).forEach(Xn=>{Ln[Xn]&&typeof Ln[Xn]=="object"?Tn[Xn]={...Tn[Xn],...Ln[Xn]}:Tn[Xn]=Ln[Xn]})}return b?b(Tn):Tn},[Ge,yn,nt,at,gt]),Xt=Ge.colorSchemeSelector;Yl(()=>{if(gn&&ue&&Xt&&Xt!=="media"){const tr=Xt;let Tn=Xt;if(tr==="class"&&(Tn=".%s"),tr==="data"&&(Tn="[data-%s]"),tr?.startsWith("data-")&&!tr.includes("%s")&&(Tn=`[${tr}="%s"]`),Tn.startsWith("."))ue.classList.remove(...Ct.map(Ln=>Tn.substring(1).replace("%s",Ln))),ue.classList.add(Tn.substring(1).replace("%s",gn));else{const Ln=Tn.replace("%s",gn).match(/\[([^\]]+)\]/);if(Ln){const[Xn,lr]=Ln[1].split("=");lr||Ct.forEach(Sn=>{ue.removeAttribute(Xn.replace(gn,Sn))}),ue.setAttribute(Xn,lr?lr.replace(/"|'/g,""):"")}else ue.setAttribute(Tn,gn)}}},[gn,Xt,ue,Ct]),V.useEffect(()=>{let tr;if(ae&&pe.current&&Te){const Tn=Te.createElement("style");Tn.appendChild(Te.createTextNode(_$)),Te.head.appendChild(Tn),window.getComputedStyle(Te.body),tr=setTimeout(()=>{Te.head.removeChild(Tn)},1)}return()=>{clearTimeout(tr)}},[gn,ae,Te]),V.useEffect(()=>(pe.current=!0,()=>{pe.current=!1}),[]);const jn=V.useMemo(()=>({allColorSchemes:Ct,colorScheme:gn,darkColorScheme:Kt,lightColorScheme:Vt,mode:zn,setColorScheme:Jt,setMode:Xe,systemMode:xn}),[Ct,gn,Kt,Vt,zn,Jt,Xe,xn,Cn.colorSchemeSelector]);let _n=!0;(se||Ge.cssVariables===!1||Be&&Pe?.cssVarPrefix===gt)&&(_n=!1);const er=X.jsxs(V.Fragment,{children:[X.jsx(W6,{themeId:Ce?t:void 0,theme:Cn,children:Q}),_n&&X.jsx(k6,{styles:Cn.generateStyleSheets?.()||[]})]});return Be?er:X.jsx(E.Provider,{value:jn,children:er})}const U=typeof y=="string"?y:y.light,N=typeof y=="string"?y:y.dark;return{CssVarsProvider:F,useColorScheme:R,getInitColorSchemeScript:Z=>d$({colorSchemeStorageKey:h,defaultLightColorScheme:U,defaultDarkColorScheme:N,modeStorageKey:c,...Z})}}function x$(e=""){function t(...c){if(!c.length)return"";const h=c[0];return typeof h=="string"&&!h.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${h}${t(...c.slice(1))})`:`, ${h}`}return(c,...h)=>`var(--${e?`${e}-`:""}${c}${t(...h)})`}const b4=(e,t,r,c=[])=>{let h=e;t.forEach((p,y)=>{y===t.length-1?Array.isArray(h)?h[Number(p)]=r:h&&typeof h=="object"&&(h[p]=r):h&&typeof h=="object"&&(h[p]||(h[p]=c.includes(p)?[]:{}),h=h[p])})},b$=(e,t,r)=>{function c(h,p=[],y=[]){Object.entries(h).forEach(([b,a])=>{(!r||r&&!r([...p,b]))&&a!=null&&(typeof a=="object"&&Object.keys(a).length>0?c(a,[...p,b],Array.isArray(a)?[...y,b]:y):t([...p,b],a,y))})}c(e)},w$=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(c=>e.includes(c))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function lT(e,t){const{prefix:r,shouldSkipGeneratingVar:c}=t||{},h={},p={},y={};return b$(e,(b,a,E)=>{if((typeof a=="string"||typeof a=="number")&&(!c||!c(b,a))){const R=`--${r?`${r}-`:""}${b.join("-")}`,L=w$(b,a);Object.assign(h,{[R]:L}),b4(p,b,`var(${R})`,E),b4(y,b,`var(${R}, ${L})`,E)}},b=>b[0]==="vars"),{css:h,vars:p,varsWithDefaults:y}}function S$(e,t={}){const{getSelector:r=Z,disableCssColorScheme:c,colorSchemeSelector:h,enableContrastVars:p}=t,{colorSchemes:y={},components:b,defaultColorScheme:a="light",...E}=e,{vars:R,css:L,varsWithDefaults:P}=lT(E,t);let F=P;const U={},{[a]:N,...q}=y;if(Object.entries(q||{}).forEach(([J,re])=>{const{vars:ae,css:fe,varsWithDefaults:Se}=lT(re,t);F=po(F,Se),U[J]={css:fe,vars:ae}}),N){const{css:J,vars:re,varsWithDefaults:ae}=lT(N,t);F=po(F,ae),U[a]={css:J,vars:re}}function Z(J,re){let ae=h;if(h==="class"&&(ae=".%s"),h==="data"&&(ae="[data-%s]"),h?.startsWith("data-")&&!h.includes("%s")&&(ae=`[${h}="%s"]`),J){if(ae==="media")return e.defaultColorScheme===J?":root":{[`@media (prefers-color-scheme: ${y[J]?.palette?.mode||J})`]:{":root":re}};if(ae)return e.defaultColorScheme===J?`:root, ${ae.replace("%s",String(J))}`:ae.replace("%s",String(J))}return":root"}return{vars:F,generateThemeVars:()=>{let J={...R};return Object.entries(U).forEach(([,{vars:re}])=>{J=po(J,re)}),J},generateStyleSheets:()=>{const J=[],re=e.defaultColorScheme||"light";function ae(Te,ue){Object.keys(ue).length&&J.push(typeof Te=="string"?{[Te]:{...ue}}:Te)}ae(r(void 0,{...L}),L);const{[re]:fe,...Se}=U;if(fe){const{css:Te}=fe,ue=y[re]?.palette?.mode,_e=!c&&ue?{colorScheme:ue,...Te}:{...Te};ae(r(re,{..._e}),_e)}return Object.entries(Se).forEach(([Te,{css:ue}])=>{const _e=y[Te]?.palette?.mode,se=!c&&_e?{colorScheme:_e,...ue}:{...ue};ae(r(Te,{...se}),se)}),p&&J.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),J}}}function T$(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function Sr(e,t,r=void 0){const c={};for(const h in e){const p=e[h];let y="",b=!0;for(let a=0;a<p.length;a+=1){const E=p[a];E&&(y+=(b===!0?"":" ")+t(E),b=!1,r&&r[E]&&(y+=" "+r[E]))}c[h]=y}return c}const E$=zy(),C$=sR("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${sr(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),M$=e=>lR({props:e,name:"MuiContainer",defaultTheme:E$}),A$=(e,t)=>{const r=a=>br(t,a),{classes:c,fixed:h,disableGutters:p,maxWidth:y}=e,b={root:["root",y&&`maxWidth${sr(String(y))}`,h&&"fixed",p&&"disableGutters"]};return Sr(b,r,c)};function R$(e={}){const{createStyledComponent:t=C$,useThemeProps:r=M$,componentName:c="MuiContainer"}=e,h=t(({theme:y,ownerState:b})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!b.disableGutters&&{paddingLeft:y.spacing(2),paddingRight:y.spacing(2),[y.breakpoints.up("sm")]:{paddingLeft:y.spacing(3),paddingRight:y.spacing(3)}}}),({theme:y,ownerState:b})=>b.fixed&&Object.keys(y.breakpoints.values).reduce((a,E)=>{const R=E,L=y.breakpoints.values[R];return L!==0&&(a[y.breakpoints.up(R)]={maxWidth:`${L}${y.breakpoints.unit}`}),a},{}),({theme:y,ownerState:b})=>({...b.maxWidth==="xs"&&{[y.breakpoints.up("xs")]:{maxWidth:Math.max(y.breakpoints.values.xs,444)}},...b.maxWidth&&b.maxWidth!=="xs"&&{[y.breakpoints.up(b.maxWidth)]:{maxWidth:`${y.breakpoints.values[b.maxWidth]}${y.breakpoints.unit}`}}}));return V.forwardRef(function(b,a){const E=r(b),{className:R,component:L="div",disableGutters:P=!1,fixed:F=!1,maxWidth:U="lg",classes:N,...q}=E,Z={...E,component:L,disableGutters:P,fixed:F,maxWidth:U},Q=A$(Z,c);return X.jsx(h,{as:L,ownerState:Z,className:$n(Q.root,R),ref:a,...q})})}function Fb(e,t){return V.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const k$=(e,t)=>e.filter(r=>t.includes(r)),Ly=(e,t,r)=>{const c=e.keys[0];Array.isArray(t)?t.forEach((h,p)=>{r((y,b)=>{p<=e.keys.length-1&&(p===0?Object.assign(y,b):y[e.up(e.keys[p])]=b)},h)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:k$(e.keys,Object.keys(t))).forEach(p=>{if(e.keys.includes(p)){const y=t[p];y!==void 0&&r((b,a)=>{c===p?Object.assign(b,a):b[e.up(p)]=a},y)}}):(typeof t=="number"||typeof t=="string")&&r((h,p)=>{Object.assign(h,p)},t)};function Jb(e){return`--Grid-${e}Spacing`}function q1(e){return`--Grid-parent-${e}Spacing`}const w4="--Grid-columns",dy="--Grid-parent-columns",I$=({theme:e,ownerState:t})=>{const r={};return Ly(e.breakpoints,t.size,(c,h)=>{let p={};h==="grow"&&(p={flexBasis:0,flexGrow:1,maxWidth:"100%"}),h==="auto"&&(p={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof h=="number"&&(p={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${h} / var(${dy}) - (var(${dy}) - ${h}) * (var(${q1("column")}) / var(${dy})))`}),c(r,p)}),r},z$=({theme:e,ownerState:t})=>{const r={};return Ly(e.breakpoints,t.offset,(c,h)=>{let p={};h==="auto"&&(p={marginLeft:"auto"}),typeof h=="number"&&(p={marginLeft:h===0?"0px":`calc(100% * ${h} / var(${dy}) + var(${q1("column")}) * ${h} / var(${dy}))`}),c(r,p)}),r},L$=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={[w4]:12};return Ly(e.breakpoints,t.columns,(c,h)=>{const p=h??12;c(r,{[w4]:p,"> *":{[dy]:p}})}),r},P$=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return Ly(e.breakpoints,t.rowSpacing,(c,h)=>{const p=typeof h=="string"?h:e.spacing?.(h);c(r,{[Jb("row")]:p,"> *":{[q1("row")]:p}})}),r},D$=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return Ly(e.breakpoints,t.columnSpacing,(c,h)=>{const p=typeof h=="string"?h:e.spacing?.(h);c(r,{[Jb("column")]:p,"> *":{[q1("column")]:p}})}),r},O$=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return Ly(e.breakpoints,t.direction,(c,h)=>{c(r,{flexDirection:h})}),r},B$=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${Jb("row")}) var(${Jb("column")})`}}),F$=e=>{const t=[];return Object.entries(e).forEach(([r,c])=>{c!==!1&&c!==void 0&&t.push(`grid-${r}-${String(c)}`)}),t},j$=(e,t="xs")=>{function r(c){return c===void 0?!1:typeof c=="string"&&!Number.isNaN(Number(c))||typeof c=="number"&&c>0}if(r(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const c=[];return Object.entries(e).forEach(([h,p])=>{r(p)&&c.push(`spacing-${h}-${String(p)}`)}),c}return[]},N$=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,r])=>`direction-${t}-${r}`):[`direction-xs-${String(e)}`];function U$(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(r=>{e[r]!==void 0&&delete e[r]})}const $$=zy(),q$=sR("div",{name:"MuiGrid",slot:"Root"});function V$(e){return lR({props:e,name:"MuiGrid",defaultTheme:$$})}function G$(e={}){const{createStyledComponent:t=q$,useThemeProps:r=V$,useTheme:c=jv,componentName:h="MuiGrid"}=e,p=(E,R)=>{const{container:L,direction:P,spacing:F,wrap:U,size:N}=E,q={root:["root",L&&"container",U!=="wrap"&&`wrap-xs-${String(U)}`,...N$(P),...F$(N),...L?j$(F,R.breakpoints.keys[0]):[]]};return Sr(q,Z=>br(h,Z),{})};function y(E,R,L=()=>!0){const P={};return E===null||(Array.isArray(E)?E.forEach((F,U)=>{F!==null&&L(F)&&R.keys[U]&&(P[R.keys[U]]=F)}):typeof E=="object"?Object.keys(E).forEach(F=>{const U=E[F];U!=null&&L(U)&&(P[F]=U)}):P[R.keys[0]]=E),P}const b=t(L$,D$,P$,I$,O$,B$,z$),a=V.forwardRef(function(R,L){const P=c(),F=r(R),U=F1(F);U$(U,P.breakpoints);const{className:N,children:q,columns:Z=12,container:Q=!1,component:Y="div",direction:J="row",wrap:re="wrap",size:ae={},offset:fe={},spacing:Se=0,rowSpacing:Te=Se,columnSpacing:ue=Se,unstable_level:_e=0,...se}=U,me=y(ae,P.breakpoints,Ce=>Ce!==!1),be=y(fe,P.breakpoints),Ie=R.columns??(_e?void 0:Z),pe=R.spacing??(_e?void 0:Se),Pe=R.rowSpacing??R.spacing??(_e?void 0:Te),et=R.columnSpacing??R.spacing??(_e?void 0:ue),Be={...U,level:_e,columns:Ie,container:Q,direction:J,wrap:re,spacing:pe,rowSpacing:Pe,columnSpacing:et,size:me,offset:be},dt=p(Be,P);return X.jsx(b,{ref:L,as:Y,ownerState:Be,className:$n(dt.root,N),...se,children:V.Children.map(q,Ce=>V.isValidElement(Ce)&&Fb(Ce,["Grid"])&&Q&&Ce.props.container?V.cloneElement(Ce,{unstable_level:Ce.props?.unstable_level??_e+1}):Ce)})});return a.muiName="Grid",a}const H$=zy(),W$=sR("div",{name:"MuiStack",slot:"Root"});function Z$(e){return lR({props:e,name:"MuiStack",defaultTheme:H$})}function X$(e,t){const r=V.Children.toArray(e).filter(Boolean);return r.reduce((c,h,p)=>(c.push(h),p<r.length-1&&c.push(V.cloneElement(t,{key:`separator-${p}`})),c),[])}const Y$=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],K$=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...Kc({theme:t},iT({values:e.direction,breakpoints:t.breakpoints.values}),c=>({flexDirection:c}))};if(e.spacing){const c=z1(t),h=Object.keys(t.breakpoints.values).reduce((a,E)=>((typeof e.spacing=="object"&&e.spacing[E]!=null||typeof e.direction=="object"&&e.direction[E]!=null)&&(a[E]=!0),a),{}),p=iT({values:e.direction,base:h}),y=iT({values:e.spacing,base:h});typeof p=="object"&&Object.keys(p).forEach((a,E,R)=>{if(!p[a]){const P=E>0?p[R[E-1]]:"column";p[a]=P}}),r=po(r,Kc({theme:t},y,(a,E)=>e.useFlexGap?{gap:Tm(c,a)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Y$(E?p[E]:e.direction)}`]:Tm(c,a)}}))}return r=WU(t.breakpoints,r),r};function Q$(e={}){const{createStyledComponent:t=W$,useThemeProps:r=Z$,componentName:c="MuiStack"}=e,h=()=>Sr({root:["root"]},a=>br(c,a),{}),p=t(K$);return V.forwardRef(function(a,E){const R=r(a),L=F1(R),{component:P="div",direction:F="column",spacing:U=0,divider:N,children:q,className:Z,useFlexGap:Q=!1,...Y}=L,J={direction:F,spacing:U,useFlexGap:Q},re=h();return X.jsx(p,{as:P,ownerState:J,ref:E,className:$n(re.root,Z),...Y,children:N?X$(q,N):q})})}function X6(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:iv.white,default:iv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Y6=X6();function K6(){return{text:{primary:iv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:iv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const $A=K6();function S4(e,t,r,c){const h=c.light||c,p=c.dark||c*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=U1(e.main,h):t==="dark"&&(e.dark=N1(e.main,p)))}function T4(e,t,r,c,h){const p=h.light||h,y=h.dark||h*1.5;t[r]||(t.hasOwnProperty(c)?t[r]=t[c]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(p*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(y*100).toFixed(0)}%)`))}function J$(e="light"){return e==="dark"?{main:Kg[200],light:Kg[50],dark:Kg[400]}:{main:Kg[700],light:Kg[400],dark:Kg[800]}}function eq(e="light"){return e==="dark"?{main:Yg[200],light:Yg[50],dark:Yg[400]}:{main:Yg[500],light:Yg[300],dark:Yg[700]}}function tq(e="light"){return e==="dark"?{main:Xg[500],light:Xg[300],dark:Xg[700]}:{main:Xg[700],light:Xg[400],dark:Xg[800]}}function nq(e="light"){return e==="dark"?{main:Qg[400],light:Qg[300],dark:Qg[700]}:{main:Qg[700],light:Qg[500],dark:Qg[900]}}function rq(e="light"){return e==="dark"?{main:Jg[400],light:Jg[300],dark:Jg[700]}:{main:Jg[800],light:Jg[500],dark:Jg[900]}}function iq(e="light"){return e==="dark"?{main:v0[400],light:v0[300],dark:v0[700]}:{main:"#ed6c02",light:v0[500],dark:v0[900]}}function aq(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function dR(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:c=.2,colorSpace:h,...p}=e,y=e.primary||J$(t),b=e.secondary||eq(t),a=e.error||tq(t),E=e.info||nq(t),R=e.success||rq(t),L=e.warning||iq(t);function P(q){return h?aq(q):Q2(q,$A.text.primary)>=r?$A.text.primary:Y6.text.primary}const F=({color:q,name:Z,mainShade:Q=500,lightShade:Y=300,darkShade:J=700})=>{if(q={...q},!q.main&&q[Q]&&(q.main=q[Q]),!q.hasOwnProperty("main"))throw new Error(Rh(11,Z?` (${Z})`:"",Q));if(typeof q.main!="string")throw new Error(Rh(12,Z?` (${Z})`:"",JSON.stringify(q.main)));return h?(T4(h,q,"light",Y,c),T4(h,q,"dark",J,c)):(S4(q,"light",Y,c),S4(q,"dark",J,c)),q.contrastText||(q.contrastText=P(q.main)),q};let U;return t==="light"?U=X6():t==="dark"&&(U=K6()),po({common:{...iv},mode:t,primary:F({color:y,name:"primary"}),secondary:F({color:b,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:F({color:a,name:"error"}),warning:F({color:L,name:"warning"}),info:F({color:E,name:"info"}),success:F({color:R,name:"success"}),grey:DA,contrastThreshold:r,getContrastText:P,augmentColor:F,tonalOffset:c,...U},p)}function oq(e){const t={};return Object.entries(e).forEach(c=>{const[h,p]=c;typeof p=="object"&&(t[h]=`${p.fontStyle?`${p.fontStyle} `:""}${p.fontVariant?`${p.fontVariant} `:""}${p.fontWeight?`${p.fontWeight} `:""}${p.fontStretch?`${p.fontStretch} `:""}${p.fontSize||""}${p.lineHeight?`/${p.lineHeight} `:""}${p.fontFamily||""}`)}),t}function sq(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function lq(e){return Math.round(e*1e5)/1e5}const E4={textTransform:"uppercase"},C4='"Roboto", "Helvetica", "Arial", sans-serif';function Q6(e,t){const{fontFamily:r=C4,fontSize:c=14,fontWeightLight:h=300,fontWeightRegular:p=400,fontWeightMedium:y=500,fontWeightBold:b=700,htmlFontSize:a=16,allVariants:E,pxToRem:R,...L}=typeof t=="function"?t(e):t,P=c/14,F=R||(q=>`${q/a*P}rem`),U=(q,Z,Q,Y,J)=>({fontFamily:r,fontWeight:q,fontSize:F(Z),lineHeight:Q,...r===C4?{letterSpacing:`${lq(Y/Z)}em`}:{},...J,...E}),N={h1:U(h,96,1.167,-1.5),h2:U(h,60,1.2,-.5),h3:U(p,48,1.167,0),h4:U(p,34,1.235,.25),h5:U(p,24,1.334,0),h6:U(y,20,1.6,.15),subtitle1:U(p,16,1.75,.15),subtitle2:U(y,14,1.57,.1),body1:U(p,16,1.5,.15),body2:U(p,14,1.43,.15),button:U(y,14,1.75,.4,E4),caption:U(p,12,1.66,.4),overline:U(p,12,2.66,1,E4),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return po({htmlFontSize:a,pxToRem:F,fontFamily:r,fontSize:c,fontWeightLight:h,fontWeightRegular:p,fontWeightMedium:y,fontWeightBold:b,...N},L,{clone:!1})}const cq=.2,uq=.14,fq=.12;function fa(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${cq})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${uq})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${fq})`].join(",")}const hq=["none",fa(0,2,1,-1,0,1,1,0,0,1,3,0),fa(0,3,1,-2,0,2,2,0,0,1,5,0),fa(0,3,3,-2,0,3,4,0,0,1,8,0),fa(0,2,4,-1,0,4,5,0,0,1,10,0),fa(0,3,5,-1,0,5,8,0,0,1,14,0),fa(0,3,5,-1,0,6,10,0,0,1,18,0),fa(0,4,5,-2,0,7,10,1,0,2,16,1),fa(0,5,5,-3,0,8,10,1,0,3,14,2),fa(0,5,6,-3,0,9,12,1,0,3,16,2),fa(0,6,6,-3,0,10,14,1,0,4,18,3),fa(0,6,7,-4,0,11,15,1,0,4,20,3),fa(0,7,8,-4,0,12,17,2,0,5,22,4),fa(0,7,8,-4,0,13,19,2,0,5,24,4),fa(0,7,9,-4,0,14,21,2,0,5,26,4),fa(0,8,9,-5,0,15,22,2,0,6,28,5),fa(0,8,10,-5,0,16,24,2,0,6,30,5),fa(0,8,11,-5,0,17,26,2,0,6,32,5),fa(0,9,11,-5,0,18,28,2,0,7,34,6),fa(0,9,12,-6,0,19,29,2,0,7,36,6),fa(0,10,13,-6,0,20,31,3,0,8,38,7),fa(0,10,13,-6,0,21,33,3,0,8,40,7),fa(0,10,14,-6,0,22,35,3,0,8,42,7),fa(0,11,14,-7,0,23,36,3,0,9,44,8),fa(0,11,15,-7,0,24,38,3,0,9,46,8)],dq={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},pq={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function M4(e){return`${Math.round(e)}ms`}function mq(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function gq(e){const t={...dq,...e.easing},r={...pq,...e.duration};return{getAutoHeightDuration:mq,create:(h=["all"],p={})=>{const{duration:y=r.standard,easing:b=t.easeInOut,delay:a=0,...E}=p;return(Array.isArray(h)?h:[h]).map(R=>`${R} ${typeof y=="string"?y:M4(y)} ${b} ${typeof a=="string"?a:M4(a)}`).join(",")},...e,easing:t,duration:r}}const yq={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function _q(e){return af(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function J6(e={}){const t={...e};function r(c){const h=Object.entries(c);for(let p=0;p<h.length;p++){const[y,b]=h[p];!_q(b)||y.startsWith("unstable_")?delete c[y]:af(b)&&(c[y]={...b},r(c[y]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function A4(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const vq=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let c=0;c<t.length;c+=1)r+=+t[c];return r};function xq(e){Object.assign(e,{alpha(t,r){const c=this||e;return c.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:c.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:Qb(t,vq(r))},lighten(t,r){const c=this||e;return c.colorSpace?`color-mix(in ${c.colorSpace}, ${t}, #fff ${A4(r)})`:U1(t,r)},darken(t,r){const c=this||e;return c.colorSpace?`color-mix(in ${c.colorSpace}, ${t}, #000 ${A4(r)})`:N1(t,r)}})}function qA(e={},...t){const{breakpoints:r,mixins:c={},spacing:h,palette:p={},transitions:y={},typography:b={},shape:a,colorSpace:E,...R}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Rh(20));const L=dR({...p,colorSpace:E}),P=zy(e);let F=po(P,{mixins:sq(P.breakpoints,c),palette:L,shadows:hq.slice(),typography:Q6(L,b),transitions:gq(y),zIndex:{...yq}});return F=po(F,R),F=t.reduce((U,N)=>po(U,N),F),F.unstable_sxConfig={...Fv,...R?.unstable_sxConfig},F.unstable_sx=function(N){return Xd({sx:N,theme:this})},F.toRuntimeSource=J6,xq(F),F}function VA(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const bq=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=VA(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function eB(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function tB(e){return e==="dark"?bq:[]}function wq(e){const{palette:t={mode:"light"},opacity:r,overlays:c,colorSpace:h,...p}=e,y=dR({...t,colorSpace:h});return{palette:y,opacity:{...eB(y.mode),...r},overlays:c||tB(y.mode),...p}}function Sq(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Tq=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Eq=e=>(t,r)=>{const c=e.rootSelector||":root",h=e.colorSchemeSelector;let p=h;if(h==="class"&&(p=".%s"),h==="data"&&(p="[data-%s]"),h?.startsWith("data-")&&!h.includes("%s")&&(p=`[${h}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const y={};return Tq(e.cssVarPrefix).forEach(b=>{y[b]=r[b],delete r[b]}),p==="media"?{[c]:r,"@media (prefers-color-scheme: dark)":{[c]:y}}:p?{[p.replace("%s",t)]:y,[`${c}, ${p.replace("%s",t)}`]:r}:{[c]:{...r,...y}}}if(p&&p!=="media")return`${c}, ${p.replace("%s",String(t))}`}else if(t){if(p==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[c]:r}};if(p)return p.replace("%s",String(t))}return c};function Cq(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Bt(e,t,r){!e[t]&&r&&(e[t]=r)}function B0(e){return typeof e!="string"||!e.startsWith("hsl")?e:q6(e)}function vh(e,t){`${t}Channel`in e||(e[`${t}Channel`]=O0(B0(e[t])))}function Mq(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Ku=e=>{try{return e()}catch{}},Aq=(e="mui")=>x$(e);function cT(e,t,r,c,h){if(!r)return;r=r===!0?{}:r;const p=h==="dark"?"dark":"light";if(!c){t[h]=wq({...r,palette:{mode:p,...r?.palette},colorSpace:e});return}const{palette:y,...b}=qA({...c,palette:{mode:p,...r?.palette},colorSpace:e});return t[h]={...r,palette:y,opacity:{...eB(p),...r?.opacity},overlays:r?.overlays||tB(p)},b}function Rq(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:c,disableCssColorScheme:h=!1,cssVarPrefix:p="mui",nativeColor:y=!1,shouldSkipGeneratingVar:b=Sq,colorSchemeSelector:a=r.light&&r.dark?"media":void 0,rootSelector:E=":root",...R}=e,L=Object.keys(r)[0],P=c||(r.light&&L!=="light"?"light":L),F=Aq(p),{[P]:U,light:N,dark:q,...Z}=r,Q={...Z};let Y=U;if((P==="dark"&&!("dark"in r)||P==="light"&&!("light"in r))&&(Y=!0),!Y)throw new Error(Rh(21,P));let J;y&&(J="oklch");const re=cT(J,Q,Y,R,P);N&&!Q.light&&cT(J,Q,N,void 0,"light"),q&&!Q.dark&&cT(J,Q,q,void 0,"dark");let ae={defaultColorScheme:P,...re,cssVarPrefix:p,colorSchemeSelector:a,rootSelector:E,getCssVar:F,colorSchemes:Q,font:{...oq(re.typography),...re.font},spacing:Mq(R.spacing)};Object.keys(ae.colorSchemes).forEach(_e=>{const se=ae.colorSchemes[_e].palette,me=Ie=>{const pe=Ie.split("-"),Pe=pe[1],et=pe[2];return F(Ie,se[Pe][et])};se.mode==="light"&&(Bt(se.common,"background","#fff"),Bt(se.common,"onBackground","#000")),se.mode==="dark"&&(Bt(se.common,"background","#000"),Bt(se.common,"onBackground","#fff"));function be(Ie,pe,Pe){if(J){let et;return Ie===im&&(et=`transparent ${((1-Pe)*100).toFixed(0)}%`),Ie===Di&&(et=`#000 ${(Pe*100).toFixed(0)}%`),Ie===Oi&&(et=`#fff ${(Pe*100).toFixed(0)}%`),`color-mix(in ${J}, ${pe}, ${et})`}return Ie(pe,Pe)}if(Cq(se,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),se.mode==="light"){Bt(se.Alert,"errorColor",be(Di,se.error.light,.6)),Bt(se.Alert,"infoColor",be(Di,se.info.light,.6)),Bt(se.Alert,"successColor",be(Di,se.success.light,.6)),Bt(se.Alert,"warningColor",be(Di,se.warning.light,.6)),Bt(se.Alert,"errorFilledBg",me("palette-error-main")),Bt(se.Alert,"infoFilledBg",me("palette-info-main")),Bt(se.Alert,"successFilledBg",me("palette-success-main")),Bt(se.Alert,"warningFilledBg",me("palette-warning-main")),Bt(se.Alert,"errorFilledColor",Ku(()=>se.getContrastText(se.error.main))),Bt(se.Alert,"infoFilledColor",Ku(()=>se.getContrastText(se.info.main))),Bt(se.Alert,"successFilledColor",Ku(()=>se.getContrastText(se.success.main))),Bt(se.Alert,"warningFilledColor",Ku(()=>se.getContrastText(se.warning.main))),Bt(se.Alert,"errorStandardBg",be(Oi,se.error.light,.9)),Bt(se.Alert,"infoStandardBg",be(Oi,se.info.light,.9)),Bt(se.Alert,"successStandardBg",be(Oi,se.success.light,.9)),Bt(se.Alert,"warningStandardBg",be(Oi,se.warning.light,.9)),Bt(se.Alert,"errorIconColor",me("palette-error-main")),Bt(se.Alert,"infoIconColor",me("palette-info-main")),Bt(se.Alert,"successIconColor",me("palette-success-main")),Bt(se.Alert,"warningIconColor",me("palette-warning-main")),Bt(se.AppBar,"defaultBg",me("palette-grey-100")),Bt(se.Avatar,"defaultBg",me("palette-grey-400")),Bt(se.Button,"inheritContainedBg",me("palette-grey-300")),Bt(se.Button,"inheritContainedHoverBg",me("palette-grey-A100")),Bt(se.Chip,"defaultBorder",me("palette-grey-400")),Bt(se.Chip,"defaultAvatarColor",me("palette-grey-700")),Bt(se.Chip,"defaultIconColor",me("palette-grey-700")),Bt(se.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Bt(se.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Bt(se.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Bt(se.LinearProgress,"primaryBg",be(Oi,se.primary.main,.62)),Bt(se.LinearProgress,"secondaryBg",be(Oi,se.secondary.main,.62)),Bt(se.LinearProgress,"errorBg",be(Oi,se.error.main,.62)),Bt(se.LinearProgress,"infoBg",be(Oi,se.info.main,.62)),Bt(se.LinearProgress,"successBg",be(Oi,se.success.main,.62)),Bt(se.LinearProgress,"warningBg",be(Oi,se.warning.main,.62)),Bt(se.Skeleton,"bg",J?be(im,se.text.primary,.11):`rgba(${me("palette-text-primaryChannel")} / 0.11)`),Bt(se.Slider,"primaryTrack",be(Oi,se.primary.main,.62)),Bt(se.Slider,"secondaryTrack",be(Oi,se.secondary.main,.62)),Bt(se.Slider,"errorTrack",be(Oi,se.error.main,.62)),Bt(se.Slider,"infoTrack",be(Oi,se.info.main,.62)),Bt(se.Slider,"successTrack",be(Oi,se.success.main,.62)),Bt(se.Slider,"warningTrack",be(Oi,se.warning.main,.62));const Ie=J?be(Di,se.background.default,.6825):gb(se.background.default,.8);Bt(se.SnackbarContent,"bg",Ie),Bt(se.SnackbarContent,"color",Ku(()=>J?$A.text.primary:se.getContrastText(Ie))),Bt(se.SpeedDialAction,"fabHoverBg",gb(se.background.paper,.15)),Bt(se.StepConnector,"border",me("palette-grey-400")),Bt(se.StepContent,"border",me("palette-grey-400")),Bt(se.Switch,"defaultColor",me("palette-common-white")),Bt(se.Switch,"defaultDisabledColor",me("palette-grey-100")),Bt(se.Switch,"primaryDisabledColor",be(Oi,se.primary.main,.62)),Bt(se.Switch,"secondaryDisabledColor",be(Oi,se.secondary.main,.62)),Bt(se.Switch,"errorDisabledColor",be(Oi,se.error.main,.62)),Bt(se.Switch,"infoDisabledColor",be(Oi,se.info.main,.62)),Bt(se.Switch,"successDisabledColor",be(Oi,se.success.main,.62)),Bt(se.Switch,"warningDisabledColor",be(Oi,se.warning.main,.62)),Bt(se.TableCell,"border",be(Oi,be(im,se.divider,1),.88)),Bt(se.Tooltip,"bg",be(im,se.grey[700],.92))}if(se.mode==="dark"){Bt(se.Alert,"errorColor",be(Oi,se.error.light,.6)),Bt(se.Alert,"infoColor",be(Oi,se.info.light,.6)),Bt(se.Alert,"successColor",be(Oi,se.success.light,.6)),Bt(se.Alert,"warningColor",be(Oi,se.warning.light,.6)),Bt(se.Alert,"errorFilledBg",me("palette-error-dark")),Bt(se.Alert,"infoFilledBg",me("palette-info-dark")),Bt(se.Alert,"successFilledBg",me("palette-success-dark")),Bt(se.Alert,"warningFilledBg",me("palette-warning-dark")),Bt(se.Alert,"errorFilledColor",Ku(()=>se.getContrastText(se.error.dark))),Bt(se.Alert,"infoFilledColor",Ku(()=>se.getContrastText(se.info.dark))),Bt(se.Alert,"successFilledColor",Ku(()=>se.getContrastText(se.success.dark))),Bt(se.Alert,"warningFilledColor",Ku(()=>se.getContrastText(se.warning.dark))),Bt(se.Alert,"errorStandardBg",be(Di,se.error.light,.9)),Bt(se.Alert,"infoStandardBg",be(Di,se.info.light,.9)),Bt(se.Alert,"successStandardBg",be(Di,se.success.light,.9)),Bt(se.Alert,"warningStandardBg",be(Di,se.warning.light,.9)),Bt(se.Alert,"errorIconColor",me("palette-error-main")),Bt(se.Alert,"infoIconColor",me("palette-info-main")),Bt(se.Alert,"successIconColor",me("palette-success-main")),Bt(se.Alert,"warningIconColor",me("palette-warning-main")),Bt(se.AppBar,"defaultBg",me("palette-grey-900")),Bt(se.AppBar,"darkBg",me("palette-background-paper")),Bt(se.AppBar,"darkColor",me("palette-text-primary")),Bt(se.Avatar,"defaultBg",me("palette-grey-600")),Bt(se.Button,"inheritContainedBg",me("palette-grey-800")),Bt(se.Button,"inheritContainedHoverBg",me("palette-grey-700")),Bt(se.Chip,"defaultBorder",me("palette-grey-700")),Bt(se.Chip,"defaultAvatarColor",me("palette-grey-300")),Bt(se.Chip,"defaultIconColor",me("palette-grey-300")),Bt(se.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Bt(se.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Bt(se.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Bt(se.LinearProgress,"primaryBg",be(Di,se.primary.main,.5)),Bt(se.LinearProgress,"secondaryBg",be(Di,se.secondary.main,.5)),Bt(se.LinearProgress,"errorBg",be(Di,se.error.main,.5)),Bt(se.LinearProgress,"infoBg",be(Di,se.info.main,.5)),Bt(se.LinearProgress,"successBg",be(Di,se.success.main,.5)),Bt(se.LinearProgress,"warningBg",be(Di,se.warning.main,.5)),Bt(se.Skeleton,"bg",J?be(im,se.text.primary,.13):`rgba(${me("palette-text-primaryChannel")} / 0.13)`),Bt(se.Slider,"primaryTrack",be(Di,se.primary.main,.5)),Bt(se.Slider,"secondaryTrack",be(Di,se.secondary.main,.5)),Bt(se.Slider,"errorTrack",be(Di,se.error.main,.5)),Bt(se.Slider,"infoTrack",be(Di,se.info.main,.5)),Bt(se.Slider,"successTrack",be(Di,se.success.main,.5)),Bt(se.Slider,"warningTrack",be(Di,se.warning.main,.5));const Ie=J?be(Oi,se.background.default,.985):gb(se.background.default,.98);Bt(se.SnackbarContent,"bg",Ie),Bt(se.SnackbarContent,"color",Ku(()=>J?Y6.text.primary:se.getContrastText(Ie))),Bt(se.SpeedDialAction,"fabHoverBg",gb(se.background.paper,.15)),Bt(se.StepConnector,"border",me("palette-grey-600")),Bt(se.StepContent,"border",me("palette-grey-600")),Bt(se.Switch,"defaultColor",me("palette-grey-300")),Bt(se.Switch,"defaultDisabledColor",me("palette-grey-600")),Bt(se.Switch,"primaryDisabledColor",be(Di,se.primary.main,.55)),Bt(se.Switch,"secondaryDisabledColor",be(Di,se.secondary.main,.55)),Bt(se.Switch,"errorDisabledColor",be(Di,se.error.main,.55)),Bt(se.Switch,"infoDisabledColor",be(Di,se.info.main,.55)),Bt(se.Switch,"successDisabledColor",be(Di,se.success.main,.55)),Bt(se.Switch,"warningDisabledColor",be(Di,se.warning.main,.55)),Bt(se.TableCell,"border",be(Di,be(im,se.divider,1),.68)),Bt(se.Tooltip,"bg",be(im,se.grey[700],.92))}vh(se.background,"default"),vh(se.background,"paper"),vh(se.common,"background"),vh(se.common,"onBackground"),vh(se,"divider"),Object.keys(se).forEach(Ie=>{const pe=se[Ie];Ie!=="tonalOffset"&&pe&&typeof pe=="object"&&(pe.main&&Bt(se[Ie],"mainChannel",O0(B0(pe.main))),pe.light&&Bt(se[Ie],"lightChannel",O0(B0(pe.light))),pe.dark&&Bt(se[Ie],"darkChannel",O0(B0(pe.dark))),pe.contrastText&&Bt(se[Ie],"contrastTextChannel",O0(B0(pe.contrastText))),Ie==="text"&&(vh(se[Ie],"primary"),vh(se[Ie],"secondary")),Ie==="action"&&(pe.active&&vh(se[Ie],"active"),pe.selected&&vh(se[Ie],"selected")))})}),ae=t.reduce((_e,se)=>po(_e,se),ae);const fe={prefix:p,disableCssColorScheme:h,shouldSkipGeneratingVar:b,getSelector:Eq(ae),enableContrastVars:y},{vars:Se,generateThemeVars:Te,generateStyleSheets:ue}=S$(ae,fe);return ae.vars=Se,Object.entries(ae.colorSchemes[ae.defaultColorScheme]).forEach(([_e,se])=>{ae[_e]=se}),ae.generateThemeVars=Te,ae.generateStyleSheets=ue,ae.generateSpacing=function(){return O6(R.spacing,z1(this))},ae.getColorSchemeSelector=T$(a),ae.spacing=ae.generateSpacing(),ae.shouldSkipGeneratingVar=b,ae.unstable_sxConfig={...Fv,...R?.unstable_sxConfig},ae.unstable_sx=function(se){return Xd({sx:se,theme:this})},ae.toRuntimeSource=J6,ae}function R4(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:dR({...r===!0?{}:r.palette,mode:t})})}function V1(e={},...t){const{palette:r,cssVariables:c=!1,colorSchemes:h=r?void 0:{light:!0},defaultColorScheme:p=r?.mode,...y}=e,b=p||"light",a=h?.[b],E={...h,...r?{[b]:{...typeof a!="boolean"&&a,palette:r}}:void 0};if(c===!1){if(!("colorSchemes"in e))return qA(e,...t);let R=r;"palette"in e||E[b]&&(E[b]!==!0?R=E[b].palette:b==="dark"&&(R={mode:"dark"}));const L=qA({...e,palette:R},...t);return L.defaultColorScheme=b,L.colorSchemes=E,L.palette.mode==="light"&&(L.colorSchemes.light={...E.light!==!0&&E.light,palette:L.palette},R4(L,"dark",E.dark)),L.palette.mode==="dark"&&(L.colorSchemes.dark={...E.dark!==!0&&E.dark,palette:L.palette},R4(L,"light",E.light)),L}return!r&&!("light"in E)&&b==="light"&&(E.light=!0),Rq({...y,colorSchemes:E,defaultColorScheme:b,...typeof c!="boolean"&&c},...t)}const pR=V1();function Om(){const e=jv(pR);return e[lf]||e}function nB(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const tu=e=>nB(e)&&e!=="classes",mn=$6({themeId:lf,defaultTheme:pR,rootShouldForwardProp:tu});function kq({theme:e,...t}){const r=lf in e?e[lf]:void 0;return X.jsx(W6,{...t,themeId:r?lf:void 0,theme:r||e})}const yb={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:Iq}=v$({themeId:lf,theme:()=>V1({cssVariables:!0}),colorSchemeStorageKey:yb.colorSchemeStorageKey,modeStorageKey:yb.modeStorageKey,defaultColorScheme:{light:yb.defaultLightColorScheme,dark:yb.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:Q6(e.palette,e.typography)};return t.unstable_sx=function(c){return Xd({sx:c,theme:this})},t}}),zq=Iq;function Lq({theme:e,...t}){const r=V.useMemo(()=>{if(typeof e=="function")return e;const c=lf in e?e[lf]:e;return"colorSchemes"in c?null:"vars"in c?e:{...e,vars:null}},[e]);return r?X.jsx(kq,{theme:r,...t}):X.jsx(zq,{theme:e,...t})}function k4(...e){return e.reduce((t,r)=>r==null?t:function(...h){t.apply(this,h),r.apply(this,h)},()=>{})}function Pq(e){return X.jsx(B6,{...e,defaultTheme:pR,themeId:lf})}function mR(e){return function(r){return X.jsx(Pq,{styles:typeof e=="function"?c=>e({theme:c,...r}):e})}}function Dq(){return F1}const Hr=f$;function Tr(e){return s$(e)}function Oq(e){return br("MuiSvgIcon",e)}wr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Bq=e=>{const{color:t,fontSize:r,classes:c}=e,h={root:["root",t!=="inherit"&&`color${sr(t)}`,`fontSize${sr(r)}`]};return Sr(h,Oq,c)},Fq=mn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${sr(r.color)}`],t[`fontSize${sr(r.fontSize)}`]]}})(Hr(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),GA=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiSvgIcon"}),{children:h,className:p,color:y="inherit",component:b="svg",fontSize:a="medium",htmlColor:E,inheritViewBox:R=!1,titleAccess:L,viewBox:P="0 0 24 24",...F}=c,U=V.isValidElement(h)&&h.type==="svg",N={...c,color:y,component:b,fontSize:a,instanceFontSize:t.fontSize,inheritViewBox:R,viewBox:P,hasSvgAsChild:U},q={};R||(q.viewBox=P);const Z=Bq(N);return X.jsxs(Fq,{as:b,className:$n(Z.root,p),focusable:"false",color:E,"aria-hidden":L?void 0:!0,role:L?"img":void 0,ref:r,...q,...F,...U&&h.props,ownerState:N,children:[U?h.props.children:h,L?X.jsx("title",{children:L}):null]})});GA.muiName="SvgIcon";function Qo(e,t){function r(c,h){return X.jsx(GA,{"data-testid":void 0,ref:h,...c,children:e})}return r.muiName=GA.muiName,V.memo(V.forwardRef(r))}function rB(e,t=166){let r;function c(...h){const p=()=>{e.apply(this,h)};clearTimeout(r),r=setTimeout(p,t)}return c.clear=()=>{clearTimeout(r)},c}function ll(e){return e&&e.ownerDocument||document}function kh(e){return ll(e).defaultView||window}function I4(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function HA(e){const{controlled:t,default:r,name:c,state:h="value"}=e,{current:p}=V.useRef(t!==void 0),[y,b]=V.useState(r),a=p?t:y,E=V.useCallback(R=>{p||b(R)},[]);return[a,E]}function Ch(e){const t=V.useRef(e);return Yl(()=>{t.current=e}),V.useRef((...r)=>(0,t.current)(...r)).current}function mo(...e){const t=V.useRef(void 0),r=V.useCallback(c=>{const h=e.map(p=>{if(p==null)return null;if(typeof p=="function"){const y=p,b=y(c);return typeof b=="function"?b:()=>{y(null)}}return p.current=c,()=>{p.current=null}});return()=>{h.forEach(p=>p?.())}},e);return V.useMemo(()=>e.every(c=>c==null)?null:c=>{t.current&&(t.current(),t.current=void 0),c!=null&&(t.current=r(c))},e)}function jq(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function Nq(e,t){if(!e)return t;function r(y,b){const a={};return Object.keys(b).forEach(E=>{jq(E,b[E])&&typeof y[E]=="function"&&(a[E]=(...R)=>{y[E](...R),b[E](...R)})}),a}if(typeof e=="function"||typeof t=="function")return y=>{const b=typeof t=="function"?t(y):t,a=typeof e=="function"?e({...y,...b}):e,E=$n(y?.className,b?.className,a?.className),R=r(a,b);return{...b,...a,...R,...!!E&&{className:E},...b?.style&&a?.style&&{style:{...b.style,...a.style}},...b?.sx&&a?.sx&&{sx:[...Array.isArray(b.sx)?b.sx:[b.sx],...Array.isArray(a.sx)?a.sx:[a.sx]]}}};const c=t,h=r(e,c),p=$n(c?.className,e?.className);return{...t,...e,...h,...!!p&&{className:p},...c?.style&&e?.style&&{style:{...c.style,...e.style}},...c?.sx&&e?.sx&&{sx:[...Array.isArray(c.sx)?c.sx:[c.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function iB(e,t){if(e==null)return{};var r={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;r[c]=e[c]}return r}function WA(e,t){return WA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,c){return r.__proto__=c,r},WA(e,t)}function aB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,WA(e,t)}const z4={disabled:!1},e1=sf.createContext(null);var Uq=function(t){return t.scrollTop},F0="unmounted",lm="exited",cm="entering",sy="entered",ZA="exiting",_f=(function(e){aB(t,e);function t(c,h){var p;p=e.call(this,c,h)||this;var y=h,b=y&&!y.isMounting?c.enter:c.appear,a;return p.appearStatus=null,c.in?b?(a=lm,p.appearStatus=cm):a=sy:c.unmountOnExit||c.mountOnEnter?a=F0:a=lm,p.state={status:a},p.nextCallback=null,p}t.getDerivedStateFromProps=function(h,p){var y=h.in;return y&&p.status===F0?{status:lm}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(h){var p=null;if(h!==this.props){var y=this.state.status;this.props.in?y!==cm&&y!==sy&&(p=cm):(y===cm||y===sy)&&(p=ZA)}this.updateStatus(!1,p)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var h=this.props.timeout,p,y,b;return p=y=b=h,h!=null&&typeof h!="number"&&(p=h.exit,y=h.enter,b=h.appear!==void 0?h.appear:y),{exit:p,enter:y,appear:b}},r.updateStatus=function(h,p){if(h===void 0&&(h=!1),p!==null)if(this.cancelNextCallback(),p===cm){if(this.props.unmountOnExit||this.props.mountOnEnter){var y=this.props.nodeRef?this.props.nodeRef.current:db.findDOMNode(this);y&&Uq(y)}this.performEnter(h)}else this.performExit();else this.props.unmountOnExit&&this.state.status===lm&&this.setState({status:F0})},r.performEnter=function(h){var p=this,y=this.props.enter,b=this.context?this.context.isMounting:h,a=this.props.nodeRef?[b]:[db.findDOMNode(this),b],E=a[0],R=a[1],L=this.getTimeouts(),P=b?L.appear:L.enter;if(!h&&!y||z4.disabled){this.safeSetState({status:sy},function(){p.props.onEntered(E)});return}this.props.onEnter(E,R),this.safeSetState({status:cm},function(){p.props.onEntering(E,R),p.onTransitionEnd(P,function(){p.safeSetState({status:sy},function(){p.props.onEntered(E,R)})})})},r.performExit=function(){var h=this,p=this.props.exit,y=this.getTimeouts(),b=this.props.nodeRef?void 0:db.findDOMNode(this);if(!p||z4.disabled){this.safeSetState({status:lm},function(){h.props.onExited(b)});return}this.props.onExit(b),this.safeSetState({status:ZA},function(){h.props.onExiting(b),h.onTransitionEnd(y.exit,function(){h.safeSetState({status:lm},function(){h.props.onExited(b)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(h,p){p=this.setNextCallback(p),this.setState(h,p)},r.setNextCallback=function(h){var p=this,y=!0;return this.nextCallback=function(b){y&&(y=!1,p.nextCallback=null,h(b))},this.nextCallback.cancel=function(){y=!1},this.nextCallback},r.onTransitionEnd=function(h,p){this.setNextCallback(p);var y=this.props.nodeRef?this.props.nodeRef.current:db.findDOMNode(this),b=h==null&&!this.props.addEndListener;if(!y||b){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[y,this.nextCallback],E=a[0],R=a[1];this.props.addEndListener(E,R)}h!=null&&setTimeout(this.nextCallback,h)},r.render=function(){var h=this.state.status;if(h===F0)return null;var p=this.props,y=p.children;p.in,p.mountOnEnter,p.unmountOnExit,p.appear,p.enter,p.exit,p.timeout,p.addEndListener,p.onEnter,p.onEntering,p.onEntered,p.onExit,p.onExiting,p.onExited,p.nodeRef;var b=iB(p,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return sf.createElement(e1.Provider,{value:null},typeof y=="function"?y(h,b):sf.cloneElement(sf.Children.only(y),b))},t})(sf.Component);_f.contextType=e1;_f.propTypes={};function ey(){}_f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ey,onEntering:ey,onEntered:ey,onExit:ey,onExiting:ey,onExited:ey};_f.UNMOUNTED=F0;_f.EXITED=lm;_f.ENTERING=cm;_f.ENTERED=sy;_f.EXITING=ZA;function $q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gR(e,t){var r=function(p){return t&&V.isValidElement(p)?t(p):p},c=Object.create(null);return e&&V.Children.map(e,function(h){return h}).forEach(function(h){c[h.key]=r(h)}),c}function qq(e,t){e=e||{},t=t||{};function r(R){return R in t?t[R]:e[R]}var c=Object.create(null),h=[];for(var p in e)p in t?h.length&&(c[p]=h,h=[]):h.push(p);var y,b={};for(var a in t){if(c[a])for(y=0;y<c[a].length;y++){var E=c[a][y];b[c[a][y]]=r(E)}b[a]=r(a)}for(y=0;y<h.length;y++)b[h[y]]=r(h[y]);return b}function dm(e,t,r){return r[t]!=null?r[t]:e.props[t]}function Vq(e,t){return gR(e.children,function(r){return V.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:dm(r,"appear",e),enter:dm(r,"enter",e),exit:dm(r,"exit",e)})})}function Gq(e,t,r){var c=gR(e.children),h=qq(t,c);return Object.keys(h).forEach(function(p){var y=h[p];if(V.isValidElement(y)){var b=p in t,a=p in c,E=t[p],R=V.isValidElement(E)&&!E.props.in;a&&(!b||R)?h[p]=V.cloneElement(y,{onExited:r.bind(null,y),in:!0,exit:dm(y,"exit",e),enter:dm(y,"enter",e)}):!a&&b&&!R?h[p]=V.cloneElement(y,{in:!1}):a&&b&&V.isValidElement(E)&&(h[p]=V.cloneElement(y,{onExited:r.bind(null,y),in:E.props.in,exit:dm(y,"exit",e),enter:dm(y,"enter",e)}))}}),h}var Hq=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Wq={component:"div",childFactory:function(t){return t}},yR=(function(e){aB(t,e);function t(c,h){var p;p=e.call(this,c,h)||this;var y=p.handleExited.bind($q(p));return p.state={contextValue:{isMounting:!0},handleExited:y,firstRender:!0},p}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(h,p){var y=p.children,b=p.handleExited,a=p.firstRender;return{children:a?Vq(h,b):Gq(h,y,b),firstRender:!1}},r.handleExited=function(h,p){var y=gR(this.props.children);h.key in y||(h.props.onExited&&h.props.onExited(p),this.mounted&&this.setState(function(b){var a=Zb({},b.children);return delete a[h.key],{children:a}}))},r.render=function(){var h=this.props,p=h.component,y=h.childFactory,b=iB(h,["component","childFactory"]),a=this.state.contextValue,E=Hq(this.state.children).map(y);return delete b.appear,delete b.enter,delete b.exit,p===null?sf.createElement(e1.Provider,{value:a},E):sf.createElement(e1.Provider,{value:a},sf.createElement(p,b,E))},t})(sf.Component);yR.propTypes={};yR.defaultProps=Wq;const L4={};function oB(e,t){const r=V.useRef(L4);return r.current===L4&&(r.current=e(t)),r}const Zq=[];function Xq(e){V.useEffect(e,Zq)}class G1{static create(){return new G1}currentId=null;start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function ly(){const e=oB(G1.create).current;return Xq(e.disposeEffect),e}const sB=e=>e.scrollTop;function t1(e,t){const{timeout:r,easing:c,style:h={}}=e;return{duration:h.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:h.transitionTimingFunction??(typeof c=="object"?c[t.mode]:c),delay:h.transitionDelay}}function Yq(e){return br("MuiPaper",e)}wr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Kq=e=>{const{square:t,elevation:r,variant:c,classes:h}=e,p={root:["root",c,!t&&"rounded",c==="elevation"&&`elevation${r}`]};return Sr(p,Yq,h)},Qq=mn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(Hr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),_R=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiPaper"}),h=Om(),{className:p,component:y="div",elevation:b=1,square:a=!1,variant:E="elevation",...R}=c,L={...c,component:y,elevation:b,square:a,variant:E},P=Kq(L);return X.jsx(Qq,{as:y,ownerState:L,className:$n(P.root,p),ref:r,...R,style:{...E==="elevation"&&{"--Paper-shadow":(h.vars||h).shadows[b],...h.vars&&{"--Paper-overlay":h.vars.overlays?.[b]},...!h.vars&&h.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Qb("#fff",VA(b))}, ${Qb("#fff",VA(b))})`}},...R.style}})});function n1(e){return typeof e=="string"}function lB(e,t,r){return e===void 0||n1(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function cB(e,t,r){return typeof e=="function"?e(t,r):e}function uB(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(c=>c.match(/^on[A-Z]/)&&typeof e[c]=="function"&&!t.includes(c)).forEach(c=>{r[c]=e[c]}),r}function P4(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function fB(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:c,externalForwardedProps:h,className:p}=e;if(!t){const F=$n(r?.className,p,h?.className,c?.className),U={...r?.style,...h?.style,...c?.style},N={...r,...h,...c};return F.length>0&&(N.className=F),Object.keys(U).length>0&&(N.style=U),{props:N,internalRef:void 0}}const y=uB({...h,...c}),b=P4(c),a=P4(h),E=t(y),R=$n(E?.className,r?.className,p,h?.className,c?.className),L={...E?.style,...r?.style,...h?.style,...c?.style},P={...E,...r,...a,...b};return R.length>0&&(P.className=R),Object.keys(L).length>0&&(P.style=L),{props:P,internalRef:E.ref}}function Wi(e,t){const{className:r,elementType:c,ownerState:h,externalForwardedProps:p,internalForwardedProps:y,shouldForwardComponentProp:b=!1,...a}=t,{component:E,slots:R={[e]:void 0},slotProps:L={[e]:void 0},...P}=p,F=R[e]||c,U=cB(L[e],h),{props:{component:N,...q},internalRef:Z}=fB({className:r,...a,externalForwardedProps:e==="root"?P:void 0,externalSlotProps:U}),Q=mo(Z,U?.ref,t.ref),Y=e==="root"?N||E:N,J=lB(F,{...e==="root"&&!E&&!R[e]&&y,...e!=="root"&&!R[e]&&y,...q,...Y&&!b&&{as:Y},...Y&&b&&{component:Y},ref:Q},h);return[F,J]}function r1(e){try{return e.matches(":focus-visible")}catch{}return!1}class i1{static create(){return new i1}static use(){const t=oB(i1.create).current,[r,c]=V.useState(!1);return t.shouldMount=r,t.setShouldMount=c,V.useEffect(t.mountEffect,[r]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=eV(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Jq(){return i1.use()}function eV(){let e,t;const r=new Promise((c,h)=>{e=c,t=h});return r.resolve=e,r.reject=t,r}function tV(e){const{className:t,classes:r,pulsate:c=!1,rippleX:h,rippleY:p,rippleSize:y,in:b,onExited:a,timeout:E}=e,[R,L]=V.useState(!1),P=$n(t,r.ripple,r.rippleVisible,c&&r.ripplePulsate),F={width:y,height:y,top:-(y/2)+p,left:-(y/2)+h},U=$n(r.child,R&&r.childLeaving,c&&r.childPulsate);return!b&&!R&&L(!0),V.useEffect(()=>{if(!b&&a!=null){const N=setTimeout(a,E);return()=>{clearTimeout(N)}}},[a,b,E]),X.jsx("span",{className:P,style:F,children:X.jsx("span",{className:U})})}const Nl=wr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),XA=550,nV=80,rV=Ov`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,iV=Ov`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,aV=Ov`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,oV=mn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),sV=mn(tV,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Nl.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${rV};
    animation-duration: ${XA}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Nl.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Nl.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Nl.childLeaving} {
    opacity: 0;
    animation-name: ${iV};
    animation-duration: ${XA}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Nl.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${aV};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,lV=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTouchRipple"}),{center:h=!1,classes:p={},className:y,...b}=c,[a,E]=V.useState([]),R=V.useRef(0),L=V.useRef(null);V.useEffect(()=>{L.current&&(L.current(),L.current=null)},[a]);const P=V.useRef(!1),F=ly(),U=V.useRef(null),N=V.useRef(null),q=V.useCallback(J=>{const{pulsate:re,rippleX:ae,rippleY:fe,rippleSize:Se,cb:Te}=J;E(ue=>[...ue,X.jsx(sV,{classes:{ripple:$n(p.ripple,Nl.ripple),rippleVisible:$n(p.rippleVisible,Nl.rippleVisible),ripplePulsate:$n(p.ripplePulsate,Nl.ripplePulsate),child:$n(p.child,Nl.child),childLeaving:$n(p.childLeaving,Nl.childLeaving),childPulsate:$n(p.childPulsate,Nl.childPulsate)},timeout:XA,pulsate:re,rippleX:ae,rippleY:fe,rippleSize:Se},R.current)]),R.current+=1,L.current=Te},[p]),Z=V.useCallback((J={},re={},ae=()=>{})=>{const{pulsate:fe=!1,center:Se=h||re.pulsate,fakeElement:Te=!1}=re;if(J?.type==="mousedown"&&P.current){P.current=!1;return}J?.type==="touchstart"&&(P.current=!0);const ue=Te?null:N.current,_e=ue?ue.getBoundingClientRect():{width:0,height:0,left:0,top:0};let se,me,be;if(Se||J===void 0||J.clientX===0&&J.clientY===0||!J.clientX&&!J.touches)se=Math.round(_e.width/2),me=Math.round(_e.height/2);else{const{clientX:Ie,clientY:pe}=J.touches&&J.touches.length>0?J.touches[0]:J;se=Math.round(Ie-_e.left),me=Math.round(pe-_e.top)}if(Se)be=Math.sqrt((2*_e.width**2+_e.height**2)/3),be%2===0&&(be+=1);else{const Ie=Math.max(Math.abs((ue?ue.clientWidth:0)-se),se)*2+2,pe=Math.max(Math.abs((ue?ue.clientHeight:0)-me),me)*2+2;be=Math.sqrt(Ie**2+pe**2)}J?.touches?U.current===null&&(U.current=()=>{q({pulsate:fe,rippleX:se,rippleY:me,rippleSize:be,cb:ae})},F.start(nV,()=>{U.current&&(U.current(),U.current=null)})):q({pulsate:fe,rippleX:se,rippleY:me,rippleSize:be,cb:ae})},[h,q,F]),Q=V.useCallback(()=>{Z({},{pulsate:!0})},[Z]),Y=V.useCallback((J,re)=>{if(F.clear(),J?.type==="touchend"&&U.current){U.current(),U.current=null,F.start(0,()=>{Y(J,re)});return}U.current=null,E(ae=>ae.length>0?ae.slice(1):ae),L.current=re},[F]);return V.useImperativeHandle(r,()=>({pulsate:Q,start:Z,stop:Y}),[Q,Z,Y]),X.jsx(oV,{className:$n(Nl.root,p.root,y),ref:N,...b,children:X.jsx(yR,{component:null,exit:!0,children:a})})});function cV(e){return br("MuiButtonBase",e)}const uV=wr("MuiButtonBase",["root","disabled","focusVisible"]),fV=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:c,classes:h}=e,y=Sr({root:["root",t&&"disabled",r&&"focusVisible"]},cV,h);return r&&c&&(y.root+=` ${c}`),y},hV=mn("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${uV.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),hB=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiButtonBase"}),{action:h,centerRipple:p=!1,children:y,className:b,component:a="button",disabled:E=!1,disableRipple:R=!1,disableTouchRipple:L=!1,focusRipple:P=!1,focusVisibleClassName:F,LinkComponent:U="a",onBlur:N,onClick:q,onContextMenu:Z,onDragLeave:Q,onFocus:Y,onFocusVisible:J,onKeyDown:re,onKeyUp:ae,onMouseDown:fe,onMouseLeave:Se,onMouseUp:Te,onTouchEnd:ue,onTouchMove:_e,onTouchStart:se,tabIndex:me=0,TouchRippleProps:be,touchRippleRef:Ie,type:pe,...Pe}=c,et=V.useRef(null),Be=Jq(),dt=mo(Be.ref,Ie),[Ce,Ge]=V.useState(!1);E&&Ce&&Ge(!1),V.useImperativeHandle(h,()=>({focusVisible:()=>{Ge(!0),et.current.focus()}}),[]);const at=Be.shouldMount&&!R&&!E;V.useEffect(()=>{Ce&&P&&!R&&Be.pulsate()},[R,P,Ce,Be]);const nt=xh(Be,"start",fe,L),gt=xh(Be,"stop",Z,L),Pt=xh(Be,"stop",Q,L),Ct=xh(Be,"stop",Te,L),Yt=xh(Be,"stop",Xt=>{Ce&&Xt.preventDefault(),Se&&Se(Xt)},L),pt=xh(Be,"start",se,L),Rt=xh(Be,"stop",ue,L),kt=xh(Be,"stop",_e,L),Xe=xh(Be,"stop",Xt=>{r1(Xt.target)||Ge(!1),N&&N(Xt)},!1),xn=Ch(Xt=>{et.current||(et.current=Xt.currentTarget),r1(Xt.target)&&(Ge(!0),J&&J(Xt)),Y&&Y(Xt)}),Vt=()=>{const Xt=et.current;return a&&a!=="button"&&!(Xt.tagName==="A"&&Xt.href)},Kt=Ch(Xt=>{P&&!Xt.repeat&&Ce&&Xt.key===" "&&Be.stop(Xt,()=>{Be.start(Xt)}),Xt.target===Xt.currentTarget&&Vt()&&Xt.key===" "&&Xt.preventDefault(),re&&re(Xt),Xt.target===Xt.currentTarget&&Vt()&&Xt.key==="Enter"&&!E&&(Xt.preventDefault(),q&&q(Xt))}),sn=Ch(Xt=>{P&&Xt.key===" "&&Ce&&!Xt.defaultPrevented&&Be.stop(Xt,()=>{Be.pulsate(Xt)}),ae&&ae(Xt),q&&Xt.target===Xt.currentTarget&&Vt()&&Xt.key===" "&&!Xt.defaultPrevented&&q(Xt)});let Jt=a;Jt==="button"&&(Pe.href||Pe.to)&&(Jt=U);const zn={};Jt==="button"?(zn.type=pe===void 0?"button":pe,zn.disabled=E):(!Pe.href&&!Pe.to&&(zn.role="button"),E&&(zn["aria-disabled"]=E));const gn=mo(r,et),yn={...c,centerRipple:p,component:a,disabled:E,disableRipple:R,disableTouchRipple:L,focusRipple:P,tabIndex:me,focusVisible:Ce},Cn=fV(yn);return X.jsxs(hV,{as:Jt,className:$n(Cn.root,b),ownerState:yn,onBlur:Xe,onClick:q,onContextMenu:gt,onFocus:xn,onKeyDown:Kt,onKeyUp:sn,onMouseDown:nt,onMouseLeave:Yt,onMouseUp:Ct,onDragLeave:Pt,onTouchEnd:Rt,onTouchMove:kt,onTouchStart:pt,ref:gn,tabIndex:E?-1:me,type:pe,...zn,...Pe,children:[y,at?X.jsx(lV,{ref:dt,center:p,...be}):null]})});function xh(e,t,r,c=!1){return Ch(h=>(r&&r(h),c||e[t](h),!0))}function dV(e){return typeof e.main=="string"}function pV(e,t=[]){if(!dV(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Ih(e=[]){return([,t])=>t&&pV(t,e)}function mV(e){return br("MuiCircularProgress",e)}wr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Hc=44,YA=Ov`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,KA=Ov`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,gV=typeof YA!="string"?nR`
        animation: ${YA} 1.4s linear infinite;
      `:null,yV=typeof KA!="string"?nR`
        animation: ${KA} 1.4s ease-in-out infinite;
      `:null,_V=e=>{const{classes:t,variant:r,color:c,disableShrink:h}=e,p={root:["root",r,`color${sr(c)}`],svg:["svg"],track:["track"],circle:["circle",`circle${sr(r)}`,h&&"circleDisableShrink"]};return Sr(p,mV,t)},vV=mn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${sr(r.color)}`]]}})(Hr(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:gV||{animation:`${YA} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Ih()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),xV=mn("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),bV=mn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${sr(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(Hr(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:yV||{animation:`${KA} 1.4s ease-in-out infinite`}}]}))),wV=mn("circle",{name:"MuiCircularProgress",slot:"Track"})(Hr(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),H1=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiCircularProgress"}),{className:h,color:p="primary",disableShrink:y=!1,enableTrackSlot:b=!1,size:a=40,style:E,thickness:R=3.6,value:L=0,variant:P="indeterminate",...F}=c,U={...c,color:p,disableShrink:y,size:a,thickness:R,value:L,variant:P,enableTrackSlot:b},N=_V(U),q={},Z={},Q={};if(P==="determinate"){const Y=2*Math.PI*((Hc-R)/2);q.strokeDasharray=Y.toFixed(3),Q["aria-valuenow"]=Math.round(L),q.strokeDashoffset=`${((100-L)/100*Y).toFixed(3)}px`,Z.transform="rotate(-90deg)"}return X.jsx(vV,{className:$n(N.root,h),style:{width:a,height:a,...Z,...E},ownerState:U,ref:r,role:"progressbar",...Q,...F,children:X.jsxs(xV,{className:N.svg,ownerState:U,viewBox:`${Hc/2} ${Hc/2} ${Hc} ${Hc}`,children:[b?X.jsx(wV,{className:N.track,ownerState:U,cx:Hc,cy:Hc,r:(Hc-R)/2,fill:"none",strokeWidth:R,"aria-hidden":"true"}):null,X.jsx(bV,{className:N.circle,style:q,ownerState:U,cx:Hc,cy:Hc,r:(Hc-R)/2,fill:"none",strokeWidth:R})]})})});function SV(e){return br("MuiIconButton",e)}const D4=wr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),TV=e=>{const{classes:t,disabled:r,color:c,edge:h,size:p,loading:y}=e,b={root:["root",y&&"loading",r&&"disabled",c!=="default"&&`color${sr(c)}`,h&&`edge${sr(h)}`,`size${sr(p)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Sr(b,SV,t)},EV=mn(hB,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${sr(r.color)}`],r.edge&&t[`edge${sr(r.edge)}`],t[`size${sr(r.size)}`]]}})(Hr(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Hr(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Ih()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Ih()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${D4.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${D4.loading}`]:{color:"transparent"}}))),CV=mn("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),wh=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiIconButton"}),{edge:h=!1,children:p,className:y,color:b="default",disabled:a=!1,disableFocusRipple:E=!1,size:R="medium",id:L,loading:P=null,loadingIndicator:F,...U}=c,N=Em(L),q=F??X.jsx(H1,{"aria-labelledby":N,color:"inherit",size:16}),Z={...c,edge:h,color:b,disabled:a,disableFocusRipple:E,loading:P,loadingIndicator:q,size:R},Q=TV(Z);return X.jsxs(EV,{id:P?N:L,className:$n(Q.root,y),centerRipple:!0,focusRipple:!E,disabled:a||P,ref:r,...U,ownerState:Z,children:[typeof P=="boolean"&&X.jsx("span",{className:Q.loadingWrapper,style:{display:"contents"},children:X.jsx(CV,{className:Q.loadingIndicator,ownerState:Z,children:P&&q})}),p]})});function MV(e){return br("MuiTypography",e)}wr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const AV={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},RV=Dq(),kV=e=>{const{align:t,gutterBottom:r,noWrap:c,paragraph:h,variant:p,classes:y}=e,b={root:["root",p,e.align!=="inherit"&&`align${sr(t)}`,r&&"gutterBottom",c&&"noWrap",h&&"paragraph"]};return Sr(b,MV,y)},IV=mn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${sr(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(Hr(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(e.palette).filter(Ih()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${sr(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),O4={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Li=V.forwardRef(function(t,r){const{color:c,...h}=Tr({props:t,name:"MuiTypography"}),p=!AV[c],y=RV({...h,...p&&{color:c}}),{align:b="inherit",className:a,component:E,gutterBottom:R=!1,noWrap:L=!1,paragraph:P=!1,variant:F="body1",variantMapping:U=O4,...N}=y,q={...y,align:b,color:c,className:a,component:E,gutterBottom:R,noWrap:L,paragraph:P,variant:F,variantMapping:U},Z=E||(P?"p":U[F]||O4[F])||"span",Q=kV(q);return X.jsx(IV,{as:Z,ref:r,className:$n(Q.root,a),...N,ownerState:q,style:{...b!=="inherit"&&{"--Typography-textAlign":b},...N.style}})});function zV(e){return br("MuiAppBar",e)}wr("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const LV=e=>{const{color:t,position:r,classes:c}=e,h={root:["root",`color${sr(t)}`,`position${sr(r)}`]};return Sr(h,zV,c)},B4=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,PV=mn(_R,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${sr(r.position)}`],t[`color${sr(r.color)}`]]}})(Hr(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Ih(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?B4(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?B4(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),DV=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiAppBar"}),{className:h,color:p="primary",enableColorOnDark:y=!1,position:b="fixed",...a}=c,E={...c,color:p,position:b,enableColorOnDark:y},R=LV(E);return X.jsx(PV,{square:!0,component:"header",ownerState:E,elevation:4,className:$n(R.root,h,b==="fixed"&&"mui-fixed"),ref:r,...a})});var Os="top",Kl="bottom",Ql="right",Bs="left",vR="auto",Nv=[Os,Kl,Ql,Bs],vy="start",lv="end",OV="clippingParents",dB="viewport",b0="popper",BV="reference",F4=Nv.reduce(function(e,t){return e.concat([t+"-"+vy,t+"-"+lv])},[]),pB=[].concat(Nv,[vR]).reduce(function(e,t){return e.concat([t,t+"-"+vy,t+"-"+lv])},[]),FV="beforeRead",jV="read",NV="afterRead",UV="beforeMain",$V="main",qV="afterMain",VV="beforeWrite",GV="write",HV="afterWrite",WV=[FV,jV,NV,UV,$V,qV,VV,GV,HV];function df(e){return e?(e.nodeName||"").toLowerCase():null}function cl(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Cm(e){var t=cl(e).Element;return e instanceof t||e instanceof Element}function Wl(e){var t=cl(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function xR(e){if(typeof ShadowRoot>"u")return!1;var t=cl(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ZV(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var c=t.styles[r]||{},h=t.attributes[r]||{},p=t.elements[r];!Wl(p)||!df(p)||(Object.assign(p.style,c),Object.keys(h).forEach(function(y){var b=h[y];b===!1?p.removeAttribute(y):p.setAttribute(y,b===!0?"":b)}))})}function XV(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(c){var h=t.elements[c],p=t.attributes[c]||{},y=Object.keys(t.styles.hasOwnProperty(c)?t.styles[c]:r[c]),b=y.reduce(function(a,E){return a[E]="",a},{});!Wl(h)||!df(h)||(Object.assign(h.style,b),Object.keys(p).forEach(function(a){h.removeAttribute(a)}))})}}const YV={name:"applyStyles",enabled:!0,phase:"write",fn:ZV,effect:XV,requires:["computeStyles"]};function uf(e){return e.split("-")[0]}var vm=Math.max,a1=Math.min,xy=Math.round;function QA(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function mB(){return!/^((?!chrome|android).)*safari/i.test(QA())}function by(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var c=e.getBoundingClientRect(),h=1,p=1;t&&Wl(e)&&(h=e.offsetWidth>0&&xy(c.width)/e.offsetWidth||1,p=e.offsetHeight>0&&xy(c.height)/e.offsetHeight||1);var y=Cm(e)?cl(e):window,b=y.visualViewport,a=!mB()&&r,E=(c.left+(a&&b?b.offsetLeft:0))/h,R=(c.top+(a&&b?b.offsetTop:0))/p,L=c.width/h,P=c.height/p;return{width:L,height:P,top:R,right:E+L,bottom:R+P,left:E,x:E,y:R}}function bR(e){var t=by(e),r=e.offsetWidth,c=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-c)<=1&&(c=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:c}}function gB(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&xR(r)){var c=t;do{if(c&&e.isSameNode(c))return!0;c=c.parentNode||c.host}while(c)}return!1}function zh(e){return cl(e).getComputedStyle(e)}function KV(e){return["table","td","th"].indexOf(df(e))>=0}function np(e){return((Cm(e)?e.ownerDocument:e.document)||window.document).documentElement}function W1(e){return df(e)==="html"?e:e.assignedSlot||e.parentNode||(xR(e)?e.host:null)||np(e)}function j4(e){return!Wl(e)||zh(e).position==="fixed"?null:e.offsetParent}function QV(e){var t=/firefox/i.test(QA()),r=/Trident/i.test(QA());if(r&&Wl(e)){var c=zh(e);if(c.position==="fixed")return null}var h=W1(e);for(xR(h)&&(h=h.host);Wl(h)&&["html","body"].indexOf(df(h))<0;){var p=zh(h);if(p.transform!=="none"||p.perspective!=="none"||p.contain==="paint"||["transform","perspective"].indexOf(p.willChange)!==-1||t&&p.willChange==="filter"||t&&p.filter&&p.filter!=="none")return h;h=h.parentNode}return null}function Uv(e){for(var t=cl(e),r=j4(e);r&&KV(r)&&zh(r).position==="static";)r=j4(r);return r&&(df(r)==="html"||df(r)==="body"&&zh(r).position==="static")?t:r||QV(e)||t}function wR(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function G0(e,t,r){return vm(e,a1(t,r))}function JV(e,t,r){var c=G0(e,t,r);return c>r?r:c}function yB(){return{top:0,right:0,bottom:0,left:0}}function _B(e){return Object.assign({},yB(),e)}function vB(e,t){return t.reduce(function(r,c){return r[c]=e,r},{})}var eG=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,_B(typeof t!="number"?t:vB(t,Nv))};function tG(e){var t,r=e.state,c=e.name,h=e.options,p=r.elements.arrow,y=r.modifiersData.popperOffsets,b=uf(r.placement),a=wR(b),E=[Bs,Ql].indexOf(b)>=0,R=E?"height":"width";if(!(!p||!y)){var L=eG(h.padding,r),P=bR(p),F=a==="y"?Os:Bs,U=a==="y"?Kl:Ql,N=r.rects.reference[R]+r.rects.reference[a]-y[a]-r.rects.popper[R],q=y[a]-r.rects.reference[a],Z=Uv(p),Q=Z?a==="y"?Z.clientHeight||0:Z.clientWidth||0:0,Y=N/2-q/2,J=L[F],re=Q-P[R]-L[U],ae=Q/2-P[R]/2+Y,fe=G0(J,ae,re),Se=a;r.modifiersData[c]=(t={},t[Se]=fe,t.centerOffset=fe-ae,t)}}function nG(e){var t=e.state,r=e.options,c=r.element,h=c===void 0?"[data-popper-arrow]":c;h!=null&&(typeof h=="string"&&(h=t.elements.popper.querySelector(h),!h)||gB(t.elements.popper,h)&&(t.elements.arrow=h))}const rG={name:"arrow",enabled:!0,phase:"main",fn:tG,effect:nG,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wy(e){return e.split("-")[1]}var iG={top:"auto",right:"auto",bottom:"auto",left:"auto"};function aG(e,t){var r=e.x,c=e.y,h=t.devicePixelRatio||1;return{x:xy(r*h)/h||0,y:xy(c*h)/h||0}}function N4(e){var t,r=e.popper,c=e.popperRect,h=e.placement,p=e.variation,y=e.offsets,b=e.position,a=e.gpuAcceleration,E=e.adaptive,R=e.roundOffsets,L=e.isFixed,P=y.x,F=P===void 0?0:P,U=y.y,N=U===void 0?0:U,q=typeof R=="function"?R({x:F,y:N}):{x:F,y:N};F=q.x,N=q.y;var Z=y.hasOwnProperty("x"),Q=y.hasOwnProperty("y"),Y=Bs,J=Os,re=window;if(E){var ae=Uv(r),fe="clientHeight",Se="clientWidth";if(ae===cl(r)&&(ae=np(r),zh(ae).position!=="static"&&b==="absolute"&&(fe="scrollHeight",Se="scrollWidth")),ae=ae,h===Os||(h===Bs||h===Ql)&&p===lv){J=Kl;var Te=L&&ae===re&&re.visualViewport?re.visualViewport.height:ae[fe];N-=Te-c.height,N*=a?1:-1}if(h===Bs||(h===Os||h===Kl)&&p===lv){Y=Ql;var ue=L&&ae===re&&re.visualViewport?re.visualViewport.width:ae[Se];F-=ue-c.width,F*=a?1:-1}}var _e=Object.assign({position:b},E&&iG),se=R===!0?aG({x:F,y:N},cl(r)):{x:F,y:N};if(F=se.x,N=se.y,a){var me;return Object.assign({},_e,(me={},me[J]=Q?"0":"",me[Y]=Z?"0":"",me.transform=(re.devicePixelRatio||1)<=1?"translate("+F+"px, "+N+"px)":"translate3d("+F+"px, "+N+"px, 0)",me))}return Object.assign({},_e,(t={},t[J]=Q?N+"px":"",t[Y]=Z?F+"px":"",t.transform="",t))}function oG(e){var t=e.state,r=e.options,c=r.gpuAcceleration,h=c===void 0?!0:c,p=r.adaptive,y=p===void 0?!0:p,b=r.roundOffsets,a=b===void 0?!0:b,E={placement:uf(t.placement),variation:wy(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:h,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,N4(Object.assign({},E,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:y,roundOffsets:a})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,N4(Object.assign({},E,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const sG={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:oG,data:{}};var _b={passive:!0};function lG(e){var t=e.state,r=e.instance,c=e.options,h=c.scroll,p=h===void 0?!0:h,y=c.resize,b=y===void 0?!0:y,a=cl(t.elements.popper),E=[].concat(t.scrollParents.reference,t.scrollParents.popper);return p&&E.forEach(function(R){R.addEventListener("scroll",r.update,_b)}),b&&a.addEventListener("resize",r.update,_b),function(){p&&E.forEach(function(R){R.removeEventListener("scroll",r.update,_b)}),b&&a.removeEventListener("resize",r.update,_b)}}const cG={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lG,data:{}};var uG={left:"right",right:"left",bottom:"top",top:"bottom"};function jb(e){return e.replace(/left|right|bottom|top/g,function(t){return uG[t]})}var fG={start:"end",end:"start"};function U4(e){return e.replace(/start|end/g,function(t){return fG[t]})}function SR(e){var t=cl(e),r=t.pageXOffset,c=t.pageYOffset;return{scrollLeft:r,scrollTop:c}}function TR(e){return by(np(e)).left+SR(e).scrollLeft}function hG(e,t){var r=cl(e),c=np(e),h=r.visualViewport,p=c.clientWidth,y=c.clientHeight,b=0,a=0;if(h){p=h.width,y=h.height;var E=mB();(E||!E&&t==="fixed")&&(b=h.offsetLeft,a=h.offsetTop)}return{width:p,height:y,x:b+TR(e),y:a}}function dG(e){var t,r=np(e),c=SR(e),h=(t=e.ownerDocument)==null?void 0:t.body,p=vm(r.scrollWidth,r.clientWidth,h?h.scrollWidth:0,h?h.clientWidth:0),y=vm(r.scrollHeight,r.clientHeight,h?h.scrollHeight:0,h?h.clientHeight:0),b=-c.scrollLeft+TR(e),a=-c.scrollTop;return zh(h||r).direction==="rtl"&&(b+=vm(r.clientWidth,h?h.clientWidth:0)-p),{width:p,height:y,x:b,y:a}}function ER(e){var t=zh(e),r=t.overflow,c=t.overflowX,h=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+h+c)}function xB(e){return["html","body","#document"].indexOf(df(e))>=0?e.ownerDocument.body:Wl(e)&&ER(e)?e:xB(W1(e))}function H0(e,t){var r;t===void 0&&(t=[]);var c=xB(e),h=c===((r=e.ownerDocument)==null?void 0:r.body),p=cl(c),y=h?[p].concat(p.visualViewport||[],ER(c)?c:[]):c,b=t.concat(y);return h?b:b.concat(H0(W1(y)))}function JA(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function pG(e,t){var r=by(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function $4(e,t,r){return t===dB?JA(hG(e,r)):Cm(t)?pG(t,r):JA(dG(np(e)))}function mG(e){var t=H0(W1(e)),r=["absolute","fixed"].indexOf(zh(e).position)>=0,c=r&&Wl(e)?Uv(e):e;return Cm(c)?t.filter(function(h){return Cm(h)&&gB(h,c)&&df(h)!=="body"}):[]}function gG(e,t,r,c){var h=t==="clippingParents"?mG(e):[].concat(t),p=[].concat(h,[r]),y=p[0],b=p.reduce(function(a,E){var R=$4(e,E,c);return a.top=vm(R.top,a.top),a.right=a1(R.right,a.right),a.bottom=a1(R.bottom,a.bottom),a.left=vm(R.left,a.left),a},$4(e,y,c));return b.width=b.right-b.left,b.height=b.bottom-b.top,b.x=b.left,b.y=b.top,b}function bB(e){var t=e.reference,r=e.element,c=e.placement,h=c?uf(c):null,p=c?wy(c):null,y=t.x+t.width/2-r.width/2,b=t.y+t.height/2-r.height/2,a;switch(h){case Os:a={x:y,y:t.y-r.height};break;case Kl:a={x:y,y:t.y+t.height};break;case Ql:a={x:t.x+t.width,y:b};break;case Bs:a={x:t.x-r.width,y:b};break;default:a={x:t.x,y:t.y}}var E=h?wR(h):null;if(E!=null){var R=E==="y"?"height":"width";switch(p){case vy:a[E]=a[E]-(t[R]/2-r[R]/2);break;case lv:a[E]=a[E]+(t[R]/2-r[R]/2);break}}return a}function cv(e,t){t===void 0&&(t={});var r=t,c=r.placement,h=c===void 0?e.placement:c,p=r.strategy,y=p===void 0?e.strategy:p,b=r.boundary,a=b===void 0?OV:b,E=r.rootBoundary,R=E===void 0?dB:E,L=r.elementContext,P=L===void 0?b0:L,F=r.altBoundary,U=F===void 0?!1:F,N=r.padding,q=N===void 0?0:N,Z=_B(typeof q!="number"?q:vB(q,Nv)),Q=P===b0?BV:b0,Y=e.rects.popper,J=e.elements[U?Q:P],re=gG(Cm(J)?J:J.contextElement||np(e.elements.popper),a,R,y),ae=by(e.elements.reference),fe=bB({reference:ae,element:Y,placement:h}),Se=JA(Object.assign({},Y,fe)),Te=P===b0?Se:ae,ue={top:re.top-Te.top+Z.top,bottom:Te.bottom-re.bottom+Z.bottom,left:re.left-Te.left+Z.left,right:Te.right-re.right+Z.right},_e=e.modifiersData.offset;if(P===b0&&_e){var se=_e[h];Object.keys(ue).forEach(function(me){var be=[Ql,Kl].indexOf(me)>=0?1:-1,Ie=[Os,Kl].indexOf(me)>=0?"y":"x";ue[me]+=se[Ie]*be})}return ue}function yG(e,t){t===void 0&&(t={});var r=t,c=r.placement,h=r.boundary,p=r.rootBoundary,y=r.padding,b=r.flipVariations,a=r.allowedAutoPlacements,E=a===void 0?pB:a,R=wy(c),L=R?b?F4:F4.filter(function(U){return wy(U)===R}):Nv,P=L.filter(function(U){return E.indexOf(U)>=0});P.length===0&&(P=L);var F=P.reduce(function(U,N){return U[N]=cv(e,{placement:N,boundary:h,rootBoundary:p,padding:y})[uf(N)],U},{});return Object.keys(F).sort(function(U,N){return F[U]-F[N]})}function _G(e){if(uf(e)===vR)return[];var t=jb(e);return[U4(e),t,U4(t)]}function vG(e){var t=e.state,r=e.options,c=e.name;if(!t.modifiersData[c]._skip){for(var h=r.mainAxis,p=h===void 0?!0:h,y=r.altAxis,b=y===void 0?!0:y,a=r.fallbackPlacements,E=r.padding,R=r.boundary,L=r.rootBoundary,P=r.altBoundary,F=r.flipVariations,U=F===void 0?!0:F,N=r.allowedAutoPlacements,q=t.options.placement,Z=uf(q),Q=Z===q,Y=a||(Q||!U?[jb(q)]:_G(q)),J=[q].concat(Y).reduce(function(nt,gt){return nt.concat(uf(gt)===vR?yG(t,{placement:gt,boundary:R,rootBoundary:L,padding:E,flipVariations:U,allowedAutoPlacements:N}):gt)},[]),re=t.rects.reference,ae=t.rects.popper,fe=new Map,Se=!0,Te=J[0],ue=0;ue<J.length;ue++){var _e=J[ue],se=uf(_e),me=wy(_e)===vy,be=[Os,Kl].indexOf(se)>=0,Ie=be?"width":"height",pe=cv(t,{placement:_e,boundary:R,rootBoundary:L,altBoundary:P,padding:E}),Pe=be?me?Ql:Bs:me?Kl:Os;re[Ie]>ae[Ie]&&(Pe=jb(Pe));var et=jb(Pe),Be=[];if(p&&Be.push(pe[se]<=0),b&&Be.push(pe[Pe]<=0,pe[et]<=0),Be.every(function(nt){return nt})){Te=_e,Se=!1;break}fe.set(_e,Be)}if(Se)for(var dt=U?3:1,Ce=function(gt){var Pt=J.find(function(Ct){var Yt=fe.get(Ct);if(Yt)return Yt.slice(0,gt).every(function(pt){return pt})});if(Pt)return Te=Pt,"break"},Ge=dt;Ge>0;Ge--){var at=Ce(Ge);if(at==="break")break}t.placement!==Te&&(t.modifiersData[c]._skip=!0,t.placement=Te,t.reset=!0)}}const xG={name:"flip",enabled:!0,phase:"main",fn:vG,requiresIfExists:["offset"],data:{_skip:!1}};function q4(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function V4(e){return[Os,Ql,Kl,Bs].some(function(t){return e[t]>=0})}function bG(e){var t=e.state,r=e.name,c=t.rects.reference,h=t.rects.popper,p=t.modifiersData.preventOverflow,y=cv(t,{elementContext:"reference"}),b=cv(t,{altBoundary:!0}),a=q4(y,c),E=q4(b,h,p),R=V4(a),L=V4(E);t.modifiersData[r]={referenceClippingOffsets:a,popperEscapeOffsets:E,isReferenceHidden:R,hasPopperEscaped:L},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":R,"data-popper-escaped":L})}const wG={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bG};function SG(e,t,r){var c=uf(e),h=[Bs,Os].indexOf(c)>=0?-1:1,p=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,y=p[0],b=p[1];return y=y||0,b=(b||0)*h,[Bs,Ql].indexOf(c)>=0?{x:b,y}:{x:y,y:b}}function TG(e){var t=e.state,r=e.options,c=e.name,h=r.offset,p=h===void 0?[0,0]:h,y=pB.reduce(function(R,L){return R[L]=SG(L,t.rects,p),R},{}),b=y[t.placement],a=b.x,E=b.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=a,t.modifiersData.popperOffsets.y+=E),t.modifiersData[c]=y}const EG={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:TG};function CG(e){var t=e.state,r=e.name;t.modifiersData[r]=bB({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const MG={name:"popperOffsets",enabled:!0,phase:"read",fn:CG,data:{}};function AG(e){return e==="x"?"y":"x"}function RG(e){var t=e.state,r=e.options,c=e.name,h=r.mainAxis,p=h===void 0?!0:h,y=r.altAxis,b=y===void 0?!1:y,a=r.boundary,E=r.rootBoundary,R=r.altBoundary,L=r.padding,P=r.tether,F=P===void 0?!0:P,U=r.tetherOffset,N=U===void 0?0:U,q=cv(t,{boundary:a,rootBoundary:E,padding:L,altBoundary:R}),Z=uf(t.placement),Q=wy(t.placement),Y=!Q,J=wR(Z),re=AG(J),ae=t.modifiersData.popperOffsets,fe=t.rects.reference,Se=t.rects.popper,Te=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,ue=typeof Te=="number"?{mainAxis:Te,altAxis:Te}:Object.assign({mainAxis:0,altAxis:0},Te),_e=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,se={x:0,y:0};if(ae){if(p){var me,be=J==="y"?Os:Bs,Ie=J==="y"?Kl:Ql,pe=J==="y"?"height":"width",Pe=ae[J],et=Pe+q[be],Be=Pe-q[Ie],dt=F?-Se[pe]/2:0,Ce=Q===vy?fe[pe]:Se[pe],Ge=Q===vy?-Se[pe]:-fe[pe],at=t.elements.arrow,nt=F&&at?bR(at):{width:0,height:0},gt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:yB(),Pt=gt[be],Ct=gt[Ie],Yt=G0(0,fe[pe],nt[pe]),pt=Y?fe[pe]/2-dt-Yt-Pt-ue.mainAxis:Ce-Yt-Pt-ue.mainAxis,Rt=Y?-fe[pe]/2+dt+Yt+Ct+ue.mainAxis:Ge+Yt+Ct+ue.mainAxis,kt=t.elements.arrow&&Uv(t.elements.arrow),Xe=kt?J==="y"?kt.clientTop||0:kt.clientLeft||0:0,xn=(me=_e?.[J])!=null?me:0,Vt=Pe+pt-xn-Xe,Kt=Pe+Rt-xn,sn=G0(F?a1(et,Vt):et,Pe,F?vm(Be,Kt):Be);ae[J]=sn,se[J]=sn-Pe}if(b){var Jt,zn=J==="x"?Os:Bs,gn=J==="x"?Kl:Ql,yn=ae[re],Cn=re==="y"?"height":"width",Xt=yn+q[zn],jn=yn-q[gn],_n=[Os,Bs].indexOf(Z)!==-1,er=(Jt=_e?.[re])!=null?Jt:0,tr=_n?Xt:yn-fe[Cn]-Se[Cn]-er+ue.altAxis,Tn=_n?yn+fe[Cn]+Se[Cn]-er-ue.altAxis:jn,Ln=F&&_n?JV(tr,yn,Tn):G0(F?tr:Xt,yn,F?Tn:jn);ae[re]=Ln,se[re]=Ln-yn}t.modifiersData[c]=se}}const kG={name:"preventOverflow",enabled:!0,phase:"main",fn:RG,requiresIfExists:["offset"]};function IG(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function zG(e){return e===cl(e)||!Wl(e)?SR(e):IG(e)}function LG(e){var t=e.getBoundingClientRect(),r=xy(t.width)/e.offsetWidth||1,c=xy(t.height)/e.offsetHeight||1;return r!==1||c!==1}function PG(e,t,r){r===void 0&&(r=!1);var c=Wl(t),h=Wl(t)&&LG(t),p=np(t),y=by(e,h,r),b={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(c||!c&&!r)&&((df(t)!=="body"||ER(p))&&(b=zG(t)),Wl(t)?(a=by(t,!0),a.x+=t.clientLeft,a.y+=t.clientTop):p&&(a.x=TR(p))),{x:y.left+b.scrollLeft-a.x,y:y.top+b.scrollTop-a.y,width:y.width,height:y.height}}function DG(e){var t=new Map,r=new Set,c=[];e.forEach(function(p){t.set(p.name,p)});function h(p){r.add(p.name);var y=[].concat(p.requires||[],p.requiresIfExists||[]);y.forEach(function(b){if(!r.has(b)){var a=t.get(b);a&&h(a)}}),c.push(p)}return e.forEach(function(p){r.has(p.name)||h(p)}),c}function OG(e){var t=DG(e);return WV.reduce(function(r,c){return r.concat(t.filter(function(h){return h.phase===c}))},[])}function BG(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function FG(e){var t=e.reduce(function(r,c){var h=r[c.name];return r[c.name]=h?Object.assign({},h,c,{options:Object.assign({},h.options,c.options),data:Object.assign({},h.data,c.data)}):c,r},{});return Object.keys(t).map(function(r){return t[r]})}var G4={placement:"bottom",modifiers:[],strategy:"absolute"};function H4(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(c){return!(c&&typeof c.getBoundingClientRect=="function")})}function jG(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,c=r===void 0?[]:r,h=t.defaultOptions,p=h===void 0?G4:h;return function(b,a,E){E===void 0&&(E=p);var R={placement:"bottom",orderedModifiers:[],options:Object.assign({},G4,p),modifiersData:{},elements:{reference:b,popper:a},attributes:{},styles:{}},L=[],P=!1,F={state:R,setOptions:function(Z){var Q=typeof Z=="function"?Z(R.options):Z;N(),R.options=Object.assign({},p,R.options,Q),R.scrollParents={reference:Cm(b)?H0(b):b.contextElement?H0(b.contextElement):[],popper:H0(a)};var Y=OG(FG([].concat(c,R.options.modifiers)));return R.orderedModifiers=Y.filter(function(J){return J.enabled}),U(),F.update()},forceUpdate:function(){if(!P){var Z=R.elements,Q=Z.reference,Y=Z.popper;if(H4(Q,Y)){R.rects={reference:PG(Q,Uv(Y),R.options.strategy==="fixed"),popper:bR(Y)},R.reset=!1,R.placement=R.options.placement,R.orderedModifiers.forEach(function(ue){return R.modifiersData[ue.name]=Object.assign({},ue.data)});for(var J=0;J<R.orderedModifiers.length;J++){if(R.reset===!0){R.reset=!1,J=-1;continue}var re=R.orderedModifiers[J],ae=re.fn,fe=re.options,Se=fe===void 0?{}:fe,Te=re.name;typeof ae=="function"&&(R=ae({state:R,options:Se,name:Te,instance:F})||R)}}}},update:BG(function(){return new Promise(function(q){F.forceUpdate(),q(R)})}),destroy:function(){N(),P=!0}};if(!H4(b,a))return F;F.setOptions(E).then(function(q){!P&&E.onFirstUpdate&&E.onFirstUpdate(q)});function U(){R.orderedModifiers.forEach(function(q){var Z=q.name,Q=q.options,Y=Q===void 0?{}:Q,J=q.effect;if(typeof J=="function"){var re=J({state:R,name:Z,instance:F,options:Y}),ae=function(){};L.push(re||ae)}})}function N(){L.forEach(function(q){return q()}),L=[]}return F}}var NG=[cG,MG,sG,YV,EG,xG,kG,rG,wG],UG=jG({defaultModifiers:NG});function wB(e){const{elementType:t,externalSlotProps:r,ownerState:c,skipResolvingSlotProps:h=!1,...p}=e,y=h?{}:cB(r,c),{props:b,internalRef:a}=fB({...p,externalSlotProps:y}),E=mo(a,y?.ref,e.additionalProps?.ref);return lB(t,{...b,ref:E},c)}function Py(e){return parseInt(V.version,10)>=19?e?.props?.ref||null:e?.ref||null}function $G(e){return typeof e=="function"?e():e}const SB=V.forwardRef(function(t,r){const{children:c,container:h,disablePortal:p=!1}=t,[y,b]=V.useState(null),a=mo(V.isValidElement(c)?Py(c):null,r);if(Yl(()=>{p||b($G(h)||document.body)},[h,p]),Yl(()=>{if(y&&!p)return I4(r,y),()=>{I4(r,null)}},[r,y,p]),p){if(V.isValidElement(c)){const E={ref:a};return V.cloneElement(c,E)}return c}return y&&V3.createPortal(c,y)});function qG(e){return br("MuiPopper",e)}wr("MuiPopper",["root"]);function VG(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function e3(e){return typeof e=="function"?e():e}function GG(e){return e.nodeType!==void 0}const HG=e=>{const{classes:t}=e;return Sr({root:["root"]},qG,t)},WG={},ZG=V.forwardRef(function(t,r){const{anchorEl:c,children:h,direction:p,disablePortal:y,modifiers:b,open:a,placement:E,popperOptions:R,popperRef:L,slotProps:P={},slots:F={},TransitionProps:U,ownerState:N,...q}=t,Z=V.useRef(null),Q=mo(Z,r),Y=V.useRef(null),J=mo(Y,L),re=V.useRef(J);Yl(()=>{re.current=J},[J]),V.useImperativeHandle(L,()=>Y.current,[]);const ae=VG(E,p),[fe,Se]=V.useState(ae),[Te,ue]=V.useState(e3(c));V.useEffect(()=>{Y.current&&Y.current.forceUpdate()}),V.useEffect(()=>{c&&ue(e3(c))},[c]),Yl(()=>{if(!Te||!a)return;const Ie=et=>{Se(et.placement)};let pe=[{name:"preventOverflow",options:{altBoundary:y}},{name:"flip",options:{altBoundary:y}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:et})=>{Ie(et)}}];b!=null&&(pe=pe.concat(b)),R&&R.modifiers!=null&&(pe=pe.concat(R.modifiers));const Pe=UG(Te,Z.current,{placement:ae,...R,modifiers:pe});return re.current(Pe),()=>{Pe.destroy(),re.current(null)}},[Te,y,b,a,R,ae]);const _e={placement:fe};U!==null&&(_e.TransitionProps=U);const se=HG(t),me=F.root??"div",be=wB({elementType:me,externalSlotProps:P.root,externalForwardedProps:q,additionalProps:{role:"tooltip",ref:Q},ownerState:t,className:se.root});return X.jsx(me,{...be,children:typeof h=="function"?h(_e):h})}),XG=V.forwardRef(function(t,r){const{anchorEl:c,children:h,container:p,direction:y="ltr",disablePortal:b=!1,keepMounted:a=!1,modifiers:E,open:R,placement:L="bottom",popperOptions:P=WG,popperRef:F,style:U,transition:N=!1,slotProps:q={},slots:Z={},...Q}=t,[Y,J]=V.useState(!0),re=()=>{J(!1)},ae=()=>{J(!0)};if(!a&&!R&&(!N||Y))return null;let fe;if(p)fe=p;else if(c){const ue=e3(c);fe=ue&&GG(ue)?ll(ue).body:ll(null).body}const Se=!R&&a&&(!N||Y)?"none":void 0,Te=N?{in:R,onEnter:re,onExited:ae}:void 0;return X.jsx(SB,{disablePortal:b,container:fe,children:X.jsx(ZG,{anchorEl:c,direction:y,disablePortal:b,modifiers:E,ref:r,open:N?!Y:R,placement:L,popperOptions:P,popperRef:F,slotProps:q,slots:Z,...Q,style:{position:"fixed",top:0,left:0,display:Se,...U},TransitionProps:Te,children:h})})}),YG=mn(XG,{name:"MuiPopper",slot:"Root"})({}),TB=V.forwardRef(function(t,r){const c=$1(),h=Tr({props:t,name:"MuiPopper"}),{anchorEl:p,component:y,components:b,componentsProps:a,container:E,disablePortal:R,keepMounted:L,modifiers:P,open:F,placement:U,popperOptions:N,popperRef:q,transition:Z,slots:Q,slotProps:Y,...J}=h,re=Q?.root??b?.Root,ae={anchorEl:p,container:E,disablePortal:R,keepMounted:L,modifiers:P,open:F,placement:U,popperOptions:N,popperRef:q,transition:Z,...J};return X.jsx(YG,{as:y,direction:c?"rtl":"ltr",slots:{root:re},slotProps:Y??a,...ae,ref:r})});function vb(e){return parseInt(e,10)||0}const KG={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function QG(e){for(const t in e)return!1;return!0}function W4(e){return QG(e)||e.outerHeightStyle===0&&!e.overflowing}const JG=V.forwardRef(function(t,r){const{onChange:c,maxRows:h,minRows:p=1,style:y,value:b,...a}=t,{current:E}=V.useRef(b!=null),R=V.useRef(null),L=mo(r,R),P=V.useRef(null),F=V.useRef(null),U=V.useCallback(()=>{const Y=R.current,J=F.current;if(!Y||!J)return;const ae=kh(Y).getComputedStyle(Y);if(ae.width==="0px")return{outerHeightStyle:0,overflowing:!1};J.style.width=ae.width,J.value=Y.value||t.placeholder||"x",J.value.slice(-1)===`
`&&(J.value+=" ");const fe=ae.boxSizing,Se=vb(ae.paddingBottom)+vb(ae.paddingTop),Te=vb(ae.borderBottomWidth)+vb(ae.borderTopWidth),ue=J.scrollHeight;J.value="x";const _e=J.scrollHeight;let se=ue;p&&(se=Math.max(Number(p)*_e,se)),h&&(se=Math.min(Number(h)*_e,se)),se=Math.max(se,_e);const me=se+(fe==="border-box"?Se+Te:0),be=Math.abs(se-ue)<=1;return{outerHeightStyle:me,overflowing:be}},[h,p,t.placeholder]),N=Ch(()=>{const Y=R.current,J=U();if(!Y||!J||W4(J))return!1;const re=J.outerHeightStyle;return P.current!=null&&P.current!==re}),q=V.useCallback(()=>{const Y=R.current,J=U();if(!Y||!J||W4(J))return;const re=J.outerHeightStyle;P.current!==re&&(P.current=re,Y.style.height=`${re}px`),Y.style.overflow=J.overflowing?"hidden":""},[U]),Z=V.useRef(-1);Yl(()=>{const Y=rB(q),J=R?.current;if(!J)return;const re=kh(J);re.addEventListener("resize",Y);let ae;return typeof ResizeObserver<"u"&&(ae=new ResizeObserver(()=>{N()&&(ae.unobserve(J),cancelAnimationFrame(Z.current),q(),Z.current=requestAnimationFrame(()=>{ae.observe(J)}))}),ae.observe(J)),()=>{Y.clear(),cancelAnimationFrame(Z.current),re.removeEventListener("resize",Y),ae&&ae.disconnect()}},[U,q,N]),Yl(()=>{q()});const Q=Y=>{E||q();const J=Y.target,re=J.value.length,ae=J.value.endsWith(`
`),fe=J.selectionStart===re;ae&&fe&&J.setSelectionRange(re,re),c&&c(Y)};return X.jsxs(V.Fragment,{children:[X.jsx("textarea",{value:b,onChange:Q,ref:L,rows:p,style:y,...a}),X.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:F,tabIndex:-1,style:{...KG.shadow,...y,paddingTop:0,paddingBottom:0}})]})});function Dy({props:e,states:t,muiFormControl:r}){return t.reduce((c,h)=>(c[h]=e[h],r&&typeof e[h]>"u"&&(c[h]=r[h]),c),{})}const CR=V.createContext(void 0);function Oy(){return V.useContext(CR)}function Z4(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function o1(e,t=!1){return e&&(Z4(e.value)&&e.value!==""||t&&Z4(e.defaultValue)&&e.defaultValue!=="")}function eH(e){return e.startAdornment}function tH(e){return br("MuiInputBase",e)}const Sy=wr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var X4;const Z1=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${sr(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},X1=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},nH=e=>{const{classes:t,color:r,disabled:c,error:h,endAdornment:p,focused:y,formControl:b,fullWidth:a,hiddenLabel:E,multiline:R,readOnly:L,size:P,startAdornment:F,type:U}=e,N={root:["root",`color${sr(r)}`,c&&"disabled",h&&"error",a&&"fullWidth",y&&"focused",b&&"formControl",P&&P!=="medium"&&`size${sr(P)}`,R&&"multiline",F&&"adornedStart",p&&"adornedEnd",E&&"hiddenLabel",L&&"readOnly"],input:["input",c&&"disabled",U==="search"&&"inputTypeSearch",R&&"inputMultiline",P==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",F&&"inputAdornedStart",p&&"inputAdornedEnd",L&&"readOnly"]};return Sr(N,tH,t)},Y1=mn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Z1})(Hr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Sy.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),K1=mn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:X1})(Hr(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},c={opacity:"0 !important"},h=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Sy.formControl} &`]:{"&::-webkit-input-placeholder":c,"&::-moz-placeholder":c,"&::-ms-input-placeholder":c,"&:focus::-webkit-input-placeholder":h,"&:focus::-moz-placeholder":h,"&:focus::-ms-input-placeholder":h},[`&.${Sy.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:p})=>!p.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:p})=>p.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),Y4=mR({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Q1=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiInputBase"}),{"aria-describedby":h,autoComplete:p,autoFocus:y,className:b,color:a,components:E={},componentsProps:R={},defaultValue:L,disabled:P,disableInjectingGlobalStyles:F,endAdornment:U,error:N,fullWidth:q=!1,id:Z,inputComponent:Q="input",inputProps:Y={},inputRef:J,margin:re,maxRows:ae,minRows:fe,multiline:Se=!1,name:Te,onBlur:ue,onChange:_e,onClick:se,onFocus:me,onKeyDown:be,onKeyUp:Ie,placeholder:pe,readOnly:Pe,renderSuffix:et,rows:Be,size:dt,slotProps:Ce={},slots:Ge={},startAdornment:at,type:nt="text",value:gt,...Pt}=c,Ct=Y.value!=null?Y.value:gt,{current:Yt}=V.useRef(Ct!=null),pt=V.useRef(),Rt=V.useCallback(Sn=>{},[]),kt=mo(pt,J,Y.ref,Rt),[Xe,xn]=V.useState(!1),Vt=Oy(),Kt=Dy({props:c,muiFormControl:Vt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Kt.focused=Vt?Vt.focused:Xe,V.useEffect(()=>{!Vt&&P&&Xe&&(xn(!1),ue&&ue())},[Vt,P,Xe,ue]);const sn=Vt&&Vt.onFilled,Jt=Vt&&Vt.onEmpty,zn=V.useCallback(Sn=>{o1(Sn)?sn&&sn():Jt&&Jt()},[sn,Jt]);Yl(()=>{Yt&&zn({value:Ct})},[Ct,zn,Yt]);const gn=Sn=>{me&&me(Sn),Y.onFocus&&Y.onFocus(Sn),Vt&&Vt.onFocus?Vt.onFocus(Sn):xn(!0)},yn=Sn=>{ue&&ue(Sn),Y.onBlur&&Y.onBlur(Sn),Vt&&Vt.onBlur?Vt.onBlur(Sn):xn(!1)},Cn=(Sn,...zr)=>{if(!Yt){const cr=Sn.target||pt.current;if(cr==null)throw new Error(Rh(1));zn({value:cr.value})}Y.onChange&&Y.onChange(Sn,...zr),_e&&_e(Sn,...zr)};V.useEffect(()=>{zn(pt.current)},[]);const Xt=Sn=>{pt.current&&Sn.currentTarget===Sn.target&&pt.current.focus(),se&&se(Sn)};let jn=Q,_n=Y;Se&&jn==="input"&&(Be?_n={type:void 0,minRows:Be,maxRows:Be,..._n}:_n={type:void 0,maxRows:ae,minRows:fe,..._n},jn=JG);const er=Sn=>{zn(Sn.animationName==="mui-auto-fill-cancel"?pt.current:{value:"x"})};V.useEffect(()=>{Vt&&Vt.setAdornedStart(!!at)},[Vt,at]);const tr={...c,color:Kt.color||"primary",disabled:Kt.disabled,endAdornment:U,error:Kt.error,focused:Kt.focused,formControl:Vt,fullWidth:q,hiddenLabel:Kt.hiddenLabel,multiline:Se,size:Kt.size,startAdornment:at,type:nt},Tn=nH(tr),Ln=Ge.root||E.Root||Y1,Xn=Ce.root||R.root||{},lr=Ge.input||E.Input||K1;return _n={..._n,...Ce.input??R.input},X.jsxs(V.Fragment,{children:[!F&&typeof Y4=="function"&&(X4||(X4=X.jsx(Y4,{}))),X.jsxs(Ln,{...Xn,ref:r,onClick:Xt,...Pt,...!n1(Ln)&&{ownerState:{...tr,...Xn.ownerState}},className:$n(Tn.root,Xn.className,b,Pe&&"MuiInputBase-readOnly"),children:[at,X.jsx(CR.Provider,{value:null,children:X.jsx(lr,{"aria-invalid":Kt.error,"aria-describedby":h,autoComplete:p,autoFocus:y,defaultValue:L,disabled:Kt.disabled,id:Z,onAnimationStart:er,name:Te,placeholder:pe,readOnly:Pe,required:Kt.required,rows:Be,value:Ct,onKeyDown:be,onKeyUp:Ie,type:nt,..._n,...!n1(lr)&&{as:jn,ownerState:{...tr,..._n.ownerState}},ref:kt,className:$n(Tn.input,_n.className,Pe&&"MuiInputBase-readOnly"),onBlur:yn,onChange:Cn,onFocus:gn})}),U,et?et({...Kt,startAdornment:at}):null]})]})});function rH(e){return br("MuiInput",e)}const w0={...Sy,...wr("MuiInput",["root","underline","input"])};function iH(e){return br("MuiOutlinedInput",e)}const Qu={...Sy,...wr("MuiOutlinedInput",["root","notchedOutline","input"])};function aH(e){return br("MuiFilledInput",e)}const am={...Sy,...wr("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},oH=Qo(X.jsx("path",{d:"M7 10l5 5 5-5z"})),sH={entering:{opacity:1},entered:{opacity:1}},lH=V.forwardRef(function(t,r){const c=Om(),h={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{addEndListener:p,appear:y=!0,children:b,easing:a,in:E,onEnter:R,onEntered:L,onEntering:P,onExit:F,onExited:U,onExiting:N,style:q,timeout:Z=h,TransitionComponent:Q=_f,...Y}=t,J=V.useRef(null),re=mo(J,Py(b),r),ae=be=>Ie=>{if(be){const pe=J.current;Ie===void 0?be(pe):be(pe,Ie)}},fe=ae(P),Se=ae((be,Ie)=>{sB(be);const pe=t1({style:q,timeout:Z,easing:a},{mode:"enter"});be.style.webkitTransition=c.transitions.create("opacity",pe),be.style.transition=c.transitions.create("opacity",pe),R&&R(be,Ie)}),Te=ae(L),ue=ae(N),_e=ae(be=>{const Ie=t1({style:q,timeout:Z,easing:a},{mode:"exit"});be.style.webkitTransition=c.transitions.create("opacity",Ie),be.style.transition=c.transitions.create("opacity",Ie),F&&F(be)}),se=ae(U),me=be=>{p&&p(J.current,be)};return X.jsx(Q,{appear:y,in:E,nodeRef:J,onEnter:Se,onEntered:Te,onEntering:fe,onExit:_e,onExited:se,onExiting:ue,addEndListener:me,timeout:Z,...Y,children:(be,{ownerState:Ie,...pe})=>V.cloneElement(b,{style:{opacity:0,visibility:be==="exited"&&!E?"hidden":void 0,...sH[be],...q,...b.props.style},ref:re,...pe})})});function cH(e){return br("MuiBackdrop",e)}wr("MuiBackdrop",["root","invisible"]);const uH=e=>{const{classes:t,invisible:r}=e;return Sr({root:["root",r&&"invisible"]},cH,t)},fH=mn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),hH=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiBackdrop"}),{children:h,className:p,component:y="div",invisible:b=!1,open:a,components:E={},componentsProps:R={},slotProps:L={},slots:P={},TransitionComponent:F,transitionDuration:U,...N}=c,q={...c,component:y,invisible:b},Z=uH(q),Q={transition:F,root:E.Root,...P},Y={...R,...L},J={component:y,slots:Q,slotProps:Y},[re,ae]=Wi("root",{elementType:fH,externalForwardedProps:J,className:$n(Z.root,p),ownerState:q}),[fe,Se]=Wi("transition",{elementType:lH,externalForwardedProps:J,ownerState:q});return X.jsx(fe,{in:a,timeout:U,...N,...Se,children:X.jsx(re,{"aria-hidden":!0,...ae,classes:Z,ref:r,children:h})})}),dH=wr("MuiBox",["root"]),pH=V1(),By=j2({themeId:lf,defaultTheme:pH,defaultClassName:dH.root,generateClassName:F6.generate});function mH(e){return br("MuiCard",e)}wr("MuiCard",["root"]);const gH=e=>{const{classes:t}=e;return Sr({root:["root"]},mH,t)},yH=mn(_R,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),J1=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiCard"}),{className:h,raised:p=!1,...y}=c,b={...c,raised:p},a=gH(b);return X.jsx(yH,{className:$n(a.root,h),elevation:p?8:void 0,ref:r,ownerState:b,...y})}),ew=R$({createStyledComponent:mn("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${sr(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Tr({props:e,name:"MuiContainer"})}),t3=typeof mR({})=="function",_H=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),vH=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),EB=(e,t=!1)=>{const r={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([p,y])=>{const b=e.getColorSchemeSelector(p);b.startsWith("@")?r[b]={":root":{colorScheme:y.palette?.mode}}:r[b.replace(/\s*&/,"")]={colorScheme:y.palette?.mode}});let c={html:_H(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...vH(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r};const h=e.components?.MuiCssBaseline?.styleOverrides;return h&&(c=[c,h]),c},Nb="mui-ecs",xH=e=>{const t=EB(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[`:root:has(${Nb})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([c,h])=>{const p=e.getColorSchemeSelector(c);p.startsWith("@")?r[p]={[`:root:not(:has(.${Nb}))`]:{colorScheme:h.palette?.mode}}:r[p.replace(/\s*&/,"")]={[`&:not(:has(.${Nb}))`]:{colorScheme:h.palette?.mode}}}),t},bH=mR(t3?({theme:e,enableColorScheme:t})=>EB(e,t):({theme:e})=>xH(e));function wH(e){const t=Tr({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:c=!1}=t;return X.jsxs(V.Fragment,{children:[t3&&X.jsx(bH,{enableColorScheme:c}),!t3&&!c&&X.jsx("span",{className:Nb,style:{display:"none"}}),r]})}function CB(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function SH(e){const t=ll(e);return t.body===e?kh(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function W0(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function K4(e){return parseInt(kh(e).getComputedStyle(e).paddingRight,10)||0}function TH(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),c=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||c}function Q4(e,t,r,c,h){const p=[t,r,...c];[].forEach.call(e.children,y=>{const b=!p.includes(y),a=!TH(y);b&&a&&W0(y,h)})}function uT(e,t){let r=-1;return e.some((c,h)=>t(c)?(r=h,!0):!1),r}function EH(e,t){const r=[],c=e.container;if(!t.disableScrollLock){if(SH(c)){const y=CB(kh(c));r.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${K4(c)+y}px`;const b=ll(c).querySelectorAll(".mui-fixed");[].forEach.call(b,a=>{r.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${K4(a)+y}px`})}let p;if(c.parentNode instanceof DocumentFragment)p=ll(c).body;else{const y=c.parentElement,b=kh(c);p=y?.nodeName==="HTML"&&b.getComputedStyle(y).overflowY==="scroll"?y:c}r.push({value:p.style.overflow,property:"overflow",el:p},{value:p.style.overflowX,property:"overflow-x",el:p},{value:p.style.overflowY,property:"overflow-y",el:p}),p.style.overflow="hidden"}return()=>{r.forEach(({value:p,el:y,property:b})=>{p?y.style.setProperty(b,p):y.style.removeProperty(b)})}}function CH(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class MH{constructor(){this.modals=[],this.containers=[]}add(t,r){let c=this.modals.indexOf(t);if(c!==-1)return c;c=this.modals.length,this.modals.push(t),t.modalRef&&W0(t.modalRef,!1);const h=CH(r);Q4(r,t.mount,t.modalRef,h,!0);const p=uT(this.containers,y=>y.container===r);return p!==-1?(this.containers[p].modals.push(t),c):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:h}),c)}mount(t,r){const c=uT(this.containers,p=>p.modals.includes(t)),h=this.containers[c];h.restore||(h.restore=EH(h,r))}remove(t,r=!0){const c=this.modals.indexOf(t);if(c===-1)return c;const h=uT(this.containers,y=>y.modals.includes(t)),p=this.containers[h];if(p.modals.splice(p.modals.indexOf(t),1),this.modals.splice(c,1),p.modals.length===0)p.restore&&p.restore(),t.modalRef&&W0(t.modalRef,r),Q4(p.container,t.mount,t.modalRef,p.hiddenSiblings,!1),this.containers.splice(h,1);else{const y=p.modals[p.modals.length-1];y.modalRef&&W0(y.modalRef,!1)}return c}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const AH=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function RH(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function kH(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=c=>e.ownerDocument.querySelector(`input[type="radio"]${c}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function IH(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||kH(e))}function zH(e){const t=[],r=[];return Array.from(e.querySelectorAll(AH)).forEach((c,h)=>{const p=RH(c);p===-1||!IH(c)||(p===0?t.push(c):r.push({documentOrder:h,tabIndex:p,node:c}))}),r.sort((c,h)=>c.tabIndex===h.tabIndex?c.documentOrder-h.documentOrder:c.tabIndex-h.tabIndex).map(c=>c.node).concat(t)}function LH(){return!0}function PH(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:c=!1,disableRestoreFocus:h=!1,getTabbable:p=zH,isEnabled:y=LH,open:b}=e,a=V.useRef(!1),E=V.useRef(null),R=V.useRef(null),L=V.useRef(null),P=V.useRef(null),F=V.useRef(!1),U=V.useRef(null),N=mo(Py(t),U),q=V.useRef(null);V.useEffect(()=>{!b||!U.current||(F.current=!r)},[r,b]),V.useEffect(()=>{if(!b||!U.current)return;const Y=ll(U.current);return U.current.contains(Y.activeElement)||(U.current.hasAttribute("tabIndex")||U.current.setAttribute("tabIndex","-1"),F.current&&U.current.focus()),()=>{h||(L.current&&L.current.focus&&(a.current=!0,L.current.focus()),L.current=null)}},[b]),V.useEffect(()=>{if(!b||!U.current)return;const Y=ll(U.current),J=fe=>{q.current=fe,!(c||!y()||fe.key!=="Tab")&&Y.activeElement===U.current&&fe.shiftKey&&(a.current=!0,R.current&&R.current.focus())},re=()=>{const fe=U.current;if(fe===null)return;if(!Y.hasFocus()||!y()||a.current){a.current=!1;return}if(fe.contains(Y.activeElement)||c&&Y.activeElement!==E.current&&Y.activeElement!==R.current)return;if(Y.activeElement!==P.current)P.current=null;else if(P.current!==null)return;if(!F.current)return;let Se=[];if((Y.activeElement===E.current||Y.activeElement===R.current)&&(Se=p(U.current)),Se.length>0){const Te=!!(q.current?.shiftKey&&q.current?.key==="Tab"),ue=Se[0],_e=Se[Se.length-1];typeof ue!="string"&&typeof _e!="string"&&(Te?_e.focus():ue.focus())}else fe.focus()};Y.addEventListener("focusin",re),Y.addEventListener("keydown",J,!0);const ae=setInterval(()=>{Y.activeElement&&Y.activeElement.tagName==="BODY"&&re()},50);return()=>{clearInterval(ae),Y.removeEventListener("focusin",re),Y.removeEventListener("keydown",J,!0)}},[r,c,h,y,b,p]);const Z=Y=>{L.current===null&&(L.current=Y.relatedTarget),F.current=!0,P.current=Y.target;const J=t.props.onFocus;J&&J(Y)},Q=Y=>{L.current===null&&(L.current=Y.relatedTarget),F.current=!0};return X.jsxs(V.Fragment,{children:[X.jsx("div",{tabIndex:b?0:-1,onFocus:Q,ref:E,"data-testid":"sentinelStart"}),V.cloneElement(t,{ref:N,onFocus:Z}),X.jsx("div",{tabIndex:b?0:-1,onFocus:Q,ref:R,"data-testid":"sentinelEnd"})]})}function DH(e){return typeof e=="function"?e():e}function OH(e){return e?e.props.hasOwnProperty("in"):!1}const J4=()=>{},xb=new MH;function BH(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:c=!1,closeAfterTransition:h=!1,onTransitionEnter:p,onTransitionExited:y,children:b,onClose:a,open:E,rootRef:R}=e,L=V.useRef({}),P=V.useRef(null),F=V.useRef(null),U=mo(F,R),[N,q]=V.useState(!E),Z=OH(b);let Q=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(Q=!1);const Y=()=>ll(P.current),J=()=>(L.current.modalRef=F.current,L.current.mount=P.current,L.current),re=()=>{xb.mount(J(),{disableScrollLock:c}),F.current&&(F.current.scrollTop=0)},ae=Ch(()=>{const Ie=DH(t)||Y().body;xb.add(J(),Ie),F.current&&re()}),fe=()=>xb.isTopModal(J()),Se=Ch(Ie=>{P.current=Ie,Ie&&(E&&fe()?re():F.current&&W0(F.current,Q))}),Te=V.useCallback(()=>{xb.remove(J(),Q)},[Q]);V.useEffect(()=>()=>{Te()},[Te]),V.useEffect(()=>{E?ae():(!Z||!h)&&Te()},[E,Te,Z,h,ae]);const ue=Ie=>pe=>{Ie.onKeyDown?.(pe),!(pe.key!=="Escape"||pe.which===229||!fe())&&(r||(pe.stopPropagation(),a&&a(pe,"escapeKeyDown")))},_e=Ie=>pe=>{Ie.onClick?.(pe),pe.target===pe.currentTarget&&a&&a(pe,"backdropClick")};return{getRootProps:(Ie={})=>{const pe=uB(e);delete pe.onTransitionEnter,delete pe.onTransitionExited;const Pe={...pe,...Ie};return{role:"presentation",...Pe,onKeyDown:ue(Pe),ref:U}},getBackdropProps:(Ie={})=>{const pe=Ie;return{"aria-hidden":!0,...pe,onClick:_e(pe),open:E}},getTransitionProps:()=>{const Ie=()=>{q(!1),p&&p()},pe=()=>{q(!0),y&&y(),h&&Te()};return{onEnter:k4(Ie,b?.props.onEnter??J4),onExited:k4(pe,b?.props.onExited??J4)}},rootRef:U,portalRef:Se,isTopModal:fe,exited:N,hasTransition:Z}}function FH(e){return br("MuiModal",e)}wr("MuiModal",["root","hidden","backdrop"]);const jH=e=>{const{open:t,exited:r,classes:c}=e;return Sr({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},FH,c)},NH=mn("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(Hr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),UH=mn(hH,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),$H=V.forwardRef(function(t,r){const c=Tr({name:"MuiModal",props:t}),{BackdropComponent:h=UH,BackdropProps:p,classes:y,className:b,closeAfterTransition:a=!1,children:E,container:R,component:L,components:P={},componentsProps:F={},disableAutoFocus:U=!1,disableEnforceFocus:N=!1,disableEscapeKeyDown:q=!1,disablePortal:Z=!1,disableRestoreFocus:Q=!1,disableScrollLock:Y=!1,hideBackdrop:J=!1,keepMounted:re=!1,onClose:ae,onTransitionEnter:fe,onTransitionExited:Se,open:Te,slotProps:ue={},slots:_e={},theme:se,...me}=c,be={...c,closeAfterTransition:a,disableAutoFocus:U,disableEnforceFocus:N,disableEscapeKeyDown:q,disablePortal:Z,disableRestoreFocus:Q,disableScrollLock:Y,hideBackdrop:J,keepMounted:re},{getRootProps:Ie,getBackdropProps:pe,getTransitionProps:Pe,portalRef:et,isTopModal:Be,exited:dt,hasTransition:Ce}=BH({...be,rootRef:r}),Ge={...be,exited:dt},at=jH(Ge),nt={};if(E.props.tabIndex===void 0&&(nt.tabIndex="-1"),Ce){const{onEnter:Rt,onExited:kt}=Pe();nt.onEnter=Rt,nt.onExited=kt}const gt={slots:{root:P.Root,backdrop:P.Backdrop,..._e},slotProps:{...F,...ue}},[Pt,Ct]=Wi("root",{ref:r,elementType:NH,externalForwardedProps:{...gt,...me,component:L},getSlotProps:Ie,ownerState:Ge,className:$n(b,at?.root,!Ge.open&&Ge.exited&&at?.hidden)}),[Yt,pt]=Wi("backdrop",{ref:p?.ref,elementType:h,externalForwardedProps:gt,shouldForwardComponentProp:!0,additionalProps:p,getSlotProps:Rt=>pe({...Rt,onClick:kt=>{Rt?.onClick&&Rt.onClick(kt)}}),className:$n(p?.className,at?.backdrop),ownerState:Ge});return!re&&!Te&&(!Ce||dt)?null:X.jsx(SB,{ref:et,container:R,disablePortal:Z,children:X.jsxs(Pt,{...Ct,children:[!J&&h?X.jsx(Yt,{...pt}):null,X.jsx(PH,{disableEnforceFocus:N,disableAutoFocus:U,disableRestoreFocus:Q,isEnabled:Be,open:Te,children:V.cloneElement(E,nt)})]})})});function qH(e){return br("MuiDivider",e)}const eI=wr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),VH=e=>{const{absolute:t,children:r,classes:c,flexItem:h,light:p,orientation:y,textAlign:b,variant:a}=e;return Sr({root:["root",t&&"absolute",a,p&&"light",y==="vertical"&&"vertical",h&&"flexItem",r&&"withChildren",r&&y==="vertical"&&"withChildrenVertical",b==="right"&&y!=="vertical"&&"textAlignRight",b==="left"&&y!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",y==="vertical"&&"wrapperVertical"]},qH,c)},GH=mn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(Hr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),HH=mn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(Hr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),uv=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiDivider"}),{absolute:h=!1,children:p,className:y,orientation:b="horizontal",component:a=p||b==="vertical"?"div":"hr",flexItem:E=!1,light:R=!1,role:L=a!=="hr"?"separator":void 0,textAlign:P="center",variant:F="fullWidth",...U}=c,N={...c,absolute:h,component:a,flexItem:E,light:R,orientation:b,role:L,textAlign:P,variant:F},q=VH(N);return X.jsx(GH,{as:a,className:$n(q.root,y),role:L,ref:r,ownerState:N,"aria-orientation":L==="separator"&&(a!=="hr"||b==="vertical")?b:void 0,...U,children:p?X.jsx(HH,{className:q.wrapper,ownerState:N,children:p}):null})});uv&&(uv.muiSkipListHighlight=!0);const WH=e=>{const{classes:t,disableUnderline:r,startAdornment:c,endAdornment:h,size:p,hiddenLabel:y,multiline:b}=e,a={root:["root",!r&&"underline",c&&"adornedStart",h&&"adornedEnd",p==="small"&&`size${sr(p)}`,y&&"hiddenLabel",b&&"multiline"],input:["input"]},E=Sr(a,aH,t);return{...t,...E}},ZH=mn(Y1,{shouldForwardProp:e=>tu(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...Z1(e,t),!r.disableUnderline&&t.underline]}})(Hr(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",c=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",h=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",p=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:h,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c}},[`&.${am.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c},[`&.${am.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:p},variants:[{props:({ownerState:y})=>!y.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${am.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${am.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${am.disabled}, .${am.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${am.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Ih()).map(([y])=>({props:{disableUnderline:!1,color:y},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[y]?.main}`}}})),{props:({ownerState:y})=>y.startAdornment,style:{paddingLeft:12}},{props:({ownerState:y})=>y.endAdornment,style:{paddingRight:12}},{props:({ownerState:y})=>y.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:y,size:b})=>y.multiline&&b==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:y})=>y.multiline&&y.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:y})=>y.multiline&&y.hiddenLabel&&y.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),XH=mn(K1,{name:"MuiFilledInput",slot:"Input",overridesResolver:X1})(Hr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),MR=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiFilledInput"}),{disableUnderline:h=!1,components:p={},componentsProps:y,fullWidth:b=!1,hiddenLabel:a,inputComponent:E="input",multiline:R=!1,slotProps:L,slots:P={},type:F="text",...U}=c,N={...c,disableUnderline:h,fullWidth:b,inputComponent:E,multiline:R,type:F},q=WH(c),Z={root:{ownerState:N},input:{ownerState:N}},Q=L??y?po(Z,L??y):Z,Y=P.root??p.Root??ZH,J=P.input??p.Input??XH;return X.jsx(Q1,{slots:{root:Y,input:J},slotProps:Q,fullWidth:b,inputComponent:E,multiline:R,ref:r,type:F,...U,classes:q})});MR.muiName="Input";function YH(e){return br("MuiFormControl",e)}wr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const KH=e=>{const{classes:t,margin:r,fullWidth:c}=e,h={root:["root",r!=="none"&&`margin${sr(r)}`,c&&"fullWidth"]};return Sr(h,YH,t)},QH=mn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${sr(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),MB=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiFormControl"}),{children:h,className:p,color:y="primary",component:b="div",disabled:a=!1,error:E=!1,focused:R,fullWidth:L=!1,hiddenLabel:P=!1,margin:F="none",required:U=!1,size:N="medium",variant:q="outlined",...Z}=c,Q={...c,color:y,component:b,disabled:a,error:E,fullWidth:L,hiddenLabel:P,margin:F,required:U,size:N,variant:q},Y=KH(Q),[J,re]=V.useState(()=>{let Ie=!1;return h&&V.Children.forEach(h,pe=>{if(!Fb(pe,["Input","Select"]))return;const Pe=Fb(pe,["Select"])?pe.props.input:pe;Pe&&eH(Pe.props)&&(Ie=!0)}),Ie}),[ae,fe]=V.useState(()=>{let Ie=!1;return h&&V.Children.forEach(h,pe=>{Fb(pe,["Input","Select"])&&(o1(pe.props,!0)||o1(pe.props.inputProps,!0))&&(Ie=!0)}),Ie}),[Se,Te]=V.useState(!1);a&&Se&&Te(!1);const ue=R!==void 0&&!a?R:Se;let _e;V.useRef(!1);const se=V.useCallback(()=>{fe(!0)},[]),me=V.useCallback(()=>{fe(!1)},[]),be=V.useMemo(()=>({adornedStart:J,setAdornedStart:re,color:y,disabled:a,error:E,filled:ae,focused:ue,fullWidth:L,hiddenLabel:P,size:N,onBlur:()=>{Te(!1)},onFocus:()=>{Te(!0)},onEmpty:me,onFilled:se,registerEffect:_e,required:U,variant:q}),[J,y,a,E,ae,ue,L,P,_e,me,se,U,N,q]);return X.jsx(CR.Provider,{value:be,children:X.jsx(QH,{as:b,ownerState:Q,className:$n(Y.root,p),ref:r,...Z,children:h})})});function JH(e){return br("MuiFormHelperText",e)}const tI=wr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var nI;const eW=e=>{const{classes:t,contained:r,size:c,disabled:h,error:p,filled:y,focused:b,required:a}=e,E={root:["root",h&&"disabled",p&&"error",c&&`size${sr(c)}`,r&&"contained",b&&"focused",y&&"filled",a&&"required"]};return Sr(E,JH,t)},tW=mn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${sr(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(Hr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${tI.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${tI.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),nW=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiFormHelperText"}),{children:h,className:p,component:y="p",disabled:b,error:a,filled:E,focused:R,margin:L,required:P,variant:F,...U}=c,N=Oy(),q=Dy({props:c,muiFormControl:N,states:["variant","size","disabled","error","filled","focused","required"]}),Z={...c,component:y,contained:q.variant==="filled"||q.variant==="outlined",variant:q.variant,size:q.size,disabled:q.disabled,error:q.error,filled:q.filled,focused:q.focused,required:q.required};delete Z.ownerState;const Q=eW(Z);return X.jsx(tW,{as:y,className:$n(Q.root,p),ref:r,...U,ownerState:Z,children:h===" "?nI||(nI=X.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):h})});function rW(e){return br("MuiFormLabel",e)}const Z0=wr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),iW=e=>{const{classes:t,color:r,focused:c,disabled:h,error:p,filled:y,required:b}=e,a={root:["root",`color${sr(r)}`,h&&"disabled",p&&"error",y&&"filled",c&&"focused",b&&"required"],asterisk:["asterisk",p&&"error"]};return Sr(a,rW,t)},aW=mn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(Hr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Ih()).map(([t])=>({props:{color:t},style:{[`&.${Z0.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${Z0.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Z0.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),oW=mn("span",{name:"MuiFormLabel",slot:"Asterisk"})(Hr(({theme:e})=>({[`&.${Z0.error}`]:{color:(e.vars||e).palette.error.main}}))),sW=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiFormLabel"}),{children:h,className:p,color:y,component:b="label",disabled:a,error:E,filled:R,focused:L,required:P,...F}=c,U=Oy(),N=Dy({props:c,muiFormControl:U,states:["color","required","focused","disabled","error","filled"]}),q={...c,color:N.color||"primary",component:b,disabled:N.disabled,error:N.error,filled:N.filled,focused:N.focused,required:N.required},Z=iW(q);return X.jsxs(aW,{as:b,ownerState:q,className:$n(Z.root,p),ref:r,...F,children:[h,N.required&&X.jsxs(oW,{ownerState:q,"aria-hidden":!0,className:Z.asterisk,children:[" ","*"]})]})}),fT=G$({createStyledComponent:mn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>Tr({props:e,name:"MuiGrid"}),useTheme:Om});function n3(e){return`scale(${e}, ${e**2})`}const lW={entering:{opacity:1,transform:n3(1)},entered:{opacity:1,transform:"none"}},hT=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),s1=V.forwardRef(function(t,r){const{addEndListener:c,appear:h=!0,children:p,easing:y,in:b,onEnter:a,onEntered:E,onEntering:R,onExit:L,onExited:P,onExiting:F,style:U,timeout:N="auto",TransitionComponent:q=_f,...Z}=t,Q=ly(),Y=V.useRef(),J=Om(),re=V.useRef(null),ae=mo(re,Py(p),r),fe=Ie=>pe=>{if(Ie){const Pe=re.current;pe===void 0?Ie(Pe):Ie(Pe,pe)}},Se=fe(R),Te=fe((Ie,pe)=>{sB(Ie);const{duration:Pe,delay:et,easing:Be}=t1({style:U,timeout:N,easing:y},{mode:"enter"});let dt;N==="auto"?(dt=J.transitions.getAutoHeightDuration(Ie.clientHeight),Y.current=dt):dt=Pe,Ie.style.transition=[J.transitions.create("opacity",{duration:dt,delay:et}),J.transitions.create("transform",{duration:hT?dt:dt*.666,delay:et,easing:Be})].join(","),a&&a(Ie,pe)}),ue=fe(E),_e=fe(F),se=fe(Ie=>{const{duration:pe,delay:Pe,easing:et}=t1({style:U,timeout:N,easing:y},{mode:"exit"});let Be;N==="auto"?(Be=J.transitions.getAutoHeightDuration(Ie.clientHeight),Y.current=Be):Be=pe,Ie.style.transition=[J.transitions.create("opacity",{duration:Be,delay:Pe}),J.transitions.create("transform",{duration:hT?Be:Be*.666,delay:hT?Pe:Pe||Be*.333,easing:et})].join(","),Ie.style.opacity=0,Ie.style.transform=n3(.75),L&&L(Ie)}),me=fe(P),be=Ie=>{N==="auto"&&Q.start(Y.current||0,Ie),c&&c(re.current,Ie)};return X.jsx(q,{appear:h,in:b,nodeRef:re,onEnter:Te,onEntered:ue,onEntering:Se,onExit:se,onExited:me,onExiting:_e,addEndListener:be,timeout:N==="auto"?null:N,...Z,children:(Ie,{ownerState:pe,...Pe})=>V.cloneElement(p,{style:{opacity:0,transform:n3(.75),visibility:Ie==="exited"&&!b?"hidden":void 0,...lW[Ie],...U,...p.props.style},ref:ae,...Pe})})});s1&&(s1.muiSupportAuto=!0);const cW=e=>{const{classes:t,disableUnderline:r}=e,h=Sr({root:["root",!r&&"underline"],input:["input"]},rH,t);return{...t,...h}},uW=mn(Y1,{shouldForwardProp:e=>tu(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...Z1(e,t),!r.disableUnderline&&t.underline]}})(Hr(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:c})=>c.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:c})=>!c.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${w0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${w0.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${w0.disabled}, .${w0.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${w0.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Ih()).map(([c])=>({props:{color:c,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[c].main}`}}}))]}})),fW=mn(K1,{name:"MuiInput",slot:"Input",overridesResolver:X1})({}),AR=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiInput"}),{disableUnderline:h=!1,components:p={},componentsProps:y,fullWidth:b=!1,inputComponent:a="input",multiline:E=!1,slotProps:R,slots:L={},type:P="text",...F}=c,U=cW(c),q={root:{ownerState:{disableUnderline:h}}},Z=R??y?po(R??y,q):q,Q=L.root??p.Root??uW,Y=L.input??p.Input??fW;return X.jsx(Q1,{slots:{root:Q,input:Y},slotProps:Z,fullWidth:b,inputComponent:a,multiline:E,ref:r,type:P,...F,classes:U})});AR.muiName="Input";function hW(e){return br("MuiInputLabel",e)}wr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const dW=e=>{const{classes:t,formControl:r,size:c,shrink:h,disableAnimation:p,variant:y,required:b}=e,a={root:["root",r&&"formControl",!p&&"animated",h&&"shrink",c&&c!=="medium"&&`size${sr(c)}`,y],asterisk:[b&&"asterisk"]},E=Sr(a,hW,t);return{...t,...E}},pW=mn(sW,{shouldForwardProp:e=>tu(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Z0.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(Hr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:c})=>t==="filled"&&r.shrink&&c==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),AB=V.forwardRef(function(t,r){const c=Tr({name:"MuiInputLabel",props:t}),{disableAnimation:h=!1,margin:p,shrink:y,variant:b,className:a,...E}=c,R=Oy();let L=y;typeof L>"u"&&R&&(L=R.filled||R.focused||R.adornedStart);const P=Dy({props:c,muiFormControl:R,states:["size","variant","required","focused"]}),F={...c,disableAnimation:h,formControl:R,shrink:L,size:P.size,variant:P.variant,required:P.required,focused:P.focused},U=dW(F);return X.jsx(pW,{"data-shrink":L,ref:r,className:$n(U.root,a),...E,ownerState:F,classes:U})}),r3=V.createContext({});function mW(e){return br("MuiList",e)}wr("MuiList",["root","padding","dense","subheader"]);const gW=e=>{const{classes:t,disablePadding:r,dense:c,subheader:h}=e;return Sr({root:["root",!r&&"padding",c&&"dense",h&&"subheader"]},mW,t)},yW=mn("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),_W=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiList"}),{children:h,className:p,component:y="ul",dense:b=!1,disablePadding:a=!1,subheader:E,...R}=c,L=V.useMemo(()=>({dense:b}),[b]),P={...c,component:y,dense:b,disablePadding:a},F=gW(P);return X.jsx(r3.Provider,{value:L,children:X.jsxs(yW,{as:y,className:$n(F.root,p),ref:r,ownerState:P,...R,children:[E,h]})})}),rI=wr("MuiListItemIcon",["root","alignItemsFlexStart"]),iI=wr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function dT(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function aI(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function RB(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function S0(e,t,r,c,h,p){let y=!1,b=h(e,t,t?r:!1);for(;b;){if(b===e.firstChild){if(y)return!1;y=!0}const a=c?!1:b.disabled||b.getAttribute("aria-disabled")==="true";if(!b.hasAttribute("tabindex")||!RB(b,p)||a)b=h(e,b,r);else return b.focus(),!0}return!1}const vW=V.forwardRef(function(t,r){const{actions:c,autoFocus:h=!1,autoFocusItem:p=!1,children:y,className:b,disabledItemsFocusable:a=!1,disableListWrap:E=!1,onKeyDown:R,variant:L="selectedMenu",...P}=t,F=V.useRef(null),U=V.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Yl(()=>{h&&F.current.focus()},[h]),V.useImperativeHandle(c,()=>({adjustStyleForScrollbar:(Y,{direction:J})=>{const re=!F.current.style.width;if(Y.clientHeight<F.current.clientHeight&&re){const ae=`${CB(kh(Y))}px`;F.current.style[J==="rtl"?"paddingLeft":"paddingRight"]=ae,F.current.style.width=`calc(100% + ${ae})`}return F.current}}),[]);const N=Y=>{const J=F.current,re=Y.key;if(Y.ctrlKey||Y.metaKey||Y.altKey){R&&R(Y);return}const fe=ll(J).activeElement;if(re==="ArrowDown")Y.preventDefault(),S0(J,fe,E,a,dT);else if(re==="ArrowUp")Y.preventDefault(),S0(J,fe,E,a,aI);else if(re==="Home")Y.preventDefault(),S0(J,null,E,a,dT);else if(re==="End")Y.preventDefault(),S0(J,null,E,a,aI);else if(re.length===1){const Se=U.current,Te=re.toLowerCase(),ue=performance.now();Se.keys.length>0&&(ue-Se.lastTime>500?(Se.keys=[],Se.repeating=!0,Se.previousKeyMatched=!0):Se.repeating&&Te!==Se.keys[0]&&(Se.repeating=!1)),Se.lastTime=ue,Se.keys.push(Te);const _e=fe&&!Se.repeating&&RB(fe,Se);Se.previousKeyMatched&&(_e||S0(J,fe,!1,a,dT,Se))?Y.preventDefault():Se.previousKeyMatched=!1}R&&R(Y)},q=mo(F,r);let Z=-1;V.Children.forEach(y,(Y,J)=>{if(!V.isValidElement(Y)){Z===J&&(Z+=1,Z>=y.length&&(Z=-1));return}Y.props.disabled||(L==="selectedMenu"&&Y.props.selected||Z===-1)&&(Z=J),Z===J&&(Y.props.disabled||Y.props.muiSkipListHighlight||Y.type.muiSkipListHighlight)&&(Z+=1,Z>=y.length&&(Z=-1))});const Q=V.Children.map(y,(Y,J)=>{if(J===Z){const re={};return p&&(re.autoFocus=!0),Y.props.tabIndex===void 0&&L==="selectedMenu"&&(re.tabIndex=0),V.cloneElement(Y,re)}return Y});return X.jsx(_W,{role:"menu",ref:q,className:b,onKeyDown:N,tabIndex:h?0:-1,...P,children:Q})});function xW(e){return br("MuiPopover",e)}wr("MuiPopover",["root","paper"]);function oI(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function sI(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function lI(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function bb(e){return typeof e=="function"?e():e}const bW=e=>{const{classes:t}=e;return Sr({root:["root"],paper:["paper"]},xW,t)},wW=mn($H,{name:"MuiPopover",slot:"Root"})({}),kB=mn(_R,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),SW=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiPopover"}),{action:h,anchorEl:p,anchorOrigin:y={vertical:"top",horizontal:"left"},anchorPosition:b,anchorReference:a="anchorEl",children:E,className:R,container:L,elevation:P=8,marginThreshold:F=16,open:U,PaperProps:N={},slots:q={},slotProps:Z={},transformOrigin:Q={vertical:"top",horizontal:"left"},TransitionComponent:Y,transitionDuration:J="auto",TransitionProps:re={},disableScrollLock:ae=!1,...fe}=c,Se=V.useRef(),Te={...c,anchorOrigin:y,anchorReference:a,elevation:P,marginThreshold:F,transformOrigin:Q,TransitionComponent:Y,transitionDuration:J,TransitionProps:re},ue=bW(Te),_e=V.useCallback(()=>{if(a==="anchorPosition")return b;const Rt=bb(p),Xe=(Rt&&Rt.nodeType===1?Rt:ll(Se.current).body).getBoundingClientRect();return{top:Xe.top+oI(Xe,y.vertical),left:Xe.left+sI(Xe,y.horizontal)}},[p,y.horizontal,y.vertical,b,a]),se=V.useCallback(Rt=>({vertical:oI(Rt,Q.vertical),horizontal:sI(Rt,Q.horizontal)}),[Q.horizontal,Q.vertical]),me=V.useCallback(Rt=>{const kt={width:Rt.offsetWidth,height:Rt.offsetHeight},Xe=se(kt);if(a==="none")return{top:null,left:null,transformOrigin:lI(Xe)};const xn=_e();let Vt=xn.top-Xe.vertical,Kt=xn.left-Xe.horizontal;const sn=Vt+kt.height,Jt=Kt+kt.width,zn=kh(bb(p)),gn=zn.innerHeight-F,yn=zn.innerWidth-F;if(F!==null&&Vt<F){const Cn=Vt-F;Vt-=Cn,Xe.vertical+=Cn}else if(F!==null&&sn>gn){const Cn=sn-gn;Vt-=Cn,Xe.vertical+=Cn}if(F!==null&&Kt<F){const Cn=Kt-F;Kt-=Cn,Xe.horizontal+=Cn}else if(Jt>yn){const Cn=Jt-yn;Kt-=Cn,Xe.horizontal+=Cn}return{top:`${Math.round(Vt)}px`,left:`${Math.round(Kt)}px`,transformOrigin:lI(Xe)}},[p,a,_e,se,F]),[be,Ie]=V.useState(U),pe=V.useCallback(()=>{const Rt=Se.current;if(!Rt)return;const kt=me(Rt);kt.top!==null&&Rt.style.setProperty("top",kt.top),kt.left!==null&&(Rt.style.left=kt.left),Rt.style.transformOrigin=kt.transformOrigin,Ie(!0)},[me]);V.useEffect(()=>(ae&&window.addEventListener("scroll",pe),()=>window.removeEventListener("scroll",pe)),[p,ae,pe]);const Pe=()=>{pe()},et=()=>{Ie(!1)};V.useEffect(()=>{U&&pe()}),V.useImperativeHandle(h,()=>U?{updatePosition:()=>{pe()}}:null,[U,pe]),V.useEffect(()=>{if(!U)return;const Rt=rB(()=>{pe()}),kt=kh(bb(p));return kt.addEventListener("resize",Rt),()=>{Rt.clear(),kt.removeEventListener("resize",Rt)}},[p,U,pe]);let Be=J;const dt={slots:{transition:Y,...q},slotProps:{transition:re,paper:N,...Z}},[Ce,Ge]=Wi("transition",{elementType:s1,externalForwardedProps:dt,ownerState:Te,getSlotProps:Rt=>({...Rt,onEntering:(kt,Xe)=>{Rt.onEntering?.(kt,Xe),Pe()},onExited:kt=>{Rt.onExited?.(kt),et()}}),additionalProps:{appear:!0,in:U}});J==="auto"&&!Ce.muiSupportAuto&&(Be=void 0);const at=L||(p?ll(bb(p)).body:void 0),[nt,{slots:gt,slotProps:Pt,...Ct}]=Wi("root",{ref:r,elementType:wW,externalForwardedProps:{...dt,...fe},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:q.backdrop},slotProps:{backdrop:Nq(typeof Z.backdrop=="function"?Z.backdrop(Te):Z.backdrop,{invisible:!0})},container:at,open:U},ownerState:Te,className:$n(ue.root,R)}),[Yt,pt]=Wi("paper",{ref:Se,className:ue.paper,elementType:kB,externalForwardedProps:dt,shouldForwardComponentProp:!0,additionalProps:{elevation:P,style:be?void 0:{opacity:0}},ownerState:Te});return X.jsx(nt,{...Ct,...!n1(nt)&&{slots:gt,slotProps:Pt,disableScrollLock:ae},children:X.jsx(Ce,{...Ge,timeout:Be,children:X.jsx(Yt,{...pt,children:E})})})});function TW(e){return br("MuiMenu",e)}wr("MuiMenu",["root","paper","list"]);const EW={vertical:"top",horizontal:"right"},CW={vertical:"top",horizontal:"left"},MW=e=>{const{classes:t}=e;return Sr({root:["root"],paper:["paper"],list:["list"]},TW,t)},AW=mn(SW,{shouldForwardProp:e=>tu(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),RW=mn(kB,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),kW=mn(vW,{name:"MuiMenu",slot:"List"})({outline:0}),IW=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiMenu"}),{autoFocus:h=!0,children:p,className:y,disableAutoFocusItem:b=!1,MenuListProps:a={},onClose:E,open:R,PaperProps:L={},PopoverClasses:P,transitionDuration:F="auto",TransitionProps:{onEntering:U,...N}={},variant:q="selectedMenu",slots:Z={},slotProps:Q={},...Y}=c,J=$1(),re={...c,autoFocus:h,disableAutoFocusItem:b,MenuListProps:a,onEntering:U,PaperProps:L,transitionDuration:F,TransitionProps:N,variant:q},ae=MW(re),fe=h&&!b&&R,Se=V.useRef(null),Te=(Be,dt)=>{Se.current&&Se.current.adjustStyleForScrollbar(Be,{direction:J?"rtl":"ltr"}),U&&U(Be,dt)},ue=Be=>{Be.key==="Tab"&&(Be.preventDefault(),E&&E(Be,"tabKeyDown"))};let _e=-1;V.Children.map(p,(Be,dt)=>{V.isValidElement(Be)&&(Be.props.disabled||(q==="selectedMenu"&&Be.props.selected||_e===-1)&&(_e=dt))});const se={slots:Z,slotProps:{list:a,transition:N,paper:L,...Q}},me=wB({elementType:Z.root,externalSlotProps:Q.root,ownerState:re,className:[ae.root,y]}),[be,Ie]=Wi("paper",{className:ae.paper,elementType:RW,externalForwardedProps:se,shouldForwardComponentProp:!0,ownerState:re}),[pe,Pe]=Wi("list",{className:$n(ae.list,a.className),elementType:kW,shouldForwardComponentProp:!0,externalForwardedProps:se,getSlotProps:Be=>({...Be,onKeyDown:dt=>{ue(dt),Be.onKeyDown?.(dt)}}),ownerState:re}),et=typeof se.slotProps.transition=="function"?se.slotProps.transition(re):se.slotProps.transition;return X.jsx(AW,{onClose:E,anchorOrigin:{vertical:"bottom",horizontal:J?"right":"left"},transformOrigin:J?EW:CW,slots:{root:Z.root,paper:be,backdrop:Z.backdrop,...Z.transition&&{transition:Z.transition}},slotProps:{root:me,paper:Ie,backdrop:typeof Q.backdrop=="function"?Q.backdrop(re):Q.backdrop,transition:{...et,onEntering:(...Be)=>{Te(...Be),et?.onEntering?.(...Be)}}},open:R,ref:r,transitionDuration:F,ownerState:re,...Y,classes:P,children:X.jsx(pe,{actions:Se,autoFocus:h&&(_e===-1||b),autoFocusItem:fe,variant:q,...Pe,children:p})})});function zW(e){return br("MuiMenuItem",e)}const T0=wr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),LW=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},PW=e=>{const{disabled:t,dense:r,divider:c,disableGutters:h,selected:p,classes:y}=e,a=Sr({root:["root",r&&"dense",t&&"disabled",!h&&"gutters",c&&"divider",p&&"selected"]},zW,y);return{...y,...a}},DW=mn(hB,{shouldForwardProp:e=>tu(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:LW})(Hr(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${T0.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${T0.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${T0.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${T0.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${T0.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${eI.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${eI.inset}`]:{marginLeft:52},[`& .${iI.root}`]:{marginTop:0,marginBottom:0},[`& .${iI.inset}`]:{paddingLeft:36},[`& .${rI.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${rI.root} svg`]:{fontSize:"1.25rem"}}}]}))),ef=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiMenuItem"}),{autoFocus:h=!1,component:p="li",dense:y=!1,divider:b=!1,disableGutters:a=!1,focusVisibleClassName:E,role:R="menuitem",tabIndex:L,className:P,...F}=c,U=V.useContext(r3),N=V.useMemo(()=>({dense:y||U.dense||!1,disableGutters:a}),[U.dense,y,a]),q=V.useRef(null);Yl(()=>{h&&q.current&&q.current.focus()},[h]);const Z={...c,dense:N.dense,divider:b,disableGutters:a},Q=PW(c),Y=mo(q,r);let J;return c.disabled||(J=L!==void 0?L:-1),X.jsx(r3.Provider,{value:N,children:X.jsx(DW,{ref:Y,role:R,tabIndex:J,component:p,focusVisibleClassName:$n(Q.focusVisible,E),className:$n(Q.root,P),...F,ownerState:Z,classes:Q})})});function OW(e){return br("MuiNativeSelect",e)}const RR=wr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),BW=e=>{const{classes:t,variant:r,disabled:c,multiple:h,open:p,error:y}=e,b={select:["select",r,c&&"disabled",h&&"multiple",y&&"error"],icon:["icon",`icon${sr(r)}`,p&&"iconOpen",c&&"disabled"]};return Sr(b,OW,t)},IB=mn("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${RR.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),FW=mn(IB,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:tu,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${RR.multiple}`]:t.multiple}]}})({}),zB=mn("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${RR.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),jW=mn(zB,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${sr(r.variant)}`],r.open&&t.iconOpen]}})({}),NW=V.forwardRef(function(t,r){const{className:c,disabled:h,error:p,IconComponent:y,inputRef:b,variant:a="standard",...E}=t,R={...t,disabled:h,variant:a,error:p},L=BW(R);return X.jsxs(V.Fragment,{children:[X.jsx(FW,{ownerState:R,className:$n(L.select,c),disabled:h,ref:b||r,...E}),t.multiple?null:X.jsx(jW,{as:y,ownerState:R,className:L.icon})]})});var cI;const UW=mn("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:tu})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),$W=mn("legend",{name:"MuiNotchedOutlined",shouldForwardProp:tu})(Hr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function qW(e){const{children:t,classes:r,className:c,label:h,notched:p,...y}=e,b=h!=null&&h!=="",a={...e,notched:p,withLabel:b};return X.jsx(UW,{"aria-hidden":!0,className:c,ownerState:a,...y,children:X.jsx($W,{ownerState:a,children:b?X.jsx("span",{children:h}):cI||(cI=X.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const VW=e=>{const{classes:t}=e,c=Sr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},iH,t);return{...t,...c}},GW=mn(Y1,{shouldForwardProp:e=>tu(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Z1})(Hr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Qu.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Qu.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${Qu.focused} .${Qu.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Ih()).map(([r])=>({props:{color:r},style:{[`&.${Qu.focused} .${Qu.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${Qu.error} .${Qu.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Qu.disabled} .${Qu.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:c})=>r.multiline&&c==="small",style:{padding:"8.5px 14px"}}]}})),HW=mn(qW,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Hr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),WW=mn(K1,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:X1})(Hr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),kR=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiOutlinedInput"}),{components:h={},fullWidth:p=!1,inputComponent:y="input",label:b,multiline:a=!1,notched:E,slots:R={},slotProps:L={},type:P="text",...F}=c,U=VW(c),N=Oy(),q=Dy({props:c,muiFormControl:N,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),Z={...c,color:q.color||"primary",disabled:q.disabled,error:q.error,focused:q.focused,formControl:N,fullWidth:p,hiddenLabel:q.hiddenLabel,multiline:a,size:q.size,type:P},Q=R.root??h.Root??GW,Y=R.input??h.Input??WW,[J,re]=Wi("notchedOutline",{elementType:HW,className:U.notchedOutline,shouldForwardComponentProp:!0,ownerState:Z,externalForwardedProps:{slots:R,slotProps:L},additionalProps:{label:b!=null&&b!==""&&q.required?X.jsxs(V.Fragment,{children:[b," ","*"]}):b}});return X.jsx(Q1,{slots:{root:Q,input:Y},slotProps:L,renderSuffix:ae=>X.jsx(J,{...re,notched:typeof E<"u"?E:!!(ae.startAdornment||ae.filled||ae.focused)}),fullWidth:p,inputComponent:y,multiline:a,ref:r,type:P,...F,classes:{...U,notchedOutline:null}})});kR.muiName="Input";const ZW=Qo(X.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),XW=Qo(X.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}));function LB(e){return br("MuiSelect",e)}const E0=wr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var uI;const YW=mn(IB,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${E0.select}`]:t.select},{[`&.${E0.select}`]:t[r.variant]},{[`&.${E0.error}`]:t.error},{[`&.${E0.multiple}`]:t.multiple}]}})({[`&.${E0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),KW=mn(zB,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${sr(r.variant)}`],r.open&&t.iconOpen]}})({}),QW=mn("input",{shouldForwardProp:e=>nB(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function fI(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function JW(e){return e==null||typeof e=="string"&&!e.trim()}const eZ=e=>{const{classes:t,variant:r,disabled:c,multiple:h,open:p,error:y}=e,b={select:["select",r,c&&"disabled",h&&"multiple",y&&"error"],icon:["icon",`icon${sr(r)}`,p&&"iconOpen",c&&"disabled"],nativeInput:["nativeInput"]};return Sr(b,LB,t)},tZ=V.forwardRef(function(t,r){const{"aria-describedby":c,"aria-label":h,autoFocus:p,autoWidth:y,children:b,className:a,defaultOpen:E,defaultValue:R,disabled:L,displayEmpty:P,error:F=!1,IconComponent:U,inputRef:N,labelId:q,MenuProps:Z={},multiple:Q,name:Y,onBlur:J,onChange:re,onClose:ae,onFocus:fe,onOpen:Se,open:Te,readOnly:ue,renderValue:_e,required:se,SelectDisplayProps:me={},tabIndex:be,type:Ie,value:pe,variant:Pe="standard",...et}=t,[Be,dt]=HA({controlled:pe,default:R,name:"Select"}),[Ce,Ge]=HA({controlled:Te,default:E,name:"Select"}),at=V.useRef(null),nt=V.useRef(null),[gt,Pt]=V.useState(null),{current:Ct}=V.useRef(Te!=null),[Yt,pt]=V.useState(),Rt=mo(r,N),kt=V.useCallback(Wt=>{nt.current=Wt,Wt&&Pt(Wt)},[]),Xe=gt?.parentNode;V.useImperativeHandle(Rt,()=>({focus:()=>{nt.current.focus()},node:at.current,value:Be}),[Be]),V.useEffect(()=>{E&&Ce&&gt&&!Ct&&(pt(y?null:Xe.clientWidth),nt.current.focus())},[gt,y]),V.useEffect(()=>{p&&nt.current.focus()},[p]),V.useEffect(()=>{if(!q)return;const Wt=ll(nt.current).getElementById(q);if(Wt){const fn=()=>{getSelection().isCollapsed&&nt.current.focus()};return Wt.addEventListener("click",fn),()=>{Wt.removeEventListener("click",fn)}}},[q]);const xn=(Wt,fn)=>{Wt?Se&&Se(fn):ae&&ae(fn),Ct||(pt(y?null:Xe.clientWidth),Ge(Wt))},Vt=Wt=>{Wt.button===0&&(Wt.preventDefault(),nt.current.focus(),xn(!0,Wt))},Kt=Wt=>{xn(!1,Wt)},sn=V.Children.toArray(b),Jt=Wt=>{const fn=sn.find(Nn=>Nn.props.value===Wt.target.value);fn!==void 0&&(dt(fn.props.value),re&&re(Wt,fn))},zn=Wt=>fn=>{let Nn;if(fn.currentTarget.hasAttribute("tabindex")){if(Q){Nn=Array.isArray(Be)?Be.slice():[];const fr=Be.indexOf(Wt.props.value);fr===-1?Nn.push(Wt.props.value):Nn.splice(fr,1)}else Nn=Wt.props.value;if(Wt.props.onClick&&Wt.props.onClick(fn),Be!==Nn&&(dt(Nn),re)){const fr=fn.nativeEvent||fn,Zr=new fr.constructor(fr.type,fr);Object.defineProperty(Zr,"target",{writable:!0,value:{value:Nn,name:Y}}),re(Zr,Wt)}Q||xn(!1,fn)}},gn=Wt=>{ue||[" ","ArrowUp","ArrowDown","Enter"].includes(Wt.key)&&(Wt.preventDefault(),xn(!0,Wt))},yn=gt!==null&&Ce,Cn=Wt=>{!yn&&J&&(Object.defineProperty(Wt,"target",{writable:!0,value:{value:Be,name:Y}}),J(Wt))};delete et["aria-invalid"];let Xt,jn;const _n=[];let er=!1;(o1({value:Be})||P)&&(_e?Xt=_e(Be):er=!0);const tr=sn.map(Wt=>{if(!V.isValidElement(Wt))return null;let fn;if(Q){if(!Array.isArray(Be))throw new Error(Rh(2));fn=Be.some(Nn=>fI(Nn,Wt.props.value)),fn&&er&&_n.push(Wt.props.children)}else fn=fI(Be,Wt.props.value),fn&&er&&(jn=Wt.props.children);return V.cloneElement(Wt,{"aria-selected":fn?"true":"false",onClick:zn(Wt),onKeyUp:Nn=>{Nn.key===" "&&Nn.preventDefault(),Wt.props.onKeyUp&&Wt.props.onKeyUp(Nn)},role:"option",selected:fn,value:void 0,"data-value":Wt.props.value})});er&&(Q?_n.length===0?Xt=null:Xt=_n.reduce((Wt,fn,Nn)=>(Wt.push(fn),Nn<_n.length-1&&Wt.push(", "),Wt),[]):Xt=jn);let Tn=Yt;!y&&Ct&&gt&&(Tn=Xe.clientWidth);let Ln;typeof be<"u"?Ln=be:Ln=L?null:0;const Xn=me.id||(Y?`mui-component-select-${Y}`:void 0),lr={...t,variant:Pe,value:Be,open:yn,error:F},Sn=eZ(lr),zr={...Z.PaperProps,...typeof Z.slotProps?.paper=="function"?Z.slotProps.paper(lr):Z.slotProps?.paper},cr={...Z.MenuListProps,...typeof Z.slotProps?.list=="function"?Z.slotProps.list(lr):Z.slotProps?.list},un=Em();return X.jsxs(V.Fragment,{children:[X.jsx(YW,{as:"div",ref:kt,tabIndex:Ln,role:"combobox","aria-controls":yn?un:void 0,"aria-disabled":L?"true":void 0,"aria-expanded":yn?"true":"false","aria-haspopup":"listbox","aria-label":h,"aria-labelledby":[q,Xn].filter(Boolean).join(" ")||void 0,"aria-describedby":c,"aria-required":se?"true":void 0,"aria-invalid":F?"true":void 0,onKeyDown:gn,onMouseDown:L||ue?null:Vt,onBlur:Cn,onFocus:fe,...me,ownerState:lr,className:$n(me.className,Sn.select,a),id:Xn,children:JW(Xt)?uI||(uI=X.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):Xt}),X.jsx(QW,{"aria-invalid":F,value:Array.isArray(Be)?Be.join(","):Be,name:Y,ref:at,"aria-hidden":!0,onChange:Jt,tabIndex:-1,disabled:L,className:Sn.nativeInput,autoFocus:p,required:se,...et,ownerState:lr}),X.jsx(KW,{as:U,className:Sn.icon,ownerState:lr}),X.jsx(IW,{id:`menu-${Y||""}`,anchorEl:Xe,open:yn,onClose:Kt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...Z,slotProps:{...Z.slotProps,list:{"aria-labelledby":q,role:"listbox","aria-multiselectable":Q?"true":void 0,disableListWrap:!0,id:un,...cr},paper:{...zr,style:{minWidth:Tn,...zr!=null?zr.style:null}}},children:tr})]})}),nZ=e=>{const{classes:t}=e,c=Sr({root:["root"]},LB,t);return{...t,...c}},IR={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>tu(e)&&e!=="variant"},rZ=mn(AR,IR)(""),iZ=mn(kR,IR)(""),aZ=mn(MR,IR)(""),tw=V.forwardRef(function(t,r){const c=Tr({name:"MuiSelect",props:t}),{autoWidth:h=!1,children:p,classes:y={},className:b,defaultOpen:a=!1,displayEmpty:E=!1,IconComponent:R=oH,id:L,input:P,inputProps:F,label:U,labelId:N,MenuProps:q,multiple:Z=!1,native:Q=!1,onClose:Y,onOpen:J,open:re,renderValue:ae,SelectDisplayProps:fe,variant:Se="outlined",...Te}=c,ue=Q?NW:tZ,_e=Oy(),se=Dy({props:c,muiFormControl:_e,states:["variant","error"]}),me=se.variant||Se,be={...c,variant:me,classes:y},Ie=nZ(be),{root:pe,...Pe}=Ie,et=P||{standard:X.jsx(rZ,{ownerState:be}),outlined:X.jsx(iZ,{label:U,ownerState:be}),filled:X.jsx(aZ,{ownerState:be})}[me],Be=mo(r,Py(et));return X.jsx(V.Fragment,{children:V.cloneElement(et,{inputComponent:ue,inputProps:{children:p,error:se.error,IconComponent:R,variant:me,type:void 0,multiple:Z,...Q?{id:L}:{autoWidth:h,defaultOpen:a,displayEmpty:E,labelId:N,MenuProps:q,onClose:Y,onOpen:J,open:re,renderValue:ae,SelectDisplayProps:{id:L,...fe}},...F,classes:F?po(Pe,F.classes):Pe,...P?P.props.inputProps:{}},...(Z&&Q||E)&&me==="outlined"?{notched:!0}:{},ref:Be,className:$n(et.props.className,b,Ie.root),...!P&&{variant:me},...Te})})});tw.muiName="Select";function oZ(e){return br("MuiTooltip",e)}const Ca=wr("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function sZ(e){return Math.round(e*1e5)/1e5}const lZ=e=>{const{classes:t,disableInteractive:r,arrow:c,touch:h,placement:p}=e,y={popper:["popper",!r&&"popperInteractive",c&&"popperArrow"],tooltip:["tooltip",c&&"tooltipArrow",h&&"touch",`tooltipPlacement${sr(p.split("-")[0])}`],arrow:["arrow"]};return Sr(y,oZ,t)},cZ=mn(TB,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(Hr(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${Ca.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ca.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ca.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Ca.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Ca.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Ca.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Ca.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Ca.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),uZ=mn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${sr(r.placement.split("-")[0])}`]]}})(Hr(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${Ca.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Ca.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Ca.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Ca.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${sZ(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${Ca.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Ca.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${Ca.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Ca.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${Ca.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Ca.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${Ca.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Ca.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Ca.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Ca.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),fZ=mn("span",{name:"MuiTooltip",slot:"Arrow"})(Hr(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let wb=!1;const hI=new G1;let C0={x:0,y:0};function Sb(e,t){return(r,...c)=>{t&&t(r,...c),e(r,...c)}}const PB=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTooltip"}),{arrow:h=!1,children:p,classes:y,components:b={},componentsProps:a={},describeChild:E=!1,disableFocusListener:R=!1,disableHoverListener:L=!1,disableInteractive:P=!1,disableTouchListener:F=!1,enterDelay:U=100,enterNextDelay:N=0,enterTouchDelay:q=700,followCursor:Z=!1,id:Q,leaveDelay:Y=0,leaveTouchDelay:J=1500,onClose:re,onOpen:ae,open:fe,placement:Se="bottom",PopperComponent:Te,PopperProps:ue={},slotProps:_e={},slots:se={},title:me,TransitionComponent:be,TransitionProps:Ie,...pe}=c,Pe=V.isValidElement(p)?p:X.jsx("span",{children:p}),et=Om(),Be=$1(),[dt,Ce]=V.useState(),[Ge,at]=V.useState(null),nt=V.useRef(!1),gt=P||Z,Pt=ly(),Ct=ly(),Yt=ly(),pt=ly(),[Rt,kt]=HA({controlled:fe,default:!1,name:"Tooltip",state:"open"});let Xe=Rt;const xn=Em(Q),Vt=V.useRef(),Kt=Ch(()=>{Vt.current!==void 0&&(document.body.style.WebkitUserSelect=Vt.current,Vt.current=void 0),pt.clear()});V.useEffect(()=>Kt,[Kt]);const sn=qe=>{hI.clear(),wb=!0,kt(!0),ae&&!Xe&&ae(qe)},Jt=Ch(qe=>{hI.start(800+Y,()=>{wb=!1}),kt(!1),re&&Xe&&re(qe),Pt.start(et.transitions.duration.shortest,()=>{nt.current=!1})}),zn=qe=>{nt.current&&qe.type!=="touchstart"||(dt&&dt.removeAttribute("title"),Ct.clear(),Yt.clear(),U||wb&&N?Ct.start(wb?N:U,()=>{sn(qe)}):sn(qe))},gn=qe=>{Ct.clear(),Yt.start(Y,()=>{Jt(qe)})},[,yn]=V.useState(!1),Cn=qe=>{r1(qe.target)||(yn(!1),gn(qe))},Xt=qe=>{dt||Ce(qe.currentTarget),r1(qe.target)&&(yn(!0),zn(qe))},jn=qe=>{nt.current=!0;const je=Pe.props;je.onTouchStart&&je.onTouchStart(qe)},_n=qe=>{jn(qe),Yt.clear(),Pt.clear(),Kt(),Vt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pt.start(q,()=>{document.body.style.WebkitUserSelect=Vt.current,zn(qe)})},er=qe=>{Pe.props.onTouchEnd&&Pe.props.onTouchEnd(qe),Kt(),Yt.start(J,()=>{Jt(qe)})};V.useEffect(()=>{if(!Xe)return;function qe(je){je.key==="Escape"&&Jt(je)}return document.addEventListener("keydown",qe),()=>{document.removeEventListener("keydown",qe)}},[Jt,Xe]);const tr=mo(Py(Pe),Ce,r);!me&&me!==0&&(Xe=!1);const Tn=V.useRef(),Ln=qe=>{const je=Pe.props;je.onMouseMove&&je.onMouseMove(qe),C0={x:qe.clientX,y:qe.clientY},Tn.current&&Tn.current.update()},Xn={},lr=typeof me=="string";E?(Xn.title=!Xe&&lr&&!L?me:null,Xn["aria-describedby"]=Xe?xn:null):(Xn["aria-label"]=lr?me:null,Xn["aria-labelledby"]=Xe&&!lr?xn:null);const Sn={...Xn,...pe,...Pe.props,className:$n(pe.className,Pe.props.className),onTouchStart:jn,ref:tr,...Z?{onMouseMove:Ln}:{}},zr={};F||(Sn.onTouchStart=_n,Sn.onTouchEnd=er),L||(Sn.onMouseOver=Sb(zn,Sn.onMouseOver),Sn.onMouseLeave=Sb(gn,Sn.onMouseLeave),gt||(zr.onMouseOver=zn,zr.onMouseLeave=gn)),R||(Sn.onFocus=Sb(Xt,Sn.onFocus),Sn.onBlur=Sb(Cn,Sn.onBlur),gt||(zr.onFocus=Xt,zr.onBlur=Cn));const cr={...c,isRtl:Be,arrow:h,disableInteractive:gt,placement:Se,PopperComponentProp:Te,touch:nt.current},un=typeof _e.popper=="function"?_e.popper(cr):_e.popper,Wt=V.useMemo(()=>{let qe=[{name:"arrow",enabled:!!Ge,options:{element:Ge,padding:4}}];return ue.popperOptions?.modifiers&&(qe=qe.concat(ue.popperOptions.modifiers)),un?.popperOptions?.modifiers&&(qe=qe.concat(un.popperOptions.modifiers)),{...ue.popperOptions,...un?.popperOptions,modifiers:qe}},[Ge,ue.popperOptions,un?.popperOptions]),fn=lZ(cr),Nn=typeof _e.transition=="function"?_e.transition(cr):_e.transition,fr={slots:{popper:b.Popper,transition:b.Transition??be,tooltip:b.Tooltip,arrow:b.Arrow,...se},slotProps:{arrow:_e.arrow??a.arrow,popper:{...ue,...un??a.popper},tooltip:_e.tooltip??a.tooltip,transition:{...Ie,...Nn??a.transition}}},[Zr,Le]=Wi("popper",{elementType:cZ,externalForwardedProps:fr,ownerState:cr,className:$n(fn.popper,ue?.className)}),[le,ce]=Wi("transition",{elementType:s1,externalForwardedProps:fr,ownerState:cr}),[Me,Oe]=Wi("tooltip",{elementType:uZ,className:fn.tooltip,externalForwardedProps:fr,ownerState:cr}),[Ue,Qe]=Wi("arrow",{elementType:fZ,className:fn.arrow,externalForwardedProps:fr,ownerState:cr,ref:at});return X.jsxs(V.Fragment,{children:[V.cloneElement(Pe,Sn),X.jsx(Zr,{as:Te??TB,placement:Se,anchorEl:Z?{getBoundingClientRect:()=>({top:C0.y,left:C0.x,right:C0.x,bottom:C0.y,width:0,height:0})}:dt,popperRef:Tn,open:dt?Xe:!1,id:xn,transition:!0,...zr,...Le,popperOptions:Wt,children:({TransitionProps:qe})=>X.jsx(le,{timeout:et.transitions.duration.shorter,...qe,...ce,children:X.jsxs(Me,{...Oe,children:[me,h?X.jsx(Ue,{...Qe}):null]})})})]})}),Gl=Q$({createStyledComponent:mn("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>Tr({props:e,name:"MuiStack"})}),DB=V.createContext();function hZ(e){return br("MuiTable",e)}wr("MuiTable",["root","stickyHeader"]);const dZ=e=>{const{classes:t,stickyHeader:r}=e;return Sr({root:["root",r&&"stickyHeader"]},hZ,t)},pZ=mn("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})(Hr(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),dI="table",nw=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTable"}),{className:h,component:p=dI,padding:y="normal",size:b="medium",stickyHeader:a=!1,...E}=c,R={...c,component:p,padding:y,size:b,stickyHeader:a},L=dZ(R),P=V.useMemo(()=>({padding:y,size:b,stickyHeader:a}),[y,b,a]);return X.jsx(DB.Provider,{value:P,children:X.jsx(pZ,{as:p,role:p===dI?null:"table",ref:r,className:$n(L.root,h),ownerState:R,...E})})}),$v=V.createContext();function mZ(e){return br("MuiTableBody",e)}wr("MuiTableBody",["root"]);const gZ=e=>{const{classes:t}=e;return Sr({root:["root"]},mZ,t)},yZ=mn("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),_Z={variant:"body"},pI="tbody",rw=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTableBody"}),{className:h,component:p=pI,...y}=c,b={...c,component:p},a=gZ(b);return X.jsx($v.Provider,{value:_Z,children:X.jsx(yZ,{className:$n(a.root,h),as:p,ref:r,role:p===pI?null:"rowgroup",ownerState:b,...y})})});function vZ(e){return br("MuiTableCell",e)}const xZ=wr("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),bZ=e=>{const{classes:t,variant:r,align:c,padding:h,size:p,stickyHeader:y}=e,b={root:["root",r,y&&"stickyHeader",c!=="inherit"&&`align${sr(c)}`,h!=="normal"&&`padding${sr(h)}`,`size${sr(p)}`]};return Sr(b,vZ,t)},wZ=mn("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${sr(r.size)}`],r.padding!=="normal"&&t[`padding${sr(r.padding)}`],r.align!=="inherit"&&t[`align${sr(r.align)}`],r.stickyHeader&&t.stickyHeader]}})(Hr(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?e.lighten(e.alpha(e.palette.divider,1),.88):e.darken(e.alpha(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${xZ.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),or=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTableCell"}),{align:h="inherit",className:p,component:y,padding:b,scope:a,size:E,sortDirection:R,variant:L,...P}=c,F=V.useContext(DB),U=V.useContext($v),N=U&&U.variant==="head";let q;y?q=y:q=N?"th":"td";let Z=a;q==="td"?Z=void 0:!Z&&N&&(Z="col");const Q=L||U&&U.variant,Y={...c,align:h,component:q,padding:b||(F&&F.padding?F.padding:"normal"),size:E||(F&&F.size?F.size:"medium"),sortDirection:R,stickyHeader:Q==="head"&&F&&F.stickyHeader,variant:Q},J=bZ(Y);let re=null;return R&&(re=R==="asc"?"ascending":"descending"),X.jsx(wZ,{as:q,ref:r,className:$n(J.root,p),"aria-sort":re,scope:Z,ownerState:Y,...P})});function SZ(e){return br("MuiTableContainer",e)}wr("MuiTableContainer",["root"]);const TZ=e=>{const{classes:t}=e;return Sr({root:["root"]},SZ,t)},EZ=mn("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),zR=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTableContainer"}),{className:h,component:p="div",...y}=c,b={...c,component:p},a=TZ(b);return X.jsx(EZ,{ref:r,as:p,className:$n(a.root,h),ownerState:b,...y})});function CZ(e){return br("MuiTableFooter",e)}wr("MuiTableFooter",["root"]);const MZ=e=>{const{classes:t}=e;return Sr({root:["root"]},CZ,t)},AZ=mn("tfoot",{name:"MuiTableFooter",slot:"Root"})({display:"table-footer-group"}),RZ={variant:"footer"},mI="tfoot",kZ=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTableFooter"}),{className:h,component:p=mI,...y}=c,b={...c,component:p},a=MZ(b);return X.jsx($v.Provider,{value:RZ,children:X.jsx(AZ,{as:p,className:$n(a.root,h),ref:r,role:p===mI?null:"rowgroup",ownerState:b,...y})})});function IZ(e){return br("MuiTableHead",e)}wr("MuiTableHead",["root"]);const zZ=e=>{const{classes:t}=e;return Sr({root:["root"]},IZ,t)},LZ=mn("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),PZ={variant:"head"},gI="thead",DZ=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTableHead"}),{className:h,component:p=gI,...y}=c,b={...c,component:p},a=zZ(b);return X.jsx($v.Provider,{value:PZ,children:X.jsx(LZ,{as:p,className:$n(a.root,h),ref:r,role:p===gI?null:"rowgroup",ownerState:b,...y})})});function OZ(e){return br("MuiToolbar",e)}wr("MuiToolbar",["root","gutters","regular","dense"]);const BZ=e=>{const{classes:t,disableGutters:r,variant:c}=e;return Sr({root:["root",!r&&"gutters",c]},OZ,t)},FZ=mn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(Hr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),OB=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiToolbar"}),{className:h,component:p="div",disableGutters:y=!1,variant:b="regular",...a}=c,E={...c,component:p,disableGutters:y,variant:b},R=BZ(E);return X.jsx(FZ,{as:p,className:$n(R.root,h),ref:r,ownerState:E,...a})}),jZ=Qo(X.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),NZ=Qo(X.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function UZ(e){return br("MuiTablePaginationActions",e)}wr("MuiTablePaginationActions",["root"]);const $Z=e=>{const{classes:t}=e;return Sr({root:["root"]},UZ,t)},qZ=mn("div",{name:"MuiTablePaginationActions",slot:"Root"})({}),VZ=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTablePaginationActions"}),{backIconButtonProps:h,className:p,count:y,disabled:b=!1,getItemAriaLabel:a,nextIconButtonProps:E,onPageChange:R,page:L,rowsPerPage:P,showFirstButton:F,showLastButton:U,slots:N={},slotProps:q={},...Z}=c,Q=$1(),J=$Z(c),re=gt=>{R(gt,0)},ae=gt=>{R(gt,L-1)},fe=gt=>{R(gt,L+1)},Se=gt=>{R(gt,Math.max(0,Math.ceil(y/P)-1))},Te=N.firstButton??wh,ue=N.lastButton??wh,_e=N.nextButton??wh,se=N.previousButton??wh,me=N.firstButtonIcon??ZW,be=N.lastButtonIcon??XW,Ie=N.nextButtonIcon??NZ,pe=N.previousButtonIcon??jZ,Pe=Q?ue:Te,et=Q?_e:se,Be=Q?se:_e,dt=Q?Te:ue,Ce=Q?q.lastButton:q.firstButton,Ge=Q?q.nextButton:q.previousButton,at=Q?q.previousButton:q.nextButton,nt=Q?q.firstButton:q.lastButton;return X.jsxs(qZ,{ref:r,className:$n(J.root,p),...Z,children:[F&&X.jsx(Pe,{onClick:re,disabled:b||L===0,"aria-label":a("first",L),title:a("first",L),...Ce,children:Q?X.jsx(be,{...q.lastButtonIcon}):X.jsx(me,{...q.firstButtonIcon})}),X.jsx(et,{onClick:ae,disabled:b||L===0,color:"inherit","aria-label":a("previous",L),title:a("previous",L),...Ge??h,children:Q?X.jsx(Ie,{...q.nextButtonIcon}):X.jsx(pe,{...q.previousButtonIcon})}),X.jsx(Be,{onClick:fe,disabled:b||(y!==-1?L>=Math.ceil(y/P)-1:!1),color:"inherit","aria-label":a("next",L),title:a("next",L),...at??E,children:Q?X.jsx(pe,{...q.previousButtonIcon}):X.jsx(Ie,{...q.nextButtonIcon})}),U&&X.jsx(dt,{onClick:Se,disabled:b||L>=Math.ceil(y/P)-1,"aria-label":a("last",L),title:a("last",L),...nt,children:Q?X.jsx(me,{...q.firstButtonIcon}):X.jsx(be,{...q.lastButtonIcon})})]})});function GZ(e){return br("MuiTablePagination",e)}const X0=wr("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var yI;const HZ=mn(or,{name:"MuiTablePagination",slot:"Root"})(Hr(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),WZ=mn(OB,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>({[`& .${X0.actions}`]:t.actions,...t.toolbar})})(Hr(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${X0.actions}`]:{flexShrink:0,marginLeft:20}}))),ZZ=mn("div",{name:"MuiTablePagination",slot:"Spacer"})({flex:"1 1 100%"}),XZ=mn("p",{name:"MuiTablePagination",slot:"SelectLabel"})(Hr(({theme:e})=>({...e.typography.body2,flexShrink:0}))),YZ=mn(tw,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>({[`& .${X0.selectIcon}`]:t.selectIcon,[`& .${X0.select}`]:t.select,...t.input,...t.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${X0.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),KZ=mn(ef,{name:"MuiTablePagination",slot:"MenuItem"})({}),QZ=mn("p",{name:"MuiTablePagination",slot:"DisplayedRows"})(Hr(({theme:e})=>({...e.typography.body2,flexShrink:0})));function JZ({from:e,to:t,count:r}){return`${e}–${t} of ${r!==-1?r:`more than ${t}`}`}function eX(e){return`Go to ${e} page`}const tX=e=>{const{classes:t}=e;return Sr({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},GZ,t)},nX=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTablePagination"}),{ActionsComponent:h=VZ,backIconButtonProps:p,colSpan:y,component:b=or,count:a,disabled:E=!1,getItemAriaLabel:R=eX,labelDisplayedRows:L=JZ,labelRowsPerPage:P="Rows per page:",nextIconButtonProps:F,onPageChange:U,onRowsPerPageChange:N,page:q,rowsPerPage:Z,rowsPerPageOptions:Q=[10,25,50,100],SelectProps:Y={},showFirstButton:J=!1,showLastButton:re=!1,slotProps:ae={},slots:fe={},...Se}=c,Te=c,ue=tX(Te),_e=ae?.select??Y,se=_e.native?"option":KZ;let me;(b===or||b==="td")&&(me=y||1e3);const be=Em(_e.id),Ie=Em(_e.labelId),pe=()=>a===-1?(q+1)*Z:Z===-1?a:Math.min(a,(q+1)*Z),Pe={slots:fe,slotProps:ae},[et,Be]=Wi("root",{ref:r,className:ue.root,elementType:HZ,externalForwardedProps:{...Pe,component:b,...Se},ownerState:Te,additionalProps:{colSpan:me}}),[dt,Ce]=Wi("toolbar",{className:ue.toolbar,elementType:WZ,externalForwardedProps:Pe,ownerState:Te}),[Ge,at]=Wi("spacer",{className:ue.spacer,elementType:ZZ,externalForwardedProps:Pe,ownerState:Te}),[nt,gt]=Wi("selectLabel",{className:ue.selectLabel,elementType:XZ,externalForwardedProps:Pe,ownerState:Te,additionalProps:{id:Ie}}),[Pt,Ct]=Wi("select",{className:ue.select,elementType:YZ,externalForwardedProps:Pe,ownerState:Te}),[Yt,pt]=Wi("menuItem",{className:ue.menuItem,elementType:se,externalForwardedProps:Pe,ownerState:Te}),[Rt,kt]=Wi("displayedRows",{className:ue.displayedRows,elementType:QZ,externalForwardedProps:Pe,ownerState:Te});return X.jsx(et,{...Be,children:X.jsxs(dt,{...Ce,children:[X.jsx(Ge,{...at}),Q.length>1&&X.jsx(nt,{...gt,children:P}),Q.length>1&&X.jsx(Pt,{variant:"standard",...!_e.variant&&{input:yI||(yI=X.jsx(Q1,{}))},value:Z,onChange:N,id:be,labelId:Ie,..._e,classes:{..._e.classes,root:$n(ue.input,ue.selectRoot,(_e.classes||{}).root),select:$n(ue.select,(_e.classes||{}).select),icon:$n(ue.selectIcon,(_e.classes||{}).icon)},disabled:E,...Ct,children:Q.map(Xe=>V.createElement(Yt,{...pt,key:Xe.label?Xe.label:Xe,value:Xe.value?Xe.value:Xe},Xe.label?Xe.label:Xe))}),X.jsx(Rt,{...kt,children:L({from:a===0?0:q*Z+1,to:pe(),count:a===-1?-1:a,page:q})}),X.jsx(h,{className:ue.actions,backIconButtonProps:p,count:a,nextIconButtonProps:F,onPageChange:U,page:q,rowsPerPage:Z,showFirstButton:J,showLastButton:re,slotProps:ae.actions,slots:fe.actions,getItemAriaLabel:R,disabled:E})]})})});function rX(e){return br("MuiTableRow",e)}const _I=wr("MuiTableRow",["root","selected","hover","head","footer"]),iX=e=>{const{classes:t,selected:r,hover:c,head:h,footer:p}=e;return Sr({root:["root",r&&"selected",c&&"hover",h&&"head",p&&"footer"]},rX,t)},aX=mn("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})(Hr(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${_I.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${_I.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)}}}))),vI="tr",Ma=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTableRow"}),{className:h,component:p=vI,hover:y=!1,selected:b=!1,...a}=c,E=V.useContext($v),R={...c,component:p,hover:y,selected:b,head:E&&E.variant==="head",footer:E&&E.variant==="footer"},L=iX(R);return X.jsx(aX,{as:p,ref:r,className:$n(L.root,h),role:p===vI?null:"row",ownerState:R,...a})});function oX(e){return br("MuiTextField",e)}wr("MuiTextField",["root"]);const sX={standard:AR,filled:MR,outlined:kR},lX=e=>{const{classes:t}=e;return Sr({root:["root"]},oX,t)},cX=mn(MB,{name:"MuiTextField",slot:"Root"})({}),uX=V.forwardRef(function(t,r){const c=Tr({props:t,name:"MuiTextField"}),{autoComplete:h,autoFocus:p=!1,children:y,className:b,color:a="primary",defaultValue:E,disabled:R=!1,error:L=!1,FormHelperTextProps:P,fullWidth:F=!1,helperText:U,id:N,InputLabelProps:q,inputProps:Z,InputProps:Q,inputRef:Y,label:J,maxRows:re,minRows:ae,multiline:fe=!1,name:Se,onBlur:Te,onChange:ue,onFocus:_e,placeholder:se,required:me=!1,rows:be,select:Ie=!1,SelectProps:pe,slots:Pe={},slotProps:et={},type:Be,value:dt,variant:Ce="outlined",...Ge}=c,at={...c,autoFocus:p,color:a,disabled:R,error:L,fullWidth:F,multiline:fe,required:me,select:Ie,variant:Ce},nt=lX(at),gt=Em(N),Pt=U&&gt?`${gt}-helper-text`:void 0,Ct=J&&gt?`${gt}-label`:void 0,Yt=sX[Ce],pt={slots:Pe,slotProps:{input:Q,inputLabel:q,htmlInput:Z,formHelperText:P,select:pe,...et}},Rt={},kt=pt.slotProps.inputLabel;Ce==="outlined"&&(kt&&typeof kt.shrink<"u"&&(Rt.notched=kt.shrink),Rt.label=J),Ie&&((!pe||!pe.native)&&(Rt.id=void 0),Rt["aria-describedby"]=void 0);const[Xe,xn]=Wi("root",{elementType:cX,shouldForwardComponentProp:!0,externalForwardedProps:{...pt,...Ge},ownerState:at,className:$n(nt.root,b),ref:r,additionalProps:{disabled:R,error:L,fullWidth:F,required:me,color:a,variant:Ce}}),[Vt,Kt]=Wi("input",{elementType:Yt,externalForwardedProps:pt,additionalProps:Rt,ownerState:at}),[sn,Jt]=Wi("inputLabel",{elementType:AB,externalForwardedProps:pt,ownerState:at}),[zn,gn]=Wi("htmlInput",{elementType:"input",externalForwardedProps:pt,ownerState:at}),[yn,Cn]=Wi("formHelperText",{elementType:nW,externalForwardedProps:pt,ownerState:at}),[Xt,jn]=Wi("select",{elementType:tw,externalForwardedProps:pt,ownerState:at}),_n=X.jsx(Vt,{"aria-describedby":Pt,autoComplete:h,autoFocus:p,defaultValue:E,fullWidth:F,multiline:fe,name:Se,rows:be,maxRows:re,minRows:ae,type:Be,value:dt,id:gt,inputRef:Y,onBlur:Te,onChange:ue,onFocus:_e,placeholder:se,inputProps:gn,slots:{input:Pe.htmlInput?zn:void 0},...Kt});return X.jsxs(Xe,{...xn,children:[J!=null&&J!==""&&X.jsx(sn,{htmlFor:gt,id:Ct,...Jt,children:J}),Ie?X.jsx(Xt,{"aria-describedby":Pt,id:gt,labelId:Ct,value:dt,input:_n,...jn,children:y}):_n,U&&X.jsx(yn,{id:Pt,...Cn,children:U})]})}),fX=(e,t)=>{const[r,c]=V.useState(()=>{if(typeof window>"u")return t;try{const p=window.localStorage.getItem(e);return p?JSON.parse(p):t}catch(p){return console.log(p),t}});return[r,p=>{try{const y=p instanceof Function?p(r):p;c(y),typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(y))}catch(y){console.log(y)}}]},xI={main:"#CB9EFF",light:"#FFCFFF",dark:"#996FCB",contrastText:"#FFFFFF"},bI={main:"#7005FC",light:"#AB4CFF",dark:"#2600C7",contrastText:"#FFFFFF"},hX=e=>V1({palette:{mode:e,primary:e==="dark"?xI:bI,secondary:e==="dark"?bI:xI,background:{paper:e==="dark"?DA[900]:DA[300]}}}),BB=V.createContext({currentTheme:"dark",toggleTheme:()=>{}}),dX=({children:e})=>{const[t,r]=fX("theme","dark"),c=V.useMemo(()=>({currentTheme:t,toggleTheme:()=>r(t==="dark"?"light":"dark")}),[t,r]);return X.jsx(BB.Provider,{value:c,children:X.jsxs(Lq,{theme:hX(t),children:[X.jsx(wH,{enableColorScheme:!0}),e]})})},pX=()=>X.jsxs(ew,{component:"section",maxWidth:"sm",children:[X.jsx(Li,{variant:"h4",component:"h1",my:3,children:"About"}),X.jsxs(Li,{sx:{my:1},children:["A small visualiser for the"," ",X.jsx("a",{href:"https://www.educationcounts.govt.nz/directories/api-new-zealand-schools",children:"Schooling Directory API"})," provided by the New Zealand Government."]}),X.jsxs(Li,{children:["Built with ",X.jsx("a",{href:"https://reactjs.org/",children:"React"}),", ",X.jsx("a",{href:"https://www.typescriptlang.org/",children:"Typescript"}),","," ",X.jsx("a",{href:"https://mui.com/",children:"MUI"}),", ",X.jsx("a",{href:"https://www.mapbox.com/mapbox-gljs",children:"Mapbox GLJS"}),", and"," ",X.jsx("a",{href:"https://nivo.rocks/",children:"Nivo"}),"."]})]}),mX="https://catalogue.data.govt.nz/api/3/action/datastore_search_sql",gX="4b292323-9fcc-41f8-814b-3c7b19cf14b3",yX=async()=>{const e=new URL(mX),t=`
    SELECT
      "School_Id" as "schoolId",
      "Org_Name" as "name",
      "Add1_City" as "city",
      "URL" as "url",
      "Latitude"::double precision as "lat",
      "Longitude"::double precision as "lng",
      CASE WHEN "Māori" IS NULL THEN 0 ELSE "Māori"::int END as "maori",
      CASE WHEN "Pacific" IS NULL THEN 0 ELSE "Pacific"::int END as "pacific",
      CASE WHEN "European" IS NULL THEN 0 ELSE "European"::int END as "european",
      CASE WHEN "Asian" IS NULL THEN 0 ELSE "Asian"::int END as "asian",
      CASE WHEN "MELAA" IS NULL THEN 0 ELSE "MELAA"::int END as "melaa",
      CASE WHEN "International" IS NULL THEN 0 ELSE "International"::int END as "international",
      CASE WHEN "Other" IS NULL THEN 0 ELSE "Other"::int END as "other",
      CASE WHEN "Total" IS NULL THEN 0 ELSE "Total"::int END as "total",
      1 as "count"
    FROM
      "${gX}"
    `.trim().replace(/\s\s+/g," ");e.search=new URLSearchParams({sql:t}).toString();const r=await fetch(e.toString()).then(c=>c.json()).catch(c=>{throw new Error(`Failed to fetch school from api. Error: ${JSON.stringify(c)}`)});if(!r.success)throw new Error(`Failed to fetch school from api. Error: ${JSON.stringify(r.error)}. For more help, visit: ${r.help}`);return r.result.records},FB=()=>{const{data:e,error:t,isPending:r}=g6({queryKey:["schools"],queryFn:yX});return r?{isPending:!0,data:void 0,error:null}:t?{isPending:!1,data:void 0,error:t}:{isPending:!1,data:e,error:null}};var Ub={exports:{}},_X=Ub.exports,wI;function vX(){return wI||(wI=1,(function(e,t){var r={};(function(c,h){e.exports=h()})(_X,(function(){var c,h,p;function y(a,E){if(!c)c=E;else if(!h)h=E;else{var R="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+c+")(sharedChunk); ("+h+")(sharedChunk); self.onerror = null;",L={};c(L),p=E(L),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(p.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}y(["exports"],(function(a){var E=typeof self<"u"?self:{},R="2.15.0";let L;const P={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(L==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{L=r.API_URL_REGEX!=null?new RegExp(r.API_URL_REGEX):i}catch{L=i}}return L},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!P.API_URL)return null;try{const i=new URL(P.API_URL);return i.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":i.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},F={supported:!1,testSupport:function(i){!q&&N&&(Z?Q(i):U=i)}};let U,N,q=!1,Z=!1;function Q(i){const n=i.createTexture();i.bindTexture(i.TEXTURE_2D,n);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,N),i.isContextLost())return;F.supported=!0}catch{}i.deleteTexture(n),q=!0}E.document&&(N=E.document.createElement("img"),N.onload=function(){U&&Q(U),U=null,Z=!0},N.onerror=function(){q=!0,U=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Y="01";function J(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var re=ae;function ae(i,n,o,f){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=o,this.p2y=f}ae.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,f=0;f<8;f++){var m=this.sampleCurveX(o)-i;if(Math.abs(m)<n)return o;var v=this.sampleCurveDerivativeX(o);if(Math.abs(v)<1e-6)break;o-=m/v}var w=0,C=1;for(o=i,f=0;f<20&&(m=this.sampleCurveX(o),!(Math.abs(m-i)<n));f++)i>m?w=o:C=o,o=.5*(C-w)+w;return o},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var fe=J(re),Se=Te;function Te(i,n){this.x=i,this.y=n}Te.prototype={clone:function(){return new Te(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,o=i.y-this.y;return n*n+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),o=Math.sin(i),f=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=f,this},_rotateAround:function(i,n){var o=Math.cos(i),f=Math.sin(i),m=n.y+f*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-f*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Te.convert=function(i){return i instanceof Te?i:Array.isArray(i)?new Te(i[0],i[1]):i};var ue=J(Se);const _e=Math.PI/180,se=180/Math.PI;function me(i){return i*_e}function be(i){return i*se}const Ie=[[0,0],[1,0],[1,1],[0,1]];function pe(i){if(i<=0)return 0;if(i>=1)return 1;const n=i*i,o=n*i;return 4*(i<.5?o:3*(i-n)+o-.75)}function Pe(i,n,o,f){const m=new fe(i,n,o,f);return function(v){return m.solve(v)}}const et=Pe(.25,.1,.25,1);function Be(i,n,o){return Math.min(o,Math.max(n,i))}function dt(i,n,o){return(o=Be((o-i)/(n-i),0,1))*o*(3-2*o)}function Ce(i,n,o){const f=o-n,m=((i-n)%f+f)%f+n;return m===n?o:m}function Ge(i,n,o){if(!i.length)return o(null,[]);let f=i.length;const m=new Array(i.length);let v=null;i.forEach(((w,C)=>{n(w,((A,k)=>{A&&(v=A),m[C]=k,--f==0&&o(v,m)}))}))}function at(i){const n=[];for(const o in i)n.push(i[o]);return n}function nt(i,...n){for(const o of n)for(const f in o)i[f]=o[f];return i}let gt=1;function Pt(){return gt++}function Ct(){return(function i(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)})()}function Yt(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function pt(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function Rt(i,n){i.forEach((o=>{n[o]&&(n[o]=n[o].bind(n))}))}function kt(i,n){return i.indexOf(n,i.length-n.length)!==-1}function Xe(i,n,o){const f={};for(const m in i)f[m]=n.call(this,i[m],m,i);return f}function xn(i,n,o){const f={};for(const m in i)n.call(o||this,i[m],m,i)&&(f[m]=i[m]);return f}function Vt(i){return Array.isArray(i)?i.map(Vt):typeof i=="object"&&i?Xe(i,Vt):i}const Kt={};function sn(i){Kt[i]||(typeof console<"u"&&console.warn(i),Kt[i]=!0)}function Jt(i,n,o){return(o.y-i.y)*(n.x-i.x)>(n.y-i.y)*(o.x-i.x)}function zn(i){let n=0;for(let o,f,m=0,v=i.length,w=v-1;m<v;w=m++)o=i[m],f=i[w],n+=(f.x-o.x)*(o.y+f.y);return n}function gn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function yn(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((o,f,m,v)=>{const w=m||v;return n[f]=!w||w.toLowerCase(),""})),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n}let Cn=null;function Xt(i){if(Cn==null){const n=i.navigator?i.navigator.userAgent:null;Cn=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Cn}function jn(i){try{const n=E[i];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function _n(i,n){return[i[4*n],i[4*n+1],i[4*n+2],i[4*n+3]]}const er="mapbox-tiles";let tr=500,Tn=50,Ln,Xn;function lr(){try{return E.caches}catch{}}function Sn(){lr()&&!Ln&&(Ln=E.caches.open(er))}function zr(i){const n=i.indexOf("?");if(n<0)return i;const o=(function(m){const v=m.indexOf("?");return v>0?m.slice(v+1).split("&"):[]})(i),f=o.filter((m=>{const v=m.split("=");return v[0]==="language"||v[0]==="worldview"}));return f.length?`${i.slice(0,n)}?${f.join("&")}`:i.slice(0,n)}let cr=1/0;const un={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(un);class Wt extends Error{constructor(n,o,f){o===401&&Qe(f)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=o,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const fn=gn()?()=>self.worker&&self.worker.referrer:()=>(E.location.protocol==="blob:"?E.parent:E).location.href,Nn=function(i,n){if(!(/^file:/.test(o=i.url)||/^file:/.test(fn())&&!/^\w+:/.test(o))){if(E.fetch&&E.Request&&E.AbortController&&E.Request.prototype.hasOwnProperty("signal"))return(function(f,m){const v=new E.AbortController,w=new E.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:fn(),referrerPolicy:f.referrerPolicy,signal:v.signal});let C=!1,A=!1;const k=(B=w.url).indexOf("sku=")>0&&Qe(B);var B;f.type==="json"&&w.headers.set("Accept","application/json");const $=(K,ee,oe)=>{if(A)return;if(K&&K.message!=="SecurityError"&&sn(K.toString()),ee&&oe)return G(ee);const de=Date.now();E.fetch(w).then((Ae=>{if(Ae.ok){const Fe=k?Ae.clone():null;return G(Ae,Fe,de)}return m(new Wt(Ae.statusText,Ae.status,f.url))})).catch((Ae=>{Ae.name!=="AbortError"&&m(new Error(`${Ae.message} ${f.url}`))}))},G=(K,ee,oe)=>{(f.type==="arrayBuffer"?K.arrayBuffer():f.type==="json"?K.json():K.text()).then((de=>{A||(ee&&oe&&(function(Ae,Fe,Re){if(Sn(),!Ln)return;const De={status:Fe.status,statusText:Fe.statusText,headers:new E.Headers};Fe.headers.forEach(((ut,st)=>De.headers.set(st,ut)));const $e=yn(Fe.headers.get("Cache-Control")||"");if($e["no-store"])return;$e["max-age"]&&De.headers.set("Expires",new Date(Re+1e3*$e["max-age"]).toUTCString());const Ne=De.headers.get("Expires");Ne&&(new Date(Ne).getTime()-Re<42e4||(function(ut,st){if(Xn===void 0)try{new Response(new ReadableStream),Xn=!0}catch{Xn=!1}Xn?st(ut.body):ut.blob().then(st)})(Fe,(ut=>{const st=new E.Response(ut,De);Sn(),Ln&&Ln.then((bt=>bt.put(zr(Ae.url),st))).catch((bt=>sn(bt.message)))})))})(w,ee,oe),C=!0,m(null,de,K.headers.get("Cache-Control"),K.headers.get("Expires")))})).catch((de=>{A||m(new Error(de.message))}))};return k?(function(K,ee){if(Sn(),!Ln)return ee(null);const oe=zr(K.url);Ln.then((de=>{de.match(oe).then((Ae=>{const Fe=(function(Re){if(!Re)return!1;const De=new Date(Re.headers.get("Expires")||0),$e=yn(Re.headers.get("Cache-Control")||"");return De>Date.now()&&!$e["no-cache"]})(Ae);de.delete(oe),Fe&&de.put(oe,Ae.clone()),ee(null,Ae,Fe)})).catch(ee)})).catch(ee)})(w,$):$(null,null),{cancel:()=>{A=!0,C||v.abort()}}})(i,n);if(gn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n,void 0,!0)}var o;return(function(f,m){const v=new E.XMLHttpRequest;v.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const w in f.headers)v.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=f.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let w=v.response;if(f.type==="json")try{w=JSON.parse(v.response)}catch(C){return m(C)}m(null,w,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else m(new Wt(v.statusText,v.status,f.url))},v.send(f.body),{cancel:()=>v.abort()}})(i,n)},fr=function(i,n){return Nn(nt(i,{type:"arrayBuffer"}),n)};function Zr(i){const n=E.document.createElement("a");return n.href=i,n.protocol===E.document.location.protocol&&n.host===E.document.location.host}const Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let le,ce;le=[],ce=0;const Me=function(i,n){if(F.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),ce>=P.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:i,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return le.push(v),v}ce++;let o=!1;const f=()=>{if(!o)for(o=!0,ce--;le.length&&ce<P.MAX_PARALLEL_IMAGE_REQUESTS;){const v=le.shift(),{requestParameters:w,callback:C,cancelled:A}=v;A||(v.cancel=Me(w,C).cancel)}},m=fr(i,((v,w,C,A)=>{f(),v?n(v):w&&(E.createImageBitmap?(function(k,B){const $=new E.Blob([new Uint8Array(k)],{type:"image/png"});E.createImageBitmap($).then((G=>{B(null,G)})).catch((G=>{B(new Error(`Could not load image because of ${G.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))})(w,((k,B)=>n(k,B,C,A))):(function(k,B){const $=new E.Image,G=E.URL;$.onload=()=>{B(null,$),G.revokeObjectURL($.src),$.onload=null,E.requestAnimationFrame((()=>{$.src=Le}))},$.onerror=()=>B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const K=new E.Blob([new Uint8Array(k)],{type:"image/png"});$.src=k.byteLength?G.createObjectURL(K):Le})(w,((k,B)=>n(k,B,C,A))))}));return{cancel:()=>{m.cancel(),f()}}},Oe="NO_ACCESS_TOKEN";function Ue(i){return i.indexOf("mapbox:")===0}function Qe(i){return P.API_URL_REGEX.test(i)}function qe(i){return P.API_CDN_URL_REGEX.test(i)}function je(i){return P.API_STYLE_REGEX.test(i)&&!tt(i)}function tt(i){return P.API_SPRITE_REGEX.test(i)}const Tt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Lt(i){const n=i.match(Tt);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function Mt(i){const n=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${n}`}const dn="mapbox.eventData";function bn(i){if(!i)return null;const n=i.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(E.atob(n[1]).split("").map((o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch{return null}}class In{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const o=bn(P.ACCESS_TOKEN);let f="";return f=o&&o.u?E.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,((m,v)=>String.fromCharCode(+("0x"+v))))):P.ACCESS_TOKEN||"",n?`${dn}.${n}:${f}`:`${dn}:${f}`}fetchEventData(){const n=jn("localStorage"),o=this.getStorageKey(),f=this.getStorageKey("uuid");if(n)try{const m=E.localStorage.getItem(o);m&&(this.eventData=JSON.parse(m));const v=E.localStorage.getItem(f);v&&(this.anonId=v)}catch{sn("Unable to read from LocalStorage")}}saveEventData(){const n=jn("localStorage"),o=this.getStorageKey(),f=this.getStorageKey("uuid");if(n)try{E.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&E.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{sn("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,o,f,m){if(!P.EVENTS_URL)return;const v=Lt(P.EVENTS_URL);v.params.push(`access_token=${m||P.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(n).toISOString()},C=o?nt(w,o):w,A={url:Mt(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([C])};this.pendingRequest=(function(k,B){return Nn(nt(k,{method:"POST"}),B)})(A,(k=>{this.pendingRequest=null,f(k),this.saveEventData(),this.processRequests(m)}))}queueRequest(n,o){this.queue.push(n),this.processRequests(o)}}const Bn=new class extends In{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,n){P.EVENTS_URL&&P.ACCESS_TOKEN&&Array.isArray(i)&&i.some((o=>Ue(o)||Qe(o)))&&this.queueRequest(Date.now(),n)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=bn(P.ACCESS_TOKEN),o=n?n.u:P.ACCESS_TOKEN;let f=o!==this.eventData.tokenU;pt(this.anonId)||(this.anonId=Ct(),f=!0);const m=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),w=new Date(m),C=(m-this.eventData.lastSuccess)/864e5;f=f||C>=1||C<-1||v.getDate()!==w.getDate()}else f=!0;f?this.postEvent(m,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:Y,"enabled.telemetry":!1,userId:this.anonId},(v=>{v||(this.eventData.lastSuccess=m,this.eventData.tokenU=o)}),i):this.processRequests()}},Mn=Bn.postTurnstileEvent.bind(Bn),nr=new class extends In{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,n,o,f){this.skuToken=n,this.errorCb=f,P.EVENTS_URL&&(o||P.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Oe)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),pt(this.anonId)||(this.anonId=Ct()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:Y,skuToken:this.skuToken,userId:this.anonId},(f=>{f?this.errorCb(f):n&&(this.success[n]=!0)}),i))}},Fn=nr.postMapLoadEvent.bind(nr),pr=new class extends In{constructor(){super("gljs.performance")}postPerformanceEvent(i,n){P.EVENTS_URL&&(i||P.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:o}=this.queue.shift(),f=(function(m){const v=E.performance.getEntriesByType("resource"),w=E.performance.getEntriesByType("mark"),C=(function(G){const K={};if(G){for(const ee in G)if(ee!=="other")for(const oe of G[ee]){const de=`${ee}ResolveRangeMin`,Ae=`${ee}ResolveRangeMax`,Fe=`${ee}RequestCount`,Re=`${ee}RequestCachedCount`;K[de]=Math.min(K[de]||1/0,oe.startTime),K[Ae]=Math.max(K[Ae]||-1/0,oe.responseEnd);const De=$e=>{K[$e]===void 0&&(K[$e]=0),++K[$e]};oe.transferSize!==void 0&&oe.transferSize===0&&De(Re),De(Fe)}}return K})((function(G,K){const ee={};if(G)for(const oe of G){const de=K(oe);ee[de]===void 0&&(ee[de]=[]),ee[de].push(oe)}return ee})(v,gr)),A=E.devicePixelRatio,k=E.navigator.connection||E.navigator.mozConnection||E.navigator.webkitConnection,B={counters:[],metadata:[],attributes:[]},$=(G,K,ee)=>{ee!=null&&G.push({name:K,value:ee.toString()})};for(const G in C)$(B.counters,G,C[G]);if(m.interactionRange[0]!==1/0&&m.interactionRange[1]!==-1/0&&($(B.counters,"interactionRangeMin",m.interactionRange[0]),$(B.counters,"interactionRangeMax",m.interactionRange[1])),w)for(const G of Object.keys(qn)){const K=qn[G],ee=w.find((oe=>oe.name===K));ee&&$(B.counters,K,ee.startTime)}return $(B.counters,"visibilityHidden",m.visibilityHidden),$(B.attributes,"style",(function(G){if(G)for(const K of G){const ee=K.name.split("?")[0];if(je(ee)){const oe=ee.split("/").slice(-2);if(oe.length===2)return`mapbox://styles/${oe[0]}/${oe[1]}`}}})(v)),$(B.attributes,"terrainEnabled",m.terrainEnabled?"true":"false"),$(B.attributes,"fogEnabled",m.fogEnabled?"true":"false"),$(B.attributes,"projection",m.projection),$(B.attributes,"zoom",m.zoom),$(B.metadata,"devicePixelRatio",A),$(B.metadata,"connectionEffectiveType",k?k.effectiveType:void 0),$(B.metadata,"navigatorUserAgent",E.navigator.userAgent),$(B.metadata,"screenWidth",E.screen.width),$(B.metadata,"screenHeight",E.screen.height),$(B.metadata,"windowWidth",E.innerWidth),$(B.metadata,"windowHeight",E.innerHeight),$(B.metadata,"mapWidth",m.width/A),$(B.metadata,"mapHeight",m.height/A),$(B.metadata,"webglRenderer",m.renderer),$(B.metadata,"webglVendor",m.vendor),$(B.metadata,"sdkVersion",R),$(B.metadata,"sdkIdentifier","mapbox-gl-js"),B})(o);for(const m of f.metadata);for(const m of f.counters);for(const m of f.attributes);this.postEvent(n,f,(()=>{}),i)}},Rr=pr.postPerformanceEvent.bind(pr),Ci=new class extends In{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,n,o,f){if(!P.API_URL||!P.SESSION_PATH)return;const m=Lt(P.API_URL+P.SESSION_PATH);m.params.push(`sku=${n||""}`),m.params.push(`access_token=${f||P.ACCESS_TOKEN||""}`);const v={url:Mt(m),headers:{"Content-Type":"text/plain"}};this.pendingRequest=(function(w,C){return Nn(nt(w,{method:"GET"}),C)})(v,(w=>{this.pendingRequest=null,o(w),this.saveEventData(),this.processRequests(f)}))}getSessionAPI(i,n,o,f){this.skuToken=n,this.errorCb=f,P.SESSION_PATH&&P.API_URL&&(o||P.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Oe)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||this.getSession(o,this.skuToken,(f=>{f?this.errorCb(f):n&&(this.success[n]=!0)}),i)}},Kr=Ci.getSessionAPI.bind(Ci),Xr=new Set,qn={create:"create",load:"load",fullLoad:"fullLoad"},kr={mark(i){E.performance.mark(i)},measure(i,n,o){E.performance.measure(i,n,o)}};function gr(i){const n=i.name.split("?")[0];return qe(n)&&n.includes("mapbox-gl.js")?"javascript":qe(n)&&n.includes("mapbox-gl.css")?"css":(function(o){return P.API_FONTS_REGEX.test(o)})(n)?"fontRange":tt(n)?"sprite":je(n)?"style":(function(o){return P.API_TILEJSON_REGEX.test(o)})(n)?"tilejson":"other"}const On=E.performance;function Er(i){const n=i?i.url.toString():void 0;return On.getEntriesByName(n)}let Wn,Ur,mi,Ji;const Aa={now:()=>mi!==void 0?mi:E.performance.now(),setNow(i){mi=i},restoreNow(){mi=void 0},frame(i){const n=E.requestAnimationFrame(i);return{cancel:()=>E.cancelAnimationFrame(n)}},getImageData(i,n=0){const{width:o,height:f}=i;Ji||(Ji=E.document.createElement("canvas"));const m=Ji.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return(o>Ji.width||f>Ji.height)&&(Ji.width=o,Ji.height=f),m.clearRect(-n,-n,o+2*n,f+2*n),m.drawImage(i,0,0,o,f),m.getImageData(-n,-n,o+2*n,f+2*n)},resolveURL:i=>(Wn||(Wn=E.document.createElement("a")),Wn.href=i,Wn.href),get devicePixelRatio(){return E.devicePixelRatio},get prefersReducedMotion(){return!!E.matchMedia&&(Ur==null&&(Ur=E.matchMedia("(prefers-reduced-motion: reduce)")),Ur.matches)}};function ea(i,n,o){o[i]&&o[i].indexOf(n)!==-1||(o[i]=o[i]||[],o[i].push(n))}function ko(i,n,o){if(o&&o[i]){const f=o[i].indexOf(n);f!==-1&&o[i].splice(f,1)}}class Yi{constructor(n,o={}){nt(this,o),this.type=n}}class oo extends Yi{constructor(n,o={}){super("error",nt({error:n},o))}}class Rn{on(n,o){return this._listeners=this._listeners||{},ea(n,o,this._listeners),this}off(n,o){return ko(n,o,this._listeners),ko(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},ea(n,o,this._oneTimeListeners),this):new Promise((f=>this.once(n,f)))}fire(n,o){typeof n=="string"&&(n=new Yi(n,o||{}));const f=n.type;if(this.listens(f)){n.target=this;const m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const C of m)C.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const C of v)ko(f,C,this._oneTimeListeners),C.call(this,n);const w=this._eventedParent;w&&(nt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(n))}else n instanceof oo&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var _t=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Xa(i,...n){for(const o of n)for(const f in o)i[f]=o[f];return i}function Bi(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Mi(i){if(Array.isArray(i))return i.map(Mi);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const o in i)n[o]=Mi(i[o]);return n}return Bi(i)}class _o extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}var Jo=_o;class ip{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[f,m]of o)this.bindings[f]=m}concat(n){return new ip(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Oh=ip;const rc={kind:"null"},tn={kind:"number"},hr={kind:"string"},Vn={kind:"boolean"},Ya={kind:"color"},Io={kind:"object"},ar={kind:"value"},va={kind:"collator"},nu={kind:"formatted"},ul={kind:"resolvedImage"};function Ra(i,n){return{kind:"array",itemType:i,N:n}}function Ai(i){if(i.kind==="array"){const n=Ai(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const ap=[rc,tn,hr,Vn,Ya,nu,Io,Ra(ar),ul];function ys(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!ys(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const o of ap)if(!ys(o,n))return null}}return`Expected ${Ai(i)} but found ${Ai(n)} instead.`}function ic(i,n){return n.some((o=>o.kind===i.kind))}function bf(i,n){return n.some((o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i))}var op,wf={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function vo(i){return(i=Math.round(i))<0?0:i>255?255:i}function ac(i){return vo(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function ru(i){return(n=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:n>1?1:n;var n}function es(i,n,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(n-i)*o*6:2*o<1?n:3*o<2?i+(n-i)*(2/3-o)*6:i}try{op={}.parseCSSColor=function(i){var n,o=i.replace(/ /g,"").toLowerCase();if(o in wf)return wf[o].slice();if(o[0]==="#")return o.length===4?(n=parseInt(o.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:o.length===7&&(n=parseInt(o.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var f=o.indexOf("("),m=o.indexOf(")");if(f!==-1&&m+1===o.length){var v=o.substr(0,f),w=o.substr(f+1,m-(f+1)).split(","),C=1;switch(v){case"rgba":if(w.length!==4)return null;C=ru(w.pop());case"rgb":return w.length!==3?null:[ac(w[0]),ac(w[1]),ac(w[2]),C];case"hsla":if(w.length!==4)return null;C=ru(w.pop());case"hsl":if(w.length!==3)return null;var A=(parseFloat(w[0])%360+360)%360/360,k=ru(w[1]),B=ru(w[2]),$=B<=.5?B*(k+1):B+k-B*k,G=2*B-$;return[vo(255*es(G,$,A+1/3)),vo(255*es(G,$,A)),vo(255*es(G,$,A-1/3)),C];default:return null}}return null}}catch{}class da{constructor(n,o,f,m=1){this.r=n,this.g=o,this.b=f,this.a=m}static parse(n){if(!n)return;if(n instanceof da)return n;if(typeof n!="string")return;const o=op(n);return o?new da(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[n,o,f,m]=this.toArray();return`rgba(${Math.round(n)},${Math.round(o)},${Math.round(f)},${m})`}toArray(){const{r:n,g:o,b:f,a:m}=this;return m===0?[0,0,0,0]:[255*n/m,255*o/m,255*f/m,m]}toArray01(){const{r:n,g:o,b:f,a:m}=this;return m===0?[0,0,0,0]:[n/m,o/m,f/m,m]}toArray01PremultipliedAlpha(){const{r:n,g:o,b:f,a:m}=this;return[n,o,f,m]}}da.black=new da(0,0,0,1),da.white=new da(1,1,1,1),da.transparent=new da(0,0,0,0),da.red=new da(1,0,0,1),da.blue=new da(0,0,1,1);var Ni=da;class Sf{constructor(n,o,f){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Bh{constructor(n,o,f,m,v){this.text=n.normalize?n.normalize():n,this.image=o,this.scale=f,this.fontStack=m,this.textColor=v}}class xa{constructor(n){this.sections=n}static fromString(n){return new xa([new Bh(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((n=>n.text.length!==0||n.image&&n.image.name.length!==0))}static factory(n){return n instanceof xa?n:xa.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map((n=>n.text)).join("")}serialize(){const n=["format"];for(const o of this.sections){if(o.image){n.push(["image",o.image.name]);continue}n.push(o.text);const f={};o.fontStack&&(f["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(f["font-scale"]=o.scale),o.textColor&&(f["text-color"]=["rgba"].concat(o.textColor.toArray())),n.push(f)}return n}}class oa{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new oa({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Fh(i,n,o,f){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[i,n,o,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[i,n,o,f]:[i,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ns(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Ni||i instanceof Sf||i instanceof xa||i instanceof oa)return!0;if(Array.isArray(i)){for(const n of i)if(!Ns(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!Ns(i[n]))return!1;return!0}return!1}function Qr(i){if(i===null)return rc;if(typeof i=="string")return hr;if(typeof i=="boolean")return Vn;if(typeof i=="number")return tn;if(i instanceof Ni)return Ya;if(i instanceof Sf)return va;if(i instanceof xa)return nu;if(i instanceof oa)return ul;if(Array.isArray(i)){const n=i.length;let o;for(const f of i){const m=Qr(f);if(o){if(o===m)continue;o=ar;break}o=m}return Ra(o||ar,n)}return Io}function oc(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof Ni||i instanceof xa||i instanceof oa?i.toString():JSON.stringify(i)}class iu{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ns(n[1]))return o.error("invalid value");const f=n[1];let m=Qr(f);const v=o.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new iu(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ni?["rgba"].concat(this.value.toArray()):this.value instanceof xa?this.value.serialize():this.value}}var fl=iu,sa=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const au={string:hr,number:tn,boolean:Vn,object:Io};class jh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let f,m=1;const v=n[0];if(v==="array"){let C,A;if(n.length>2){const k=n[1];if(typeof k!="string"||!(k in au)||k==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);C=au[k],m++}else C=ar;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);A=n[2],m++}f=Ra(C,A)}else f=au[v];const w=[];for(;m<n.length;m++){const C=o.parse(n[m],m,ar);if(!C)return null;w.push(C)}return new jh(f,w)}evaluate(n){for(let o=0;o<this.args.length;o++){const f=this.args[o].evaluate(n);if(!ys(this.type,Qr(f)))return f;if(o===this.args.length-1)throw new sa(`Expected value to be of type ${Ai(this.type)}, but found ${Ai(Qr(f))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}serialize(){const n=this.type,o=[n.kind];if(n.kind==="array"){const f=n.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){o.push(f.kind);const m=n.N;(typeof m=="number"||this.args.length>1)&&o.push(m)}}return o.concat(this.args.map((f=>f.serialize())))}}var Ki=jh;class so{constructor(n){this.type=nu,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return o.error("First argument must be an image or text section.");const m=[];let v=!1;for(let w=1;w<=n.length-1;++w){const C=n[w];if(v&&typeof C=="object"&&!Array.isArray(C)){v=!1;let A=null;if(C["font-scale"]&&(A=o.parse(C["font-scale"],1,tn),!A))return null;let k=null;if(C["text-font"]&&(k=o.parse(C["text-font"],1,Ra(hr)),!k))return null;let B=null;if(C["text-color"]&&(B=o.parse(C["text-color"],1,Ya),!B))return null;const $=m[m.length-1];$.scale=A,$.font=k,$.textColor=B}else{const A=o.parse(n[w],1,ar);if(!A)return null;const k=A.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:A,scale:null,font:null,textColor:null})}}return new so(m)}evaluate(n){return new xa(this.sections.map((o=>{const f=o.content.evaluate(n);return Qr(f)===ul?new Bh("",f,null,null,null):new Bh(oc(f),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null)})))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const o of this.sections){n.push(o.content.serialize());const f={};o.scale&&(f["font-scale"]=o.scale.serialize()),o.font&&(f["text-font"]=o.font.serialize()),o.textColor&&(f["text-color"]=o.textColor.serialize()),n.push(f)}return n}}class sc{constructor(n){this.type=ul,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const f=o.parse(n[1],1,hr);return f?new sc(f):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),f=oa.fromString(o);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(o)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Tf={"to-boolean":Vn,"to-color":Ya,"to-number":tn,"to-string":hr};class sp{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const f=n[0];if((f==="to-boolean"||f==="to-string")&&n.length!==2)return o.error("Expected one argument.");const m=Tf[f],v=[];for(let w=1;w<n.length;w++){const C=o.parse(n[w],w,ar);if(!C)return null;v.push(C)}return new sp(m,v)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let o,f;for(const m of this.args){if(o=m.evaluate(n),f=null,o instanceof Ni)return o;if(typeof o=="string"){const v=n.parseColor(o);if(v)return v}else if(Array.isArray(o)&&(f=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Fh(o[0],o[1],o[2],o[3]),!f))return new Ni(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new sa(f||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const f of this.args){if(o=f.evaluate(n),o===null)return 0;const m=Number(o);if(!isNaN(m))return m}throw new sa(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?xa.fromString(oc(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?oa.fromString(oc(this.args[0].evaluate(n))):oc(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}serialize(){if(this.type.kind==="formatted")return new so([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new sc(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild((o=>{n.push(o.serialize())})),n}}var hl=sp;const zo=["Unknown","Point","LineString","Polygon"];var lc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?zo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:o,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(o*n-i[0])+this.featureDistanceData.bearing[1]*(f*n-i[1])}return 0}parseColor(i){let n=this._parseColorCache[i];return n||(n=this._parseColorCache[i]=Ni.parse(i)),n}};class _s{constructor(n,o,f,m){this.name=n,this.type=o,this._evaluate=f,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((n=>n.serialize())))}static parse(n,o){const f=n[0],m=_s.definitions[f];if(!m)return o.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,C=w.filter((([k])=>!Array.isArray(k)||k.length===n.length-1));let A=null;for(const[k,B]of C){A=new hp(o.registry,o.path,null,o.scope);const $=[];let G=!1;for(let K=1;K<n.length;K++){const ee=n[K],oe=Array.isArray(k)?k[K-1]:k.type,de=A.parse(ee,1+$.length,oe);if(!de){G=!0;break}$.push(de)}if(!G)if(Array.isArray(k)&&k.length!==$.length)A.error(`Expected ${k.length} arguments, but found ${$.length} instead.`);else{for(let K=0;K<$.length;K++){const ee=Array.isArray(k)?k[K]:k.type,oe=$[K];A.concat(K+1).checkSubtype(ee,oe.type)}if(A.errors.length===0)return new _s(f,v,B,$)}}if(C.length===1)o.errors.push(...A.errors);else{const k=(C.length?C:w).map((([$])=>{return G=$,Array.isArray(G)?`(${G.map(Ai).join(", ")})`:`(${Ai(G.type)}...)`;var G})).join(" | "),B=[];for(let $=1;$<n.length;$++){const G=o.parse(n[$],1+B.length);if(!G)return null;B.push(Ai(G.type))}o.error(`Expected arguments of type ${k}, but found (${B.join(", ")}) instead.`)}return null}static register(n,o){_s.definitions=o;for(const f in o)n[f]=_s}}var vs=_s;class Ef{constructor(n,o,f){this.type=va,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return o.error("Collator options argument must be an object.");const m=o.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Vn);if(!m)return null;const v=o.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Vn);if(!v)return null;let w=null;return f.locale&&(w=o.parse(f.locale,1,hr),!w)?null:new Ef(m,v,w)}evaluate(n){return new Sf(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Us=8192;function Nh(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function dl(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function Cf(i,n){const o=(180+i[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(o*m*Us),Math.round(f*m*Us)]}function Vm(i,n,o){const f=i[0]-n[0],m=i[1]-n[1],v=i[0]-o[0],w=i[1]-o[1];return f*w-v*m==0&&f*v<=0&&m*w<=0}function Uh(i,n){let o=!1;for(let w=0,C=n.length;w<C;w++){const A=n[w];for(let k=0,B=A.length;k<B-1;k++){if(Vm(i,A[k],A[k+1]))return!1;(m=A[k])[1]>(f=i)[1]!=(v=A[k+1])[1]>f[1]&&f[0]<(v[0]-m[0])*(f[1]-m[1])/(v[1]-m[1])+m[0]&&(o=!o)}}var f,m,v;return o}function lp(i,n){for(let o=0;o<n.length;o++)if(Uh(i,n[o]))return!0;return!1}function cp(i,n,o,f){const m=f[0]-o[0],v=f[1]-o[1],w=(i[0]-o[0])*v-m*(i[1]-o[1]),C=(n[0]-o[0])*v-m*(n[1]-o[1]);return w>0&&C<0||w<0&&C>0}function cc(i,n,o){for(const k of o)for(let B=0;B<k.length-1;++B)if((C=[(w=k[B+1])[0]-(v=k[B])[0],w[1]-v[1]])[0]*(A=[(m=n)[0]-(f=i)[0],m[1]-f[1]])[1]-C[1]*A[0]!=0&&cp(f,m,v,w)&&cp(v,w,f,m))return!0;var f,m,v,w,C,A;return!1}function Or(i,n){for(let o=0;o<i.length;++o)if(!Uh(i[o],n))return!1;for(let o=0;o<i.length-1;++o)if(cc(i[o],i[o+1],n))return!1;return!0}function Wy(i,n){for(let o=0;o<n.length;o++)if(Or(i,n[o]))return!0;return!1}function up(i,n,o){const f=[];for(let m=0;m<i.length;m++){const v=[];for(let w=0;w<i[m].length;w++){const C=Cf(i[m][w],o);Nh(n,C),v.push(C)}f.push(v)}return f}function Gm(i,n,o){const f=[];for(let m=0;m<i.length;m++){const v=up(i[m],n,o);f.push(v)}return f}function Mf(i,n,o,f){if(i[0]<o[0]||i[0]>o[2]){const m=.5*f;let v=i[0]-o[0]>m?-f:o[0]-i[0]>m?f:0;v===0&&(v=i[0]-o[2]>m?-f:o[2]-i[0]>m?f:0),i[0]+=v}Nh(n,i)}function Hm(i,n,o,f){const m=Math.pow(2,f.z)*Us,v=[f.x*Us,f.y*Us],w=[];if(!i)return w;for(const C of i)for(const A of C){const k=[A.x+v[0],A.y+v[1]];Mf(k,n,o,m),w.push(k)}return w}function fp(i,n,o,f){const m=Math.pow(2,f.z)*Us,v=[f.x*Us,f.y*Us],w=[];if(!i)return w;for(const A of i){const k=[];for(const B of A){const $=[B.x+v[0],B.y+v[1]];Nh(n,$),k.push($)}w.push(k)}if(n[2]-n[0]<=m/2){(C=n)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const A of w)for(const k of A)Mf(k,n,o,m)}var C;return w}class ou{constructor(n,o){this.type=Vn,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ns(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let m=0;m<f.features.length;++m){const v=f.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new ou(f,f.features[m].geometry)}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ou(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ou(f,f)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return(function(o,f){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const C=up(f.coordinates,v,w),A=Hm(o.geometry(),m,v,w);if(!dl(m,v))return!1;for(const k of A)if(!Uh(k,C))return!1}if(f.type==="MultiPolygon"){const C=Gm(f.coordinates,v,w),A=Hm(o.geometry(),m,v,w);if(!dl(m,v))return!1;for(const k of A)if(!lp(k,C))return!1}return!0})(n,this.geometries);if(n.geometryType()==="LineString")return(function(o,f){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],w=o.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const C=up(f.coordinates,v,w),A=fp(o.geometry(),m,v,w);if(!dl(m,v))return!1;for(const k of A)if(!Or(k,C))return!1}if(f.type==="MultiPolygon"){const C=Gm(f.coordinates,v,w),A=fp(o.geometry(),m,v,w);if(!dl(m,v))return!1;for(const k of A)if(!Wy(k,C))return!1}return!0})(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Af=ou;function su(i){if(i instanceof vs&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Af)return!1;let n=!0;return i.eachChild((o=>{n&&!su(o)&&(n=!1)})),n}function $s(i){if(i instanceof vs&&i.name==="feature-state")return!1;let n=!0;return i.eachChild((o=>{n&&!$s(o)&&(n=!1)})),n}function uc(i,n){if(i instanceof vs&&n.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild((f=>{o&&!uc(f,n)&&(o=!1)})),o}class $h{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const f=n[1];return o.scope.has(f)?new $h(f,o.scope.get(f)):o.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Wm=$h;class Rf{constructor(n,o=[],f,m=new Oh,v=[]){this.registry=n,this.path=o,this.key=o.map((w=>`[${w}]`)).join(""),this.scope=m,this.errors=v,this.expectedType=f}parse(n,o,f,m,v={}){return o?this.concat(o,f,m)._parse(n,v):this._parse(n,v)}_parse(n,o){function f(m,v,w){return w==="assert"?new Ki(v,[m]):w==="coerce"?new hl(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let w=v.parse(n,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,A=w.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||A.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(C,A))return null}else w=f(w,C,o.typeAnnotation||"coerce");else w=f(w,C,o.typeAnnotation||"assert")}if(!(w instanceof fl)&&w.type.kind!=="resolvedImage"&&dp(w)){const C=new lc;try{w=new fl(w.type,w.evaluate(C))}catch(A){return this.error(A.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,f){const m=typeof n=="number"?this.path.concat(n):this.path,v=f?this.scope.concat(f):this.scope;return new Rf(this.registry,m,o||null,v,this.errors)}error(n,...o){const f=`${this.key}${o.map((m=>`[${m}]`)).join("")}`;this.errors.push(new Jo(f,n))}checkSubtype(n,o){const f=ys(n,o);return f&&this.error(f),f}}var hp=Rf;function dp(i){if(i instanceof Wm)return dp(i.boundExpression);if(i instanceof vs&&i.name==="error"||i instanceof Ef||i instanceof Af)return!1;const n=i instanceof hl||i instanceof Ki;let o=!0;return i.eachChild((f=>{o=n?o&&dp(f):o&&f instanceof fl})),!!o&&su(i)&&uc(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function qh(i,n){const o=i.length-1;let f,m,v=0,w=o,C=0;for(;v<=w;)if(C=Math.floor((v+w)/2),f=i[C],m=i[C+1],f<=n){if(C===o||n<m)return C;v=C+1}else{if(!(f>n))throw new sa("Input is not a number.");w=C-1}return 0}class lu{constructor(n,o,f){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[m,v]of f)this.labels.push(m),this.outputs.push(v)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const f=o.parse(n[1],1,tn);if(!f)return null;const m=[];let v=null;o.expectedType&&o.expectedType.kind!=="value"&&(v=o.expectedType);for(let w=1;w<n.length;w+=2){const C=w===1?-1/0:n[w],A=n[w+1],k=w,B=w+1;if(typeof C!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(m.length&&m[m.length-1][0]>=C)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const $=o.parse(A,B,v);if(!$)return null;v=v||$.type,m.push([C,$])}return new lu(v,f,m)}evaluate(n){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(n);const m=this.input.evaluate(n);if(m<=o[0])return f[0].evaluate(n);const v=o.length;return m>=o[v-1]?f[v-1].evaluate(n):f[qh(o,m)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}serialize(){const n=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&n.push(this.labels[o]),n.push(this.outputs[o].serialize());return n}}var fc=lu;function Cr(i,n,o){return i*(1-o)+n*o}var cu=Object.freeze({__proto__:null,array:function(i,n,o){return i.map(((f,m)=>Cr(f,n[m],o)))},color:function(i,n,o){return new Ni(Cr(i.r,n.r,o),Cr(i.g,n.g,o),Cr(i.b,n.b,o),Cr(i.a,n.a,o))},number:Cr});const pp=.95047,Vh=1.08883,mp=4/29,pl=6/29,ml=3*pl*pl,Zy=pl*pl*pl,Xy=Math.PI/180,Yy=180/Math.PI;function Gh(i){return i>Zy?Math.pow(i,1/3):i/ml+mp}function Hh(i){return i>pl?i*i*i:ml*(i-mp)}function hc(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function gl(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Zm(i){const n=gl(i.r),o=gl(i.g),f=gl(i.b),m=Gh((.4124564*n+.3575761*o+.1804375*f)/pp),v=Gh((.2126729*n+.7151522*o+.072175*f)/1);return{l:116*v-16,a:500*(m-v),b:200*(v-Gh((.0193339*n+.119192*o+.9503041*f)/Vh)),alpha:i.a}}function kf(i){let n=(i.l+16)/116,o=isNaN(i.a)?n:n+i.a/500,f=isNaN(i.b)?n:n-i.b/200;return n=1*Hh(n),o=pp*Hh(o),f=Vh*Hh(f),new Ni(hc(3.2404542*o-1.5371385*n-.4985314*f),hc(-.969266*o+1.8760108*n+.041556*f),hc(.0556434*o-.2040259*n+1.0572252*f),i.alpha)}function Xm(i,n,o){const f=n-i;return i+o*(f>180||f<-180?f-360*Math.round(f/360):f)}const uu={forward:Zm,reverse:kf,interpolate:function(i,n,o){return{l:Cr(i.l,n.l,o),a:Cr(i.a,n.a,o),b:Cr(i.b,n.b,o),alpha:Cr(i.alpha,n.alpha,o)}}},yl={forward:function(i){const{l:n,a:o,b:f}=Zm(i),m=Math.atan2(f,o)*Yy;return{h:m<0?m+360:m,c:Math.sqrt(o*o+f*f),l:n,alpha:i.a}},reverse:function(i){const n=i.h*Xy,o=i.c;return kf({l:i.l,a:Math.cos(n)*o,b:Math.sin(n)*o,alpha:i.alpha})},interpolate:function(i,n,o){return{h:Xm(i.h,n.h,o),c:Cr(i.c,n.c,o),l:Cr(i.l,n.l,o),alpha:Cr(i.alpha,n.alpha,o)}}};var If=Object.freeze({__proto__:null,hcl:yl,lab:uu});class fu{constructor(n,o,f,m,v){this.type=n,this.operator=o,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[w,C]of v)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(n,o,f,m){let v=0;if(n.name==="exponential")v=Wh(o,n.base,f,m);else if(n.name==="linear")v=Wh(o,1,f,m);else if(n.name==="cubic-bezier"){const w=n.controlPoints;v=new fe(w[0],w[1],w[2],w[3]).solve(Wh(o,1,f,m))}return v}static parse(n,o){let[f,m,v,...w]=n;if(!Array.isArray(m)||m.length===0)return o.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const k=m[1];if(typeof k!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:k}}else{if(m[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const k=m.slice(1);if(k.length!==4||k.some((B=>typeof B!="number"||B<0||B>1)))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:k}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(v=o.parse(v,2,tn),!v)return null;const C=[];let A=null;f==="interpolate-hcl"||f==="interpolate-lab"?A=Ya:o.expectedType&&o.expectedType.kind!=="value"&&(A=o.expectedType);for(let k=0;k<w.length;k+=2){const B=w[k],$=w[k+1],G=k+3,K=k+4;if(typeof B!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(C.length&&C[C.length-1][0]>=B)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const ee=o.parse($,K,A);if(!ee)return null;A=A||ee.type,C.push([B,ee])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new fu(A,f,m,v,C):o.error(`Type ${Ai(A)} is not interpolatable.`)}evaluate(n){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(n);const m=this.input.evaluate(n);if(m<=o[0])return f[0].evaluate(n);const v=o.length;if(m>=o[v-1])return f[v-1].evaluate(n);const w=qh(o,m),C=fu.interpolationFactor(this.interpolation,m,o[w],o[w+1]),A=f[w].evaluate(n),k=f[w+1].evaluate(n);return this.operator==="interpolate"?cu[this.type.kind.toLowerCase()](A,k,C):this.operator==="interpolate-hcl"?yl.reverse(yl.interpolate(yl.forward(A),yl.forward(k),C)):uu.reverse(uu.interpolate(uu.forward(A),uu.forward(k),C))}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,n,this.input.serialize()];for(let f=0;f<this.labels.length;f++)o.push(this.labels[f],this.outputs[f].serialize());return o}}function Wh(i,n,o,f){const m=f-o,v=i-o;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}var ts=fu;class Zh{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expectected at least one argument.");let f=null;const m=o.expectedType;m&&m.kind!=="value"&&(f=m);const v=[];for(const C of n.slice(1)){const A=o.parse(C,1+v.length,f,void 0,{typeAnnotation:"omit"});if(!A)return null;f=f||A.type,v.push(A)}const w=m&&v.some((C=>ys(m,C.type)));return new Zh(w?ar:f,v)}evaluate(n){let o,f=null,m=0;for(const v of this.args){if(m++,f=v.evaluate(n),f&&f instanceof oa&&!f.available&&(o||(o=f),f=null,m===this.args.length))return o;if(f!==null)break}return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every((n=>n.outputDefined()))}serialize(){const n=["coalesce"];return this.eachChild((o=>{n.push(o.serialize())})),n}}var gp=Zh;class Xh{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let v=1;v<n.length-1;v+=2){const w=n[v];if(typeof w!="string")return o.error(`Expected string, but found ${typeof w} instead.`,v);if(/[^a-zA-Z0-9_]/.test(w))return o.error("Variable names must contain only alphanumeric characters or '_'.",v);const C=o.parse(n[v+1],v+1);if(!C)return null;f.push([w,C])}const m=o.parse(n[n.length-1],n.length-1,o.expectedType,f);return m?new Xh(f,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[o,f]of this.bindings)n.push(o,f.serialize());return n.push(this.result.serialize()),n}}var Ym=Xh;class yp{constructor(n,o,f){this.type=n,this.index=o,this.input=f}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,tn),m=o.parse(n[2],2,Ra(o.expectedType||ar));return f&&m?new yp(m.type.itemType,f,m):null}evaluate(n){const o=this.index.evaluate(n),f=this.input.evaluate(n);if(o<0)throw new sa(`Array index out of bounds: ${o} < 0.`);if(o>=f.length)throw new sa(`Array index out of bounds: ${o} > ${f.length-1}.`);if(o!==Math.floor(o))throw new sa(`Array index must be an integer, but found ${o} instead.`);return f[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var xo=yp;class dc{constructor(n,o){this.type=Vn,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,ar),m=o.parse(n[2],2,ar);return f&&m?ic(f.type,[Vn,hr,tn,rc,ar])?new dc(f,m):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(f.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(f==null)return!1;if(!bf(o,["boolean","string","number","null"]))throw new sa(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(Qr(o))} instead.`);if(!bf(f,["string","array"]))throw new sa(`Expected second argument to be of type array or string, but found ${Ai(Qr(f))} instead.`);return f.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var zf=dc;class hu{constructor(n,o,f){this.type=tn,this.needle=n,this.haystack=o,this.fromIndex=f}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,ar),m=o.parse(n[2],2,ar);if(!f||!m)return null;if(!ic(f.type,[Vn,hr,tn,rc,ar]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(f.type)} instead`);if(n.length===4){const v=o.parse(n[3],3,tn);return v?new hu(f,m,v):null}return new hu(f,m)}evaluate(n){const o=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!bf(o,["boolean","string","number","null"]))throw new sa(`Expected first argument to be of type boolean, string, number or null, but found ${Ai(Qr(o))} instead.`);if(!bf(f,["string","array"]))throw new sa(`Expected second argument to be of type array or string, but found ${Ai(Qr(f))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return f.indexOf(o,m)}return f.indexOf(o)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var _p=hu;class Yh{constructor(n,o,f,m,v,w){this.inputType=n,this.type=o,this.input=f,this.cases=m,this.outputs=v,this.otherwise=w}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let f,m;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);const v={},w=[];for(let k=2;k<n.length-1;k+=2){let B=n[k];const $=n[k+1];Array.isArray(B)||(B=[B]);const G=o.concat(k);if(B.length===0)return G.error("Expected at least one branch label.");for(const ee of B){if(typeof ee!="number"&&typeof ee!="string")return G.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return G.error("Numeric branch labels must be integer values.");if(f){if(G.checkSubtype(f,Qr(ee)))return null}else f=Qr(ee);if(v[String(ee)]!==void 0)return G.error("Branch labels must be unique.");v[String(ee)]=w.length}const K=o.parse($,k,m);if(!K)return null;m=m||K.type,w.push(K)}const C=o.parse(n[1],1,ar);if(!C)return null;const A=o.parse(n[n.length-1],n.length-1,m);return A?C.type.kind!=="value"&&o.concat(1).checkSubtype(f,C.type)?null:new Yh(f,m,C,v,w,A):null}evaluate(n){const o=this.input.evaluate(n);return(Qr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every((n=>n.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),f=[],m={};for(const w of o){const C=m[this.cases[w]];C===void 0?(m[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[C][1].push(w)}const v=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,C]of f)n.push(C.length===1?v(C[0]):C.map(v)),n.push(this.outputs[w].serialize());return n.push(this.otherwise.serialize()),n}}var vp=Yh;class xp{constructor(n,o,f){this.type=n,this.branches=o,this.otherwise=f}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let f;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);const m=[];for(let w=1;w<n.length-1;w+=2){const C=o.parse(n[w],w,Vn);if(!C)return null;const A=o.parse(n[w+1],w+1,f);if(!A)return null;m.push([C,A]),f=f||A.type}const v=o.parse(n[n.length-1],n.length-1,f);return v?new xp(f,m,v):null}evaluate(n){for(const[o,f]of this.branches)if(o.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,f]of this.branches)n(o),n(f);n(this.otherwise)}outputDefined(){return this.branches.every((([n,o])=>o.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild((o=>{n.push(o.serialize())})),n}}var pc=xp;class mc{constructor(n,o,f,m){this.type=n,this.input=o,this.beginIndex=f,this.endIndex=m}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=o.parse(n[1],1,ar),m=o.parse(n[2],2,tn);if(!f||!m)return null;if(!ic(f.type,[Ra(ar),hr,ar]))return o.error(`Expected first argument to be of type array or string, but found ${Ai(f.type)} instead`);if(n.length===4){const v=o.parse(n[3],3,tn);return v?new mc(f.type,f,m,v):null}return new mc(f.type,f,m)}evaluate(n){const o=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!bf(o,["string","array"]))throw new sa(`Expected first argument to be of type array or string, but found ${Ai(Qr(o))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return o.slice(f,m)}return o.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var du=mc;function pu(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function bp(i,n,o,f){return f.compare(n,o)===0}function Lo(i,n,o){const f=i!=="=="&&i!=="!=";return class jB{constructor(v,w,C){this.type=Vn,this.lhs=v,this.rhs=w,this.collator=C,this.hasUntypedArgument=v.type.kind==="value"||w.type.kind==="value"}static parse(v,w){if(v.length!==3&&v.length!==4)return w.error("Expected two or three arguments.");const C=v[0];let A=w.parse(v[1],1,ar);if(!A)return null;if(!pu(C,A.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${Ai(A.type)}'.`);let k=w.parse(v[2],2,ar);if(!k)return null;if(!pu(C,k.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${Ai(k.type)}'.`);if(A.type.kind!==k.type.kind&&A.type.kind!=="value"&&k.type.kind!=="value")return w.error(`Cannot compare types '${Ai(A.type)}' and '${Ai(k.type)}'.`);f&&(A.type.kind==="value"&&k.type.kind!=="value"?A=new Ki(k.type,[A]):A.type.kind!=="value"&&k.type.kind==="value"&&(k=new Ki(A.type,[k])));let B=null;if(v.length===4){if(A.type.kind!=="string"&&k.type.kind!=="string"&&A.type.kind!=="value"&&k.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(B=w.parse(v[3],3,va),!B)return null}return new jB(A,k,B)}evaluate(v){const w=this.lhs.evaluate(v),C=this.rhs.evaluate(v);if(f&&this.hasUntypedArgument){const A=Qr(w),k=Qr(C);if(A.kind!==k.kind||A.kind!=="string"&&A.kind!=="number")throw new sa(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${A.kind}, ${k.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const A=Qr(w),k=Qr(C);if(A.kind!=="string"||k.kind!=="string")return n(v,w,C)}return this.collator?o(v,w,C,this.collator.evaluate(v)):n(v,w,C)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[i];return this.eachChild((w=>{v.push(w.serialize())})),v}}}const mu=Lo("==",(function(i,n,o){return n===o}),bp),wp=Lo("!=",(function(i,n,o){return n!==o}),(function(i,n,o,f){return!bp(0,n,o,f)})),Km=Lo("<",(function(i,n,o){return n<o}),(function(i,n,o,f){return f.compare(n,o)<0})),gc=Lo(">",(function(i,n,o){return n>o}),(function(i,n,o,f){return f.compare(n,o)>0})),Qm=Lo("<=",(function(i,n,o){return n<=o}),(function(i,n,o,f){return f.compare(n,o)<=0})),Sp=Lo(">=",(function(i,n,o){return n>=o}),(function(i,n,o,f){return f.compare(n,o)>=0}));class Lf{constructor(n,o,f,m,v,w){this.type=hr,this.number=n,this.locale=o,this.currency=f,this.unit=m,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const f=o.parse(n[1],1,tn);if(!f)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return o.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=o.parse(m.locale,1,hr),!v))return null;let w=null;if(m.currency&&(w=o.parse(m.currency,1,hr),!w))return null;let C=null;if(m.unit&&(C=o.parse(m.unit,1,hr),!C))return null;let A=null;if(m["min-fraction-digits"]&&(A=o.parse(m["min-fraction-digits"],1,tn),!A))return null;let k=null;return m["max-fraction-digits"]&&(k=o.parse(m["max-fraction-digits"],1,tn),!k)?null:new Lf(f,v,w,C,A,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class gu{constructor(n){this.type=tn,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=o.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Ai(f.type)} instead.`):new gu(f):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string"||Array.isArray(o))return o.length;throw new sa(`Expected value to be of type string or array, but found ${Ai(Qr(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild((o=>{n.push(o.serialize())})),n}}const Jm={"==":mu,"!=":wp,">":gc,"<":Km,">=":Sp,"<=":Qm,array:Ki,at:xo,boolean:Ki,case:pc,coalesce:gp,collator:Ef,format:so,image:sc,in:zf,"index-of":_p,interpolate:ts,"interpolate-hcl":ts,"interpolate-lab":ts,length:gu,let:Ym,literal:fl,match:vp,number:Ki,"number-format":Lf,object:Ki,slice:du,step:fc,string:Ki,"to-boolean":hl,"to-color":hl,"to-number":hl,"to-string":hl,var:Wm,within:Af};function eg(i,[n,o,f,m]){n=n.evaluate(i),o=o.evaluate(i),f=f.evaluate(i);const v=m?m.evaluate(i):1,w=Fh(n,o,f,v);if(w)throw new sa(w);return new Ni(n/255*v,o/255*v,f/255*v,v)}function xs(i,n){return i in n}function Pf(i,n){const o=n[i];return o===void 0?null:o}function lo(i){return{type:i}}vs.register(Jm,{error:[{kind:"error"},[hr],(i,[n])=>{throw new sa(n.evaluate(i))}],typeof:[hr,[ar],(i,[n])=>Ai(Qr(n.evaluate(i)))],"to-rgba":[Ra(tn,4),[Ya],(i,[n])=>n.evaluate(i).toArray()],rgb:[Ya,[tn,tn,tn],eg],rgba:[Ya,[tn,tn,tn,tn],eg],has:{type:Vn,overloads:[[[hr],(i,[n])=>xs(n.evaluate(i),i.properties())],[[hr,Io],(i,[n,o])=>xs(n.evaluate(i),o.evaluate(i))]]},get:{type:ar,overloads:[[[hr],(i,[n])=>Pf(n.evaluate(i),i.properties())],[[hr,Io],(i,[n,o])=>Pf(n.evaluate(i),o.evaluate(i))]]},"feature-state":[ar,[hr],(i,[n])=>Pf(n.evaluate(i),i.featureState||{})],properties:[Io,[],i=>i.properties()],"geometry-type":[hr,[],i=>i.geometryType()],id:[ar,[],i=>i.id()],zoom:[tn,[],i=>i.globals.zoom],pitch:[tn,[],i=>i.globals.pitch||0],"distance-from-center":[tn,[],i=>i.distanceFromCenter()],"heatmap-density":[tn,[],i=>i.globals.heatmapDensity||0],"line-progress":[tn,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[tn,[],i=>i.globals.skyRadialProgress||0],accumulated:[ar,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[tn,lo(tn),(i,n)=>{let o=0;for(const f of n)o+=f.evaluate(i);return o}],"*":[tn,lo(tn),(i,n)=>{let o=1;for(const f of n)o*=f.evaluate(i);return o}],"-":{type:tn,overloads:[[[tn,tn],(i,[n,o])=>n.evaluate(i)-o.evaluate(i)],[[tn],(i,[n])=>-n.evaluate(i)]]},"/":[tn,[tn,tn],(i,[n,o])=>n.evaluate(i)/o.evaluate(i)],"%":[tn,[tn,tn],(i,[n,o])=>n.evaluate(i)%o.evaluate(i)],ln2:[tn,[],()=>Math.LN2],pi:[tn,[],()=>Math.PI],e:[tn,[],()=>Math.E],"^":[tn,[tn,tn],(i,[n,o])=>Math.pow(n.evaluate(i),o.evaluate(i))],sqrt:[tn,[tn],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[tn,[tn],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[tn,[tn],(i,[n])=>Math.log(n.evaluate(i))],log2:[tn,[tn],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[tn,[tn],(i,[n])=>Math.sin(n.evaluate(i))],cos:[tn,[tn],(i,[n])=>Math.cos(n.evaluate(i))],tan:[tn,[tn],(i,[n])=>Math.tan(n.evaluate(i))],asin:[tn,[tn],(i,[n])=>Math.asin(n.evaluate(i))],acos:[tn,[tn],(i,[n])=>Math.acos(n.evaluate(i))],atan:[tn,[tn],(i,[n])=>Math.atan(n.evaluate(i))],min:[tn,lo(tn),(i,n)=>Math.min(...n.map((o=>o.evaluate(i))))],max:[tn,lo(tn),(i,n)=>Math.max(...n.map((o=>o.evaluate(i))))],abs:[tn,[tn],(i,[n])=>Math.abs(n.evaluate(i))],round:[tn,[tn],(i,[n])=>{const o=n.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[tn,[tn],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[tn,[tn],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[Vn,[hr,ar],(i,[n,o])=>i.properties()[n.value]===o.value],"filter-id-==":[Vn,[ar],(i,[n])=>i.id()===n.value],"filter-type-==":[Vn,[hr],(i,[n])=>i.geometryType()===n.value],"filter-<":[Vn,[hr,ar],(i,[n,o])=>{const f=i.properties()[n.value],m=o.value;return typeof f==typeof m&&f<m}],"filter-id-<":[Vn,[ar],(i,[n])=>{const o=i.id(),f=n.value;return typeof o==typeof f&&o<f}],"filter->":[Vn,[hr,ar],(i,[n,o])=>{const f=i.properties()[n.value],m=o.value;return typeof f==typeof m&&f>m}],"filter-id->":[Vn,[ar],(i,[n])=>{const o=i.id(),f=n.value;return typeof o==typeof f&&o>f}],"filter-<=":[Vn,[hr,ar],(i,[n,o])=>{const f=i.properties()[n.value],m=o.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[Vn,[ar],(i,[n])=>{const o=i.id(),f=n.value;return typeof o==typeof f&&o<=f}],"filter->=":[Vn,[hr,ar],(i,[n,o])=>{const f=i.properties()[n.value],m=o.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[Vn,[ar],(i,[n])=>{const o=i.id(),f=n.value;return typeof o==typeof f&&o>=f}],"filter-has":[Vn,[ar],(i,[n])=>n.value in i.properties()],"filter-has-id":[Vn,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Vn,[Ra(hr)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[Vn,[Ra(ar)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[Vn,[hr,Ra(ar)],(i,[n,o])=>o.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[Vn,[hr,Ra(ar)],(i,[n,o])=>(function(f,m,v,w){for(;v<=w;){const C=v+w>>1;if(m[C]===f)return!0;m[C]>f?w=C-1:v=C+1}return!1})(i.properties()[n.value],o.value,0,o.value.length-1)],all:{type:Vn,overloads:[[[Vn,Vn],(i,[n,o])=>n.evaluate(i)&&o.evaluate(i)],[lo(Vn),(i,n)=>{for(const o of n)if(!o.evaluate(i))return!1;return!0}]]},any:{type:Vn,overloads:[[[Vn,Vn],(i,[n,o])=>n.evaluate(i)||o.evaluate(i)],[lo(Vn),(i,n)=>{for(const o of n)if(o.evaluate(i))return!0;return!1}]]},"!":[Vn,[Vn],(i,[n])=>!n.evaluate(i)],"is-supported-script":[Vn,[hr],(i,[n])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(n.evaluate(i))}],upcase:[hr,[hr],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[hr,[hr],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[hr,lo(ar),(i,n)=>n.map((o=>oc(o.evaluate(i)))).join("")],"resolved-locale":[hr,[va],(i,[n])=>n.evaluate(i).resolvedLocale()]});var Ka=Jm;function Df(i){return{result:"success",value:i}}function ba(i){return{result:"error",value:i}}function ns(i){return i["property-type"]==="data-driven"}function yu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function yc(i){return!!i.expression&&i.expression.interpolated}function yr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function _c(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function _l(i){return i}function Of(i,n){const o=n.type==="color",f=i.stops&&typeof i.stops[0][0]=="object",m=f||!(f||i.property!==void 0),v=i.type||(yc(n)?"exponential":"interval");if(o&&((i=Xa({},i)).stops&&(i.stops=i.stops.map((k=>[k[0],Ni.parse(k[1])]))),i.default=Ni.parse(i.default?i.default:n.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!If[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let w,C,A;if(v==="exponential")w=ta;else if(v==="interval")w=Kh;else if(v==="categorical"){w=vc,C=Object.create(null);for(const k of i.stops)C[k[0]]=k[1];A=typeof i.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=Qh}if(f){const k={},B=[];for(let K=0;K<i.stops.length;K++){const ee=i.stops[K],oe=ee[0].zoom;k[oe]===void 0&&(k[oe]={zoom:oe,type:i.type,property:i.property,default:i.default,stops:[]},B.push(oe)),k[oe].stops.push([ee[0].value,ee[1]])}const $=[];for(const K of B)$.push([k[K].zoom,Of(k[K],n)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:ts.interpolationFactor.bind(void 0,G),zoomStops:$.map((K=>K[0])),evaluate:({zoom:K},ee)=>ta({stops:$,base:i.base},n,K).evaluate(K,ee)}}if(m){const k=v==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:ts.interpolationFactor.bind(void 0,k),zoomStops:i.stops.map((B=>B[0])),evaluate:({zoom:B})=>w(i,n,B,C,A)}}return{kind:"source",evaluate(k,B){const $=B&&B.properties?B.properties[i.property]:void 0;return $===void 0?qs(i.default,n.default):w(i,n,$,C,A)}}}function qs(i,n,o){return i!==void 0?i:n!==void 0?n:o!==void 0?o:void 0}function vc(i,n,o,f,m){return qs(typeof o===m?f[o]:void 0,i.default,n.default)}function Kh(i,n,o){if(yr(o)!=="number")return qs(i.default,n.default);const f=i.stops.length;if(f===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[f-1][0])return i.stops[f-1][1];const m=qh(i.stops.map((v=>v[0])),o);return i.stops[m][1]}function ta(i,n,o){const f=i.base!==void 0?i.base:1;if(yr(o)!=="number")return qs(i.default,n.default);const m=i.stops.length;if(m===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[m-1][0])return i.stops[m-1][1];const v=qh(i.stops.map((B=>B[0])),o),w=(function(B,$,G,K){const ee=K-G,oe=B-G;return ee===0?0:$===1?oe/ee:(Math.pow($,oe)-1)/(Math.pow($,ee)-1)})(o,f,i.stops[v][0],i.stops[v+1][0]),C=i.stops[v][1],A=i.stops[v+1][1];let k=cu[n.type]||_l;if(i.colorSpace&&i.colorSpace!=="rgb"){const B=If[i.colorSpace];k=($,G)=>B.reverse(B.interpolate(B.forward($),B.forward(G),w))}return typeof C.evaluate=="function"?{evaluate(...B){const $=C.evaluate.apply(void 0,B),G=A.evaluate.apply(void 0,B);if($!==void 0&&G!==void 0)return k($,G,w)}}:k(C,A,w)}function Qh(i,n,o){return n.type==="color"?o=Ni.parse(o):n.type==="formatted"?o=xa.fromString(o.toString()):n.type==="resolvedImage"?o=oa.fromString(o.toString()):yr(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0),qs(o,i.default,n.default)}class Po{constructor(n,o){this.expression=n,this._warningHistory={},this._evaluator=new lc,this._defaultValue=o?(function(f){return f.type==="color"&&(_c(f.default)||Array.isArray(f.default))?new Ni(0,0,0,0):f.type==="color"?Ni.parse(f.default)||null:f.default===void 0?null:f.default})(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(n,o,f,m,v,w,C,A){return this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=f,this._evaluator.canonical=m||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=A||null,this.expression.evaluate(this._evaluator)}evaluate(n,o,f,m,v,w,C,A){this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=A||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new sa(`Expected value to be one of ${Object.keys(this._enumValues).map((B=>JSON.stringify(B))).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function xc(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Ka}function Vs(i,n){const o=new hp(Ka,[],n?(function(m){const v={color:Ya,string:hr,number:tn,enum:hr,boolean:Vn,formatted:nu,resolvedImage:ul};return m.type==="array"?Ra(v[m.value]||ar,m.length):v[m.type]})(n):void 0),f=o.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Df(new Po(f,n)):ba(o.errors)}class Gs{constructor(n,o){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!$s(o.expression)}evaluateWithoutErrorHandling(n,o,f,m,v,w){return this._styleExpression.evaluateWithoutErrorHandling(n,o,f,m,v,w)}evaluate(n,o,f,m,v,w){return this._styleExpression.evaluate(n,o,f,m,v,w)}}class bc{constructor(n,o,f,m){this.kind=n,this.zoomStops=f,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!$s(o.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,o,f,m,v,w){return this._styleExpression.evaluateWithoutErrorHandling(n,o,f,m,v,w)}evaluate(n,o,f,m,v,w){return this._styleExpression.evaluate(n,o,f,m,v,w)}interpolationFactor(n,o,f){return this.interpolationType?ts.interpolationFactor(this.interpolationType,n,o,f):0}}function _u(i,n){if((i=Vs(i,n)).result==="error")return i;const o=i.value.expression,f=su(o);if(!f&&!ns(n))return ba([new Jo("","data expressions not supported")]);const m=uc(o,["zoom","pitch","distance-from-center"]);if(!m&&!yu(n))return ba([new Jo("","zoom expressions not supported")]);const v=Bf(o);return v||m?v instanceof Jo?ba([v]):v instanceof ts&&!yc(n)?ba([new Jo("",'"interpolate" expressions cannot be used with this property')]):Df(v?new bc(f?"camera":"composite",i.value,v.labels,v instanceof ts?v.interpolation:void 0):new Gs(f?"constant":"source",i.value)):ba([new Jo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class vu{constructor(n,o){this._parameters=n,this._specification=o,Xa(this,Of(this._parameters,this._specification))}static deserialize(n){return new vu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Bf(i){let n=null;if(i instanceof Ym)n=Bf(i.result);else if(i instanceof gp){for(const o of i.args)if(n=Bf(o),n)break}else(i instanceof fc||i instanceof ts)&&i.input instanceof vs&&i.input.name==="zoom"&&(n=i);return n instanceof Jo||i.eachChild((o=>{const f=Bf(o);f instanceof Jo?n=f:!n&&f?n=new Jo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Jo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}class Qt{constructor(n,o,f,m){this.message=(n?`${n}: `:"")+f,m&&(this.identifier=m),o!=null&&o.__line__&&(this.line=o.__line__)}}function Oa(i){const n=i.key,o=i.value,f=i.valueSpec||{},m=i.objectElementValidators||{},v=i.style,w=i.styleSpec;let C=[];const A=yr(o);if(A!=="object")return[new Qt(n,o,`object expected, ${A} found`)];for(const k in o){const B=k.split(".")[0];let $;m[B]?$=m[B]:f[B]?$=na:m["*"]?$=m["*"]:f["*"]&&($=na),$?C=C.concat($({key:(n&&`${n}.`)+k,value:o[k],valueSpec:f[B]||f["*"],style:v,styleSpec:w,object:o,objectKey:k},o)):C.push(new Qt(n,o[k],`unknown property "${k}"`))}for(const k in f)m[k]||f[k].required&&f[k].default===void 0&&o[k]===void 0&&C.push(new Qt(n,o,`missing required property "${k}"`));return C}function wc(i){const n=i.value,o=i.valueSpec,f=i.style,m=i.styleSpec,v=i.key,w=i.arrayElementValidator||na;if(yr(n)!=="array")return[new Qt(v,n,`array expected, ${yr(n)} found`)];if(o.length&&n.length!==o.length)return[new Qt(v,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new Qt(v,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let C={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};m.$version<7&&(C.function=o.function),yr(o.value)==="object"&&(C=o.value);let A=[];for(let k=0;k<n.length;k++)A=A.concat(w({array:n,arrayIndex:k,value:n[k],valueSpec:C,style:f,styleSpec:m,key:`${v}[${k}]`}));return A}function vl(i){const n=i.key,o=i.value,f=i.valueSpec;let m=yr(o);if(m==="number"&&o!=o&&(m="NaN"),m!=="number")return[new Qt(n,o,`number expected, ${m} found`)];if("minimum"in f){let v=f.minimum;if(yr(f.minimum)==="array"&&(v=f.minimum[i.arrayIndex]),o<v)return[new Qt(n,o,`${o} is less than the minimum value ${v}`)]}if("maximum"in f){let v=f.maximum;if(yr(f.maximum)==="array"&&(v=f.maximum[i.arrayIndex]),o>v)return[new Qt(n,o,`${o} is greater than the maximum value ${v}`)]}return[]}function Hs(i){const n=i.valueSpec,o=Bi(i.value.type);let f,m,v,w={};const C=o!=="categorical"&&i.value.property===void 0,A=!C,k=yr(i.value.stops)==="array"&&yr(i.value.stops[0])==="array"&&yr(i.value.stops[0][0])==="object",B=Oa({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(K){if(o==="identity")return[new Qt(K.key,K.value,'identity function may not have a "stops" property')];let ee=[];const oe=K.value;return ee=ee.concat(wc({key:K.key,value:oe,valueSpec:K.valueSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:$})),yr(oe)==="array"&&oe.length===0&&ee.push(new Qt(K.key,oe,"array must have at least one stop")),ee},default:function(K){return na({key:K.key,value:K.value,valueSpec:n,style:K.style,styleSpec:K.styleSpec})}}});return o==="identity"&&C&&B.push(new Qt(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||B.push(new Qt(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!yc(i.valueSpec)&&B.push(new Qt(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(A&&!ns(i.valueSpec)?B.push(new Qt(i.key,i.value,"property functions not supported")):C&&!yu(i.valueSpec)&&B.push(new Qt(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!k||i.value.property!==void 0||B.push(new Qt(i.key,i.value,'"property" property is required')),B;function $(K){let ee=[];const oe=K.value,de=K.key;if(yr(oe)!=="array")return[new Qt(de,oe,`array expected, ${yr(oe)} found`)];if(oe.length!==2)return[new Qt(de,oe,`array length 2 expected, length ${oe.length} found`)];if(k){if(yr(oe[0])!=="object")return[new Qt(de,oe,`object expected, ${yr(oe[0])} found`)];if(oe[0].zoom===void 0)return[new Qt(de,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new Qt(de,oe,"object stop key must have value")];const Ae=Bi(oe[0].zoom);if(typeof Ae!="number")return[new Qt(de,oe[0].zoom,"stop zoom values must be numbers")];if(v&&v>Ae)return[new Qt(de,oe[0].zoom,"stop zoom values must appear in ascending order")];Ae!==v&&(v=Ae,m=void 0,w={}),ee=ee.concat(Oa({key:`${de}[0]`,value:oe[0],valueSpec:{zoom:{}},style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:vl,value:G}}))}else ee=ee.concat(G({key:`${de}[0]`,value:oe[0],style:K.style,styleSpec:K.styleSpec},oe));return xc(Mi(oe[1]))?ee.concat([new Qt(`${de}[1]`,oe[1],"expressions are not allowed in function stops.")]):ee.concat(na({key:`${de}[1]`,value:oe[1],valueSpec:n,style:K.style,styleSpec:K.styleSpec}))}function G(K,ee){const oe=yr(K.value),de=Bi(K.value),Ae=K.value!==null?K.value:ee;if(f){if(oe!==f)return[new Qt(K.key,Ae,`${oe} stop domain type must match previous stop domain type ${f}`)]}else f=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean"&&typeof de!="number"&&typeof de!="string"&&typeof de!="boolean")return[new Qt(K.key,Ae,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&o!=="categorical"){let Fe=`number expected, ${oe} found`;return ns(n)&&o===void 0&&(Fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qt(K.key,Ae,Fe)]}return o!=="categorical"||oe!=="number"||typeof de=="number"&&isFinite(de)&&Math.floor(de)===de?o!=="categorical"&&oe==="number"&&typeof de=="number"&&typeof m=="number"&&m!==void 0&&de<m?[new Qt(K.key,Ae,"stop domain values must appear in ascending order")]:(m=de,o==="categorical"&&de in w?[new Qt(K.key,Ae,"stop domain values must be unique")]:(w[de]=!0,[])):[new Qt(K.key,Ae,`integer expected, found ${String(de)}`)]}}function ti(i){const n=(i.expressionContext==="property"?_u:Vs)(Mi(i.value),i.valueSpec);if(n.result==="error")return n.value.map((f=>new Qt(`${i.key}${f.key}`,i.value,f.message)));const o=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Qt(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!$s(o))return[new Qt(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter")return Ba(o,i);if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!uc(o,["zoom","feature-state"]))return[new Qt(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!su(o))return[new Qt(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ba(i,n){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const m of n.valueSpec.expression.parameters)o.delete(m);if(o.size===0)return[];const f=[];return i instanceof vs&&o.has(i.name)?[new Qt(n.key,n.value,`["${i.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(i.eachChild((m=>{f.push(...Ba(m,n))})),f)}function rs(i){const n=i.key,o=i.value,f=i.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(Bi(o))===-1&&m.push(new Qt(n,o,`expected one of [${f.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(f.values).indexOf(Bi(o))===-1&&m.push(new Qt(n,o,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(o)} found`)),m}function Do(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!Do(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function bo(i,n="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Do(i)||(i=Jr(i));const o=i;let f=!0;try{f=(function(k){if(!xl(k))return k;let B=Mi(k);return Ff(B),B=bs(B),B})(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const m=_t[`filter_${n}`],v=Vs(f,m);let w=null;if(v.result==="error")throw new Error(v.value.map((k=>`${k.key}: ${k.message}`)).join(", "));w=(k,B,$)=>v.value.evaluate(k,B,{},$);let C=null,A=null;if(f!==o){const k=Vs(o,m);if(k.result==="error")throw new Error(k.value.map((B=>`${B.key}: ${B.message}`)).join(", "));C=(B,$,G,K,ee)=>k.value.evaluate(B,$,{},G,void 0,void 0,K,ee),A=!su(k.value.expression)}return{filter:w,dynamicFilter:C||void 0,needGeometry:wa(f),needFeature:!!A}}function bs(i){if(!Array.isArray(i))return i;const n=(function(o){if(jf.has(o[0])){for(let f=1;f<o.length;f++)if(xl(o[f]))return!0}return o})(i);return n===!0?n:n.map((o=>bs(o)))}function Ff(i){let n=!1;const o=[];if(i[0]==="case"){for(let f=1;f<i.length-1;f+=2)n=n||xl(i[f]),o.push(i[f+1]);o.push(i[i.length-1])}else if(i[0]==="match"){n=n||xl(i[1]);for(let f=2;f<i.length-1;f+=2)o.push(i[f+1]);o.push(i[i.length-1])}else if(i[0]==="step"){n=n||xl(i[1]);for(let f=1;f<i.length-1;f+=2)o.push(i[f+1])}n&&(i.length=0,i.push("any",...o));for(let f=1;f<i.length;f++)Ff(i[f])}function xl(i){if(!Array.isArray(i))return!1;if((n=i[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let o=1;o<i.length;o++)if(xl(i[o]))return!0;return!1}const jf=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function tg(i,n){return i<n?-1:i>n?1:0}function wa(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let n=1;n<i.length;n++)if(wa(i[n]))return!0;return!1}function Jr(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?Mr(i[1],i[2],"=="):n==="!="?xu(Mr(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Mr(i[1],i[2],n):n==="any"?(o=i.slice(1),["any"].concat(o.map(Jr))):n==="all"?["all"].concat(i.slice(1).map(Jr)):n==="none"?["all"].concat(i.slice(1).map(Jr).map(xu)):n==="in"?ws(i[1],i.slice(2)):n==="!in"?xu(ws(i[1],i.slice(2))):n==="has"?co(i[1]):n==="!has"?xu(co(i[1])):n!=="within"||i;var o}function Mr(i,n,o){switch(i){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,i,n]}}function ws(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((o=>typeof o!=typeof n[0]))?["filter-in-large",i,["literal",n.sort(tg)]]:["filter-in-small",i,["literal",n]]}}function co(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function xu(i){return["!",i]}function Oo(i){return Do(Mi(i.value))?ti(Xa({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):bu(i)}function bu(i){const n=i.value,o=i.key;if(yr(n)!=="array")return[new Qt(o,n,`array expected, ${yr(n)} found`)];const f=i.styleSpec;let m,v=[];if(n.length<1)return[new Qt(o,n,"filter array must have at least 1 element")];switch(v=v.concat(rs({key:`${o}[0]`,value:n[0],valueSpec:f.filter_operator,style:i.style,styleSpec:i.styleSpec})),Bi(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Bi(n[1])==="$type"&&v.push(new Qt(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Qt(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=yr(n[1]),m!=="string"&&v.push(new Qt(`${o}[1]`,n[1],`string expected, ${m} found`)));for(let w=2;w<n.length;w++)m=yr(n[w]),Bi(n[1])==="$type"?v=v.concat(rs({key:`${o}[${w}]`,value:n[w],valueSpec:f.geometry_type,style:i.style,styleSpec:i.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Qt(`${o}[${w}]`,n[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<n.length;w++)v=v.concat(bu({key:`${o}[${w}]`,value:n[w],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":m=yr(n[1]),n.length!==2?v.push(new Qt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Qt(`${o}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=yr(n[1]),n.length!==2?v.push(new Qt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Qt(`${o}[1]`,n[1],`object expected, ${m} found`))}return v}function Jh(i,n){const o=i.key,f=i.style,m=i.styleSpec,v=i.value,w=i.objectKey,C=m[`${n}_${i.layerType}`];if(!C)return[];const A=w.match(/^(.*)-transition$/);if(n==="paint"&&A&&C[A[1]]&&C[A[1]].transition)return na({key:o,value:v,valueSpec:m.transition,style:f,styleSpec:m});const k=i.valueSpec||C[w];if(!k)return[new Qt(o,v,`unknown property "${w}"`)];let B;if(yr(v)==="string"&&ns(k)&&!k.tokens&&(B=/^{([^}]+)}$/.exec(v))){const G=`\`{ "type": "identity", "property": ${B?JSON.stringify(B[1]):'"_"'} }\``;return[new Qt(o,v,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${G}.`)]}const $=[];return i.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&$.push(new Qt(o,v,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&_c(Mi(v))&&Bi(v.type)==="identity"&&$.push(new Qt(o,v,'"text-font" does not support identity functions'))),$.concat(na({key:i.key,value:v,valueSpec:k,style:f,styleSpec:m,expressionContext:"property",propertyType:n,propertyKey:w}))}function Sc(i){return Jh(i,"paint")}function Ws(i){return Jh(i,"layout")}function ed(i){let n=[];const o=i.value,f=i.key,m=i.style,v=i.styleSpec;o.type||o.ref||n.push(new Qt(f,o,'either "type" or "ref" is required'));let w=Bi(o.type);const C=Bi(o.ref);if(o.id){const A=Bi(o.id);for(let k=0;k<i.arrayIndex;k++){const B=m.layers[k];Bi(B.id)===A&&n.push(new Qt(f,o.id,`duplicate layer id "${o.id}", previously used at line ${B.id.__line__}`))}}if("ref"in o){let A;["type","source","source-layer","filter","layout"].forEach((k=>{k in o&&n.push(new Qt(f,o[k],`"${k}" is prohibited for ref layers`))})),m.layers.forEach((k=>{Bi(k.id)===C&&(A=k)})),A?A.ref?n.push(new Qt(f,o.ref,"ref cannot reference another ref layer")):w=Bi(A.type):typeof C=="string"&&n.push(new Qt(f,o.ref,`ref layer "${C}" not found`))}else if(w!=="background"&&w!=="sky")if(o.source){const A=m.sources&&m.sources[o.source],k=A&&Bi(A.type);A?k==="vector"&&w==="raster"?n.push(new Qt(f,o.source,`layer "${o.id}" requires a raster source`)):k==="raster"&&w!=="raster"?n.push(new Qt(f,o.source,`layer "${o.id}" requires a vector source`)):k!=="vector"||o["source-layer"]?k==="raster-dem"&&w!=="hillshade"?n.push(new Qt(f,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||k==="geojson"&&A.lineMetrics||n.push(new Qt(f,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Qt(f,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new Qt(f,o.source,`source "${o.source}" not found`))}else n.push(new Qt(f,o,'missing required property "source"'));return n=n.concat(Oa({key:f,value:o,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>na({key:`${f}.type`,value:o.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:A=>Oo(Xa({layerType:w},A)),layout:A=>Oa({layer:o,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":k=>Ws(Xa({layerType:w},k))}}),paint:A=>Oa({layer:o,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":k=>Sc(Xa({layerType:w},k))}})}})),n}function Bo(i){const n=i.value,o=i.key,f=yr(n);return f!=="string"?[new Qt(o,n,`string expected, ${f} found`)]:[]}const td={promoteId:function({key:i,value:n}){if(yr(n)==="string")return Bo({key:i,value:n});{const o=[];for(const f in n)o.push(...Bo({key:`${i}.${f}`,value:n[f]}));return o}}};function bl(i){const n=i.value,o=i.key,f=i.styleSpec,m=i.style;if(!n.type)return[new Qt(o,n,'"type" is required')];const v=Bi(n.type);let w;switch(v){case"vector":case"raster":case"raster-dem":return w=Oa({key:o,value:n,valueSpec:f[`source_${v.replace("-","_")}`],style:i.style,styleSpec:f,objectElementValidators:td}),w;case"geojson":if(w=Oa({key:o,value:n,valueSpec:f.source_geojson,style:m,styleSpec:f,objectElementValidators:td}),n.cluster)for(const C in n.clusterProperties){const[A,k]=n.clusterProperties[C],B=typeof A=="string"?[A,["accumulated"],["get",C]]:A;w.push(...ti({key:`${o}.${C}.map`,value:k,expressionContext:"cluster-map"})),w.push(...ti({key:`${o}.${C}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return w;case"video":return Oa({key:o,value:n,valueSpec:f.source_video,style:m,styleSpec:f});case"image":return Oa({key:o,value:n,valueSpec:f.source_image,style:m,styleSpec:f});case"canvas":return[new Qt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rs({key:`${o}.type`,value:n.type,valueSpec:{values:Zs(f)}})}}function Zs(i){return i.source.reduce(((n,o)=>{const f=i[o];return f.type.type==="enum"&&(n=n.concat(Object.keys(f.type.values))),n}),[])}function Xs(i){const n=i.value,o=i.styleSpec,f=o.light,m=i.style;let v=[];const w=yr(n);if(n===void 0)return v;if(w!=="object")return v=v.concat([new Qt("light",n,`object expected, ${w} found`)]),v;for(const C in n){const A=C.match(/^(.*)-transition$/);v=v.concat(A&&f[A[1]]&&f[A[1]].transition?na({key:C,value:n[C],valueSpec:o.transition,style:m,styleSpec:o}):f[C]?na({key:C,value:n[C],valueSpec:f[C],style:m,styleSpec:o}):[new Qt(C,n[C],`unknown property "${C}"`)])}return v}function is(i){const n=i.value,o=i.key,f=i.style,m=i.styleSpec,v=m.terrain;let w=[];const C=yr(n);if(n===void 0)return w;if(C!=="object")return w=w.concat([new Qt("terrain",n,`object expected, ${C} found`)]),w;for(const A in n){const k=A.match(/^(.*)-transition$/);w=w.concat(k&&v[k[1]]&&v[k[1]].transition?na({key:A,value:n[A],valueSpec:m.transition,style:f,styleSpec:m}):v[A]?na({key:A,value:n[A],valueSpec:v[A],style:f,styleSpec:m}):[new Qt(A,n[A],`unknown property "${A}"`)])}if(n.source){const A=f.sources&&f.sources[n.source],k=A&&Bi(A.type);A?k!=="raster-dem"&&w.push(new Qt(o,n.source,`terrain cannot be used with a source of type ${String(k)}, it only be used with a "raster-dem" source type`)):w.push(new Qt(o,n.source,`source "${n.source}" not found`))}else w.push(new Qt(o,n,'terrain is missing required property "source"'));return w}function nd(i){const n=i.value,o=i.style,f=i.styleSpec,m=f.fog;let v=[];const w=yr(n);if(n===void 0)return v;if(w!=="object")return v=v.concat([new Qt("fog",n,`object expected, ${w} found`)]),v;for(const C in n){const A=C.match(/^(.*)-transition$/);v=v.concat(A&&m[A[1]]&&m[A[1]].transition?na({key:C,value:n[C],valueSpec:f.transition,style:o,styleSpec:f}):m[C]?na({key:C,value:n[C],valueSpec:m[C],style:o,styleSpec:f}):[new Qt(C,n[C],`unknown property "${C}"`)])}return v}const rd={"*":()=>[],array:wc,boolean:function(i){const n=i.value,o=i.key,f=yr(n);return f!=="boolean"?[new Qt(o,n,`boolean expected, ${f} found`)]:[]},number:vl,color:function(i){const n=i.key,o=i.value,f=yr(o);return f!=="string"?[new Qt(n,o,`color expected, ${f} found`)]:op(o)===null?[new Qt(n,o,`color expected, "${o}" found`)]:[]},enum:rs,filter:Oo,function:Hs,layer:ed,object:Oa,source:bl,light:Xs,terrain:is,fog:nd,string:Bo,formatted:function(i){return Bo(i).length===0?[]:ti(i)},resolvedImage:function(i){return Bo(i).length===0?[]:ti(i)},projection:function(i){const n=i.value,o=i.styleSpec,f=o.projection,m=i.style;let v=[];const w=yr(n);if(w==="object")for(const C in n)v=v.concat(na({key:C,value:n[C],valueSpec:f[C],style:m,styleSpec:o}));else w!=="string"&&(v=v.concat([new Qt("projection",n,`object or string expected, ${w} found`)]));return v}};function na(i){const n=i.value,o=i.valueSpec,f=i.styleSpec;return o.expression&&_c(Bi(n))?Hs(i):o.expression&&xc(Mi(n))?ti(i):o.type&&rd[o.type]?rd[o.type](i):Oa(Xa({},i,{valueSpec:o.type?f[o.type]:o}))}function id(i){const n=i.value,o=i.key,f=Bo(i);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new Qt(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new Qt(o,n,'"glyphs" url must include a "{range}" token'))),f}function wl(i,n=_t){return wo(na({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,objectElementValidators:{glyphs:id,"*":()=>[]}}))}const ka=i=>wo(Sc(i)),ad=i=>wo(Ws(i));function wo(i){return i.slice().sort(((n,o)=>n.line&&o.line?n.line-o.line:0))}function ng(i,n){let o=!1;if(n&&n.length)for(const f of n)i.fire(new oo(new Error(f.message))),o=!0;return o}var Ky=ni,as=3;function ni(i,n,o){var f=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var m=new Int32Array(this.arrayBuffer);i=m[0],this.d=(n=m[1])+2*(o=m[2]);for(var v=0;v<this.d*this.d;v++){var w=m[as+v],C=m[as+v+1];f.push(w===C?null:m.subarray(w,C))}var A=m[as+f.length+1];this.keys=m.subarray(m[as+f.length],A),this.bboxes=m.subarray(A),this.insert=this._insertReadonly}else{this.d=n+2*o;for(var k=0;k<this.d*this.d;k++)f.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=i,this.padding=o,this.scale=n/i,this.uid=0;var B=o/n*i;this.min=-B,this.max=i+B}ni.prototype.insert=function(i,n,o,f,m){this._forEachCell(n,o,f,m,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(n),this.bboxes.push(o),this.bboxes.push(f),this.bboxes.push(m)},ni.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ni.prototype._insertCell=function(i,n,o,f,m,v){this.cells[m].push(v)},ni.prototype.query=function(i,n,o,f,m){var v=this.min,w=this.max;if(i<=v&&n<=v&&w<=o&&w<=f&&!m)return Array.prototype.slice.call(this.keys);var C=[];return this._forEachCell(i,n,o,f,this._queryCell,C,{},m),C},ni.prototype._queryCell=function(i,n,o,f,m,v,w,C){var A=this.cells[m];if(A!==null)for(var k=this.keys,B=this.bboxes,$=0;$<A.length;$++){var G=A[$];if(w[G]===void 0){var K=4*G;(C?C(B[K+0],B[K+1],B[K+2],B[K+3]):i<=B[K+2]&&n<=B[K+3]&&o>=B[K+0]&&f>=B[K+1])?(w[G]=!0,v.push(k[G])):w[G]=!1}}},ni.prototype._forEachCell=function(i,n,o,f,m,v,w,C){for(var A=this._convertToCellCoord(i),k=this._convertToCellCoord(n),B=this._convertToCellCoord(o),$=this._convertToCellCoord(f),G=A;G<=B;G++)for(var K=k;K<=$;K++){var ee=this.d*K+G;if((!C||C(this._convertFromCellCoord(G),this._convertFromCellCoord(K),this._convertFromCellCoord(G+1),this._convertFromCellCoord(K+1)))&&m.call(this,i,n,o,f,ee,v,w,C))return}},ni.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},ni.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},ni.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,n=as+this.cells.length+1+1,o=0,f=0;f<this.cells.length;f++)o+=this.cells[f].length;var m=new Int32Array(n+o+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var v=n,w=0;w<i.length;w++){var C=i[w];m[as+w]=v,m.set(C,v),v+=C.length}return m[as+i.length]=v,m.set(this.keys,v),m[as+i.length+1]=v+=this.keys.length,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer};var Ys=J(Ky);const Sl={};function ln(i,n,o={}){Object.defineProperty(i,"_classRegistryKey",{value:n,writeable:!1}),Sl[n]={klass:i,omit:o.omit||[]}}ln(Object,"Object"),Ys.serialize=function(i,n){const o=i.toArrayBuffer();return n&&n.push(o),{buffer:o}},Ys.deserialize=function(i){return new Ys(i.buffer)},Object.defineProperty(Ys,"name",{value:"Grid"}),ln(Ys,"Grid"),ln(Ni,"Color"),ln(Error,"Error"),ln(Wt,"AJAXError"),ln(oa,"ResolvedImage"),ln(vu,"StylePropertyFunction"),ln(Po,"StyleExpression",{omit:["_evaluator"]}),ln(bc,"ZoomDependentExpression"),ln(Gs,"ZoomConstantExpression"),ln(vs,"CompoundExpression",{omit:["_evaluate"]});for(const i in Ka)Sl[Ka[i]._classRegistryKey]||ln(Ka[i],`Expression${i}`);function Nf(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Tl(i){return E.ImageBitmap&&i instanceof E.ImageBitmap}function os(i,n){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(Nf(i)||Tl(i))return n&&n.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return n&&n.push(o.buffer),o}if(i instanceof E.ImageData)return n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const f of i)o.push(os(f,n));return o}if(typeof i=="object"){const o=i.constructor,f=o._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const m=o.serialize?o.serialize(i,n):{};if(!o.serialize){for(const v in i)i.hasOwnProperty(v)&&(Sl[f].omit.indexOf(v)>=0||(m[v]=os(i[v],n)));i instanceof Error&&(m.message=i.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(m.$name=f),m}throw new Error("can't serialize object of type "+typeof i)}function Tc(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||Nf(i)||Tl(i)||ArrayBuffer.isView(i)||i instanceof E.ImageData)return i;if(Array.isArray(i))return i.map(Tc);if(typeof i=="object"){const n=i.$name||"Object",{klass:o}=Sl[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(i);const f=Object.create(o.prototype);for(const m of Object.keys(i))m!=="$name"&&(f[m]=Tc(i[m]));return f}throw new Error("can't deserialize object of type "+typeof i)}const nn={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function Tp(i){for(const n of i)if(Uf(n.charCodeAt(0)))return!0;return!1}function rg(i){for(const n of i)if(!El(n.charCodeAt(0)))return!1;return!0}function El(i){return!(nn.Arabic(i)||nn["Arabic Supplement"](i)||nn["Arabic Extended-A"](i)||nn["Arabic Presentation Forms-A"](i)||nn["Arabic Presentation Forms-B"](i))}function Uf(i){return!(i!==746&&i!==747&&(i<4352||!(nn["Bopomofo Extended"](i)||nn.Bopomofo(i)||nn["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||nn["CJK Compatibility Ideographs"](i)||nn["CJK Compatibility"](i)||nn["CJK Radicals Supplement"](i)||nn["CJK Strokes"](i)||!(!nn["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||nn["CJK Unified Ideographs Extension A"](i)||nn["CJK Unified Ideographs"](i)||nn["Enclosed CJK Letters and Months"](i)||nn["Hangul Compatibility Jamo"](i)||nn["Hangul Jamo Extended-A"](i)||nn["Hangul Jamo Extended-B"](i)||nn["Hangul Jamo"](i)||nn["Hangul Syllables"](i)||nn.Hiragana(i)||nn["Ideographic Description Characters"](i)||nn.Kanbun(i)||nn["Kangxi Radicals"](i)||nn["Katakana Phonetic Extensions"](i)||nn.Katakana(i)&&i!==12540||!(!nn["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!nn["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||nn["Unified Canadian Aboriginal Syllabics"](i)||nn["Unified Canadian Aboriginal Syllabics Extended"](i)||nn["Vertical Forms"](i)||nn["Yijing Hexagram Symbols"](i)||nn["Yi Syllables"](i)||nn["Yi Radicals"](i))))}function $f(i){return!(Uf(i)||(function(n){return!!(nn["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||nn["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||nn["Letterlike Symbols"](n)||nn["Number Forms"](n)||nn["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||nn["Control Pictures"](n)&&n!==9251||nn["Optical Character Recognition"](n)||nn["Enclosed Alphanumerics"](n)||nn["Geometric Shapes"](n)||nn["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||nn["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||nn["CJK Symbols and Punctuation"](n)||nn.Katakana(n)||nn["Private Use Area"](n)||nn["CJK Compatibility Forms"](n)||nn["Small Form Variants"](n)||nn["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)})(i))}function Ep(i){return i>=1424&&i<=2303||nn["Arabic Presentation Forms-A"](i)||nn["Arabic Presentation Forms-B"](i)}function wu(i,n){return!(!n&&Ep(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||nn.Khmer(i))}function Cp(i){for(const n of i)if(Ep(n.charCodeAt(0)))return!0;return!1}const Su="deferred",Tu="loading",od="loaded";let Ec=null,_="unavailable",s=null;const d=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(_="error"),Ec&&Ec(i)};function x(){T.fire(new Yi("pluginStateChange",{pluginStatus:_,pluginURL:s}))}const T=new Rn,M=function(){return _},z=function(){if(_!==Su||!s)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_=Tu,x(),s&&fr({url:s},(i=>{i?d(i):(_=od,x())}))},D={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>_===od||D.applyArabicShaping!=null,isLoading:()=>_===Tu,setState(i){_=i.pluginStatus,s=i.pluginURL},isParsed:()=>D.applyArabicShaping!=null&&D.processBidirectionalText!=null&&D.processStyledBidirectionalText!=null,getPluginURL:()=>s};class j{constructor(n,o){this.zoom=n,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return(function(o,f){for(const m of o)if(!wu(m.charCodeAt(0),f))return!1;return!0})(n,D.isLoaded())}}class W{constructor(n,o){this.property=n,this.value=o,this.expression=(function(f,m){if(_c(f))return new vu(f,m);if(xc(f)){const v=_u(f,m);if(v.result==="error")throw new Error(v.value.map((w=>`${w.key}: ${w.message}`)).join(", "));return v.value}{let v=f;return typeof f=="string"&&m.type==="color"&&(v=Ni.parse(f)),{kind:"constant",evaluate:()=>v}}})(o===void 0?n.specification.default:o,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,o,f){return this.property.possiblyEvaluate(this,n,o,f)}}class H{constructor(n){this.property=n,this.value=new W(n,void 0)}transitioned(n,o){return new he(this.property,this.value,o,nt({},n.transition,this.transition),n.now)}untransitioned(){return new he(this.property,this.value,null,{},0)}}class ne{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Vt(this._values[n].value.value)}setValue(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new H(this._values[n].property)),this._values[n].value=new W(this._values[n].property,o===null?void 0:Vt(o))}getTransition(n){return Vt(this._values[n].transition)}setTransition(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new H(this._values[n].property)),this._values[n].transition=Vt(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(n[o]=f);const m=this.getTransition(o);m!==void 0&&(n[`${o}-transition`]=m)}return n}transitioned(n,o){const f=new ve(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(n,o._values[m]);return f}untransitioned(){const n=new ve(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class he{constructor(n,o,f,m,v){const w=m.delay||0,C=m.duration||0;v=v||0,this.property=n,this.value=o,this.begin=v+w,this.end=this.begin+C,n.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(n,o,f){const m=n.now||0,v=this.value.possiblyEvaluate(n,o,f),w=this.prior;if(w){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return w.possiblyEvaluate(n,o,f);{const C=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(n,o,f),v,pe(C))}}return v}}class ve{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,f){const m=new Ee(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,o,f);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class we{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return Vt(this._values[n].value)}setValue(n,o){this._values[n]=new W(this._values[n].property,o===null?void 0:Vt(o))}serialize(){const n={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(n[o]=f)}return n}possiblyEvaluate(n,o,f){const m=new Ee(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,o,f);return m}}class xe{constructor(n,o,f){this.property=n,this.value=o,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,f,m){return this.property.evaluate(this.value,this.parameters,n,o,f,m)}}class Ee{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class ie{constructor(n){this.specification=n}possiblyEvaluate(n,o){return n.expression.evaluate(o)}interpolate(n,o,f){const m=cu[this.specification.type];return m?m(n,o,f):n}}class ye{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,f,m){return new xe(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},f,m)}:n.expression,o)}interpolate(n,o,f){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new xe(this,{kind:"constant",value:void 0},n.parameters);const m=cu[this.specification.type];return m?new xe(this,{kind:"constant",value:m(n.value.value,o.value.value,f)},n.parameters):n}evaluate(n,o,f,m,v,w){return n.kind==="constant"?n.value:n.evaluate(o,f,m,v,w)}}class ke{constructor(n){this.specification=n}possiblyEvaluate(n,o,f,m){return!!n.expression.evaluate(o,null,{},f,m)}interpolate(){return!1}}class ze{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new j(0,{});for(const f in n){const m=n[f];m.specification.overridable&&this.overridableProperties.push(f);const v=this.defaultPropertyValues[f]=new W(m,void 0),w=this.defaultTransitionablePropertyValues[f]=new H(m);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=v.possiblyEvaluate(o)}}}function Ve(i,n){return 256*(i=Be(Math.floor(i),0,255))+Be(Math.floor(n),0,255)}ln(ye,"DataDrivenProperty"),ln(ie,"DataConstantProperty"),ln(ke,"ColorRampProperty");const We={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class He{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Je{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ke(i,n=1){let o=0,f=0;return{members:i.map((m=>{const v=We[m.type].BYTES_PER_ELEMENT,w=o=ct(o,Math.max(n,v)),C=m.components||1;return f=Math.max(f,v),o+=v*C,{name:m.name,type:m.type,components:C,offset:w}})),size:ct(o,Math.max(f,n)),alignment:n}}function ct(i,n){return Math.ceil(i/n)*n}class $t extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const f=this.length;return this.resize(f+1),this.emplace(f,n,o)}emplace(n,o,f){const m=2*n;return this.int16[m+0]=o,this.int16[m+1]=f,n}}$t.prototype.bytesPerElement=4,ln($t,"StructArrayLayout2i4");class rt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,f)}emplace(n,o,f,m){const v=3*n;return this.int16[v+0]=o,this.int16[v+1]=f,this.int16[v+2]=m,n}}rt.prototype.bytesPerElement=6,ln(rt,"StructArrayLayout3i6");class vt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f,m)}emplace(n,o,f,m,v){const w=4*n;return this.int16[w+0]=o,this.int16[w+1]=f,this.int16[w+2]=m,this.int16[w+3]=v,n}}vt.prototype.bytesPerElement=8,ln(vt,"StructArrayLayout4i8");class lt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w,C){const A=this.length;return this.resize(A+1),this.emplace(A,n,o,f,m,v,w,C)}emplace(n,o,f,m,v,w,C,A){const k=6*n,B=12*n,$=3*n;return this.int16[k+0]=o,this.int16[k+1]=f,this.uint8[B+4]=m,this.uint8[B+5]=v,this.uint8[B+6]=w,this.uint8[B+7]=C,this.float32[$+2]=A,n}}lt.prototype.bytesPerElement=12,ln(lt,"StructArrayLayout2i4ub1f12");class Ft extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f,m)}emplace(n,o,f,m,v){const w=4*n;return this.float32[w+0]=o,this.float32[w+1]=f,this.float32[w+2]=m,this.float32[w+3]=v,n}}Ft.prototype.bytesPerElement=16,ln(Ft,"StructArrayLayout4f16");class ot extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,f,m,v)}emplace(n,o,f,m,v,w){const C=6*n,A=3*n;return this.uint16[C+0]=o,this.uint16[C+1]=f,this.uint16[C+2]=m,this.uint16[C+3]=v,this.float32[A+2]=w,n}}ot.prototype.bytesPerElement=12,ln(ot,"StructArrayLayout4ui1f12");class St extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f,m)}emplace(n,o,f,m,v){const w=4*n;return this.uint16[w+0]=o,this.uint16[w+1]=f,this.uint16[w+2]=m,this.uint16[w+3]=v,n}}St.prototype.bytesPerElement=8,ln(St,"StructArrayLayout4ui8");class jt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,f,m,v,w)}emplace(n,o,f,m,v,w,C){const A=6*n;return this.int16[A+0]=o,this.int16[A+1]=f,this.int16[A+2]=m,this.int16[A+3]=v,this.int16[A+4]=w,this.int16[A+5]=C,n}}jt.prototype.bytesPerElement=12,ln(jt,"StructArrayLayout6i12");class Et extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w,C,A,k,B,$,G){const K=this.length;return this.resize(K+1),this.emplace(K,n,o,f,m,v,w,C,A,k,B,$,G)}emplace(n,o,f,m,v,w,C,A,k,B,$,G,K){const ee=12*n;return this.int16[ee+0]=o,this.int16[ee+1]=f,this.int16[ee+2]=m,this.int16[ee+3]=v,this.uint16[ee+4]=w,this.uint16[ee+5]=C,this.uint16[ee+6]=A,this.uint16[ee+7]=k,this.int16[ee+8]=B,this.int16[ee+9]=$,this.int16[ee+10]=G,this.int16[ee+11]=K,n}}Et.prototype.bytesPerElement=24,ln(Et,"StructArrayLayout4i4ui4i24");class At extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w){const C=this.length;return this.resize(C+1),this.emplace(C,n,o,f,m,v,w)}emplace(n,o,f,m,v,w,C){const A=10*n,k=5*n;return this.int16[A+0]=o,this.int16[A+1]=f,this.int16[A+2]=m,this.float32[k+2]=v,this.float32[k+3]=w,this.float32[k+4]=C,n}}At.prototype.bytesPerElement=20,ln(At,"StructArrayLayout3i3f20");class vn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}vn.prototype.bytesPerElement=4,ln(vn,"StructArrayLayout1ul4");class Pn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w,C,A,k,B,$,G,K){const ee=this.length;return this.resize(ee+1),this.emplace(ee,n,o,f,m,v,w,C,A,k,B,$,G,K)}emplace(n,o,f,m,v,w,C,A,k,B,$,G,K,ee){const oe=20*n,de=10*n;return this.int16[oe+0]=o,this.int16[oe+1]=f,this.int16[oe+2]=m,this.int16[oe+3]=v,this.int16[oe+4]=w,this.float32[de+3]=C,this.float32[de+4]=A,this.float32[de+5]=k,this.float32[de+6]=B,this.int16[oe+14]=$,this.uint32[de+8]=G,this.uint16[oe+18]=K,this.uint16[oe+19]=ee,n}}Pn.prototype.bytesPerElement=40,ln(Pn,"StructArrayLayout5i4f1i1ul2ui40");class Nt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w,C){const A=this.length;return this.resize(A+1),this.emplace(A,n,o,f,m,v,w,C)}emplace(n,o,f,m,v,w,C,A){const k=8*n;return this.int16[k+0]=o,this.int16[k+1]=f,this.int16[k+2]=m,this.int16[k+4]=v,this.int16[k+5]=w,this.int16[k+6]=C,this.int16[k+7]=A,n}}Nt.prototype.bytesPerElement=16,ln(Nt,"StructArrayLayout3i2i2i16");class rn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,f,m,v)}emplace(n,o,f,m,v,w){const C=4*n,A=8*n;return this.float32[C+0]=o,this.float32[C+1]=f,this.float32[C+2]=m,this.int16[A+6]=v,this.int16[A+7]=w,n}}rn.prototype.bytesPerElement=16,ln(rn,"StructArrayLayout2f1f2i16");class kn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f,m)}emplace(n,o,f,m,v){const w=12*n,C=3*n;return this.uint8[w+0]=o,this.uint8[w+1]=f,this.float32[C+1]=m,this.float32[C+2]=v,n}}kn.prototype.bytesPerElement=12,ln(kn,"StructArrayLayout2ub2f12");class Yn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,f)}emplace(n,o,f,m){const v=3*n;return this.float32[v+0]=o,this.float32[v+1]=f,this.float32[v+2]=m,n}}Yn.prototype.bytesPerElement=12,ln(Yn,"StructArrayLayout3f12");class pn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,f)}emplace(n,o,f,m){const v=3*n;return this.uint16[v+0]=o,this.uint16[v+1]=f,this.uint16[v+2]=m,n}}pn.prototype.bytesPerElement=6,ln(pn,"StructArrayLayout3ui6");class _r extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w,C,A,k,B,$,G,K,ee,oe,de,Ae,Fe,Re,De,$e){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,n,o,f,m,v,w,C,A,k,B,$,G,K,ee,oe,de,Ae,Fe,Re,De,$e)}emplace(n,o,f,m,v,w,C,A,k,B,$,G,K,ee,oe,de,Ae,Fe,Re,De,$e,Ne){const ut=30*n,st=15*n,bt=60*n;return this.int16[ut+0]=o,this.int16[ut+1]=f,this.int16[ut+2]=m,this.float32[st+2]=v,this.float32[st+3]=w,this.uint16[ut+8]=C,this.uint16[ut+9]=A,this.uint32[st+5]=k,this.uint32[st+6]=B,this.uint32[st+7]=$,this.uint16[ut+16]=G,this.uint16[ut+17]=K,this.uint16[ut+18]=ee,this.float32[st+10]=oe,this.float32[st+11]=de,this.uint8[bt+48]=Ae,this.uint8[bt+49]=Fe,this.uint8[bt+50]=Re,this.uint32[st+13]=De,this.int16[ut+28]=$e,this.uint8[bt+58]=Ne,n}}_r.prototype.bytesPerElement=60,ln(_r,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class $r extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v,w,C,A,k,B,$,G,K,ee,oe,de,Ae,Fe,Re,De,$e,Ne,ut,st,bt,Gt,ht,It,zt,Ut){const Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,n,o,f,m,v,w,C,A,k,B,$,G,K,ee,oe,de,Ae,Fe,Re,De,$e,Ne,ut,st,bt,Gt,ht,It,zt,Ut)}emplace(n,o,f,m,v,w,C,A,k,B,$,G,K,ee,oe,de,Ae,Fe,Re,De,$e,Ne,ut,st,bt,Gt,ht,It,zt,Ut,Ht){const xt=38*n,an=19*n;return this.int16[xt+0]=o,this.int16[xt+1]=f,this.int16[xt+2]=m,this.float32[an+2]=v,this.float32[an+3]=w,this.int16[xt+8]=C,this.int16[xt+9]=A,this.int16[xt+10]=k,this.int16[xt+11]=B,this.int16[xt+12]=$,this.int16[xt+13]=G,this.uint16[xt+14]=K,this.uint16[xt+15]=ee,this.uint16[xt+16]=oe,this.uint16[xt+17]=de,this.uint16[xt+18]=Ae,this.uint16[xt+19]=Fe,this.uint16[xt+20]=Re,this.uint16[xt+21]=De,this.uint16[xt+22]=$e,this.uint16[xt+23]=Ne,this.uint16[xt+24]=ut,this.uint16[xt+25]=st,this.uint16[xt+26]=bt,this.uint16[xt+27]=Gt,this.uint16[xt+28]=ht,this.uint32[an+15]=It,this.float32[an+16]=zt,this.float32[an+17]=Ut,this.float32[an+18]=Ht,n}}$r.prototype.bytesPerElement=76,ln($r,"StructArrayLayout3i2f6i15ui1ul3f76");class Br extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}Br.prototype.bytesPerElement=4,ln(Br,"StructArrayLayout1f4");class Lr extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,f,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,f,m,v)}emplace(n,o,f,m,v,w){const C=5*n;return this.float32[C+0]=o,this.float32[C+1]=f,this.float32[C+2]=m,this.float32[C+3]=v,this.float32[C+4]=w,n}}Lr.prototype.bytesPerElement=20,ln(Lr,"StructArrayLayout5f20");class Fa extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,f,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,o,f,m)}emplace(n,o,f,m,v){const w=6*n;return this.uint32[3*n+0]=o,this.uint16[w+2]=f,this.uint16[w+3]=m,this.uint16[w+4]=v,n}}Fa.prototype.bytesPerElement=12,ln(Fa,"StructArrayLayout1ul3ui12");class vr extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const f=this.length;return this.resize(f+1),this.emplace(f,n,o)}emplace(n,o,f){const m=2*n;return this.uint16[m+0]=o,this.uint16[m+1]=f,n}}vr.prototype.bytesPerElement=4,ln(vr,"StructArrayLayout2ui4");class uo extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}uo.prototype.bytesPerElement=2,ln(uo,"StructArrayLayout1ui2");class Fo extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const f=this.length;return this.resize(f+1),this.emplace(f,n,o)}emplace(n,o,f){const m=2*n;return this.float32[m+0]=o,this.float32[m+1]=f,n}}Fo.prototype.bytesPerElement=8,ln(Fo,"StructArrayLayout2f8");class gi extends He{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}gi.prototype.size=40;class Yr extends Pn{get(n){return new gi(this,n)}}ln(Yr,"CollisionBoxArray");class Pr extends He{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}Pr.prototype.size=60;class Ui extends _r{get(n){return new Pr(this,n)}}ln(Ui,"PlacedSymbolArray");class Ia extends He{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ia.prototype.size=76;class ri extends $r{get(n){return new Ia(this,n)}}ln(ri,"SymbolInstanceArray");class si extends Br{getoffsetX(n){return this.float32[1*n+0]}}ln(si,"GlyphOffsetArray");class Fi extends $t{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}ln(Fi,"SymbolLineVertexArray");class Ss extends He{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ss.prototype.size=12;class Ks extends Fa{get(n){return new Ss(this,n)}}ln(Ks,"FeatureIndexArray");class jo extends vr{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}ln(jo,"FillExtrusionCentroidArray");const Ts=Ke([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Qa=Ke([{name:"a_dash",components:4,type:"Uint16"}]);var Cc={exports:{}},Mc={exports:{}};Mc.exports=function(i,n){var o,f,m,v,w,C,A,k;for(f=i.length-(o=3&i.length),m=n,w=3432918353,C=461845907,k=0;k<f;)A=255&i.charCodeAt(k)|(255&i.charCodeAt(++k))<<8|(255&i.charCodeAt(++k))<<16|(255&i.charCodeAt(++k))<<24,++k,m=27492+(65535&(v=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(A=0,o){case 3:A^=(255&i.charCodeAt(k+2))<<16;case 2:A^=(255&i.charCodeAt(k+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(k)))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295}return m^=i.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var qf=Mc.exports,Qy={exports:{}};Qy.exports=function(i,n){for(var o,f=i.length,m=n^f,v=0;f>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(v)|(255&i.charCodeAt(++v))<<8|(255&i.charCodeAt(++v))<<16|(255&i.charCodeAt(++v))<<24))+((1540483477*(o>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),f-=4,++v;switch(f){case 3:m^=(255&i.charCodeAt(v+2))<<16;case 2:m^=(255&i.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&i.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Jy=qf,Qv=Qy.exports;Cc.exports=Jy,Cc.exports.murmur3=Jy,Cc.exports.murmur2=Qv;var ig=J(Cc.exports);class Mp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,f,m){this.ids.push(e_(n)),this.positions.push(o,f,m)}getPositions(n){const o=e_(n);let f=0,m=this.ids.length-1;for(;f<m;){const w=f+m>>1;this.ids[w]>=o?m=w:f=w+1}const v=[];for(;this.ids[f]===o;)v.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return v}static serialize(n,o){const f=new Float64Array(n.ids),m=new Uint32Array(n.positions);return Ap(f,m,0,f.length-1),o&&o.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(n){const o=new Mp;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function e_(i){const n=+i;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:ig(String(i))}function Ap(i,n,o,f){for(;o<f;){const m=i[o+f>>1];let v=o-1,w=f+1;for(;;){do v++;while(i[v]<m);do w--;while(i[w]>m);if(v>=w)break;Rp(i,v,w),Rp(n,3*v,3*w),Rp(n,3*v+1,3*w+1),Rp(n,3*v+2,3*w+2)}w-o<f-w?(Ap(i,n,o,w),o=w+1):(Ap(i,n,w+1,f),f=w)}}function Rp(i,n,o){const f=i[n];i[n]=i[o],i[o]=f}ln(Mp,"FeaturePositionMap");class Ac{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,o),this.initialized=!0),!!this.location}}class kp extends Ac{constructor(n){super(n),this.current=0}set(n,o,f){this.fetchUniformLocation(n,o)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class t_ extends Ac{constructor(n){super(n),this.current=[0,0,0,0]}set(n,o,f){this.fetchUniformLocation(n,o)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class n_ extends Ac{constructor(n){super(n),this.current=Ni.transparent}set(n,o,f){this.fetchUniformLocation(n,o)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const r_=new Float32Array(16),Jv=new Float32Array(9),ex=new Float32Array(4);function ag(i){return[Ve(255*i.r,255*i.g),Ve(255*i.b,255*i.a)]}class sd{constructor(n,o,f){this.value=n,this.uniformNames=o.map((m=>`u_${m}`)),this.type=f}setUniform(n,o,f,m,v){o.set(n,v,m.constantOr(this.value))}getBinding(n,o){return this.type==="color"?new n_(n):new kp(n)}}class Vf{constructor(n,o){this.uniformNames=o.map((f=>`u_${f}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,o,f,m,v){const w=v==="u_pattern"||v==="u_dash"?this.pattern:v==="u_pixel_ratio"?this.pixelRatio:null;w&&o.set(n,v,w)}getBinding(n,o){return o==="u_pattern"||o==="u_dash"?new t_(n):new kp(n)}}class Rc{constructor(n,o,f,m){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=o.map((v=>({name:`a_${v}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new m}populatePaintArray(n,o,f,m,v,w){const C=this.paintVertexArray.length,A=this.expression.evaluate(new j(0),o,{},v,m,w);this.paintVertexArray.resize(n),this._setPaintValue(C,n,A)}updatePaintArray(n,o,f,m,v){const w=this.expression.evaluate({zoom:0},f,m,void 0,v);this._setPaintValue(n,o,w)}_setPaintValue(n,o,f){if(this.type==="color"){const m=ag(f);for(let v=n;v<o;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Es{constructor(n,o,f,m,v,w){this.expression=n,this.uniformNames=o.map((C=>`u_${C}_t`)),this.type=f,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=o.map((C=>({name:`a_${C}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(n,o,f,m,v,w){const C=this.expression.evaluate(new j(this.zoom),o,{},v,m,w),A=this.expression.evaluate(new j(this.zoom+1),o,{},v,m,w),k=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(k,n,C,A)}updatePaintArray(n,o,f,m,v){const w=this.expression.evaluate({zoom:this.zoom},f,m,void 0,v),C=this.expression.evaluate({zoom:this.zoom+1},f,m,void 0,v);this._setPaintValue(n,o,w,C)}_setPaintValue(n,o,f,m){if(this.type==="color"){const v=ag(f),w=ag(m);for(let C=n;C<o;C++)this.paintVertexArray.emplace(C,v[0],v[1],w[0],w[1])}else{for(let v=n;v<o;v++)this.paintVertexArray.emplace(v,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o,f,m,v){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,C=Be(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);o.set(n,v,C)}getBinding(n,o){return new kp(n)}}class ss{constructor(n,o,f,m,v){this.expression=n,this.layerId=v,this.paintVertexAttributes=(f==="array"?Qa:Ts).members;for(let w=0;w<o.length;++w);this.paintVertexArray=new m}populatePaintArray(n,o,f){const m=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(m,n,o.patterns&&o.patterns[this.layerId],f)}updatePaintArray(n,o,f,m,v,w){this._setPaintValues(n,o,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(n,o,f,m){if(!m||!f)return;const v=m[f];if(!v)return;const{tl:w,br:C,pixelRatio:A}=v;for(let k=n;k<o;k++)this.paintVertexArray.emplace(k,w[0],w[1],C[0],C[1],A)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class kc{constructor(n,o,f=(()=>!0)){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!f(v))continue;const w=n.paint.get(v);if(!(w instanceof xe&&ns(w.property.specification)))continue;const C=tx(v,n.type),A=w.value,k=w.property.specification.type,B=!!w.property.useIntegerZoom,$=v==="line-dasharray"||v.endsWith("pattern"),G=v==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(A.kind!=="constant"||G)if(A.kind==="source"||G||$){const K=a_(v,k,"source");this.binders[v]=$?new ss(A,C,k,K,n.id):new Rc(A,C,k,K),m.push(`/a_${v}`)}else{const K=a_(v,k,"composite");this.binders[v]=new Es(A,C,k,B,o,K),m.push(`/z_${v}`)}else this.binders[v]=$?new Vf(A.value,C):new sd(A.value,C,k),m.push(`/u_${v}`)}this.cacheKey=m.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof Rc||o instanceof Es?o.maxValue:0}populatePaintArrays(n,o,f,m,v,w){for(const C in this.binders){const A=this.binders[C];(A instanceof Rc||A instanceof Es||A instanceof ss)&&A.populatePaintArray(n,o,f,m,v,w)}}setConstantPatternPositions(n){for(const o in this.binders){const f=this.binders[o];f instanceof Vf&&f.setConstantPatternPositions(n)}}updatePaintArrays(n,o,f,m,v,w){let C=!1;for(const A in n){const k=o.getPositions(A);for(const B of k){const $=f.feature(B.index);for(const G in this.binders){const K=this.binders[G];if((K instanceof Rc||K instanceof Es||K instanceof ss)&&K.expression.isStateDependent===!0){const ee=m.paint.get(G);K.expression=ee.value,K.updatePaintArray(B.start,B.end,$,n[A],v,w),C=!0}}}}return C}defines(){const n=[];for(const o in this.binders){const f=this.binders[o];(f instanceof sd||f instanceof Vf)&&n.push(...f.uniformNames.map((m=>`#define HAS_UNIFORM_${m}`)))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof Rc||f instanceof Es||f instanceof ss)for(let m=0;m<f.paintVertexAttributes.length;m++)n.push(f.paintVertexAttributes[m].name)}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof sd||f instanceof Vf||f instanceof Es)for(const m of f.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const o=[];for(const f in this.binders){const m=this.binders[f];if(m instanceof sd||m instanceof Vf||m instanceof Es)for(const v of m.uniformNames)o.push({name:v,property:f,binding:m.getBinding(n,v)})}return o}setUniforms(n,o,f,m,v){for(const{name:w,property:C,binding:A}of f)this.binders[C].setUniform(n,A,v,m.get(C),w)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const o=this.binders[n];(o instanceof Rc||o instanceof Es||o instanceof ss)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(n){for(const o in this.binders){const f=this.binders[o];(f instanceof Rc||f instanceof Es||f instanceof ss)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof Rc||o instanceof Es||o instanceof ss)&&o.destroy()}}}class Cl{constructor(n,o,f=(()=>!0)){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new kc(m,o,f);this.needsUpload=!1,this._featureMap=new Mp,this._bufferOffset=0}populatePaintArrays(n,o,f,m,v,w,C){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(n,o,m,v,w,C);o.id!==void 0&&this._featureMap.add(o.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,f,m,v){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(n,this._featureMap,o,w,m,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const og={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function tx(i,n){return og[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}const i_={"line-pattern":{source:ot,composite:ot},"fill-pattern":{source:ot,composite:ot},"fill-extrusion-pattern":{source:ot,composite:ot},"line-dasharray":{source:St,composite:St}},yS={color:{source:Fo,composite:Ft},number:{source:Br,composite:Fo}};function a_(i,n,o){const f=i_[i];return f&&f[o]||yS[n][o]}ln(sd,"ConstantBinder"),ln(Vf,"PatternConstantBinder"),ln(Rc,"SourceExpressionBinder"),ln(ss,"PatternCompositeBinder"),ln(Es,"CompositeExpressionBinder"),ln(kc,"ProgramConfiguration",{omit:["_buffers"]}),ln(Cl,"ProgramConfigurationSet");const o_="-transition";class Cs extends Rn{constructor(n,o){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),o.layout&&(this._unevaluatedLayout=new we(o.layout)),o.paint)){this._transitionablePaint=new ne(o.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ee(o.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,o,f={}){o!=null&&this._validate(ad,`layers.${this.id}.layout.${n}`,n,o,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return kt(n,o_)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,f={}){if(o!=null&&this._validate(ka,`layers.${this.id}.paint.${n}`,n,o,f))return!1;if(kt(n,o_))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.value.isDataDriven(),w=m.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const C=this._transitionablePaint._values[n].value,A=C.isDataDriven(),k=kt(n,"pattern")||n==="line-dasharray";return A||v||k||this._handleOverridablePaintPropertyUpdate(n,w,C)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,o,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),xn(n,((o,f)=>!(o===void 0||f==="layout"&&!Object.keys(o).length||f==="paint"&&!Object.keys(o).length)))}_validate(n,o,f,m,v={}){return(!v||v.validate!==!1)&&ng(this,n.call(wl,{key:o,layerType:this.type,objectKey:f,value:m,styleSpec:_t,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof xe&&ns(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=bo(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const nx=Ke([{name:"a_pos",components:2,type:"Int16"}],4),rx=Ke([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class $i{constructor(n=[]){this.segments=n}prepareSegment(n,o,f,m){let v=this.segments[this.segments.length-1];return n>$i.MAX_VERTEX_ARRAY_LENGTH&&sn(`Max vertices per segment is ${$i.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>$i.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:o.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,f,m){return new $i([{vertexOffset:n,primitiveOffset:o,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}$i.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ln($i,"SegmentVector");var En=8192;class Ic{constructor(n,o){n&&(o?this.setSouthWest(n).setNorthEast(o):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof qr?new qr(n.lng,n.lat):qr.convert(n),this}setSouthWest(n){return this._sw=n instanceof qr?new qr(n.lng,n.lat):qr.convert(n),this}extend(n){const o=this._sw,f=this._ne;let m,v;if(n instanceof qr)m=n,v=n;else{if(!(n instanceof Ic))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Ic.convert(n)):this.extend(qr.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(qr.convert(n)):this;if(m=n._sw,v=n._ne,!m||!v)return this}return o||f?(o.lng=Math.min(m.lng,o.lng),o.lat=Math.min(m.lat,o.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new qr(m.lng,m.lat),this._ne=new qr(v.lng,v.lat)),this}getCenter(){return new qr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new qr(this.getWest(),this.getNorth())}getSouthEast(){return new qr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:o,lat:f}=qr.convert(n);let m=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(n){return!n||n instanceof Ic?n:new Ic(n)}}var ld=1e-6,So=typeof Float32Array<"u"?Float32Array:Array;function s_(){var i=new So(9);return So!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function ix(i,n,o){var f=n[0],m=n[1],v=n[2],w=n[3],C=n[4],A=n[5],k=n[6],B=n[7],$=n[8],G=o[0],K=o[1],ee=o[2],oe=o[3],de=o[4],Ae=o[5],Fe=o[6],Re=o[7],De=o[8];return i[0]=G*f+K*w+ee*k,i[1]=G*m+K*C+ee*B,i[2]=G*v+K*A+ee*$,i[3]=oe*f+de*w+Ae*k,i[4]=oe*m+de*C+Ae*B,i[5]=oe*v+de*A+Ae*$,i[6]=Fe*f+Re*w+De*k,i[7]=Fe*m+Re*C+De*B,i[8]=Fe*v+Re*A+De*$,i}function ls(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function sg(i,n){var o=n[0],f=n[1],m=n[2],v=n[3],w=n[4],C=n[5],A=n[6],k=n[7],B=n[8],$=n[9],G=n[10],K=n[11],ee=n[12],oe=n[13],de=n[14],Ae=n[15],Fe=o*C-f*w,Re=o*A-m*w,De=o*k-v*w,$e=f*A-m*C,Ne=f*k-v*C,ut=m*k-v*A,st=B*oe-$*ee,bt=B*de-G*ee,Gt=B*Ae-K*ee,ht=$*de-G*oe,It=$*Ae-K*oe,zt=G*Ae-K*de,Ut=Fe*zt-Re*It+De*ht+$e*Gt-Ne*bt+ut*st;return Ut?(i[0]=(C*zt-A*It+k*ht)*(Ut=1/Ut),i[1]=(m*It-f*zt-v*ht)*Ut,i[2]=(oe*ut-de*Ne+Ae*$e)*Ut,i[3]=(G*Ne-$*ut-K*$e)*Ut,i[4]=(A*Gt-w*zt-k*bt)*Ut,i[5]=(o*zt-m*Gt+v*bt)*Ut,i[6]=(de*De-ee*ut-Ae*Re)*Ut,i[7]=(B*ut-G*De+K*Re)*Ut,i[8]=(w*It-C*Gt+k*st)*Ut,i[9]=(f*Gt-o*It-v*st)*Ut,i[10]=(ee*Ne-oe*De+Ae*Fe)*Ut,i[11]=($*De-B*Ne-K*Fe)*Ut,i[12]=(C*bt-w*ht-A*st)*Ut,i[13]=(o*ht-f*bt+m*st)*Ut,i[14]=(oe*Re-ee*$e-de*Fe)*Ut,i[15]=(B*$e-$*Re+G*Fe)*Ut,i):null}function Eu(i,n,o){var f=n[0],m=n[1],v=n[2],w=n[3],C=n[4],A=n[5],k=n[6],B=n[7],$=n[8],G=n[9],K=n[10],ee=n[11],oe=n[12],de=n[13],Ae=n[14],Fe=n[15],Re=o[0],De=o[1],$e=o[2],Ne=o[3];return i[0]=Re*f+De*C+$e*$+Ne*oe,i[1]=Re*m+De*A+$e*G+Ne*de,i[2]=Re*v+De*k+$e*K+Ne*Ae,i[3]=Re*w+De*B+$e*ee+Ne*Fe,i[4]=(Re=o[4])*f+(De=o[5])*C+($e=o[6])*$+(Ne=o[7])*oe,i[5]=Re*m+De*A+$e*G+Ne*de,i[6]=Re*v+De*k+$e*K+Ne*Ae,i[7]=Re*w+De*B+$e*ee+Ne*Fe,i[8]=(Re=o[8])*f+(De=o[9])*C+($e=o[10])*$+(Ne=o[11])*oe,i[9]=Re*m+De*A+$e*G+Ne*de,i[10]=Re*v+De*k+$e*K+Ne*Ae,i[11]=Re*w+De*B+$e*ee+Ne*Fe,i[12]=(Re=o[12])*f+(De=o[13])*C+($e=o[14])*$+(Ne=o[15])*oe,i[13]=Re*m+De*A+$e*G+Ne*de,i[14]=Re*v+De*k+$e*K+Ne*Ae,i[15]=Re*w+De*B+$e*ee+Ne*Fe,i}function Gf(i,n,o){var f,m,v,w,C,A,k,B,$,G,K,ee,oe=o[0],de=o[1],Ae=o[2];return n===i?(i[12]=n[0]*oe+n[4]*de+n[8]*Ae+n[12],i[13]=n[1]*oe+n[5]*de+n[9]*Ae+n[13],i[14]=n[2]*oe+n[6]*de+n[10]*Ae+n[14],i[15]=n[3]*oe+n[7]*de+n[11]*Ae+n[15]):(m=n[1],v=n[2],w=n[3],C=n[4],A=n[5],k=n[6],B=n[7],$=n[8],G=n[9],K=n[10],ee=n[11],i[0]=f=n[0],i[1]=m,i[2]=v,i[3]=w,i[4]=C,i[5]=A,i[6]=k,i[7]=B,i[8]=$,i[9]=G,i[10]=K,i[11]=ee,i[12]=f*oe+C*de+$*Ae+n[12],i[13]=m*oe+A*de+G*Ae+n[13],i[14]=v*oe+k*de+K*Ae+n[14],i[15]=w*oe+B*de+ee*Ae+n[15]),i}function Cu(i,n,o){var f=o[0],m=o[1],v=o[2];return i[0]=n[0]*f,i[1]=n[1]*f,i[2]=n[2]*f,i[3]=n[3]*f,i[4]=n[4]*m,i[5]=n[5]*m,i[6]=n[6]*m,i[7]=n[7]*m,i[8]=n[8]*v,i[9]=n[9]*v,i[10]=n[10]*v,i[11]=n[11]*v,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function lg(i,n,o){var f=Math.sin(o),m=Math.cos(o),v=n[4],w=n[5],C=n[6],A=n[7],k=n[8],B=n[9],$=n[10],G=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=v*m+k*f,i[5]=w*m+B*f,i[6]=C*m+$*f,i[7]=A*m+G*f,i[8]=k*m-v*f,i[9]=B*m-w*f,i[10]=$*m-C*f,i[11]=G*m-A*f,i}function cg(i,n,o){var f=Math.sin(o),m=Math.cos(o),v=n[0],w=n[1],C=n[2],A=n[3],k=n[8],B=n[9],$=n[10],G=n[11];return n!==i&&(i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=v*m-k*f,i[1]=w*m-B*f,i[2]=C*m-$*f,i[3]=A*m-G*f,i[8]=v*f+k*m,i[9]=w*f+B*m,i[10]=C*f+$*m,i[11]=A*f+G*m,i}function ax(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function l_(i,n,o){var f,m,v,w=o[0],C=o[1],A=o[2],k=Math.hypot(w,C,A);return k<ld?null:(w*=k=1/k,C*=k,A*=k,f=Math.sin(n),m=Math.cos(n),i[0]=w*w*(v=1-m)+m,i[1]=C*w*v+A*f,i[2]=A*w*v-C*f,i[3]=0,i[4]=w*C*v-A*f,i[5]=C*C*v+m,i[6]=A*C*v+w*f,i[7]=0,i[8]=w*A*v+C*f,i[9]=C*A*v-w*f,i[10]=A*A*v+m,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var Ip=Eu;function zp(){var i=new So(3);return So!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function Lp(i){var n=new So(3);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n}function cd(i){return Math.hypot(i[0],i[1],i[2])}function Hf(i,n,o){var f=new So(3);return f[0]=i,f[1]=n,f[2]=o,f}function cs(i,n,o){return i[0]=n[0]+o[0],i[1]=n[1]+o[1],i[2]=n[2]+o[2],i}function ug(i,n,o){return i[0]=n[0]-o[0],i[1]=n[1]-o[1],i[2]=n[2]-o[2],i}function fg(i,n,o){return i[0]=n[0]*o[0],i[1]=n[1]*o[1],i[2]=n[2]*o[2],i}function ud(i,n,o){return i[0]=Math.min(n[0],o[0]),i[1]=Math.min(n[1],o[1]),i[2]=Math.min(n[2],o[2]),i}function Wf(i,n,o){return i[0]=Math.max(n[0],o[0]),i[1]=Math.max(n[1],o[1]),i[2]=Math.max(n[2],o[2]),i}function To(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i}function fd(i,n,o,f){return i[0]=n[0]+o[0]*f,i[1]=n[1]+o[1]*f,i[2]=n[2]+o[2]*f,i}function Ja(i,n){var o=n[0],f=n[1],m=n[2],v=o*o+f*f+m*m;return v>0&&(v=1/Math.sqrt(v)),i[0]=n[0]*v,i[1]=n[1]*v,i[2]=n[2]*v,i}function ja(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function hg(i,n,o){var f=n[0],m=n[1],v=n[2],w=o[0],C=o[1],A=o[2];return i[0]=m*A-v*C,i[1]=v*w-f*A,i[2]=f*C-m*w,i}function qi(i,n,o){var f=n[0],m=n[1],v=n[2],w=o[3]*f+o[7]*m+o[11]*v+o[15];return i[0]=(o[0]*f+o[4]*m+o[8]*v+o[12])/(w=w||1),i[1]=(o[1]*f+o[5]*m+o[9]*v+o[13])/w,i[2]=(o[2]*f+o[6]*m+o[10]*v+o[14])/w,i}function c_(i,n,o){var f=o[0],m=o[1],v=o[2],w=n[0],C=n[1],A=n[2],k=m*A-v*C,B=v*w-f*A,$=f*C-m*w,G=m*$-v*B,K=v*k-f*$,ee=f*B-m*k,oe=2*o[3];return B*=oe,$*=oe,K*=2,ee*=2,i[0]=w+(k*=oe)+(G*=2),i[1]=C+B+K,i[2]=A+$+ee,i}var Mu,Ms=ug,u_=fg,ox=cd;function f_(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i[3]=n[3]*o,i}function sx(i,n){var o=n[0],f=n[1],m=n[2],v=n[3],w=o*o+f*f+m*m+v*v;return w>0&&(w=1/Math.sqrt(w)),i[0]=o*w,i[1]=f*w,i[2]=m*w,i[3]=v*w,i}function zc(i,n,o){var f=n[0],m=n[1],v=n[2],w=n[3];return i[0]=o[0]*f+o[4]*m+o[8]*v+o[12]*w,i[1]=o[1]*f+o[5]*m+o[9]*v+o[13]*w,i[2]=o[2]*f+o[6]*m+o[10]*v+o[14]*w,i[3]=o[3]*f+o[7]*m+o[11]*v+o[15]*w,i}function pa(){var i=new So(4);return So!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function Na(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function h_(i,n,o){o*=.5;var f=n[0],m=n[1],v=n[2],w=n[3],C=Math.sin(o),A=Math.cos(o);return i[0]=f*A+w*C,i[1]=m*A+v*C,i[2]=v*A-m*C,i[3]=w*A-f*C,i}function d_(i,n,o){o*=.5;var f=n[0],m=n[1],v=n[2],w=n[3],C=Math.sin(o),A=Math.cos(o);return i[0]=f*A-v*C,i[1]=m*A+w*C,i[2]=v*A+f*C,i[3]=w*A-m*C,i}zp(),Mu=new So(4),So!=Float32Array&&(Mu[0]=0,Mu[1]=0,Mu[2]=0,Mu[3]=0);var lx=sx;zp(),Hf(1,0,0),Hf(0,1,0),pa(),pa(),s_();const cx=Ke([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:hd}=cx,p_=Ke([{name:"a_pos_3",components:3,type:"Int16"}]);var Au=Ke([{name:"a_pos",type:"Int16",components:2}]);class dg{constructor(n,o){this.pos=n,this.dir=o}intersectsPlane(n,o,f){const m=ja(o,this.dir);if(Math.abs(m)<1e-6)return!1;const v=((n[0]-this.pos[0])*o[0]+(n[1]-this.pos[1])*o[1]+(n[2]-this.pos[2])*o[2])/m;return f[0]=this.pos[0]+this.dir[0]*v,f[1]=this.pos[1]+this.dir[1]*v,f[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(n,o,f){if((function(K,ee){var oe=K[0],de=K[1],Ae=K[2],Fe=ee[0],Re=ee[1],De=ee[2];return Math.abs(oe-Fe)<=ld*Math.max(1,Math.abs(oe),Math.abs(Fe))&&Math.abs(de-Re)<=ld*Math.max(1,Math.abs(de),Math.abs(Re))&&Math.abs(Ae-De)<=ld*Math.max(1,Math.abs(Ae),Math.abs(De))})(this.pos,n)||o===0)return f[0]=f[1]=f[2]=0,!1;const[m,v,w]=this.dir,C=this.pos[0]-n[0],A=this.pos[1]-n[1],k=this.pos[2]-n[2],B=m*m+v*v+w*w,$=2*(C*m+A*v+k*w),G=$*$-4*B*(C*C+A*A+k*k-o*o);if(G<0){const K=Math.max(-$/2,0),ee=C+m*K,oe=A+v*K,de=k+w*K,Ae=Math.hypot(ee,oe,de);return f[0]=ee*o/Ae,f[1]=oe*o/Ae,f[2]=de*o/Ae,!1}{const K=(-$-Math.sqrt(G))/(2*B);if(K<0){const ee=Math.hypot(C,A,k);return f[0]=C*o/ee,f[1]=A*o/ee,f[2]=k*o/ee,!1}return f[0]=C+m*K,f[1]=A+v*K,f[2]=k+w*K,!0}}}class m_{constructor(n,o,f,m,v){this.TL=n,this.TR=o,this.BR=f,this.BL=m,this.horizon=v}static fromInvProjectionMatrix(n,o,f){const m=[-1,1,1],v=[1,1,1],w=[1,-1,1],C=[-1,-1,1],A=qi(m,m,n),k=qi(v,v,n),B=qi(w,w,n),$=qi(C,C,n);return new m_(A,k,B,$,o/f)}}class dd{constructor(n,o){this.points=n,this.planes=o}static fromInvProjectionMatrix(n,o,f,m){const v=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((A=>{const k=zc([],A,n),B=1/k[3]/o*v;return(function($,G,K){return $[0]=G[0]*K[0],$[1]=G[1]*K[1],$[2]=G[2]*K[2],$[3]=G[3]*K[3],$})(k,k,[B,B,m?1/k[3]:B,B])})),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((A=>{const k=Ja([],hg([],Ms([],w[A[0]],w[A[1]]),Ms([],w[A[2]],w[A[1]]))),B=-ja(k,w[A[1]]);return k.concat(B)}));return new dd(w,C)}}class Ua{static fromPoints(n){const o=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const m of n)ud(o,o,m),Wf(f,f,m);return new Ua(o,f)}static applyTransform(n,o){const f=n.getCorners();for(let m=0;m<f.length;++m)qi(f[m],f[m],o);return Ua.fromPoints(f)}constructor(n,o){this.min=n,this.max=o,this.center=To([],cs([],this.min,this.max),.5)}quadrant(n){const o=[n%2==0,n<2],f=Lp(this.min),m=Lp(this.max);for(let v=0;v<o.length;v++)f[v]=o[v]?this.min[v]:this.center[v],m[v]=o[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new Ua(f,m)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,o=this.max;return[[n[0],n[1],n[2]],[o[0],n[1],n[2]],[o[0],o[1],n[2]],[n[0],o[1],n[2]],[n[0],n[1],o[2]],[o[0],n[1],o[2]],[o[0],o[1],o[2]],[n[0],o[1],o[2]]]}intersects(n){const o=this.getCorners();let f=!0;for(let m=0;m<n.planes.length;m++){const v=n.planes[m];let w=0;for(let C=0;C<o.length;C++)w+=ja(v,o[C])+v[3]>=0;if(w===0)return 0;w!==o.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let C=0;C<n.points.length;C++){const A=n.points[C][m]-this.min[m];v=Math.min(v,A),w=Math.max(w,A)}if(w<0||v>this.max[m]-this.min[m])return 0}return 1}}const pg=5,g_=6,Qs=En/Math.PI/2,y_=16383,Lc=64,Zf=[Lc,32,16],us=-Qs,No=Qs,mg=[new Ua([us,us,us],[No,No,No]),new Ua([us,us,us],[0,0,No]),new Ua([0,us,us],[No,0,No]),new Ua([us,0,us],[0,No,No]),new Ua([0,0,us],[No,No,No])];function pd(i){return i*Qs/yd}function __(i,n,o,f=!0){const m=To([],i._camera.position,i.worldSize),v=[n,o,1,1];zc(v,v,i.pixelMatrixInverse),f_(v,v,1/v[3]);const w=Ja([],Ms([],v,m)),C=i.globeMatrix,A=[C[12],C[13],C[14]],k=Ms([],A,m),B=cd(k),$=Ja([],k),G=i.worldSize/(2*Math.PI),K=ja($,w),ee=Math.asin(G/B);if(ee<Math.acos(K)){if(!f)return null;const Gt=[],ht=[];To(Gt,w,B/K),Ja(ht,Ms(ht,Gt,k)),Ja(w,cs(w,k,To(w,ht,Math.tan(ee)*B)))}const oe=[];new dg(m,w).closestPointOnSphere(A,G,oe);const de=Ja([],_n(C,0)),Ae=Ja([],_n(C,1)),Fe=Ja([],_n(C,2)),Re=ja(de,oe),De=ja(Ae,oe),$e=ja(Fe,oe),Ne=be(Math.asin(-De/G));let ut=be(Math.atan2(Re,$e));ut=i.center.lng+(function(Gt,ht){const It=(ht-Gt+180)%360-180;return It<-180?It+360:It})(i.center.lng,ut);const st=qa(ut),bt=Be(_i(Ne),0,1);return new vi(st,bt)}class v_{constructor(n,o,f){this.a=Ms([],n,f),this.b=Ms([],o,f),this.center=f;const m=Ja([],this.a),v=Ja([],this.b);this.angle=Math.acos(ja(m,v))}}function gg(i,n){if(i.angle===0)return null;let o;return o=i.a[n]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[n]/i.a[n]/Math.sin(i.angle)-1/Math.tan(i.angle)),o<0||o>1?null:(function(f,m,v,w){const C=Math.sin(v);return f*(Math.sin((1-w)*v)/C)+m*(Math.sin(w*v)/C)})(i.a[n],i.b[n],i.angle,Be(o,0,1))+i.center[n]}function $a(i){if(i.z<=1)return mg[i.z+2*i.y+i.x];const n=yg(md(i));return Ua.fromPoints(n)}function Pc(i,n,o){return To(i,i,1-o),fd(i,i,n,o)}function ux(i,n){const o=Yf(n.zoom);if(o===0)return $a(i);const f=md(i),m=yg(f),v=qa(f.getWest())*n.worldSize,w=qa(f.getEast())*n.worldSize,C=_i(f.getNorth())*n.worldSize,A=_i(f.getSouth())*n.worldSize,k=[v,C,0],B=[w,C,0],$=[v,A,0],G=[w,A,0],K=sg([],n.globeMatrix);return qi(k,k,K),qi(B,B,K),qi($,$,K),qi(G,G,K),m[0]=Pc(m[0],$,o),m[1]=Pc(m[1],G,o),m[2]=Pc(m[2],B,o),m[3]=Pc(m[3],k,o),Ua.fromPoints(m)}function x_(i,n,o){for(const f of i)qi(f,f,n),To(f,f,o)}function Dc(i,n,o){const f=n/i.worldSize,m=i.globeMatrix;if(o.z<=1){const st=$a(o).getCorners();return x_(st,m,f),Ua.fromPoints(st)}const v=md(o),w=yg(v);x_(w,m,f);const C=Number.MAX_VALUE,A=[-C,-C,-C],k=[C,C,C];if(v.contains(i.center)){for(const Gt of w)ud(k,k,Gt),Wf(A,A,Gt);A[2]=0;const st=i.point,bt=[st.x*f,st.y*f,0];return ud(k,k,bt),Wf(A,A,bt),new Ua(k,A)}const B=[m[12]*f,m[13]*f,m[14]*f],$=v.getCenter(),G=Be(i.center.lat,-za,za),K=Be($.lat,-za,za),ee=qa(i.center.lng),oe=_i(G);let de=ee-qa($.lng);const Ae=oe-_i(K);de>.5?de-=1:de<-.5&&(de+=1);let Fe=0;Math.abs(de)>Math.abs(Ae)?Fe=de>=0?1:3:(Fe=Ae>=0?0:2,fd(B,B,[m[4]*f,m[5]*f,m[6]*f],-Math.sin(me(Ae>=0?v.getSouth():v.getNorth()))*Qs));const Re=w[Fe],De=w[(Fe+1)%4],$e=new v_(Re,De,B),Ne=[gg($e,0)||Re[0],gg($e,1)||Re[1],gg($e,2)||Re[2]],ut=Yf(i.zoom);if(ut>0){const st=(function({x:Gt,y:ht,z:It},zt,Ut,Ht,xt){const an=1/(1<<It);let hn=Gt*an,on=hn+an,Kn=ht*an,Zt=Kn+an,An=0;const Qn=(hn+on)/2-Ht;return Qn>.5?An=-1:Qn<-.5&&(An=1),hn=((hn+An)*zt-(Ht*=zt))*Ut+Ht,on=((on+An)*zt-Ht)*Ut+Ht,Kn=(Kn*zt-(xt*=zt))*Ut+xt,Zt=(Zt*zt-xt)*Ut+xt,[[hn,Zt,0],[on,Zt,0],[on,Kn,0],[hn,Kn,0]]})(o,n,i._pixelsPerMercatorPixel,ee,oe);for(let Gt=0;Gt<w.length;Gt++)Pc(w[Gt],st[Gt],ut);const bt=cs([],st[Fe],st[(Fe+1)%4]);To(bt,bt,.5),Pc(Ne,bt,ut)}for(const st of w)ud(k,k,st),Wf(A,A,st);return k[2]=Math.min(Re[2],De[2]),ud(k,k,Ne),Wf(A,A,Ne),new Ua(k,A)}function md({x:i,y:n,z:o}){const f=1/(1<<o),m=new qr(Uo(i*f),Vr((n+1)*f)),v=new qr(Uo((i+1)*f),Vr(n*f));return new Ic(m,v)}function yg(i){const n=me(i.getNorth()),o=me(i.getSouth()),f=Math.cos(n),m=Math.cos(o),v=Math.sin(n),w=Math.sin(o),C=i.getWest(),A=i.getEast();return[Oc(m,w,C),Oc(m,w,A),Oc(f,v,A),Oc(f,v,C)]}function Oc(i,n,o,f=Qs){return o=me(o),[i*Math.sin(o)*f,-n*f,i*Math.cos(o)*f]}function Ml(i,n,o){return Oc(Math.cos(me(i)),Math.sin(me(i)),n,o)}function yi(i,n,o,f){const m=1<<o.z,v=(i/En+o.x)/m;return Ml(Vr((n/En+o.y)/m),Uo(v),f)}function _g({min:i,max:n}){return y_/Math.max(n[0]-i[0],n[1]-i[1],n[2]-i[2])}const fx=new Float64Array(16);function gd(i){const n=_g(i),o=ax(fx,[n,n,n]);return Gf(o,o,((f=[])[0]=-(m=i.min)[0],f[1]=-m[1],f[2]=-m[2],f));var f,m}function Xf(i){const n=(f=i.min,(o=fx)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=f[0],o[13]=f[1],o[14]=f[2],o[15]=1,o);var o,f;const m=1/_g(i);return Cu(n,n,[m,m,m])}function Bc(i,n,o,f,m){const v=(function(A){const k=En/(2*Math.PI);return A/(2*Math.PI)/k})(o),w=[i,n,-o/(2*Math.PI)],C=ls(new Float64Array(16));return Gf(C,C,w),Cu(C,C,[v,v,v]),lg(C,C,me(-m)),cg(C,C,me(-f)),C}function Yf(i){return dt(pg,g_,i)}function b_(i,n){const o=Ml(n.lat,n.lng),f=(function(ee){const oe=Ml(ee._center.lat,ee._center.lng);let de=hg([],Hf(0,1,0),oe);const Ae=l_([],-ee.angle,oe);de=qi(de,de,Ae),l_(Ae,-ee._pitch,de);const Fe=Ja([],oe);return To(Fe,Fe,pd(ee.cameraToCenterDistance/ee.pixelsPerMeter)),qi(Fe,Fe,Ae),cs([],oe,Fe)})(i);return w=(m=ug([],f,o))[0],C=m[1],A=m[2],k=(v=o)[0],B=v[1],$=v[2],K=(G=Math.sqrt(w*w+C*C+A*A)*Math.sqrt(k*k+B*B+$*$))&&ja(m,v)/G,Math.acos(Math.min(Math.max(K,-1),1));var m,v,w,C,A,k,B,$,G,K}function Kf(i,n){return b_(i,n)>Math.PI/2*1.01}const Js=me(85),hx=Math.cos(Js),w_=Math.sin(Js),yd=63710088e-1,vg=2*Math.PI*yd;class Al{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Al(Ce(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,f=this.lat*o,m=n.lat*o,v=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((n.lng-this.lng)*o);return yd*Math.acos(Math.min(v,1))}toBounds(n=0){const o=360*n/40075017,f=o/Math.cos(Math.PI/180*this.lat);return new Ic(new Al(this.lng-f,this.lat-o),new Al(this.lng+f,this.lat+o))}toEcef(n){const o=pd(n);return Ml(this.lat,this.lng,Qs+o)}static convert(n){if(n instanceof Al)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Al(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Al(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var qr=Al;function xg(i){return vg*Math.cos(i*Math.PI/180)}function qa(i){return(180+i)/360}function _i(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function fs(i,n){return i/xg(n)}function Uo(i){return 360*i-180}function Vr(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function dx(i,n){return i*xg(Vr(n))}const za=85.051129;function S_(i){return 1/Math.cos(i*Math.PI/180)}class vi{constructor(n,o,f=0){this.x=+n,this.y=+o,this.z=+f}static fromLngLat(n,o=0){const f=qr.convert(n);return new vi(qa(f.lng),_i(f.lat),fs(o,f.lat))}toLngLat(){return new qr(Uo(this.x),Vr(this.y))}toAltitude(){return dx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vg*S_(Vr(this.y))}}function fo(i,n,o,f,m,v,w,C,A){const k=(n+f)/2,B=(o+m)/2,$=new ue(k,B);C($),(function(G,K,ee,oe,de,Ae){const Fe=ee-de,Re=oe-Ae;return Math.abs((oe-K)*Fe-(ee-G)*Re)/Math.hypot(Fe,Re)})($.x,$.y,v.x,v.y,w.x,w.y)>=A?(fo(i,n,o,k,B,v,$,C,A),fo(i,k,B,f,m,$,w,C,A)):i.push(w)}function Rl(i,n,o){let f=i[0],m=f.x,v=f.y;n(f);const w=[f];for(let C=1;C<i.length;C++){const A=i[C],{x:k,y:B}=A;n(A),fo(w,m,v,k,B,f,A,n,o),m=k,v=B,f=A}return w}function bg(i,n,o,f){if(f(n,o)){const m=n.add(o)._mult(.5);bg(i,n,m,f),bg(i,m,o,f)}else i.push(o)}function px(i,n){let o=i[0];const f=[o];for(let m=1;m<i.length;m++){const v=i[m];bg(f,o,v,n),o=v}return f}const wg=Math.pow(2,14)-1,mx=-wg-1;function Sg(i,n){const o=Math.round(i.x*n),f=Math.round(i.y*n);return i.x=Be(o,mx,wg),i.y=Be(f,mx,wg),(o<i.x||o>i.x+1||f<i.y||f>i.y+1)&&sn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function la(i,n,o){const f=i.loadGeometry(),m=i.extent,v=En/m;if(n&&o&&o.projection.isReprojectedInTileSpace){const w=1<<n.z,{scale:C,x:A,y:k,projection:B}=o,$=G=>{const K=Uo((n.x+G.x/m)/w),ee=Vr((n.y+G.y/m)/w),oe=B.project(K,ee);G.x=(oe.x*C-A)*m,G.y=(oe.y*C-k)*m};for(let G=0;G<f.length;G++)if(i.type!==1)f[G]=Rl(f[G],$,1);else{const K=[];for(const ee of f[G])ee.x<0||ee.x>=m||ee.y<0||ee.y>=m||($(ee),K.push(ee));f[G]=K}}for(const w of f)for(const C of w)Sg(C,v);return f}function eo(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?la(i):[]}}function Pp(i,n,o,f,m){i.emplaceBack(2*n+(f+1)/2,2*o+(m+1)/2)}function to(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class Tg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new $t,this.indexArray=new pn,this.segments=new $i,this.programConfigurations=new Cl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,f,m){const v=this.layers[0],w=[];let C=null;v.type==="circle"&&(C=v.layout.get("circle-sort-key"));for(const{feature:k,id:B,index:$,sourceLayerIndex:G}of n){const K=this.layers[0]._featureFilter.needGeometry,ee=eo(k,K);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),ee,f))continue;const oe=C?C.evaluate(ee,{},f):void 0,de={id:B,properties:k.properties,type:k.type,sourceLayerIndex:G,index:$,geometry:K?ee.geometry:la(k,f,m),patterns:{},sortKey:oe};w.push(de)}C&&w.sort(((k,B)=>k.sortKey-B.sortKey));let A=null;m.projection.name==="globe"&&(this.globeExtVertexArray=new jt,A=m.projection);for(const k of w){const{geometry:B,index:$,sourceLayerIndex:G}=k,K=n[$].feature;this.addFeature(k,B,$,o.availableImages,f,A),o.featureIndex.insert(K,B,$,G,this.index)}}update(n,o,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,nx.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,rx.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,o,f,m,v,w){for(const C of o)for(const A of C){const k=A.x,B=A.y;if(k<0||k>=En||B<0||B>=En)continue;if(w){const K=w.projectTilePoint(k,B,v),ee=w.upVector(v,k,B),oe=this.globeExtVertexArray;to(oe,K,ee),to(oe,K,ee),to(oe,K,ee),to(oe,K,ee)}const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),G=$.vertexLength;Pp(this.layoutVertexArray,k,B,-1,-1),Pp(this.layoutVertexArray,k,B,1,-1),Pp(this.layoutVertexArray,k,B,1,1),Pp(this.layoutVertexArray,k,B,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+2,G+3),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},m,v)}}function kl(i,n){for(let o=0;o<i.length;o++)if(tl(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(tl(i,n[o]))return!0;return!!Dp(i,n)}function Qf(i,n,o){return!!tl(i,n)||!!Eg(n,i,o)}function Il(i,n){if(i.length===1)return _d(n,i[0]);for(let o=0;o<n.length;o++){const f=n[o];for(let m=0;m<f.length;m++)if(tl(i,f[m]))return!0}for(let o=0;o<i.length;o++)if(_d(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(Dp(i,n[o]))return!0;return!1}function T_(i,n,o){if(i.length>1){if(Dp(i,n))return!0;for(let f=0;f<n.length;f++)if(Eg(n[f],i,o))return!0}for(let f=0;f<i.length;f++)if(Eg(i[f],n,o))return!0;return!1}function Dp(i,n){if(i.length===0||n.length===0)return!1;for(let o=0;o<i.length-1;o++){const f=i[o],m=i[o+1];for(let v=0;v<n.length-1;v++)if(el(f,m,n[v],n[v+1]))return!0}return!1}function el(i,n,o,f){return Jt(i,o,f)!==Jt(n,o,f)&&Jt(i,n,o)!==Jt(i,n,f)}function Eg(i,n,o){const f=o*o;if(n.length===1)return i.distSqr(n[0])<f;for(let m=1;m<n.length;m++)if(Jf(i,n[m-1],n[m])<f)return!0;return!1}function Jf(i,n,o){const f=n.distSqr(o);if(f===0)return i.distSqr(n);const m=((i.x-n.x)*(o.x-n.x)+(i.y-n.y)*(o.y-n.y))/f;return i.distSqr(m<0?n:m>1?o:o.sub(n)._mult(m)._add(n))}function _d(i,n){let o,f,m,v=!1;for(let w=0;w<i.length;w++){o=i[w];for(let C=0,A=o.length-1;C<o.length;A=C++)f=o[C],m=o[A],f.y>n.y!=m.y>n.y&&n.x<(m.x-f.x)*(n.y-f.y)/(m.y-f.y)+f.x&&(v=!v)}return v}function tl(i,n){let o=!1;for(let f=0,m=i.length-1;f<i.length;m=f++){const v=i[f],w=i[m];v.y>n.y!=w.y>n.y&&n.x<(w.x-v.x)*(n.y-v.y)/(w.y-v.y)+v.x&&(o=!o)}return o}function eh(i,n,o,f,m){for(const w of i)if(n<=w.x&&o<=w.y&&f>=w.x&&m>=w.y)return!0;const v=[new ue(n,o),new ue(n,m),new ue(f,m),new ue(f,o)];if(i.length>2){for(const w of v)if(tl(i,w))return!0}for(let w=0;w<i.length-1;w++)if(gx(i[w],i[w+1],v))return!0;return!1}function gx(i,n,o){const f=o[0],m=o[2];if(i.x<f.x&&n.x<f.x||i.x>m.x&&n.x>m.x||i.y<f.y&&n.y<f.y||i.y>m.y&&n.y>m.y)return!1;const v=Jt(i,n,o[0]);return v!==Jt(i,n,o[1])||v!==Jt(i,n,o[2])||v!==Jt(i,n,o[3])}function th(i,n,o){const f=n.paint.get(i).value;return f.kind==="constant"?f.value:o.programConfigurations.get(n.id).getMaxValue(i)}function Ru(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function E_(i,n,o,f,m){if(!n[0]&&!n[1])return i;const v=ue.convert(n)._mult(m);o==="viewport"&&v._rotate(-f);const w=[];for(let C=0;C<i.length;C++)w.push(i[C].sub(v));return w}function Op(i,n,o,f){const m=ue.convert(i)._mult(f);return n==="viewport"&&m._rotate(-o),m}ln(Tg,"CircleBucket",{omit:["layers"]});const yx=new ze({"circle-sort-key":new ye(_t.layout_circle["circle-sort-key"])});var _S={paint:new ze({"circle-radius":new ye(_t.paint_circle["circle-radius"]),"circle-color":new ye(_t.paint_circle["circle-color"]),"circle-blur":new ye(_t.paint_circle["circle-blur"]),"circle-opacity":new ye(_t.paint_circle["circle-opacity"]),"circle-translate":new ie(_t.paint_circle["circle-translate"]),"circle-translate-anchor":new ie(_t.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ie(_t.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ie(_t.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ye(_t.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ye(_t.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ye(_t.paint_circle["circle-stroke-opacity"])}),layout:yx};function _x(i,n,o,f,m,v,w,C,A){if(v&&i.queryGeometry.isAboveHorizon)return!1;v&&(A*=i.pixelToTileUnitsFactor);const k=i.tileID.canonical,B=o.projection.upVectorScale(k,o.center.lat,o.worldSize).metersToTile;for(const $ of n)for(const G of $){const K=G.add(C),ee=m&&o.elevation?o.elevation.exaggeration()*m.getElevationAt(K.x,K.y,!0):0,oe=o.projection.projectTilePoint(K.x,K.y,k);if(ee>0){const Re=o.projection.upVector(k,K.x,K.y);oe.x+=Re[0]*B*ee,oe.y+=Re[1]*B*ee,oe.z+=Re[2]*B*ee}const de=v?K:ii(oe.x,oe.y,oe.z,f),Ae=v?i.tilespaceRays.map((Re=>Fr(Re,ee))):i.queryGeometry.screenGeometry,Fe=zc([],[oe.x,oe.y,oe.z,1],f);if(!w&&v?A*=Fe[3]/o.cameraToCenterDistance:w&&!v&&(A*=o.cameraToCenterDistance/Fe[3]),v){const Re=Vr((G.y/En+k.y)/(1<<k.z));A/=o.projection.pixelsPerMeter(Re,1)/fs(1,Re)}if(Qf(Ae,de,A))return!0}return!1}function ii(i,n,o,f){const m=zc([],[i,n,o,1],f);return new ue(m[0]/m[3],m[1]/m[3])}const Ri=Hf(0,0,0),Dr=Hf(0,0,1);function Fr(i,n){const o=zp();return Ri[2]=n,i.intersectsPlane(Ri,Dr,o),new ue(o[0],o[1])}class li extends Tg{}function $o(i,{width:n,height:o},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*o*f)throw new RangeError("mismatched image size")}else m=new Uint8Array(n*o*f);return i.width=n,i.height=o,i.data=m,i}function Fc(i,n,o){const{width:f,height:m}=n;f===i.width&&m===i.height||(ku(i,n,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,f),height:Math.min(i.height,m)},o),i.width=f,i.height=m,i.data=n.data)}function ku(i,n,o,f,m,v){if(m.width===0||m.height===0)return n;if(m.width>i.width||m.height>i.height||o.x>i.width-m.width||o.y>i.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||f.x>n.width-m.width||f.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=i.data,C=n.data;for(let A=0;A<m.height;A++){const k=((o.y+A)*i.width+o.x)*v,B=((f.y+A)*n.width+f.x)*v;for(let $=0;$<m.width*v;$++)C[B+$]=w[k+$]}return n}ln(li,"HeatmapBucket",{omit:["layers"]});class nl{constructor(n,o){$o(this,n,1,o)}resize(n){Fc(this,new nl(n),1)}clone(){return new nl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,f,m,v){ku(n,o,f,m,v,1)}}class ca{constructor(n,o){$o(this,n,4,o)}resize(n){Fc(this,new ca(n),4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ca({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,f,m,v){ku(n,o,f,m,v,4)}}ln(nl,"AlphaImage"),ln(ca,"RGBAImage");var ua={paint:new ze({"heatmap-radius":new ye(_t.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ye(_t.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ie(_t.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ke(_t.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ie(_t.paint_heatmap["heatmap-opacity"])})};function zl(i){const n={},o=i.resolution||256,f=i.clips?i.clips.length:1,m=i.image||new ca({width:o,height:f}),v=(w,C,A)=>{n[i.evaluationKey]=A;const k=i.expression.evaluate(n);m.data[w+C+0]=Math.floor(255*k.r/k.a),m.data[w+C+1]=Math.floor(255*k.g/k.a),m.data[w+C+2]=Math.floor(255*k.b/k.a),m.data[w+C+3]=Math.floor(255*k.a)};if(i.clips)for(let w=0,C=0;w<f;++w,C+=4*o)for(let A=0,k=0;A<o;A++,k+=4){const B=A/(o-1),{start:$,end:G}=i.clips[w];v(C,k,$*(1-B)+G*B)}else for(let w=0,C=0;w<o;w++,C+=4)v(0,C,w/(o-1));return m}var nh={paint:new ze({"hillshade-illumination-direction":new ie(_t.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ie(_t.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ie(_t.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ie(_t.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ie(_t.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ie(_t.paint_hillshade["hillshade-accent-color"])})};const C_=Ke([{name:"a_pos",components:2,type:"Int16"}],4),{members:hs}=C_;var Iu={exports:{}};function zu(i,n,o){o=o||2;var f,m,v,w,C,A,k,B=n&&n.length,$=B?n[0]*o:i.length,G=Eo(i,0,$,o,!0),K=[];if(!G||G.next===G.prev)return K;if(B&&(G=(function(oe,de,Ae,Fe){var Re,De,$e,Ne=[];for(Re=0,De=de.length;Re<De;Re++)($e=Eo(oe,de[Re]*Fe,Re<De-1?de[Re+1]*Fe:oe.length,Fe,!1))===$e.next&&($e.steiner=!0),Ne.push(M_($e));for(Ne.sort(La),Re=0;Re<Ne.length;Re++)Ae=Du(Ne[Re],Ae);return Ae})(i,n,G,o)),i.length>80*o){f=v=i[0],m=w=i[1];for(var ee=o;ee<$;ee+=o)(C=i[ee])<f&&(f=C),(A=i[ee+1])<m&&(m=A),C>v&&(v=C),A>w&&(w=A);k=(k=Math.max(v-f,w-m))!==0?32767/k:0}return Lu(G,K,o,f,m,k,0),K}function Eo(i,n,o,f,m){var v,w;if(m===Fp(i,n,o,f)>0)for(v=n;v<o;v+=f)w=bx(v,i[v],i[v+1],w);else for(v=o-f;v>=n;v-=f)w=bx(v,i[v],i[v+1],w);return w&&xd(w,w.next)&&(As(w),w=w.next),w}function jc(i,n){if(!i)return i;n||(n=i);var o,f=i;do if(o=!1,f.steiner||!xd(f,f.next)&&Pi(f.prev,f,f.next)!==0)f=f.next;else{if(As(f),(f=n=f.prev)===f.next)break;o=!0}while(o||f!==n);return n}function Lu(i,n,o,f,m,v,w){if(i){!w&&v&&(function(B,$,G,K){var ee=B;do ee.z===0&&(ee.z=rl(ee.x,ee.y,$,G,K)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==B);ee.prevZ.nextZ=null,ee.prevZ=null,(function(oe){var de,Ae,Fe,Re,De,$e,Ne,ut,st=1;do{for(Ae=oe,oe=null,De=null,$e=0;Ae;){for($e++,Fe=Ae,Ne=0,de=0;de<st&&(Ne++,Fe=Fe.nextZ);de++);for(ut=st;Ne>0||ut>0&&Fe;)Ne!==0&&(ut===0||!Fe||Ae.z<=Fe.z)?(Re=Ae,Ae=Ae.nextZ,Ne--):(Re=Fe,Fe=Fe.nextZ,ut--),De?De.nextZ=Re:oe=Re,Re.prevZ=De,De=Re;Ae=Fe}De.nextZ=null,st*=2}while($e>1)})(ee)})(i,f,m,v);for(var C,A,k=i;i.prev!==i.next;)if(C=i.prev,A=i.next,v?Cg(i,f,m,v):vx(i))n.push(C.i/o|0),n.push(i.i/o|0),n.push(A.i/o|0),As(i),i=A.next,k=A.next;else if((i=A)===k){w?w===1?Lu(i=Mg(jc(i),n,o),n,o,f,m,v,2):w===2&&Pu(i,n,o,f,m,v):Lu(jc(i),n,o,f,m,v,1);break}}}function vx(i){var n=i.prev,o=i,f=i.next;if(Pi(n,o,f)>=0)return!1;for(var m=n.x,v=o.x,w=f.x,C=n.y,A=o.y,k=f.y,B=m<v?m<w?m:w:v<w?v:w,$=C<A?C<k?C:k:A<k?A:k,G=m>v?m>w?m:w:v>w?v:w,K=C>A?C>k?C:k:A>k?A:k,ee=f.next;ee!==n;){if(ee.x>=B&&ee.x<=G&&ee.y>=$&&ee.y<=K&&Ou(m,C,v,A,w,k,ee.x,ee.y)&&Pi(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function Cg(i,n,o,f){var m=i.prev,v=i,w=i.next;if(Pi(m,v,w)>=0)return!1;for(var C=m.x,A=v.x,k=w.x,B=m.y,$=v.y,G=w.y,K=C<A?C<k?C:k:A<k?A:k,ee=B<$?B<G?B:G:$<G?$:G,oe=C>A?C>k?C:k:A>k?A:k,de=B>$?B>G?B:G:$>G?$:G,Ae=rl(K,ee,n,o,f),Fe=rl(oe,de,n,o,f),Re=i.prevZ,De=i.nextZ;Re&&Re.z>=Ae&&De&&De.z<=Fe;){if(Re.x>=K&&Re.x<=oe&&Re.y>=ee&&Re.y<=de&&Re!==m&&Re!==w&&Ou(C,B,A,$,k,G,Re.x,Re.y)&&Pi(Re.prev,Re,Re.next)>=0||(Re=Re.prevZ,De.x>=K&&De.x<=oe&&De.y>=ee&&De.y<=de&&De!==m&&De!==w&&Ou(C,B,A,$,k,G,De.x,De.y)&&Pi(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;Re&&Re.z>=Ae;){if(Re.x>=K&&Re.x<=oe&&Re.y>=ee&&Re.y<=de&&Re!==m&&Re!==w&&Ou(C,B,A,$,k,G,Re.x,Re.y)&&Pi(Re.prev,Re,Re.next)>=0)return!1;Re=Re.prevZ}for(;De&&De.z<=Fe;){if(De.x>=K&&De.x<=oe&&De.y>=ee&&De.y<=de&&De!==m&&De!==w&&Ou(C,B,A,$,k,G,De.x,De.y)&&Pi(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function Mg(i,n,o){var f=i;do{var m=f.prev,v=f.next.next;!xd(m,v)&&qo(m,f,f.next,v)&&bd(m,v)&&bd(v,m)&&(n.push(m.i/o|0),n.push(f.i/o|0),n.push(v.i/o|0),As(f),As(f.next),f=i=v),f=f.next}while(f!==i);return jc(f)}function Pu(i,n,o,f,m,v){var w=i;do{for(var C=w.next.next;C!==w.prev;){if(w.i!==C.i&&xx(w,C)){var A=A_(w,C);return w=jc(w,w.next),A=jc(A,A.next),Lu(w,n,o,f,m,v,0),void Lu(A,n,o,f,m,v,0)}C=C.next}w=w.next}while(w!==i)}function La(i,n){return i.x-n.x}function Du(i,n){var o=(function(m,v){var w,C=v,A=m.x,k=m.y,B=-1/0;do{if(k<=C.y&&k>=C.next.y&&C.next.y!==C.y){var $=C.x+(k-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if($<=A&&$>B&&(B=$,w=C.x<C.next.x?C:C.next,$===A))return w}C=C.next}while(C!==v);if(!w)return null;var G,K=w,ee=w.x,oe=w.y,de=1/0;C=w;do A>=C.x&&C.x>=ee&&A!==C.x&&Ou(k<oe?A:B,k,ee,oe,k<oe?B:A,k,C.x,C.y)&&(G=Math.abs(k-C.y)/(A-C.x),bd(C,m)&&(G<de||G===de&&(C.x>w.x||C.x===w.x&&vd(w,C)))&&(w=C,de=G)),C=C.next;while(C!==K);return w})(i,n);if(!o)return n;var f=A_(o,i);return jc(f,f.next),jc(o,o.next)}function vd(i,n){return Pi(i.prev,i,n.prev)<0&&Pi(n.next,i,i.next)<0}function rl(i,n,o,f,m){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function M_(i){var n=i,o=i;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==i);return o}function Ou(i,n,o,f,m,v,w,C){return(m-w)*(n-C)>=(i-w)*(v-C)&&(i-w)*(f-C)>=(o-w)*(n-C)&&(o-w)*(v-C)>=(m-w)*(f-C)}function xx(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!(function(o,f){var m=o;do{if(m.i!==o.i&&m.next.i!==o.i&&m.i!==f.i&&m.next.i!==f.i&&qo(m,m.next,o,f))return!0;m=m.next}while(m!==o);return!1})(i,n)&&(bd(i,n)&&bd(n,i)&&(function(o,f){var m=o,v=!1,w=(o.x+f.x)/2,C=(o.y+f.y)/2;do m.y>C!=m.next.y>C&&m.next.y!==m.y&&w<(m.next.x-m.x)*(C-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==o);return v})(i,n)&&(Pi(i.prev,i,n.prev)||Pi(i,n.prev,n))||xd(i,n)&&Pi(i.prev,i,i.next)>0&&Pi(n.prev,n,n.next)>0)}function Pi(i,n,o){return(n.y-i.y)*(o.x-n.x)-(n.x-i.x)*(o.y-n.y)}function xd(i,n){return i.x===n.x&&i.y===n.y}function qo(i,n,o,f){var m=no(Pi(i,n,o)),v=no(Pi(i,n,f)),w=no(Pi(o,f,i)),C=no(Pi(o,f,n));return m!==v&&w!==C||!(m!==0||!Bp(i,o,n))||!(v!==0||!Bp(i,f,n))||!(w!==0||!Bp(o,i,f))||!(C!==0||!Bp(o,n,f))}function Bp(i,n,o){return n.x<=Math.max(i.x,o.x)&&n.x>=Math.min(i.x,o.x)&&n.y<=Math.max(i.y,o.y)&&n.y>=Math.min(i.y,o.y)}function no(i){return i>0?1:i<0?-1:0}function bd(i,n){return Pi(i.prev,i,i.next)<0?Pi(i,n,i.next)>=0&&Pi(i,i.prev,n)>=0:Pi(i,n,i.prev)<0||Pi(i,i.next,n)<0}function A_(i,n){var o=new wd(i.i,i.x,i.y),f=new wd(n.i,n.x,n.y),m=i.next,v=n.prev;return i.next=n,n.prev=i,o.next=m,m.prev=o,f.next=o,o.prev=f,v.next=f,f.prev=v,f}function bx(i,n,o,f){var m=new wd(i,n,o);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function As(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function wd(i,n,o){this.i=i,this.x=n,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fp(i,n,o,f){for(var m=0,v=n,w=o-f;v<o;v+=f)m+=(i[w]-i[v])*(i[v+1]+i[w+1]),w=v;return m}Iu.exports=zu,Iu.exports.default=zu,zu.deviation=function(i,n,o,f){var m=n&&n.length,v=Math.abs(Fp(i,0,m?n[0]*o:i.length,o));if(m)for(var w=0,C=n.length;w<C;w++)v-=Math.abs(Fp(i,n[w]*o,w<C-1?n[w+1]*o:i.length,o));var A=0;for(w=0;w<f.length;w+=3){var k=f[w]*o,B=f[w+1]*o,$=f[w+2]*o;A+=Math.abs((i[k]-i[$])*(i[B+1]-i[k+1])-(i[k]-i[B])*(i[$+1]-i[k+1]))}return v===0&&A===0?0:Math.abs((A-v)/v)},zu.flatten=function(i){for(var n=i[0][0].length,o={vertices:[],holes:[],dimensions:n},f=0,m=0;m<i.length;m++){for(var v=0;v<i[m].length;v++)for(var w=0;w<n;w++)o.vertices.push(i[m][v][w]);m>0&&o.holes.push(f+=i[m-1].length)}return o};var Bu=J(Iu.exports);function wx(i,n,o,f,m){R_(i,n,o,f||i.length-1,m||Sx)}function R_(i,n,o,f,m){for(;f>o;){if(f-o>600){var v=f-o+1,w=n-o+1,C=Math.log(v),A=.5*Math.exp(2*C/3),k=.5*Math.sqrt(C*A*(v-A)/v)*(w-v/2<0?-1:1);R_(i,n,Math.max(o,Math.floor(n-w*A/v+k)),Math.min(f,Math.floor(n+(v-w)*A/v+k)),m)}var B=i[n],$=o,G=f;for(Sd(i,o,n),m(i[f],B)>0&&Sd(i,o,f);$<G;){for(Sd(i,$,G),$++,G--;m(i[$],B)<0;)$++;for(;m(i[G],B)>0;)G--}m(i[o],B)===0?Sd(i,o,G):Sd(i,++G,f),G<=n&&(o=G+1),n<=G&&(f=G-1)}}function Sd(i,n,o){var f=i[n];i[n]=i[o],i[o]=f}function Sx(i,n){return i<n?-1:i>n?1:0}function Td(i,n){const o=i.length;if(o<=1)return[i];const f=[];let m,v;for(let w=0;w<o;w++){const C=zn(i[w]);C!==0&&(i[w].area=Math.abs(C),v===void 0&&(v=C<0),v===C<0?(m&&f.push(m),m=[i[w]]):m.push(i[w]))}if(m&&f.push(m),n>1)for(let w=0;w<f.length;w++)f[w].length<=n||(wx(f[w],n,1,f[w].length-1,k_),f[w]=f[w].slice(0,n));return f}function k_(i,n){return n.area-i.area}function I_(i,n,o){const f=o.patternDependencies;let m=!1;for(const v of n){const w=v.paint.get(`${i}-pattern`);w.isConstant()||(m=!0);const C=w.constantOr(null);C&&(m=!0,f[C]=!0)}return m}function z_(i,n,o,f,m){const v=m.patternDependencies;for(const w of n){const C=w.paint.get(`${i}-pattern`).value;if(C.kind!=="constant"){let A=C.evaluate({zoom:f},o,{},m.availableImages);A=A&&A.name?A.name:A,v[A]=!0,o.patterns[w.id]=A}}return o}class Ag{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $t,this.indexArray=new pn,this.indexArray2=new vr,this.programConfigurations=new Cl(n.layers,n.zoom),this.segments=new $i,this.segments2=new $i,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id)),this.projection=n.projection}populate(n,o,f,m){this.hasPattern=I_("fill",this.layers,o);const v=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:C,id:A,index:k,sourceLayerIndex:B}of n){const $=this.layers[0]._featureFilter.needGeometry,G=eo(C,$);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),G,f))continue;const K=v?v.evaluate(G,{},f,o.availableImages):void 0,ee={id:A,properties:C.properties,type:C.type,sourceLayerIndex:B,index:k,geometry:$?G.geometry:la(C,f,m),patterns:{},sortKey:K};w.push(ee)}v&&w.sort(((C,A)=>C.sortKey-A.sortKey));for(const C of w){const{geometry:A,index:k,sourceLayerIndex:B}=C;if(this.hasPattern){const $=z_("fill",this.layers,C,this.zoom,o);this.patternFeatures.push($)}else this.addFeature(C,A,k,f,{},o.availableImages);o.featureIndex.insert(n[k].feature,A,k,B,this.index)}}update(n,o,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,f,m)}addFeatures(n,o,f,m,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,o,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,hs),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,f,m,v,w=[]){for(const C of Td(o,500)){let A=0;for(const ee of C)A+=ee.length;const k=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),B=k.vertexLength,$=[],G=[];for(const ee of C){if(ee.length===0)continue;ee!==C[0]&&G.push($.length/2);const oe=this.segments2.prepareSegment(ee.length,this.layoutVertexArray,this.indexArray2),de=oe.vertexLength;this.layoutVertexArray.emplaceBack(ee[0].x,ee[0].y),this.indexArray2.emplaceBack(de+ee.length-1,de),$.push(ee[0].x),$.push(ee[0].y);for(let Ae=1;Ae<ee.length;Ae++)this.layoutVertexArray.emplaceBack(ee[Ae].x,ee[Ae].y),this.indexArray2.emplaceBack(de+Ae-1,de+Ae),$.push(ee[Ae].x),$.push(ee[Ae].y);oe.vertexLength+=ee.length,oe.primitiveLength+=ee.length}const K=Bu($,G);for(let ee=0;ee<K.length;ee+=3)this.indexArray.emplaceBack(B+K[ee],B+K[ee+1],B+K[ee+2]);k.vertexLength+=A,k.primitiveLength+=K.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,v,w,m)}}ln(Ag,"FillBucket",{omit:["layers","patternFeatures"]});const Tx=new ze({"fill-sort-key":new ye(_t.layout_fill["fill-sort-key"])});var Ex={paint:new ze({"fill-antialias":new ie(_t.paint_fill["fill-antialias"]),"fill-opacity":new ye(_t.paint_fill["fill-opacity"]),"fill-color":new ye(_t.paint_fill["fill-color"]),"fill-outline-color":new ye(_t.paint_fill["fill-outline-color"]),"fill-translate":new ie(_t.paint_fill["fill-translate"]),"fill-translate-anchor":new ie(_t.paint_fill["fill-translate-anchor"]),"fill-pattern":new ye(_t.paint_fill["fill-pattern"])}),layout:Tx};const Ed=Ke([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Rg=Ke([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Cx=Ke([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Mx}=Ed;var jp={},Ax=Se,L_=rh;function rh(i,n,o,f,m){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=f,this._values=m,i.readFields(kg,this,n)}function kg(i,n,o){i==1?n.id=o.readVarint():i==2?(function(f,m){for(var v=f.readVarint()+f.pos;f.pos<v;){var w=m._keys[f.readVarint()],C=m._values[f.readVarint()];m.properties[w]=C}})(o,n):i==3?n.type=o.readVarint():i==4&&(n._geometry=o.pos)}function Rx(i){for(var n,o,f=0,m=0,v=i.length,w=v-1;m<v;w=m++)f+=((o=i[w]).x-(n=i[m]).x)*(n.y+o.y);return f}rh.types=["Unknown","Point","LineString","Polygon"],rh.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,o=i.readVarint()+i.pos,f=1,m=0,v=0,w=0,C=[];i.pos<o;){if(m<=0){var A=i.readVarint();f=7&A,m=A>>3}if(m--,f===1||f===2)v+=i.readSVarint(),w+=i.readSVarint(),f===1&&(n&&C.push(n),n=[]),n.push(new Ax(v,w));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&C.push(n),C},rh.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,o=1,f=0,m=0,v=0,w=1/0,C=-1/0,A=1/0,k=-1/0;i.pos<n;){if(f<=0){var B=i.readVarint();o=7&B,f=B>>3}if(f--,o===1||o===2)(m+=i.readSVarint())<w&&(w=m),m>C&&(C=m),(v+=i.readSVarint())<A&&(A=v),v>k&&(k=v);else if(o!==7)throw new Error("unknown command "+o)}return[w,A,C,k]},rh.prototype.toGeoJSON=function(i,n,o){var f,m,v=this.extent*Math.pow(2,o),w=this.extent*i,C=this.extent*n,A=this.loadGeometry(),k=rh.types[this.type];function B(K){for(var ee=0;ee<K.length;ee++){var oe=K[ee];K[ee]=[360*(oe.x+w)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+C)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var $=[];for(f=0;f<A.length;f++)$[f]=A[f][0];B(A=$);break;case 2:for(f=0;f<A.length;f++)B(A[f]);break;case 3:for(A=(function(K){var ee=K.length;if(ee<=1)return[K];for(var oe,de,Ae=[],Fe=0;Fe<ee;Fe++){var Re=Rx(K[Fe]);Re!==0&&(de===void 0&&(de=Re<0),de===Re<0?(oe&&Ae.push(oe),oe=[K[Fe]]):oe.push(K[Fe]))}return oe&&Ae.push(oe),Ae})(A),f=0;f<A.length;f++)for(m=0;m<A[f].length;m++)B(A[f][m])}A.length===1?A=A[0]:k="Multi"+k;var G={type:"Feature",geometry:{type:k,coordinates:A},properties:this.properties};return"id"in this&&(G.id=this.id),G};var kx=L_,ci=Ig;function Ig(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(vS,this,n),this.length=this._features.length}function vS(i,n,o){i===15?n.version=o.readVarint():i===1?n.name=o.readString():i===5?n.extent=o.readVarint():i===2?n._features.push(o.pos):i===3?n._keys.push(o.readString()):i===4&&n._values.push((function(f){for(var m=null,v=f.readVarint()+f.pos;f.pos<v;){var w=f.readVarint()>>3;m=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return m})(o))}Ig.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new kx(this._pbf,n,this.extent,this._keys,this._values)};var Ix=ci;function xS(i,n,o){if(i===3){var f=new Ix(o,o.readVarint()+o.pos);f.length&&(n[f.name]=f)}}var P_=jp.VectorTile=function(i,n){this.layers=i.readFields(xS,{},n)},zg=jp.VectorTileFeature=L_;function ih(i,n,o,f){const m=[],v=f===0?(w,C,A,k,B,$)=>{w.push(new ue($,A+($-C)/(k-C)*(B-A)))}:(w,C,A,k,B,$)=>{w.push(new ue(C+($-A)/(B-A)*(k-C),$))};for(const w of i){const C=[];for(const A of w){if(A.length<=2)continue;const k=[];for(let G=0;G<A.length-1;G++){const K=A[G].x,ee=A[G].y,oe=A[G+1].x,de=A[G+1].y,Ae=f===0?K:ee,Fe=f===0?oe:de;Ae<n?Fe>n&&v(k,K,ee,oe,de,n):Ae>o?Fe<o&&v(k,K,ee,oe,de,o):k.push(A[G]),Fe<n&&Ae>=n&&v(k,K,ee,oe,de,n),Fe>o&&Ae<=o&&v(k,K,ee,oe,de,o)}let B=A[A.length-1];const $=f===0?B.x:B.y;$>=n&&$<=o&&k.push(B),k.length&&(B=k[k.length-1],k[0].x===B.x&&k[0].y===B.y||k.push(k[0]),C.push(k))}C.length&&m.push(C)}return m}jp.VectorTileLayer=ci;const Cd=zg.types,D_=Math.pow(2,13);function Fu(i,n,o,f,m,v,w,C){i.emplaceBack((n<<1)+w,(o<<1)+v,(Math.floor(f*D_)<<1)+m,Math.round(C))}function ah(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class Nc{constructor(){this.acc=new ue(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ue(n.x,n.y),this.max=new ue(n.x,n.y))}append(n,o){this.currentPolyCount.edges++,this.acc._add(n);const f=this.min,m=this.max;n.x<f.x?f.x=n.x:n.x>m.x&&(m.x=n.x),n.y<f.y?f.y=n.y:n.y>m.y&&(m.y=n.y),((n.x===0||n.x===En)&&n.x===o.x)!=((n.y===0||n.y===En)&&n.y===o.y)&&this.processBorderOverlap(n,o),o.x<0!=n.x<0&&this.addBorderIntersection(0,Cr(o.y,n.y,(0-o.x)/(n.x-o.x))),o.x>En!=n.x>En&&this.addBorderIntersection(1,Cr(o.y,n.y,(En-o.x)/(n.x-o.x))),o.y<0!=n.y<0&&this.addBorderIntersection(2,Cr(o.x,n.x,(0-o.y)/(n.y-o.y))),o.y>En!=n.y>En&&this.addBorderIntersection(3,Cr(o.x,n.x,(En-o.y)/(n.y-o.y)))}addBorderIntersection(n,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[n];o<f[0]&&(f[0]=o),o>f[1]&&(f[1]=o)}processBorderOverlap(n,o){if(n.x===o.x){if(n.y===o.y)return;const f=n.x===0?0:1;this.addBorderIntersection(f,o.y),this.addBorderIntersection(f,n.y)}else{const f=n.y===0?2:3;this.addBorderIntersection(f,o.x),this.addBorderIntersection(f,n.x)}}centroid(){const n=this.polyCount.reduce(((o,f)=>o+f.edges),0);return n!==0?this.acc.div(n)._round():new ue(0,0)}span(){return new ue(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((n,o)=>n+ +(o[0]!==Number.MAX_VALUE)),0)}}class Vo{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new vt,this.centroidVertexArray=new jo,this.indexArray=new pn,this.programConfigurations=new Cl(n.layers,n.zoom),this.segments=new $i,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id)),this.enableTerrain=n.enableTerrain}populate(n,o,f,m){this.features=[],this.hasPattern=I_("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=(function(v){const w=Math.exp(Math.PI*(1-v.y/(1<<v.z)*2));return 80150034*w/(w*w+1)/En/(1<<v.z)})(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:v,id:w,index:C,sourceLayerIndex:A}of n){const k=this.layers[0]._featureFilter.needGeometry,B=eo(v,k);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),B,f))continue;const $={id:w,sourceLayerIndex:A,index:C,geometry:k?B.geometry:la(v,f,m),properties:v.properties,type:v.type,patterns:{}},G=this.layoutVertexArray.length;this.hasPattern?this.features.push(z_("fill-extrusion",this.layers,$,this.zoom,o)):this.addFeature($,$.geometry,C,f,{},o.availableImages,m),o.featureIndex.insert(v,$.geometry,C,A,this.index,G)}this.sortBorders()}addFeatures(n,o,f,m,v){for(const w of this.features){const{geometry:C}=w;this.addFeature(w,C,w.index,o,f,m,v)}this.sortBorders()}update(n,o,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Mx),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,Cx.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Rg.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,f,m,v,w,C){const A=[new ue(0,0),new ue(En,En)],k=C.projection,B=k.name==="globe",$=this.enableTerrain&&!B?new Nc:null,G=Cd[n.type]==="Polygon";B&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new jt);const K=Td(o,500);for(let Ae=K.length-1;Ae>=0;Ae--){const Fe=K[Ae];(Fe.length===0||(ee=Fe[0]).every((Re=>Re.x<=0))||ee.every((Re=>Re.x>=En))||ee.every((Re=>Re.y<=0))||ee.every((Re=>Re.y>=En)))&&K.splice(Ae,1)}var ee;let oe;if(B)oe=Lg(K,A,m);else{oe=[];for(const Ae of K)oe.push({polygon:Ae,bounds:A})}const de=G?this.edgeRadius:0;for(const{polygon:Ae,bounds:Fe}of oe){let Re=0,De=0;for(const Ne of Ae)G&&!Ne[0].equals(Ne[Ne.length-1])&&Ne.push(Ne[0]),De+=G?Ne.length-1:Ne.length;const $e=this.segments.prepareSegment((G?5:4)*De,this.layoutVertexArray,this.indexArray);if(G){const Ne=[],ut=[];Re=$e.vertexLength;for(const bt of Ae){let Gt,ht;bt.length&&bt!==Ae[0]&&ut.push(Ne.length/2),Gt=bt[1].sub(bt[0])._perp()._unit();for(let It=1;It<bt.length;It++){const zt=bt[It],Ut=bt[It===bt.length-1?1:It+1];let{x:Ht,y:xt}=zt;if(de){ht=Ut.sub(zt)._perp()._unit();const an=Gt.add(ht)._unit(),hn=de*Math.min(4,1/(Gt.x*an.x+Gt.y*an.y));Ht+=hn*an.x,xt+=hn*an.y,Gt=ht}Fu(this.layoutVertexArray,Ht,xt,0,0,1,1,0),$e.vertexLength++,Ne.push(zt.x,zt.y),B&&ah(this.layoutVertexExtArray,k.projectTilePoint(Ht,xt,m),k.upVector(m,Ht,xt))}}const st=Bu(Ne,ut);for(let bt=0;bt<st.length;bt+=3)this.indexArray.emplaceBack(Re+st[bt],Re+st[bt+2],Re+st[bt+1]),$e.primitiveLength++}for(const Ne of Ae){$&&Ne.length&&$.startRing(Ne[0]);let ut,st,bt,Gt=Ne.length>4&&F_(Ne[Ne.length-2],Ne[0],Ne[1]),ht=de?bS(Ne[Ne.length-2],Ne[0],Ne[1],de):0;st=Ne[1].sub(Ne[0])._perp()._unit();let It=!0;for(let zt=1,Ut=0;zt<Ne.length;zt++){let Ht=Ne[zt-1],xt=Ne[zt];const an=Ne[zt===Ne.length-1?1:zt+1];if($&&G&&$.currentPolyCount.top++,B_(xt,Ht,Fe)){de&&(st=an.sub(xt)._perp()._unit(),It=!It);continue}$&&$.append(xt,Ht);const hn=xt.sub(Ht)._perp(),on=hn.x/(Math.abs(hn.x)+Math.abs(hn.y)),Kn=hn.y>0?1:0,Zt=Ht.dist(xt);if(Ut+Zt>32768&&(Ut=0),de){bt=an.sub(xt)._perp()._unit();let Jn=O_(Ht,xt,an,Md(st,bt),de);isNaN(Jn)&&(Jn=0);const Un=xt.sub(Ht)._unit();Ht=Ht.add(Un.mult(ht))._round(),xt=xt.add(Un.mult(-Jn))._round(),ht=Jn,st=bt}const An=$e.vertexLength,Qn=Ne.length>4&&F_(Ht,xt,an);let Nr=j_(Ut,Gt,It);if(Fu(this.layoutVertexArray,Ht.x,Ht.y,on,Kn,0,0,Nr),Fu(this.layoutVertexArray,Ht.x,Ht.y,on,Kn,0,1,Nr),Ut+=Zt,Nr=j_(Ut,Qn,!It),Gt=Qn,Fu(this.layoutVertexArray,xt.x,xt.y,on,Kn,0,0,Nr),Fu(this.layoutVertexArray,xt.x,xt.y,on,Kn,0,1,Nr),$e.vertexLength+=4,this.indexArray.emplaceBack(An+0,An+1,An+2),this.indexArray.emplaceBack(An+1,An+3,An+2),$e.primitiveLength+=2,de){const Jn=Re+(zt===1?Ne.length-2:zt-2),Un=zt===1?Re:Jn+1;if(this.indexArray.emplaceBack(An+1,Jn,An+3),this.indexArray.emplaceBack(Jn,Un,An+3),$e.primitiveLength+=2,ut===void 0&&(ut=An),!B_(an,Ne[zt],Fe)){const Ii=zt===Ne.length-1?ut:$e.vertexLength;this.indexArray.emplaceBack(An+2,An+3,Ii),this.indexArray.emplaceBack(An+3,Ii+1,Ii),this.indexArray.emplaceBack(An+3,Un,Ii+1),$e.primitiveLength+=3}It=!It}if(B){const Jn=this.layoutVertexExtArray,Un=k.projectTilePoint(Ht.x,Ht.y,m),Ii=k.projectTilePoint(xt.x,xt.y,m),rr=k.upVector(m,Ht.x,Ht.y),ir=k.upVector(m,xt.x,xt.y);ah(Jn,Un,rr),ah(Jn,Un,rr),ah(Jn,Ii,ir),ah(Jn,Ii,ir)}}G&&(Re+=Ne.length-1)}}if($&&$.polyCount.length>0){if($.borders){$.vertexArrayOffset=this.centroidVertexArray.length;const Ae=$.borders,Fe=this.featuresOnBorder.push($)-1;for(let Re=0;Re<4;Re++)Ae[Re][0]!==Number.MAX_VALUE&&this.borders[Re].push(Fe)}this.encodeCentroid($.borders?void 0:$.centroid(),$)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,v,w,m)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort(((o,f)=>this.featuresOnBorder[o].borders[n][0]-this.featuresOnBorder[f].borders[n][0]))}encodeCentroid(n,o,f=!0){let m,v;if(n)if(n.y!==0){const C=o.span()._mult(this.tileToMeter);m=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(C.x/10)),v=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(C.y/10))}else m=Math.ceil(7*(n.x+450)),v=0;else m=0,v=+f;let w=f?this.centroidVertexArray.length:o.vertexArrayOffset;for(const C of o.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*C.edges+C.top);for(let A=0;A<C.top;A++)this.centroidVertexArray.emplace(w++,m,v);for(let A=0;A<2*C.edges;A++)this.centroidVertexArray.emplace(w++,0,v),this.centroidVertexArray.emplace(w++,m,v)}}}function Md(i,n){const o=i.add(n)._unit();return i.x*o.x+i.y*o.y}function bS(i,n,o,f){const m=n.sub(i)._perp()._unit(),v=o.sub(n)._perp()._unit();return O_(i,n,o,Md(m,v),f)}function O_(i,n,o,f,m){const v=Math.sqrt(1-f*f);return Math.min(i.dist(n)/3,n.dist(o)/3,m*v/f)}function B_(i,n,o){return i.x<o[0].x&&n.x<o[0].x||i.x>o[1].x&&n.x>o[1].x||i.y<o[0].y&&n.y<o[0].y||i.y>o[1].y&&n.y>o[1].y}function F_(i,n,o){if(i.x<0||i.x>=En||n.x<0||n.x>=En||o.x<0||o.x>=En)return!1;const f=o.sub(n),m=f.perp(),v=i.sub(n);return(f.x*v.x+f.y*v.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(v.x*v.x+v.y*v.y))>-.866&&m.x*v.x+m.y*v.y<0}function j_(i,n,o){const f=n?2|i:-3&i;return o?1|f:-2&f}function zx(){const i=Math.PI/32,n=Math.tan(i),o=yd;return o*Math.sqrt(1+2*n*n)-o}function Lg(i,n,o){const f=1<<o.z,m=Uo(o.x/f),v=Uo((o.x+1)/f),w=Vr(o.y/f),C=Vr((o.y+1)/f);return(function(A,k,B,$,G=0,K){const ee=[];if(!A.length||!B||!$)return ee;const oe=(Ne,ut)=>{for(const st of Ne)ee.push({polygon:st,bounds:ut})},de=Math.ceil(Math.log2(B)),Ae=Math.ceil(Math.log2($)),Fe=de-Ae,Re=[];for(let Ne=0;Ne<Math.abs(Fe);Ne++)Re.push(Fe>0?0:1);for(let Ne=0;Ne<Math.min(de,Ae);Ne++)Re.push(0),Re.push(1);let De=A;if(De=ih(De,k[0].y-G,k[1].y+G,1),De=ih(De,k[0].x-G,k[1].x+G,0),!De.length)return ee;const $e=[];for(Re.length?$e.push({polygons:De,bounds:k,depth:0}):oe(De,k);$e.length;){const Ne=$e.pop(),ut=Ne.depth,st=Re[ut],bt=Ne.bounds[0],Gt=Ne.bounds[1],ht=st===0?bt.x:bt.y,It=st===0?Gt.x:Gt.y,zt=K?K(st,ht,It):.5*(ht+It),Ut=ih(Ne.polygons,ht-G,zt+G,st),Ht=ih(Ne.polygons,zt-G,It+G,st);if(Ut.length){const xt=[bt,new ue(st===0?zt:Gt.x,st===1?zt:Gt.y)];Re.length>ut+1?$e.push({polygons:Ut,bounds:xt,depth:ut+1}):oe(Ut,xt)}if(Ht.length){const xt=[new ue(st===0?zt:bt.x,st===1?zt:bt.y),Gt];Re.length>ut+1?$e.push({polygons:Ht,bounds:xt,depth:ut+1}):oe(Ht,xt)}}return ee})(i,n,Math.ceil((v-m)/11.25),Math.ceil((w-C)/11.25),1,((A,k,B)=>{if(A===0)return .5*(k+B);{const $=Vr((o.y+k/En)/f);return(_i(.5*(Vr((o.y+B/En)/f)+$))*f-o.y)*En}}))}ln(Vo,"FillExtrusionBucket",{omit:["layers","features"]}),ln(Nc,"PartMetadata");const Lx=new ze({"fill-extrusion-edge-radius":new ie(_t["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Px={paint:new ze({"fill-extrusion-opacity":new ie(_t["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ye(_t["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ie(_t["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ie(_t["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ye(_t["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ye(_t["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ye(_t["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ie(_t["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ie(_t["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ie(_t["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new ie(_t["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Lx};function Dx(i,n,o){var f=2*Math.PI*6378137/256/Math.pow(2,o);return[i*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class Ad{constructor(n,o,f){this.z=n,this.x=o,this.y=f,this.key=Np(0,n,n,o,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o){const f=(function(v,w,C){var A=Dx(256*v,256*(w=Math.pow(2,C)-w-1),C),k=Dx(256*(v+1),256*(w+1),C);return A[0]+","+A[1]+","+k[0]+","+k[1]})(this.x,this.y,this.z),m=(function(v,w,C){let A,k="";for(let B=v;B>0;B--)A=1<<B-1,k+=(w&A?1:0)+(C&A?2:0);return k})(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",m).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Pg{constructor(n,o){this.wrap=n,this.canonical=o,this.key=Np(n,o.z,o.z,o.x,o.y)}}class ho{constructor(n,o,f,m,v){this.overscaledZ=n,this.wrap=o,this.canonical=new Ad(f,+m,+v),this.key=o===0&&n===f?this.canonical.key:Np(o,n,f,m,v)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const o=this.canonical.z-n;return n>this.canonical.z?new ho(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ho(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(n,o=!0){if(this.overscaledZ===n&&o)return this.key;if(n>this.canonical.z)return Np(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-n;return Np(this.wrap*+o,n,n,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const o=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new ho(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new ho(o,this.wrap,o,f,m),new ho(o,this.wrap,o,f+1,m),new ho(o,this.wrap,o,f,m+1),new ho(o,this.wrap,o,f+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ho(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ho(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Pg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Np(i,n,o,f,m){const v=1<<Math.min(o,22);let w=v*(m%v)+f%v;return i&&o<22&&(w+=v*v*((i<0?-2*i-1:2*i)%(1<<2*(22-o)))),16*(32*w+o)+(n-o)}ln(Ad,"CanonicalTileID"),ln(ho,"OverscaledTileID",{omit:["projMatrix"]});class Ll extends ue{constructor(n,o,f){super(n,o),this.z=f}}function Up(i,n){return i.x*n.x+i.y*n.y}function N_(i,n){if(i.length===1){let o=0;const f=n[o++];let m;for(;!m||f.equals(m);)if(m=n[o++],!m)return 1/0;for(;o<n.length;o++){const v=n[o],w=i[0],C=m.sub(f),A=v.sub(f),k=w.sub(f),B=Up(C,C),$=Up(C,A),G=Up(A,A),K=Up(k,C),ee=Up(k,A),oe=B*G-$*$,de=(G*K-$*ee)/oe,Ae=(B*ee-$*K)/oe,Fe=f.z*(1-de-Ae)+m.z*de+v.z*Ae;if(isFinite(Fe))return Fe}return 1/0}{let o=1/0;for(const f of n)o=Math.min(o,f.z);return o}}function Ir(i,n,o,f,m,v,w,C){const A=w*m.getElevationAt(i,n,!0,!0),k=v[0]!==0,B=k?v[1]===0?w*(v[0]/7-450):w*(function($,G,K){const ee=Math.floor(G[0]/8),oe=Math.floor(G[1]/8),de=10*(G[0]-8*ee),Ae=10*(G[1]-8*oe),Fe=$.getElevationAt(ee,oe,!0,!0),Re=$.getMeterToDEM(K),De=Math.floor(.5*(de*Re-1)),$e=Math.floor(.5*(Ae*Re-1)),Ne=$.tileCoordToPixel(ee,oe),ut=2*De+1,st=2*$e+1,bt=(function(Ht,xt,an,hn,on){return[Ht.getElevationAtPixel(xt,an,!0),Ht.getElevationAtPixel(xt+on,an,!0),Ht.getElevationAtPixel(xt,an+on,!0),Ht.getElevationAtPixel(xt+hn,an+on,!0)]})($,Ne.x-De,Ne.y-$e,ut,st),Gt=Math.abs(bt[0]-bt[1]),ht=Math.abs(bt[2]-bt[3]),It=Math.abs(bt[0]-bt[2])+Math.abs(bt[1]-bt[3]),zt=Math.min(.25,.5*Re*(Gt+ht)/ut),Ut=Math.min(.25,.5*Re*It/st);return Fe+Math.max(zt*de,Ut*Ae)})(m,v,C):A;return{base:A+(o===0)?-1:o,top:k?Math.max(B+f,A+o+2):A+f}}const U_=Ke([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Dg}=U_,$_=Ke([{name:"a_packed",components:4,type:"Float32"}]),{members:Ox}=$_,q_=zg.types,$p=Math.cos(Math.PI/180*37.5);class oh{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((o=>{this.gradients[o.id]={}})),this.layoutVertexArray=new lt,this.layoutVertexArray2=new Ft,this.indexArray=new pn,this.programConfigurations=new Cl(n.layers,n.zoom),this.segments=new $i,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(n,o,f,m){this.hasPattern=I_("line",this.layers,o);const v=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:B,id:$,index:G,sourceLayerIndex:K}of n){const ee=this.layers[0]._featureFilter.needGeometry,oe=eo(B,ee);if(!this.layers[0]._featureFilter.filter(new j(this.zoom),oe,f))continue;const de=v?v.evaluate(oe,{},f):void 0,Ae={id:$,properties:B.properties,type:B.type,sourceLayerIndex:K,index:G,geometry:ee?oe.geometry:la(B,f,m),patterns:{},sortKey:de};w.push(Ae)}v&&w.sort(((B,$)=>B.sortKey-$.sortKey));const{lineAtlas:C,featureIndex:A}=o,k=this.addConstantDashes(C);for(const B of w){const{geometry:$,index:G,sourceLayerIndex:K}=B;if(k&&this.addFeatureDashes(B,C),this.hasPattern){const ee=z_("line",this.layers,B,this.zoom,o);this.patternFeatures.push(ee)}else this.addFeature(B,$,G,f,C.positions,o.availableImages);A.insert(n[G].feature,$,G,K,this.index)}}addConstantDashes(n){let o=!1;for(const f of this.layers){const m=f.paint.get("line-dasharray").value,v=f.layout.get("line-cap").value;if(m.kind!=="constant"||v.kind!=="constant")o=!0;else{const w=v.value,C=m.value;if(!C)continue;n.addDash(C,w)}}return o}addFeatureDashes(n,o){const f=this.zoom;for(const m of this.layers){const v=m.paint.get("line-dasharray").value,w=m.layout.get("line-cap").value;if(v.kind==="constant"&&w.kind==="constant")continue;let C,A;if(v.kind==="constant"){if(C=v.value,!C)continue}else C=v.evaluate({zoom:f},n);A=w.kind==="constant"?w.value:w.evaluate({zoom:f},n),o.addDash(C,A),n.patterns[m.id]=o.getKey(C,A)}}update(n,o,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,f,m)}addFeatures(n,o,f,m,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,o,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Ox)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Dg),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,f,m,v,w){const C=this.layers[0].layout,A=C.get("line-join").evaluate(n,{}),k=C.get("line-cap").evaluate(n,{}),B=C.get("line-miter-limit"),$=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const G of o)this.addLine(G,n,A,k,B,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,v,w,m)}addLine(n,o,f,m,v,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ae=0;Ae<n.length-1;Ae++)this.totalDistance+=n[Ae].dist(n[Ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C=q_[o.type]==="Polygon";let A=n.length;for(;A>=2&&n[A-1].equals(n[A-2]);)A--;let k=0;for(;k<A-1&&n[k].equals(n[k+1]);)k++;if(A<(C?3:2))return;f==="bevel"&&(v=1.05);const B=this.overscaling<=16?15*En/(512*this.overscaling):0,$=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let G,K,ee,oe,de;this.e1=this.e2=-1,C&&(G=n[A-2],de=n[k].sub(G)._unit()._perp());for(let Ae=k;Ae<A;Ae++){if(ee=Ae===A-1?C?n[k+1]:void 0:n[Ae+1],ee&&n[Ae].equals(ee))continue;de&&(oe=de),G&&(K=G),G=n[Ae],de=ee?ee.sub(G)._unit()._perp():oe,oe=oe||de;let Fe=oe.add(de);Fe.x===0&&Fe.y===0||Fe._unit();const Re=oe.x*de.x+oe.y*de.y,De=Fe.x*de.x+Fe.y*de.y,$e=De!==0?1/De:1/0,Ne=2*Math.sqrt(2-2*De),ut=De<$p&&K&&ee,st=oe.x*de.y-oe.y*de.x>0;if(ut&&Ae>k){const ht=G.dist(K);if(ht>2*B){const It=G.sub(G.sub(K)._mult(B/ht)._round());this.updateDistance(K,It),this.addCurrentVertex(It,oe,0,0,$),K=It}}const bt=K&&ee;let Gt=bt?f:C?"butt":m;if(bt&&Gt==="round"&&($e<w?Gt="miter":$e<=2&&(Gt="fakeround")),Gt==="miter"&&$e>v&&(Gt="bevel"),Gt==="bevel"&&($e>2&&(Gt="flipbevel"),$e<v&&(Gt="miter")),K&&this.updateDistance(K,G),Gt==="miter")Fe._mult($e),this.addCurrentVertex(G,Fe,0,0,$);else if(Gt==="flipbevel"){if($e>100)Fe=de.mult(-1);else{const ht=$e*oe.add(de).mag()/oe.sub(de).mag();Fe._perp()._mult(ht*(st?-1:1))}this.addCurrentVertex(G,Fe,0,0,$),this.addCurrentVertex(G,Fe.mult(-1),0,0,$)}else if(Gt==="bevel"||Gt==="fakeround"){const ht=-Math.sqrt($e*$e-1),It=st?ht:0,zt=st?0:ht;if(K&&this.addCurrentVertex(G,oe,It,zt,$),Gt==="fakeround"){const Ut=Math.round(180*Ne/Math.PI/20);for(let Ht=1;Ht<Ut;Ht++){let xt=Ht/Ut;if(xt!==.5){const hn=xt-.5;xt+=xt*hn*(xt-1)*((1.0904+Re*(Re*(3.55645-1.43519*Re)-3.2452))*hn*hn+(.848013+Re*(.215638*Re-1.06021)))}const an=de.sub(oe)._mult(xt)._add(oe)._unit()._mult(st?-1:1);this.addHalfVertex(G,an.x,an.y,!1,st,0,$)}}ee&&this.addCurrentVertex(G,de,-It,-zt,$)}else if(Gt==="butt")this.addCurrentVertex(G,Fe,0,0,$);else if(Gt==="square"){const ht=K?1:-1;K||this.addCurrentVertex(G,Fe,ht,ht,$),this.addCurrentVertex(G,Fe,0,0,$),K&&this.addCurrentVertex(G,Fe,ht,ht,$)}else Gt==="round"&&(K&&(this.addCurrentVertex(G,oe,0,0,$),this.addCurrentVertex(G,oe,1,1,$,!0)),ee&&(this.addCurrentVertex(G,de,-1,-1,$,!0),this.addCurrentVertex(G,de,0,0,$)));if(ut&&Ae<A-1){const ht=G.dist(ee);if(ht>2*B){const It=G.add(ee.sub(G)._mult(B/ht)._round());this.updateDistance(G,It),this.addCurrentVertex(It,de,0,0,$),G=It}}}}addCurrentVertex(n,o,f,m,v,w=!1){const C=o.y*m-o.x,A=-o.y-o.x*m;this.addHalfVertex(n,o.x+o.y*f,o.y-o.x*f,w,!1,f,v),this.addHalfVertex(n,C,A,w,!0,-m,v)}addHalfVertex({x:n,y:o},f,m,v,w,C,A){this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(o<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const k=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),A.primitiveLength++),w?this.e2=k:this.e1=k}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}}ln(oh,"LineBucket",{omit:["layers","patternFeatures"]});const wS=new ze({"line-cap":new ye(_t.layout_line["line-cap"]),"line-join":new ye(_t.layout_line["line-join"]),"line-miter-limit":new ie(_t.layout_line["line-miter-limit"]),"line-round-limit":new ie(_t.layout_line["line-round-limit"]),"line-sort-key":new ye(_t.layout_line["line-sort-key"])});var V_={paint:new ze({"line-opacity":new ye(_t.paint_line["line-opacity"]),"line-color":new ye(_t.paint_line["line-color"]),"line-translate":new ie(_t.paint_line["line-translate"]),"line-translate-anchor":new ie(_t.paint_line["line-translate-anchor"]),"line-width":new ye(_t.paint_line["line-width"]),"line-gap-width":new ye(_t.paint_line["line-gap-width"]),"line-offset":new ye(_t.paint_line["line-offset"]),"line-blur":new ye(_t.paint_line["line-blur"]),"line-dasharray":new ye(_t.paint_line["line-dasharray"]),"line-pattern":new ye(_t.paint_line["line-pattern"]),"line-gradient":new ke(_t.paint_line["line-gradient"]),"line-trim-offset":new ie(_t.paint_line["line-trim-offset"])}),layout:wS};const Bx=new class extends ye{possiblyEvaluate(i,n){return n=new j(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(i,n)}evaluate(i,n,o,f){return n=nt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(i,n,o,f)}}(V_.paint.properties["line-width"].specification);function Fx(i,n){return n>0?n+2*i:i}Bx.useIntegerZoom=!0;const jx=Ke([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Nx=Ke([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),ki=Ke([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ke([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const G_=Ke([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ro=Ke([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ke([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ux=Ke([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$x=Ke([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ke([{name:"triangle",components:3,type:"Uint16"}]),Ke([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ke([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ke([{type:"Float32",name:"offsetX"}]),Ke([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Pa=24;const ds=128;function qp(i,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new j(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=o;let v=0;for(;v<f.length&&f[v]<=i;)v++;v=Math.max(0,v-1);let w=v;for(;w<f.length&&f[w]<i+1;)w++;w=Math.min(f.length-1,w);const C=f[v],A=f[w];return o.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:A,interpolationType:m}:{kind:"camera",minZoom:C,maxZoom:A,minSize:o.evaluate(new j(C)),maxSize:o.evaluate(new j(A)),interpolationType:m}}}function sh(i,{uSize:n,uSizeT:o},{lowerSize:f,upperSize:m}){return i.kind==="source"?f/ds:i.kind==="composite"?Cr(f/ds,m/ds,o):n}function lh(i,n){let o=0,f=0;if(i.kind==="constant")f=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:w}=i,C=m?Be(ts.interpolationFactor(m,n,v,w),0,1):0;i.kind==="camera"?f=Cr(i.minSize,i.maxSize,C):o=C}return{uSizeT:o,uSize:f}}var qx=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ds,evaluateSizeForFeature:sh,evaluateSizeForZoom:lh,getSizeData:qp});function H_(i,n,o){return i.sections.forEach((f=>{f.text=(function(m,v,w){const C=v.layout.get("text-transform").evaluate(w,{});return C==="uppercase"?m=m.toLocaleUpperCase():C==="lowercase"&&(m=m.toLocaleLowerCase()),D.applyArabicShaping&&(m=D.applyArabicShaping(m)),m})(f.text,n,o)})),i}const ch={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function SS(i){return i==="︶"||i==="﹈"||i==="︸"||i==="﹄"||i==="﹂"||i==="︾"||i==="︼"||i==="︺"||i==="︘"||i==="﹀"||i==="︐"||i==="︓"||i==="︔"||i==="｀"||i==="￣"||i==="︑"||i==="︒"}function Vx(i){return i==="︵"||i==="﹇"||i==="︷"||i==="﹃"||i==="﹁"||i==="︽"||i==="︻"||i==="︹"||i==="︗"||i==="︿"}var Gx=ai,W_=function(i,n,o,f,m){var v,w,C=8*m-f-1,A=(1<<C)-1,k=A>>1,B=-7,$=m-1,G=-1,K=i[n+$];for($+=G,v=K&(1<<-B)-1,K>>=-B,B+=C;B>0;v=256*v+i[n+$],$+=G,B-=8);for(w=v&(1<<-B)-1,v>>=-B,B+=f;B>0;w=256*w+i[n+$],$+=G,B-=8);if(v===0)v=1-k;else{if(v===A)return w?NaN:1/0*(K?-1:1);w+=Math.pow(2,f),v-=k}return(K?-1:1)*w*Math.pow(2,v-f)},Hx=function(i,n,o,f,m,v){var w,C,A,k=8*v-m-1,B=(1<<k)-1,$=B>>1,G=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=0,ee=1,oe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(C=isNaN(n)?1:0,w=B):(w=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-w))<1&&(w--,A*=2),(n+=w+$>=1?G/A:G*Math.pow(2,1-$))*A>=2&&(w++,A/=2),w+$>=B?(C=0,w=B):w+$>=1?(C=(n*A-1)*Math.pow(2,m),w+=$):(C=n*Math.pow(2,$-1)*Math.pow(2,m),w=0));m>=8;i[o+K]=255&C,K+=ee,C/=256,m-=8);for(w=w<<m|C,k+=m;k>0;i[o+K]=255&w,K+=ee,w/=256,k-=8);i[o+K-ee]|=128*oe};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function ai(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}ai.Varint=0,ai.Fixed64=1,ai.Bytes=2,ai.Fixed32=5;var Pl=4294967296,Z_=1/Pl,X_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function il(i){return i.type===ai.Bytes?i.readVarint()+i.pos:i.pos+1}function Rd(i,n,o){return o?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function Wx(i,n,o){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(f);for(var m=o.pos-1;m>=i;m--)o.buf[m+f]=o.buf[m]}function Zx(i,n){for(var o=0;o<i.length;o++)n.writeVarint(i[o])}function Y_(i,n){for(var o=0;o<i.length;o++)n.writeSVarint(i[o])}function K_(i,n){for(var o=0;o<i.length;o++)n.writeFloat(i[o])}function TS(i,n){for(var o=0;o<i.length;o++)n.writeDouble(i[o])}function Rs(i,n){for(var o=0;o<i.length;o++)n.writeBoolean(i[o])}function Q_(i,n){for(var o=0;o<i.length;o++)n.writeFixed32(i[o])}function Xx(i,n){for(var o=0;o<i.length;o++)n.writeSFixed32(i[o])}function Yx(i,n){for(var o=0;o<i.length;o++)n.writeFixed64(i[o])}function Kx(i,n){for(var o=0;o<i.length;o++)n.writeSFixed64(i[o])}function ju(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function io(i,n,o){i[o]=n,i[o+1]=n>>>8,i[o+2]=n>>>16,i[o+3]=n>>>24}function J_(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}ai.prototype={destroy:function(){this.buf=null},readFields:function(i,n,o){for(o=o||this.length;this.pos<o;){var f=this.readVarint(),m=f>>3,v=this.pos;this.type=7&f,i(m,n,this),this.pos===v&&this.skip(f)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=ju(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=J_(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=ju(this.buf,this.pos)+ju(this.buf,this.pos+4)*Pl;return this.pos+=8,i},readSFixed64:function(){var i=ju(this.buf,this.pos)+J_(this.buf,this.pos+4)*Pl;return this.pos+=8,i},readFloat:function(){var i=W_(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=W_(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,o,f=this.buf;return n=127&(o=f[this.pos++]),o<128?n:(n|=(127&(o=f[this.pos++]))<<7,o<128?n:(n|=(127&(o=f[this.pos++]))<<14,o<128?n:(n|=(127&(o=f[this.pos++]))<<21,o<128?n:(function(m,v,w){var C,A,k=w.buf;if(C=(112&(A=k[w.pos++]))>>4,A<128||(C|=(127&(A=k[w.pos++]))<<3,A<128)||(C|=(127&(A=k[w.pos++]))<<10,A<128)||(C|=(127&(A=k[w.pos++]))<<17,A<128)||(C|=(127&(A=k[w.pos++]))<<24,A<128)||(C|=(1&(A=k[w.pos++]))<<31,A<128))return Rd(m,C,v);throw new Error("Expected varint not more than 10 bytes")})(n|=(15&(o=f[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&X_?(function(o,f,m){return X_.decode(o.subarray(f,m))})(this.buf,n,i):(function(o,f,m){for(var v="",w=f;w<m;){var C,A,k,B=o[w],$=null,G=B>239?4:B>223?3:B>191?2:1;if(w+G>m)break;G===1?B<128&&($=B):G===2?(192&(C=o[w+1]))==128&&($=(31&B)<<6|63&C)<=127&&($=null):G===3?(A=o[w+2],(192&(C=o[w+1]))==128&&(192&A)==128&&(($=(15&B)<<12|(63&C)<<6|63&A)<=2047||$>=55296&&$<=57343)&&($=null)):G===4&&(A=o[w+2],k=o[w+3],(192&(C=o[w+1]))==128&&(192&A)==128&&(192&k)==128&&(($=(15&B)<<18|(63&C)<<12|(63&A)<<6|63&k)<=65535||$>=1114112)&&($=null)),$===null?($=65533,G=1):$>65535&&($-=65536,v+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),v+=String.fromCharCode($),w+=G}return v})(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==ai.Bytes)return i.push(this.readVarint(n));var o=il(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==ai.Bytes)return i.push(this.readSVarint());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==ai.Bytes)return i.push(this.readBoolean());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==ai.Bytes)return i.push(this.readFloat());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==ai.Bytes)return i.push(this.readDouble());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==ai.Bytes)return i.push(this.readFixed32());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==ai.Bytes)return i.push(this.readSFixed32());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==ai.Bytes)return i.push(this.readFixed64());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==ai.Bytes)return i.push(this.readSFixed64());var n=il(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===ai.Varint)for(;this.buf[this.pos++]>127;);else if(n===ai.Bytes)this.pos=this.readVarint()+this.pos;else if(n===ai.Fixed32)this.pos+=4;else{if(n!==ai.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var o=new Uint8Array(n);o.set(this.buf),this.buf=o,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),io(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),io(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),io(this.buf,-1&i,this.pos),io(this.buf,Math.floor(i*Z_),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),io(this.buf,-1&i,this.pos),io(this.buf,Math.floor(i*Z_),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?(function(n,o){var f,m;if(n>=0?(f=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),(function(v,w,C){C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,C.buf[C.pos]=127&(v>>>=7)})(f,0,o),(function(v,w){var C=(7&v)<<4;w.buf[w.pos++]|=C|((v>>>=3)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v|((v>>>=7)?128:0),v&&(w.buf[w.pos++]=127&v)))))})(m,o)})(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=(function(f,m,v){for(var w,C,A=0;A<m.length;A++){if((w=m.charCodeAt(A))>55295&&w<57344){if(!C){w>56319||A+1===m.length?(f[v++]=239,f[v++]=191,f[v++]=189):C=w;continue}if(w<56320){f[v++]=239,f[v++]=191,f[v++]=189,C=w;continue}w=C-55296<<10|w-56320|65536,C=null}else C&&(f[v++]=239,f[v++]=191,f[v++]=189,C=null);w<128?f[v++]=w:(w<2048?f[v++]=w>>6|192:(w<65536?f[v++]=w>>12|224:(f[v++]=w>>18|240,f[v++]=w>>12&63|128),f[v++]=w>>6&63|128),f[v++]=63&w|128)}return v})(this.buf,i,this.pos);var o=this.pos-n;o>=128&&Wx(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),Hx(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Hx(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var o=0;o<n;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,n){this.pos++;var o=this.pos;i(n,this);var f=this.pos-o;f>=128&&Wx(o,f,this),this.pos=o-1,this.writeVarint(f),this.pos+=f},writeMessage:function(i,n,o){this.writeTag(i,ai.Bytes),this.writeRawMessage(n,o)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,Zx,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,Y_,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,Rs,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,K_,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,TS,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,Q_,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,Xx,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,Yx,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,Kx,n)},writeBytesField:function(i,n){this.writeTag(i,ai.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,ai.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,ai.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,ai.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,ai.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,ai.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,ai.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,ai.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,ai.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,ai.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var uh=J(Gx);const al=3;function ES(i,n,o){n.glyphs=[],i===1&&o.readMessage(CS,n)}function CS(i,n,o){if(i===3){const{id:f,bitmap:m,width:v,height:w,left:C,top:A,advance:k}=o.readMessage(kd,{});n.glyphs.push({id:f,bitmap:new nl({width:v+2*al,height:w+2*al},m),metrics:{width:v,height:w,left:C,top:A,advance:k}})}else i===4?n.ascender=o.readSVarint():i===5&&(n.descender=o.readSVarint())}function kd(i,n,o){i===1?n.id=o.readVarint():i===2?n.bitmap=o.readBytes():i===3?n.width=o.readVarint():i===4?n.height=o.readVarint():i===5?n.left=o.readSVarint():i===6?n.top=o.readSVarint():i===7&&(n.advance=o.readVarint())}const e0=al;function t0(i){let n=0,o=0;for(const w of i)n+=w.w*w.h,o=Math.max(o,w.w);i.sort(((w,C)=>C.h-w.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let m=0,v=0;for(const w of i)for(let C=f.length-1;C>=0;C--){const A=f[C];if(!(w.w>A.w||w.h>A.h)){if(w.x=A.x,w.y=A.y,v=Math.max(v,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===A.w&&w.h===A.h){const k=f.pop();C<f.length&&(f[C]=k)}else w.h===A.h?(A.x+=w.w,A.w-=w.w):w.w===A.w?(A.y+=w.h,A.h-=w.h):(f.push({x:A.x+w.w,y:A.y,w:A.w-w.w,h:w.h}),A.y+=w.h,A.h-=w.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}const Co=1;class n0{constructor(n,{pixelRatio:o,version:f,stretchX:m,stretchY:v,content:w}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=m,this.stretchY=v,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+Co,this.paddedRect.y+Co]}get br(){return[this.paddedRect.x+this.paddedRect.w-Co,this.paddedRect.y+this.paddedRect.h-Co]}get displaySize(){return[(this.paddedRect.w-2*Co)/this.pixelRatio,(this.paddedRect.h-2*Co)/this.pixelRatio]}}class Qx{constructor(n,o){const f={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,f,v),this.addImages(o,m,v);const{w,h:C}=t0(v),A=new ca({width:w||1,height:C||1});for(const k in n){const B=n[k],$=f[k].paddedRect;ca.copy(B.data,A,{x:0,y:0},{x:$.x+Co,y:$.y+Co},B.data)}for(const k in o){const B=o[k],$=m[k].paddedRect,G=$.x+Co,K=$.y+Co,ee=B.data.width,oe=B.data.height;ca.copy(B.data,A,{x:0,y:0},{x:G,y:K},B.data),ca.copy(B.data,A,{x:0,y:oe-1},{x:G,y:K-1},{width:ee,height:1}),ca.copy(B.data,A,{x:0,y:0},{x:G,y:K+oe},{width:ee,height:1}),ca.copy(B.data,A,{x:ee-1,y:0},{x:G-1,y:K},{width:1,height:oe}),ca.copy(B.data,A,{x:0,y:0},{x:G+ee,y:K},{width:1,height:oe})}this.image=A,this.iconPositions=f,this.patternPositions=m}addImages(n,o,f){for(const m in n){const v=n[m],w={x:0,y:0,w:v.data.width+2*Co,h:v.data.height+2*Co};f.push(w),o[m]=new n0(w,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((f=>n.hasImage(f))),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),o),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),o)}patchUpdatedImage(n,o,f){if(!n||!o||n.version===o.version)return;n.version=o.version;const[m,v]=n.tl;f.update(o.data,void 0,{x:m,y:v})}}ln(n0,"ImagePosition"),ln(Qx,"ImageAtlas");const ps={horizontal:1,vertical:2,horizontalOnly:3},Jx=-17;class Vp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,o){const f=new Vp;return f.scale=n||1,f.fontStack=o,f}static forImage(n){const o=new Vp;return o.imageName=n,o}}class fh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const f=new fh;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?f.addImageSection(v):f.addTextSection(v,o)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=(function(o,f){let m="";for(let v=0;v<o.length;v++){const w=o.charCodeAt(v+1)||null,C=o.charCodeAt(v-1)||null;m+=!f&&(w&&$f(w)&&!ch[o[v+1]]||C&&$f(C)&&!ch[o[v-1]])||!ch[o[v]]?o[v]:ch[o[v]]}return m})(this.text,n)}trim(){let n=0;for(let f=0;f<this.text.length&&Uu[this.text.charCodeAt(f)];f++)n++;let o=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Uu[this.text.charCodeAt(f)];f--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const f=new fh;return f.text=this.text.substring(n,o),f.sectionIndex=this.sectionIndex.slice(n,o),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((n,o)=>Math.max(n,this.sections[o].scale)),0)}addTextSection(n,o){this.text+=n.text,this.sections.push(Vp.forText(n.scale,n.fontStack||o));const f=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(f)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void sn("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Vp.forImage(o)),this.sectionIndex.push(this.sections.length-1)):sn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Nu(i,n,o,f,m,v,w,C,A,k,B,$,G,K,ee){const oe=fh.fromFeature(i,m);$===ps.vertical&&oe.verticalizePunctuation(G);let de=[];const Ae=(function(Ne,ut,st,bt,Gt,ht){if(!Ne)return[];const It=[],zt=(function(an,hn,on,Kn,Zt,An){let Qn=0;for(let Nr=0;Nr<an.length();Nr++){const Jn=an.getSection(Nr);Qn+=tb(an.getCharCode(Nr),Jn,Kn,Zt,hn,An)}return Qn/Math.max(1,Math.ceil(Qn/on))})(Ne,ut,st,bt,Gt,ht),Ut=Ne.text.indexOf("​")>=0;let Ht=0;for(let an=0;an<Ne.length();an++){const hn=Ne.getSection(an),on=Ne.getCharCode(an);if(Uu[on]||(Ht+=tb(on,hn,bt,Gt,ut,ht)),an<Ne.length()-1){const Kn=!((xt=on)<11904||!(nn["Bopomofo Extended"](xt)||nn.Bopomofo(xt)||nn["CJK Compatibility Forms"](xt)||nn["CJK Compatibility Ideographs"](xt)||nn["CJK Compatibility"](xt)||nn["CJK Radicals Supplement"](xt)||nn["CJK Strokes"](xt)||nn["CJK Symbols and Punctuation"](xt)||nn["CJK Unified Ideographs Extension A"](xt)||nn["CJK Unified Ideographs"](xt)||nn["Enclosed CJK Letters and Months"](xt)||nn["Halfwidth and Fullwidth Forms"](xt)||nn.Hiragana(xt)||nn["Ideographic Description Characters"](xt)||nn["Kangxi Radicals"](xt)||nn["Katakana Phonetic Extensions"](xt)||nn.Katakana(xt)||nn["Vertical Forms"](xt)||nn["Yi Radicals"](xt)||nn["Yi Syllables"](xt)));(eb[on]||Kn||hn.imageName)&&It.push(r0(an+1,Ht,zt,It,Gp(on,Ne.getCharCode(an+1),Kn&&Ut),!1))}}var xt;return Hp(r0(Ne.length(),Ht,zt,It,0,!0))})(oe,k,v,n,f,K),{processBidirectionalText:Fe,processStyledBidirectionalText:Re}=D;if(Fe&&oe.sections.length===1){const Ne=Fe(oe.toString(),Ae);for(const ut of Ne){const st=new fh;st.text=ut,st.sections=oe.sections;for(let bt=0;bt<ut.length;bt++)st.sectionIndex.push(0);de.push(st)}}else if(Re){const Ne=Re(oe.text,oe.sectionIndex,Ae);for(const ut of Ne){const st=new fh;st.text=ut[0],st.sectionIndex=ut[1],st.sections=oe.sections,de.push(st)}}else de=(function(Ne,ut){const st=[],bt=Ne.text;let Gt=0;for(const ht of ut)st.push(Ne.substring(Gt,ht)),Gt=ht;return Gt<bt.length&&st.push(Ne.substring(Gt,bt.length)),st})(oe,Ae);const De=[],$e={positionedLines:De,text:oe.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:$,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return(function(Ne,ut,st,bt,Gt,ht,It,zt,Ut,Ht,xt,an){let hn=0,on=0,Kn=0;const Zt=zt==="right"?1:zt==="left"?0:.5;let An=!1;for(const rr of Gt){const ir=rr.getSections();for(const ui of ir){if(ui.imageName)continue;const xi=ut[ui.fontStack];if(xi&&(An=xi.ascender!==void 0&&xi.descender!==void 0,!An))break}if(!An)break}let Qn=0;for(const rr of Gt){rr.trim();const ir=rr.getMaxScale(),ui=(ir-1)*Pa,xi={positionedGlyphs:[],lineOffset:0};Ne.positionedLines[Qn]=xi;const bi=xi.positionedGlyphs;let fi=0;if(!rr.length()){on+=ht,++Qn;continue}let Vi=0,ra=0;for(let hi=0;hi<rr.length();hi++){const Sa=rr.getSection(hi),ga=rr.getSectionIndex(hi),Qi=rr.getCharCode(hi);let Gr=Sa.scale,ya=null,wi=null,Go=null,_a=Pa,ao=0;const Va=!(Ut===ps.horizontal||!xt&&!Uf(Qi)||xt&&(Uu[Qi]||(Nr=Qi,nn.Arabic(Nr)||nn["Arabic Supplement"](Nr)||nn["Arabic Extended-A"](Nr)||nn["Arabic Presentation Forms-A"](Nr)||nn["Arabic Presentation Forms-B"](Nr))));if(Sa.imageName){const Ho=bt[Sa.imageName];if(!Ho)continue;Go=Sa.imageName,Ne.iconsInText=Ne.iconsInText||!0,wi=Ho.paddedRect;const Ga=Ho.displaySize;Gr=Gr*Pa/an,ya={width:Ga[0],height:Ga[1],left:Co,top:-e0,advance:Va?Ga[1]:Ga[0],localGlyph:!1},ao=An?-ya.height*Gr:Jx+ir*Pa-Ga[1]*Gr,_a=ya.advance;const Gc=(Va?Ga[0]:Ga[1])*Gr-Pa*ir;Gc>0&&Gc>fi&&(fi=Gc)}else{const Ho=st[Sa.fontStack];if(!Ho)continue;Ho[Qi]&&(wi=Ho[Qi]);const Ga=ut[Sa.fontStack];if(!Ga)continue;const Gc=Ga.glyphs[Qi];if(!Gc)continue;if(ya=Gc.metrics,_a=Qi!==8203?Pa:0,An){const Zg=Ga.ascender!==void 0?Math.abs(Ga.ascender):0,d0=Ga.descender!==void 0?Math.abs(Ga.descender):0,p0=(Zg+d0)*Gr;Vi<p0&&(Vi=p0,ra=(Zg-d0)/2*Gr),ao=-Zg*Gr}else ao=Jx+(ir-Gr)*Pa}Va?(Ne.verticalizable=!0,bi.push({glyph:Qi,imageName:Go,x:hn,y:on+ao,vertical:Va,scale:Gr,localGlyph:ya.localGlyph,fontStack:Sa.fontStack,sectionIndex:ga,metrics:ya,rect:wi}),hn+=_a*Gr+Ht):(bi.push({glyph:Qi,imageName:Go,x:hn,y:on+ao,vertical:Va,scale:Gr,localGlyph:ya.localGlyph,fontStack:Sa.fontStack,sectionIndex:ga,metrics:ya,rect:wi}),hn+=ya.advance*Gr+Ht)}bi.length!==0&&(Kn=Math.max(hn-Ht,Kn),An?Og(bi,Zt,fi,ra,ht*ir/2):Og(bi,Zt,fi,0,ht/2)),hn=0;const ma=ht*ir+fi;xi.lineOffset=Math.max(fi,ui),on+=ma,++Qn}var Nr;const Jn=on,{horizontalAlign:Un,verticalAlign:Ii}=Wp(It);(function(rr,ir,ui,xi,bi,fi){const Vi=(ir-ui)*bi,ra=-fi*xi;for(const ma of rr)for(const hi of ma.positionedGlyphs)hi.x+=Vi,hi.y+=ra})(Ne.positionedLines,Zt,Un,Ii,Kn,Jn),Ne.top+=-Ii*Jn,Ne.bottom=Ne.top+Jn,Ne.left+=-Un*Kn,Ne.right=Ne.left+Kn,Ne.hasBaseline=An})($e,n,o,f,de,w,C,A,$,k,G,ee),!(function(Ne){for(const ut of Ne)if(ut.positionedGlyphs.length!==0)return!1;return!0})(De)&&$e}const Uu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},eb={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function tb(i,n,o,f,m,v){if(n.imageName){const w=f[n.imageName];return w?w.displaySize[0]*n.scale*Pa/v+m:0}{const w=o[n.fontStack],C=w&&w.glyphs[i];return C?C.metrics.advance*n.scale+m:0}}function hh(i,n,o,f){const m=Math.pow(i-n,2);return f?i<n?m/2:2*m:m+Math.abs(o)*o}function Gp(i,n,o){let f=0;return i===10&&(f-=1e4),o&&(f+=150),i!==40&&i!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function r0(i,n,o,f,m,v){let w=null,C=hh(n,o,m,v);for(const A of f){const k=hh(n-A.x,o,m,v)+A.badness;k<=C&&(w=A,C=k)}return{index:i,x:n,priorBreak:w,badness:C}}function Hp(i){return i?Hp(i.priorBreak).concat(i.index):[]}function Wp(i){let n=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function Og(i,n,o,f,m){if(!(n||o||f||m))return;const v=i.length-1,w=i[v],C=(w.x+w.metrics.advance*w.scale)*n;for(let A=0;A<=v;A++)i[A].x-=C,i[A].y+=o+f+m}function Bg(i,n,o){const{horizontalAlign:f,verticalAlign:m}=Wp(o),v=n[0]-i.displaySize[0]*f,w=n[1]-i.displaySize[1]*m;return{image:i,top:w,bottom:w+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function i0(i,n,o,f,m,v){const w=i.image;let C;if(w.content){const de=w.content,Ae=w.pixelRatio||1;C=[de[0]/Ae,de[1]/Ae,w.displaySize[0]-de[2]/Ae,w.displaySize[1]-de[3]/Ae]}const A=n.left*v,k=n.right*v;let B,$,G,K;o==="width"||o==="both"?(K=m[0]+A-f[3],$=m[0]+k+f[1]):(K=m[0]+(A+k-w.displaySize[0])/2,$=K+w.displaySize[0]);const ee=n.top*v,oe=n.bottom*v;return o==="height"||o==="both"?(B=m[1]+ee-f[0],G=m[1]+oe+f[2]):(B=m[1]+(ee+oe-w.displaySize[1])/2,G=B+w.displaySize[1]),{image:w,top:B,right:$,bottom:G,left:K,collisionPadding:C}}class Dl extends ue{constructor(n,o,f,m,v){super(n,o),this.angle=m,this.z=f,v!==void 0&&(this.segment=v)}clone(){return new Dl(this.x,this.y,this.z,this.angle,this.segment)}}function nb(i,n,o,f,m){if(n.segment===void 0)return!0;let v=n,w=n.segment+1,C=0;for(;C>-o/2;){if(w--,w<0)return!1;C-=i[w].dist(v),v=i[w]}C+=i[w].dist(i[w+1]),w++;const A=[];let k=0;for(;C<o/2;){const B=i[w],$=i[w+1];if(!$)return!1;let G=i[w-1].angleTo(B)-B.angleTo($);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:C,angleDelta:G}),k+=G;C-A[0].distance>f;)k-=A.shift().angleDelta;if(k>m)return!1;w++,C+=B.dist($)}return!0}function a0(i){let n=0;for(let o=0;o<i.length-1;o++)n+=i[o].dist(i[o+1]);return n}function rb(i,n,o){return i?.6*n*o:0}function Fg(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function MS(i,n,o,f,m,v){const w=rb(o,m,v),C=Fg(o,f)*v;let A=0;const k=a0(i)/2;for(let B=0;B<i.length-1;B++){const $=i[B],G=i[B+1],K=$.dist(G);if(A+K>k){const ee=(k-A)/K,oe=Cr($.x,G.x,ee),de=Cr($.y,G.y,ee),Ae=new Dl(oe,de,0,G.angleTo($),B);return!w||nb(i,Ae,C,w,n)?Ae:void 0}A+=K}}function jg(i,n,o,f,m,v,w,C,A){const k=rb(f,v,w),B=Fg(f,m),$=B*w,G=i[0].x===0||i[0].x===A||i[0].y===0||i[0].y===A;return n-$<n/4&&(n=$+n/4),Zp(i,G?n/2*C%n:(B/2+2*v)*w*C%n,n,k,o,$,G,!1,A)}function Zp(i,n,o,f,m,v,w,C,A){const k=v/2,B=a0(i);let $=0,G=n-o,K=[];for(let ee=0;ee<i.length-1;ee++){const oe=i[ee],de=i[ee+1],Ae=oe.dist(de),Fe=de.angleTo(oe);for(;G+o<$+Ae;){G+=o;const Re=(G-$)/Ae,De=Cr(oe.x,de.x,Re),$e=Cr(oe.y,de.y,Re);if(De>=0&&De<A&&$e>=0&&$e<A&&G-k>=0&&G+k<=B){const Ne=new Dl(De,$e,0,Fe,ee);Ne._round(),f&&!nb(i,Ne,v,f,m)||K.push(Ne)}}$+=Ae}return C||K.length||w||(K=Zp(i,$/2,o,f,m,v,w,!0,A)),K}function Xp(i,n,o,f,m){const v=[];for(let w=0;w<i.length;w++){const C=i[w];let A;for(let k=0;k<C.length-1;k++){let B=C[k],$=C[k+1];B.x<n&&$.x<n||(B.x<n?B=new ue(n,B.y+(n-B.x)/($.x-B.x)*($.y-B.y))._round():$.x<n&&($=new ue(n,B.y+(n-B.x)/($.x-B.x)*($.y-B.y))._round()),B.y<o&&$.y<o||(B.y<o?B=new ue(B.x+(o-B.y)/($.y-B.y)*($.x-B.x),o)._round():$.y<o&&($=new ue(B.x+(o-B.y)/($.y-B.y)*($.x-B.x),o)._round()),B.x>=f&&$.x>=f||(B.x>=f?B=new ue(f,B.y+(f-B.x)/($.x-B.x)*($.y-B.y))._round():$.x>=f&&($=new ue(f,B.y+(f-B.x)/($.x-B.x)*($.y-B.y))._round()),B.y>=m&&$.y>=m||(B.y>=m?B=new ue(B.x+(m-B.y)/($.y-B.y)*($.x-B.x),m)._round():$.y>=m&&($=new ue(B.x+(m-B.y)/($.y-B.y)*($.x-B.x),m)._round()),A&&B.equals(A[A.length-1])||(A=[B],v.push(A)),A.push($)))))}}return v}ln(Dl,"Anchor");const Yp=1e20;function Id(i,n,o,f,m,v,w,C,A){for(let k=n;k<n+f;k++)ib(i,o*v+k,v,m,w,C,A);for(let k=o;k<o+m;k++)ib(i,k*v+n,1,f,w,C,A)}function ib(i,n,o,f,m,v,w){v[0]=0,w[0]=-Yp,w[1]=Yp,m[0]=i[n];for(let C=1,A=0,k=0;C<f;C++){m[C]=i[n+C*o];const B=C*C;do{const $=v[A];k=(m[C]-m[$]+B-$*$)/(C-$)/2}while(k<=w[A]&&--A>-1);A++,v[A]=C,w[A]=k,w[A+1]=Yp}for(let C=0,A=0;C<f;C++){for(;w[A+1]<C;)A++;const k=v[A],B=C-k;i[n+C*o]=m[k]+B*B}}const ks=2,Ng={none:0,ideographs:1,all:2};class dh{constructor(n,o,f){this.requestManager=n,this.localGlyphMode=o,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,o){const f=[];for(const m in n)for(const v of n[m])f.push({stack:m,id:v});Ge(f,(({stack:m,id:v},w)=>{let C=this.entries[m];C||(C=this.entries[m]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let A=C.glyphs[v];if(A!==void 0)return void w(null,{stack:m,id:v,glyph:A});if(A=this._tinySDF(C,m,v),A)return C.glyphs[v]=A,void w(null,{stack:m,id:v,glyph:A});const k=Math.floor(v/256);if(256*k>65535)return void w(new Error("glyphs > 65535 not supported"));if(C.ranges[k])return void w(null,{stack:m,id:v,glyph:A});let B=C.requests[k];B||(B=C.requests[k]=[],dh.loadGlyphRange(m,k,this.url,this.requestManager,(($,G)=>{if(G){C.ascender=G.ascender,C.descender=G.descender;for(const K in G.glyphs)this._doesCharSupportLocalGlyph(+K)||(C.glyphs[+K]=G.glyphs[+K]);C.ranges[k]=!0}for(const K of B)K($,G);delete C.requests[k]}))),B.push((($,G)=>{$?w($):G&&w(null,{stack:m,id:v,glyph:G.glyphs[v]||null})}))}),((m,v)=>{if(m)o(m);else if(v){const w={};for(const{stack:C,id:A,glyph:k}of v)w[C]===void 0&&(w[C]={}),w[C].glyphs===void 0&&(w[C].glyphs={}),w[C].glyphs[A]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics},w[C].ascender=this.entries[C].ascender,w[C].descender=this.entries[C].descender;o(null,w)}}))}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==Ng.none&&(this.localGlyphMode===Ng.all?!!this.localFontFamily:!!this.localFontFamily&&(nn["CJK Unified Ideographs"](n)||nn["Hangul Syllables"](n)||nn.Hiragana(n)||nn.Katakana(n)||nn["CJK Symbols and Punctuation"](n)))}_tinySDF(n,o,f){const m=this.localFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let v=n.tinySDF;if(!v){let oe="400";/bold/i.test(o)?oe="900":/medium/i.test(o)?oe="500":/light/i.test(o)&&(oe="200"),v=n.tinySDF=new dh.TinySDF({fontFamily:m,fontWeight:oe,fontSize:24*ks,buffer:3*ks,radius:8*ks}),v.fontWeight=oe}if(this.localGlyphs[v.fontWeight][f])return this.localGlyphs[v.fontWeight][f];const w=String.fromCharCode(f),{data:C,width:A,height:k,glyphWidth:B,glyphHeight:$,glyphLeft:G,glyphTop:K,glyphAdvance:ee}=v.draw(w);return this.localGlyphs[v.fontWeight][f]={id:f,bitmap:new nl({width:A,height:k},C),metrics:{width:B/ks,height:$/ks,left:G/ks,top:K/ks-27,advance:ee/ks,localGlyph:!0}}}}dh.loadGlyphRange=function(i,n,o,f,m){const v=256*n,w=v+255,C=f.transformRequest(f.normalizeGlyphsURL(o).replace("{fontstack}",i).replace("{range}",`${v}-${w}`),un.Glyphs);fr(C,((A,k)=>{if(A)m(A);else if(k){const B={},$=(function(G){return new uh(G).readFields(ES,{})})(k);for(const G of $.glyphs)B[G.id]=G;m(null,{glyphs:B,ascender:$.ascender,descender:$.descender})}}))},dh.TinySDF=class{constructor({fontSize:i=24,buffer:n=3,radius:o=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:w="normal"}={}){this.buffer=n,this.cutoff=f,this.radius=o;const C=this.size=i+4*n,A=this._createCanvas(C),k=this.ctx=A.getContext("2d",{willReadFrequently:!0});k.font=`${w} ${v} ${i}px ${m}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(i){const n=document.createElement("canvas");return n.width=n.height=i,n}draw(i){const{width:n,actualBoundingBoxAscent:o,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(i),w=Math.ceil(o),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),A=Math.min(this.size-this.buffer,w+Math.ceil(f)),k=C+2*this.buffer,B=A+2*this.buffer,$=Math.max(k*B,0),G=new Uint8ClampedArray($),K={data:G,width:k,height:B,glyphWidth:C,glyphHeight:A,glyphTop:w,glyphLeft:0,glyphAdvance:n};if(C===0||A===0)return K;const{ctx:ee,buffer:oe,gridInner:de,gridOuter:Ae}=this;ee.clearRect(oe,oe,C,A),ee.fillText(i,oe,oe+w);const Fe=ee.getImageData(oe,oe,C,A);Ae.fill(Yp,0,$),de.fill(0,0,$);for(let Re=0;Re<A;Re++)for(let De=0;De<C;De++){const $e=Fe.data[4*(Re*C+De)+3]/255;if($e===0)continue;const Ne=(Re+oe)*k+De+oe;if($e===1)Ae[Ne]=0,de[Ne]=Yp;else{const ut=.5-$e;Ae[Ne]=ut>0?ut*ut:0,de[Ne]=ut<0?ut*ut:0}}Id(Ae,0,0,k,B,k,this.f,this.v,this.z),Id(de,oe,oe,C,A,k,this.f,this.v,this.z);for(let Re=0;Re<$;Re++){const De=Math.sqrt(Ae[Re])-Math.sqrt(de[Re]);G[Re]=Math.round(255-255*(De/this.radius+this.cutoff))}return K}};const ph=Co;function Ug(i,n,o,f){const m=[],v=i.image,w=v.pixelRatio,C=v.paddedRect.w-2*ph,A=v.paddedRect.h-2*ph,k=i.right-i.left,B=i.bottom-i.top,$=v.stretchX||[[0,C]],G=v.stretchY||[[0,A]],K=(ht,It)=>ht+It[1]-It[0],ee=$.reduce(K,0),oe=G.reduce(K,0),de=C-ee,Ae=A-oe;let Fe=0,Re=ee,De=0,$e=oe,Ne=0,ut=de,st=0,bt=Ae;if(v.content&&f){const ht=v.content;Fe=Kp($,0,ht[0]),De=Kp(G,0,ht[1]),Re=Kp($,ht[0],ht[2]),$e=Kp(G,ht[1],ht[3]),Ne=ht[0]-Fe,st=ht[1]-De,ut=ht[2]-ht[0]-Re,bt=ht[3]-ht[1]-$e}const Gt=(ht,It,zt,Ut)=>{const Ht=mh(ht.stretch-Fe,Re,k,i.left),xt=$g(ht.fixed-Ne,ut,ht.stretch,ee),an=mh(It.stretch-De,$e,B,i.top),hn=$g(It.fixed-st,bt,It.stretch,oe),on=mh(zt.stretch-Fe,Re,k,i.left),Kn=$g(zt.fixed-Ne,ut,zt.stretch,ee),Zt=mh(Ut.stretch-De,$e,B,i.top),An=$g(Ut.fixed-st,bt,Ut.stretch,oe),Qn=new ue(Ht,an),Nr=new ue(on,an),Jn=new ue(on,Zt),Un=new ue(Ht,Zt),Ii=new ue(xt/w,hn/w),rr=new ue(Kn/w,An/w),ir=n*Math.PI/180;if(ir){const bi=Math.sin(ir),fi=Math.cos(ir),Vi=[fi,-bi,bi,fi];Qn._matMult(Vi),Nr._matMult(Vi),Un._matMult(Vi),Jn._matMult(Vi)}const ui=ht.stretch+ht.fixed,xi=It.stretch+It.fixed;return{tl:Qn,tr:Nr,bl:Un,br:Jn,tex:{x:v.paddedRect.x+ph+ui,y:v.paddedRect.y+ph+xi,w:zt.stretch+zt.fixed-ui,h:Ut.stretch+Ut.fixed-xi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ii,pixelOffsetBR:rr,minFontScaleX:ut/w/k,minFontScaleY:bt/w/B,isSDF:o}};if(f&&(v.stretchX||v.stretchY)){const ht=o0($,de,ee),It=o0(G,Ae,oe);for(let zt=0;zt<ht.length-1;zt++){const Ut=ht[zt],Ht=ht[zt+1];for(let xt=0;xt<It.length-1;xt++)m.push(Gt(Ut,It[xt],Ht,It[xt+1]))}}else m.push(Gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:A+1}));return m}function Kp(i,n,o){let f=0;for(const m of i)f+=Math.max(n,Math.min(o,m[1]))-Math.max(n,Math.min(o,m[0]));return f}function o0(i,n,o){const f=[{fixed:-ph,stretch:0}];for(const[m,v]of i){const w=f[f.length-1];f.push({fixed:m-w.stretch,stretch:w.stretch}),f.push({fixed:m-w.stretch,stretch:w.stretch+(v-m)})}return f.push({fixed:n+ph,stretch:o}),f}function mh(i,n,o,f){return i/n*o+f}function $g(i,n,o,f){return i-n*o/f}function AS(i,n,o,f){const m=n+i.positionedLines[f].lineOffset;return f===0?o+m/2:o+(m+(n+i.positionedLines[f-1].lineOffset))/2}class s0{constructor(n=[],o=l0){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:f}=this,m=o[n];for(;n>0;){const v=n-1>>1,w=o[v];if(f(m,w)>=0)break;o[n]=w,n=v}o[n]=m}_down(n){const{data:o,compare:f}=this,m=this.length>>1,v=o[n];for(;n<m;){let w=1+(n<<1),C=o[w];const A=w+1;if(A<this.length&&f(o[A],C)<0&&(w=A,C=o[A]),f(C,v)>=0)break;o[n]=C,n=w}o[n]=v}}function l0(i,n){return i<n?-1:i>n?1:0}function qg(i,n=1,o=!1){let f=1/0,m=1/0,v=-1/0,w=-1/0;const C=i[0];for(let K=0;K<C.length;K++){const ee=C[K];(!K||ee.x<f)&&(f=ee.x),(!K||ee.y<m)&&(m=ee.y),(!K||ee.x>v)&&(v=ee.x),(!K||ee.y>w)&&(w=ee.y)}const A=Math.min(v-f,w-m);let k=A/2;const B=new s0([],c0);if(A===0)return new ue(f,m);for(let K=f;K<v;K+=A)for(let ee=m;ee<w;ee+=A)B.push(new gh(K+k,ee+k,k,i));let $=(function(K){let ee=0,oe=0,de=0;const Ae=K[0];for(let Fe=0,Re=Ae.length,De=Re-1;Fe<Re;De=Fe++){const $e=Ae[Fe],Ne=Ae[De],ut=$e.x*Ne.y-Ne.x*$e.y;oe+=($e.x+Ne.x)*ut,de+=($e.y+Ne.y)*ut,ee+=3*ut}return new gh(oe/ee,de/ee,0,K)})(i),G=B.length;for(;B.length;){const K=B.pop();(K.d>$.d||!$.d)&&($=K,o&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,G)),K.max-$.d<=n||(k=K.h/2,B.push(new gh(K.p.x-k,K.p.y-k,k,i)),B.push(new gh(K.p.x+k,K.p.y-k,k,i)),B.push(new gh(K.p.x-k,K.p.y+k,k,i)),B.push(new gh(K.p.x+k,K.p.y+k,k,i)),G+=4)}return o&&(console.log(`num probes: ${G}`),console.log(`best distance: ${$.d}`)),$.p}function c0(i,n){return n.max-i.max}class gh{constructor(n,o,f,m){this.p=new ue(n,o),this.h=f,this.d=(function(v,w){let C=!1,A=1/0;for(let k=0;k<w.length;k++){const B=w[k];for(let $=0,G=B.length,K=G-1;$<G;K=$++){const ee=B[$],oe=B[K];ee.y>v.y!=oe.y>v.y&&v.x<(oe.x-ee.x)*(v.y-ee.y)/(oe.y-ee.y)+ee.x&&(C=!C),A=Math.min(A,Jf(v,ee,oe))}}return(C?1:-1)*Math.sqrt(A)})(this.p,m),this.max=this.d+this.h*Math.SQRT2}}const $u=7,Ol=Number.POSITIVE_INFINITY,qu=Math.sqrt(2);function Uc(i,[n,o]){let f=0,m=0;if(o===Ol){n<0&&(n=0);const v=n/qu;switch(i){case"top-right":case"top-left":m=v-$u;break;case"bottom-right":case"bottom-left":m=-v+$u;break;case"bottom":m=-n+$u;break;case"top":m=n-$u}switch(i){case"top-right":case"bottom-right":f=-v;break;case"top-left":case"bottom-left":f=v;break;case"left":f=n;break;case"right":f=-n}}else{switch(n=Math.abs(n),o=Math.abs(o),i){case"top-right":case"top-left":case"top":m=o-$u;break;case"bottom-right":case"bottom-left":case"bottom":m=-o+$u}switch(i){case"top-right":case"bottom-right":case"right":f=-n;break;case"top-left":case"bottom-left":case"left":f=n}}return[f,m]}function Qp(i,n,o,f,m,v,w,C,A,k){i.createArrays(),i.tilePixelRatio=En/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const B=i.layers[0].layout,$=i.layers[0]._unevaluatedLayout._values,G={};if(i.textSizeData.kind==="composite"){const{minZoom:oe,maxZoom:de}=i.textSizeData;G.compositeTextSizes=[$["text-size"].possiblyEvaluate(new j(oe),C),$["text-size"].possiblyEvaluate(new j(de),C)]}if(i.iconSizeData.kind==="composite"){const{minZoom:oe,maxZoom:de}=i.iconSizeData;G.compositeIconSizes=[$["icon-size"].possiblyEvaluate(new j(oe),C),$["icon-size"].possiblyEvaluate(new j(de),C)]}G.layoutTextSize=$["text-size"].possiblyEvaluate(new j(A+1),C),G.layoutIconSize=$["icon-size"].possiblyEvaluate(new j(A+1),C),G.textMaxSize=$["text-size"].possiblyEvaluate(new j(18),C);const K=B.get("text-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",ee=B.get("text-size");for(const oe of i.features){const de=B.get("text-font").evaluate(oe,{},C).join(","),Ae=ee.evaluate(oe,{},C),Fe=G.layoutTextSize.evaluate(oe,{},C),Re=(G.layoutIconSize.evaluate(oe,{},C),{horizontal:{},vertical:void 0}),De=oe.text;let $e,Ne=[0,0];if(De){const bt=De.toString(),Gt=B.get("text-letter-spacing").evaluate(oe,{},C)*Pa,ht=B.get("text-line-height").evaluate(oe,{},C)*Pa,It=rg(bt)?Gt:0,zt=B.get("text-anchor").evaluate(oe,{},C),Ut=B.get("text-variable-anchor");if(!Ut){const on=B.get("text-radial-offset").evaluate(oe,{},C);Ne=on?Uc(zt,[on*Pa,Ol]):B.get("text-offset").evaluate(oe,{},C).map((Kn=>Kn*Pa))}let Ht=K?"center":B.get("text-justify").evaluate(oe,{},C);const xt=B.get("symbol-placement")==="point",an=xt?B.get("text-max-width").evaluate(oe,{},C)*Pa:1/0,hn=on=>{i.allowVerticalPlacement&&Tp(bt)&&(Re.vertical=Nu(De,n,o,m,de,an,ht,zt,on,It,Ne,ps.vertical,!0,Fe,Ae))};if(!K&&Ut){const on=Ht==="auto"?Ut.map((Zt=>yh(Zt))):[Ht];let Kn=!1;for(let Zt=0;Zt<on.length;Zt++){const An=on[Zt];if(!Re.horizontal[An])if(Kn)Re.horizontal[An]=Re.horizontal[0];else{const Qn=Nu(De,n,o,m,de,an,ht,"center",An,It,Ne,ps.horizontal,!1,Fe,Ae);Qn&&(Re.horizontal[An]=Qn,Kn=Qn.positionedLines.length===1)}}hn("left")}else{if(Ht==="auto"&&(Ht=yh(zt)),xt||B.get("text-writing-mode").indexOf("horizontal")>=0||!Tp(bt)){const on=Nu(De,n,o,m,de,an,ht,zt,Ht,It,Ne,ps.horizontal,!1,Fe,Ae);on&&(Re.horizontal[Ht]=on)}hn(xt?"left":Ht)}}let ut=!1;if(oe.icon&&oe.icon.name){const bt=f[oe.icon.name];bt&&($e=Bg(m[oe.icon.name],B.get("icon-offset").evaluate(oe,{},C),B.get("icon-anchor").evaluate(oe,{},C)),ut=bt.sdf,i.sdfIcons===void 0?i.sdfIcons=bt.sdf:i.sdfIcons!==bt.sdf&&sn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(bt.pixelRatio!==i.pixelRatio||B.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const st=ab(Re.horizontal)||Re.vertical;i.iconsInText||(i.iconsInText=!!st&&st.iconsInText),(st||$e)&&Vu(i,oe,Re,$e,f,G,Fe,0,Ne,ut,w,C,k)}v&&i.generateCollisionDebugBuffers(A,i.collisionBoxArray)}function yh(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Vu(i,n,o,f,m,v,w,C,A,k,B,$,G){let K=v.textMaxSize.evaluate(n,{},$);K===void 0&&(K=w);const ee=i.layers[0].layout,oe=ee.get("icon-offset").evaluate(n,{},$),de=ab(o.horizontal)||o.vertical,Ae=G.name==="globe",Fe=Pa,Re=w/Fe,De=i.tilePixelRatio*K/Fe,$e=(zt=i.overscaling,i.zoom>18&&zt>2&&(zt>>=1),Math.max(En/(512*zt),1)*ee.get("symbol-spacing")),Ne=ee.get("text-padding")*i.tilePixelRatio,ut=ee.get("icon-padding")*i.tilePixelRatio,st=me(ee.get("text-max-angle")),bt=ee.get("text-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",Gt=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",ht=ee.get("symbol-placement"),It=$e/2;var zt;const Ut=ee.get("icon-text-fit");let Ht;f&&Ut!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(Ht=i0(f,o.vertical,Ut,ee.get("icon-text-fit-padding"),oe,Re)),de&&(f=i0(f,de,Ut,ee.get("icon-text-fit-padding"),oe,Re)));const xt=(an,hn,on)=>{if(hn.x<0||hn.x>=En||hn.y<0||hn.y>=En)return;let Kn=null;if(Ae){const{x:Zt,y:An,z:Qn}=G.projectTilePoint(hn.x,hn.y,on);Kn={anchor:new Dl(Zt,An,Qn,0,void 0),up:G.upVector(on,hn.x,hn.y)}}(function(Zt,An,Qn,Nr,Jn,Un,Ii,rr,ir,ui,xi,bi,fi,Vi,ra,ma,hi,Sa,ga,Qi,Gr,ya,wi,Go,_a){const ao=Zt.addToLineVertexArray(An,Nr);let Va,Ho,Ga,Gc,Zg,d0,p0,_k=0,vk=0,xk=0,bk=0,NS=-1,US=-1;const Yu={};let wk=ig("");const nm=Qn?Qn.anchor:An;let $S=0,qS=0;if(ir._unevaluatedLayout.getValue("text-radial-offset")===void 0?[$S,qS]=ir.layout.get("text-offset").evaluate(Gr,{},_a).map((Is=>Is*Pa)):($S=ir.layout.get("text-radial-offset").evaluate(Gr,{},_a)*Pa,qS=Ol),Zt.allowVerticalPlacement&&Jn.vertical){const Is=Jn.vertical;if(ra)d0=Ld(Is),rr&&(p0=Ld(rr));else{const zs=ir.layout.get("text-rotate").evaluate(Gr,{},_a)+90;Ga=em(ui,nm,An,xi,bi,fi,Is,Vi,zs,ma),rr&&(Gc=em(ui,nm,An,xi,bi,fi,rr,Sa,zs))}}if(Un){const Is=ir.layout.get("icon-rotate").evaluate(Gr,{},_a),zs=ir.layout.get("icon-text-fit")!=="none",m0=Ug(Un,Is,wi,zs),GS=rr?Ug(rr,Is,wi,zs):void 0;Ho=em(ui,nm,An,xi,bi,fi,Un,Sa,Is),_k=4*m0.length;const Sk=Zt.iconSizeData;let rm=null;Sk.kind==="source"?(rm=[ds*ir.layout.get("icon-size").evaluate(Gr,{},_a)],rm[0]>$c&&sn(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Jp}. Reduce your "icon-size".`)):Sk.kind==="composite"&&(rm=[ds*ya.compositeIconSizes[0].evaluate(Gr,{},_a),ds*ya.compositeIconSizes[1].evaluate(Gr,{},_a)],(rm[0]>$c||rm[1]>$c)&&sn(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Jp}. Reduce your "icon-size".`)),Zt.addSymbols(Zt.icon,m0,rm,Qi,ga,Gr,!1,Qn,An,ao.lineStartIndex,ao.lineLength,-1,Go,_a),NS=Zt.icon.placedSymbolArray.length-1,GS&&(vk=4*GS.length,Zt.addSymbols(Zt.icon,GS,rm,Qi,ga,Gr,ps.vertical,Qn,An,ao.lineStartIndex,ao.lineLength,-1,Go,_a),US=Zt.icon.placedSymbolArray.length-1)}for(const Is in Jn.horizontal){const zs=Jn.horizontal[Is];Va||(wk=ig(zs.text),ra?Zg=Ld(zs):Va=em(ui,nm,An,xi,bi,fi,zs,Vi,ir.layout.get("text-rotate").evaluate(Gr,{},_a),ma));const m0=zs.positionedLines.length===1;if(xk+=zd(Zt,Qn,An,zs,Ii,ir,ra,Gr,ma,ao,Jn.vertical?ps.horizontal:ps.horizontalOnly,m0?Object.keys(Jn.horizontal):[Is],Yu,NS,ya,Go,_a),m0)break}Jn.vertical&&(bk+=zd(Zt,Qn,An,Jn.vertical,Ii,ir,ra,Gr,ma,ao,ps.vertical,["vertical"],Yu,US,ya,Go,_a));let Nd=-1;const VS=(Is,zs)=>Is?Math.max(Is,zs):zs;Nd=VS(Zg,Nd),Nd=VS(d0,Nd),Nd=VS(p0,Nd);const _7=Nd>-1?1:0;Zt.glyphOffsetArray.length>=Ot.MAX_GLYPHS&&sn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Gr.sortKey!==void 0&&Zt.addToSortKeyRanges(Zt.symbolInstances.length,Gr.sortKey),Zt.symbolInstances.emplaceBack(nm.x,nm.y,nm.z,An.x,An.y,Yu.right>=0?Yu.right:-1,Yu.center>=0?Yu.center:-1,Yu.left>=0?Yu.left:-1,Yu.vertical>=0?Yu.vertical:-1,NS,US,wk,Va!==void 0?Va:Zt.collisionBoxArray.length,Va!==void 0?Va+1:Zt.collisionBoxArray.length,Ga!==void 0?Ga:Zt.collisionBoxArray.length,Ga!==void 0?Ga+1:Zt.collisionBoxArray.length,Ho!==void 0?Ho:Zt.collisionBoxArray.length,Ho!==void 0?Ho+1:Zt.collisionBoxArray.length,Gc||Zt.collisionBoxArray.length,Gc?Gc+1:Zt.collisionBoxArray.length,xi,xk,bk,_k,vk,_7,0,$S,qS,Nd)})(i,hn,Kn,an,o,f,m,Ht,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,Ne,bt,A,0,ut,Gt,oe,n,v,k,B,$)};if(ht==="line")for(const an of Xp(n.geometry,0,0,En,En)){const hn=jg(an,$e,st,o.vertical||de,f,Fe,De,i.overscaling,En);for(const on of hn)de&&ob(i,de.text,It,on)||xt(an,on,$)}else if(ht==="line-center"){for(const an of n.geometry)if(an.length>1){const hn=MS(an,st,o.vertical||de,f,Fe,De);hn&&xt(an,hn,$)}}else if(n.type==="Polygon")for(const an of Td(n.geometry,0)){const hn=qg(an,16);xt(an[0],new Dl(hn.x,hn.y,0,0,void 0),$)}else if(n.type==="LineString")for(const an of n.geometry)xt(an,new Dl(an[0].x,an[0].y,0,0,void 0),$);else if(n.type==="Point")for(const an of n.geometry)for(const hn of an)xt([hn],new Dl(hn.x,hn.y,0,0,void 0),$)}const Jp=255,$c=Jp*ds;function zd(i,n,o,f,m,v,w,C,A,k,B,$,G,K,ee,oe,de){const Ae=(function(De,$e,Ne,ut,st,bt,Gt,ht){const It=[];if($e.positionedLines.length===0)return It;const zt=ut.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,Ut=(function(on){const Kn=on[0],Zt=on[1],An=Kn*Zt;return An>0?[Kn,-Zt]:An<0?[-Kn,Zt]:Kn===0?[Zt,Kn]:[Zt,-Kn]})(Ne);let Ht=Math.abs($e.top-$e.bottom);for(const on of $e.positionedLines)Ht-=on.lineOffset;const xt=$e.positionedLines.length,an=Ht/xt;let hn=$e.top-Ne[1];for(let on=0;on<xt;++on){const Kn=$e.positionedLines[on];hn=AS($e,an,hn,on);for(const Zt of Kn.positionedGlyphs){if(!Zt.rect)continue;const An=Zt.rect||{};let Qn=e0+1,Nr=!0,Jn=1,Un=0;if(Zt.imageName){const wi=Gt[Zt.imageName];if(!wi)continue;if(wi.sdf){sn("SDF images are not supported in formatted text and will be ignored.");continue}Nr=!1,Jn=wi.pixelRatio,Qn=Co/Jn}const Ii=(st||ht)&&Zt.vertical,rr=Zt.metrics.advance*Zt.scale/2,ir=Zt.metrics,ui=Zt.rect;if(ui===null)continue;ht&&$e.verticalizable&&(Un=Zt.imageName?rr-Zt.metrics.width*Zt.scale/2:0);const xi=st?[Zt.x+rr,Zt.y]:[0,0];let bi=[0,0],fi=[0,0],Vi=!1;st||(Ii?(fi=[Zt.x+rr+Ut[0],Zt.y+Ut[1]-Un],Vi=!0):bi=[Zt.x+rr+Ne[0],Zt.y+Ne[1]-Un]);const ra=ui.w*Zt.scale/(Jn*(Zt.localGlyph?ks:1)),ma=ui.h*Zt.scale/(Jn*(Zt.localGlyph?ks:1));let hi,Sa,ga,Qi;if(Ii){const wi=Zt.y-hn,Go=new ue(-rr,rr-wi),_a=-Math.PI/2,ao=new ue(...fi);hi=new ue(-rr+bi[0],bi[1]),hi._rotateAround(_a,Go)._add(ao),hi.x+=-wi+rr,hi.y-=(ir.left-Qn)*Zt.scale;const Va=Zt.imageName?ir.advance*Zt.scale:Pa*Zt.scale,Ho=String.fromCharCode(Zt.glyph);SS(Ho)?hi.x+=(1-Qn)*Zt.scale:Vx(Ho)?hi.x+=Va-ir.height*Zt.scale+(-Qn-1)*Zt.scale:hi.x+=Zt.imageName||ir.width+2*Qn===ui.w&&ir.height+2*Qn===ui.h?(Va-ma)/2:(Va-(ir.height+2*Qn)*Zt.scale)/2,Sa=new ue(hi.x,hi.y-ra),ga=new ue(hi.x+ma,hi.y),Qi=new ue(hi.x+ma,hi.y-ra)}else{const wi=(ir.left-Qn)*Zt.scale-rr+bi[0],Go=(-ir.top-Qn)*Zt.scale+bi[1],_a=wi+ra,ao=Go+ma;hi=new ue(wi,Go),Sa=new ue(_a,Go),ga=new ue(wi,ao),Qi=new ue(_a,ao)}if(zt){let wi;wi=st?new ue(0,0):Vi?new ue(Ut[0],Ut[1]):new ue(Ne[0],Ne[1]),hi._rotateAround(zt,wi),Sa._rotateAround(zt,wi),ga._rotateAround(zt,wi),Qi._rotateAround(zt,wi)}const Gr=new ue(0,0),ya=new ue(0,0);It.push({tl:hi,tr:Sa,bl:ga,br:Qi,tex:An,writingMode:$e.writingMode,glyphOffset:xi,sectionIndex:Zt.sectionIndex,isSDF:Nr,pixelOffsetTL:Gr,pixelOffsetBR:ya,minFontScaleX:0,minFontScaleY:0})}}return It})(0,f,A,v,w,C,m,i.allowVerticalPlacement),Fe=i.textSizeData;let Re=null;Fe.kind==="source"?(Re=[ds*v.layout.get("text-size").evaluate(C,{},de)],Re[0]>$c&&sn(`${i.layerIds[0]}: Value for "text-size" is >= ${Jp}. Reduce your "text-size".`)):Fe.kind==="composite"&&(Re=[ds*ee.compositeTextSizes[0].evaluate(C,{},de),ds*ee.compositeTextSizes[1].evaluate(C,{},de)],(Re[0]>$c||Re[1]>$c)&&sn(`${i.layerIds[0]}: Value for "text-size" is >= ${Jp}. Reduce your "text-size".`)),i.addSymbols(i.text,Ae,Re,A,w,C,B,n,o,k.lineStartIndex,k.lineLength,K,oe,de);for(const De of $)G[De]=i.text.placedSymbolArray.length-1;return 4*Ae.length}function ab(i){for(const n in i)return i[n];return null}function em(i,n,o,f,m,v,w,C,A,k){let B=w.top,$=w.bottom,G=w.left,K=w.right;const ee=w.collisionPadding;if(ee&&(G-=ee[0],B-=ee[1],K+=ee[2],$+=ee[3]),A){const oe=new ue(G,B),de=new ue(K,B),Ae=new ue(G,$),Fe=new ue(K,$),Re=me(A);let De=new ue(0,0);k&&(De=new ue(k[0],k[1])),oe._rotateAround(Re,De),de._rotateAround(Re,De),Ae._rotateAround(Re,De),Fe._rotateAround(Re,De),G=Math.min(oe.x,de.x,Ae.x,Fe.x),K=Math.max(oe.x,de.x,Ae.x,Fe.x),B=Math.min(oe.y,de.y,Ae.y,Fe.y),$=Math.max(oe.y,de.y,Ae.y,Fe.y)}return i.emplaceBack(n.x,n.y,n.z,o.x,o.y,G,B,K,$,C,f,m,v),i.length-1}function Ld(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const n=i.bottom-i.top;return n>0?Math.max(10,n):null}function ob(i,n,o,f){const m=i.compareText;if(n in m){const v=m[n];for(let w=v.length-1;w>=0;w--)if(f.dist(v[w])<o)return!0}else m[n]=[];return m[n].push(f),!1}function sb(i,n){const o=i.fovAboveCenter,f=i.elevation?i.elevation.getMinElevationBelowMSL()*n:0,m=(i._camera.position[2]*i.worldSize-f)/Math.cos(i._pitch),v=Math.sin(o)*m/Math.sin(Math.max(Math.PI/2-i._pitch-o,.01)),w=Math.sin(i._pitch)*v+m;return Math.min(1.01*w,m*(1/i._horizonShift))}function Bl(i,n){if(!n.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:n};const o=Math.pow(2,-i.z),f=i.x*o,m=(i.x+1)*o,v=i.y*o,w=(i.y+1)*o,C=Uo(f),A=Uo(m),k=Vr(v),B=Vr(w),$=n.project(C,k),G=n.project(A,k),K=n.project(A,B),ee=n.project(C,B);let oe=Math.min($.x,G.x,K.x,ee.x),de=Math.min($.y,G.y,K.y,ee.y),Ae=Math.max($.x,G.x,K.x,ee.x),Fe=Math.max($.y,G.y,K.y,ee.y);const Re=o/16;function De(Ne,ut,st,bt,Gt,ht){const It=(st+Gt)/2,zt=(bt+ht)/2,Ut=n.project(Uo(It),Vr(zt)),Ht=Math.max(0,oe-Ut.x,de-Ut.y,Ut.x-Ae,Ut.y-Fe);oe=Math.min(oe,Ut.x),Ae=Math.max(Ae,Ut.x),de=Math.min(de,Ut.y),Fe=Math.max(Fe,Ut.y),Ht>Re&&(De(Ne,Ut,st,bt,It,zt),De(Ut,ut,It,zt,Gt,ht))}De($,G,f,v,m,v),De(G,K,m,v,m,w),De(K,ee,m,w,f,w),De(ee,$,f,w,f,v),oe-=Re,de-=Re,Ae+=Re,Fe+=Re;const $e=1/Math.max(Ae-oe,Fe-de);return{scale:$e,x:oe*$e,y:de*$e,x2:Ae*$e,y2:Fe*$e,projection:n}}const Vg=ls(new Float32Array(16));class qc{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,o){return{x:0,y:0,z:0}}unproject(n,o){return new qr(0,0)}projectTilePoint(n,o,f){return{x:n,y:o,z:0}}locationPoint(n,o,f=!0){return n._coordinatePoint(n.locationCoordinate(o),f)}pixelsPerMeter(n,o){return fs(1,n)*o}pixelSpaceConversion(n,o,f){return 1}farthestPixelDistance(n){return sb(n,n.pixelsPerMeter)}pointCoordinate(n,o,f,m){const v=n.horizonLineFromTop(!1),w=new ue(o,Math.max(v,f));return n.rayIntersectionCoordinate(n.pointRayIntersection(w,m))}pointCoordinate3D(n,o,f){const m=new ue(o,f);if(n.elevation)return n.elevation.pointCoordinate(m);{const v=this.pointCoordinate(n,m.x,m.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(n,o){if(n.elevation)return!this.pointCoordinate3D(n,o.x,o.y);const f=n.horizonLineFromTop();return o.y<f}createInversionMatrix(n,o){return Vg}createTileMatrix(n,o,f){let m,v,w;const C=f.canonical,A=ls(new Float64Array(16));if(this.isReprojectedInTileSpace){const k=Bl(C,this);m=1,v=k.x+f.wrap*k.scale,w=k.y,Cu(A,A,[m/k.scale,m/k.scale,n.pixelsPerMeter/o])}else m=o/n.zoomScale(C.z),v=(C.x+Math.pow(2,C.z)*f.wrap)*m,w=C.y*m;return Gf(A,A,[v,w,0]),Cu(A,A,[m/En,m/En,1]),A}upVector(n,o,f){return[0,0,1]}upVectorScale(n,o,f){return{metersToTile:1}}}class Pd extends qc{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[o,f]=this.parallels=n.parallels||[29.5,45.5],m=Math.sin(me(o));this.n=(m+Math.sin(me(f)))/2,this.c=1+m*(2*this.n-m),this.r0=Math.sqrt(this.c)/this.n}project(n,o){const{n:f,c:m,r0:v}=this,w=me(n-this.center[0]),C=me(o),A=Math.sqrt(m-2*f*Math.sin(C))/f;return{x:A*Math.sin(w*f),y:A*Math.cos(w*f)-v,z:0}}unproject(n,o){const{n:f,c:m,r0:v}=this,w=v+o;let C=Math.atan2(n,Math.abs(w))*Math.sign(w);w*f<0&&(C-=Math.PI*Math.sign(n)*Math.sign(w));const A=me(this.center[0])*f;C=Ce(C,-Math.PI-A,Math.PI-A);const k=Be(be(C/f)+this.center[0],-180,180),B=Math.asin(Be((m-(n*n+w*w)*f*f)/(2*f),-1,1)),$=Be(be(B),-za,za);return new qr(k,$)}}const Dd=1.340264,_h=-.081106,Gu=893e-6,Od=.003796,Gg=Math.sqrt(3)/2;class Hg extends qc{project(n,o){o=o/180*Math.PI,n=n/180*Math.PI;const f=Math.asin(Gg*Math.sin(o)),m=f*f,v=m*m*m;return{x:.5*(n*Math.cos(f)/(Gg*(Dd+3*_h*m+v*(7*Gu+9*Od*m)))/Math.PI+.5),y:1-.5*(f*(Dd+_h*m+v*(Gu+Od*m))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let f=o=(2*(1-o)-1)*Math.PI,m=f*f,v=m*m*m;for(let B,$,G,K=0;K<12&&($=f*(Dd+_h*m+v*(Gu+Od*m))-o,G=Dd+3*_h*m+v*(7*Gu+9*Od*m),B=$/G,f=Be(f-B,-Math.PI/3,Math.PI/3),m=f*f,v=m*m*m,!(Math.abs(B)<1e-12));++K);const w=Gg*n*(Dd+3*_h*m+v*(7*Gu+9*Od*m))/Math.cos(f),C=Math.asin(Math.sin(f)/Gg),A=Be(180*w/Math.PI,-180,180),k=Be(180*C/Math.PI,-za,za);return new qr(A,k)}}class l extends qc{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){return{x:.5+n/360,y:.5-o/360,z:0}}unproject(n,o){const f=360*(n-.5),m=Be(360*(.5-o),-za,za);return new qr(f,m)}}const u=Math.PI/2;function g(i){return Math.tan((u+i)/2)}class S extends qc{constructor(n){super(n),this.center=n.center||[0,30];const[o,f]=this.parallels=n.parallels||[30,30];let m=me(o),v=me(f);this.southernCenter=m+v<0,this.southernCenter&&(m=-m,v=-v);const w=Math.cos(m),C=g(m);this.n=m===v?Math.sin(m):Math.log(w/Math.cos(v))/Math.log(g(v)/C),this.f=w*Math.pow(g(m),this.n)/this.n}project(n,o){o=me(o),this.southernCenter&&(o=-o),n=me(n-this.center[0]);const f=1e-6,{n:m,f:v}=this;v>0?o<-u+f&&(o=-u+f):o>u-f&&(o=u-f);const w=v/Math.pow(g(o),m);let C=w*Math.sin(m*n),A=v-w*Math.cos(m*n);return C=.5*(C/Math.PI+.5),A=.5*(A/Math.PI+.5),{x:C,y:this.southernCenter?A:1-A,z:0}}unproject(n,o){n=(2*n-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:f,f:m}=this,v=m-o,w=Math.sign(v),C=Math.sign(f)*Math.sqrt(n*n+v*v);let A=Math.atan2(n,Math.abs(v))*w;v*f<0&&(A-=Math.PI*Math.sign(n)*w);const k=Be(be(A/f)+this.center[0],-180,180),B=Be(be(2*Math.atan(Math.pow(m/C,1/f))-u),-za,za);return new qr(k,this.southernCenter?-B:B)}}class I extends qc{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,o){return{x:qa(n),y:_i(o),z:0}}unproject(n,o){const f=Uo(n),m=Vr(o);return new qr(f,m)}}const O=me(za);class te extends qc{project(n,o){const f=(o=me(o))*o,m=f*f;return{x:.5*((n=me(n))*(.8707-.131979*f+m*(m*(.003971*f-.001529*m)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+f*(.015085+m*(.028874*f-.044475-.005916*m)))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let f=o=(2*(1-o)-1)*Math.PI,m=25,v=0,w=f*f;do{w=f*f;const k=w*w;v=(f*(1.007226+w*(.015085+k*(.028874*w-.044475-.005916*k)))-o)/(1.007226+w*(.045255+k*(.259866*w-.311325-.005916*11*k))),f=Be(f-v,-O,O)}while(Math.abs(v)>1e-6&&--m>0);w=f*f;const C=Be(be(n/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),A=be(f);return new qr(C,A)}}const ge=me(za);class Ze extends qc{project(n,o){o=me(o),n=me(n);const f=Math.cos(o),m=2/Math.PI,v=Math.acos(f*Math.cos(n/2)),w=Math.sin(v)/v,C=.5*(n*m+2*f*Math.sin(n/2)/w)||0,A=.5*(o+Math.sin(o)/w)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(A/Math.PI+1),z:0}}unproject(n,o){let f=n=(2*n-.5)*Math.PI,m=o=(2*(1-o)-1)*Math.PI,v=25;const w=1e-6;let C=0,A=0;do{const k=Math.cos(m),B=Math.sin(m),$=2*B*k,G=B*B,K=k*k,ee=Math.cos(f/2),oe=Math.sin(f/2),de=2*ee*oe,Ae=oe*oe,Fe=1-K*ee*ee,Re=Fe?1/Fe:0,De=Fe?Math.acos(k*ee)*Math.sqrt(1/Fe):0,$e=.5*(2*De*k*oe+2*f/Math.PI)-n,Ne=.5*(De*B+m)-o,ut=.5*Re*(K*Ae+De*k*ee*G)+1/Math.PI,st=Re*(de*$/4-De*B*oe),bt=.125*Re*($*oe-De*B*K*de),Gt=.5*Re*(G*ee+De*Ae*k)+.5,ht=st*bt-Gt*ut;C=(Ne*st-$e*Gt)/ht,A=($e*bt-Ne*ut)/ht,f=Be(f-C,-Math.PI,Math.PI),m=Be(m-A,-ge,ge)}while((Math.abs(C)>w||Math.abs(A)>w)&&--v>0);return new qr(be(f),be(m))}}class mt extends qc{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(me(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){const{scale:f,cosPhi:m}=this;return{x:me(n)*m*f+.5,y:-Math.sin(me(o))/m*f+.5,z:0}}unproject(n,o){const{scale:f,cosPhi:m}=this,v=-(o-.5)/f,w=Be(be((n-.5)/f)/m,-180,180),C=Math.asin(Be(v*m,-1,1)),A=Be(be(C),-za,za);return new qr(w,A)}}class Dt extends I{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,o,f){const m=yi(n,o,f);return qi(m,m,gd($a(f))),{x:m[0],y:m[1],z:m[2]}}locationPoint(n,o){const f=Ml(o.lat,o.lng),m=Ja([],f),v=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(o),n._centerAltitude):n._centerAltitude;fd(f,f,m,fs(1,0)*En*v);const w=ls(new Float64Array(16));return Eu(w,n.pixelMatrix,n.globeMatrix),qi(f,f,w),new ue(f[0],f[1])}pixelsPerMeter(n,o){return fs(1,0)*o}pixelSpaceConversion(n,o,f){const m=fs(1,n)*o,v=Cr(fs(1,45)*o,m,f);return this.pixelsPerMeter(n,o)/v}createTileMatrix(n,o,f){const m=Xf($a(f.canonical));return Eu(new Float64Array(16),n.globeMatrix,m)}createInversionMatrix(n,o){const{center:f}=n,m=gd($a(o));return cg(m,m,me(f.lng)),lg(m,m,me(f.lat)),Cu(m,m,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(m)}pointCoordinate(n,o,f,m){return __(n,o,f,!0)||new vi(0,0)}pointCoordinate3D(n,o,f){const m=this.pointCoordinate(n,o,f,0);return[m.x,m.y,m.z]}isPointAboveHorizon(n,o){return!__(n,o.x,o.y,!1)}farthestPixelDistance(n){const o=(function(m,v){const w=m.cameraToCenterDistance,C=m._centerAltitude*v,A=m._camera,k=m._camera.forward(),B=cs([],To([],k,-w),[0,0,C]),$=m.worldSize/(2*Math.PI),G=[0,0,-$],K=m.width/m.height,ee=Math.tan(m.fovAboveCenter),oe=To([],A.up(),ee),de=To([],A.right(),ee*K),Ae=Ja([],cs([],cs([],k,oe),de)),Fe=[];let Re;if(new dg(B,Ae).closestPointOnSphere(G,$,Fe)){const De=cs([],Fe,G),$e=Ms([],De,B);Re=Math.cos(m.fovAboveCenter)*cd($e)}else{const De=Ms([],B,G),$e=Ms([],G,B);Ja($e,$e);const Ne=cd(De)-$;Re=Math.sqrt(Ne*(Ne+2*$));const ut=Math.acos(Re/($+Ne))-Math.acos(ja(k,$e));Re*=Math.cos(ut)}return 1.01*Re})(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),f=Yf(n.zoom);if(f>0){const m=sb(n,fs(1,n.center.lat)*n.worldSize),v=n.worldSize/(2*Math.PI),w=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Cr(o,m+v*(1-Math.cos(w)),Math.pow(f,10))}return o}upVector(n,o,f){return yi(o,f,n,1)}upVectorScale(n){return{metersToTile:pd(_g($a(n)))}}}function qt(i){const n=i.parallels,o=!!n&&Math.abs(n[0]+n[1])<.01;switch(i.name){case"mercator":return new I(i);case"equirectangular":return new l(i);case"naturalEarth":return new te(i);case"equalEarth":return new Hg(i);case"winkelTripel":return new Ze(i);case"albers":return o?new mt(i):new Pd(i);case"lambertConformalConic":return o?new mt(i):new S(i);case"globe":return new Dt(i)}throw new Error(`Invalid projection name: ${i.name}`)}const yt=zg.types,wt=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wn(i,n,o,f,m,v,w,C,A,k,B,$,G){const K=C?Math.min($c,Math.round(C[0])):0,ee=C?Math.min($c,Math.round(C[1])):0;i.emplaceBack(n,o,Math.round(32*f),Math.round(32*m),v,w,(K<<1)+(A?1:0),ee,16*k,16*B,256*$,256*G)}function Hn(i,n,o,f,m,v,w){i.emplaceBack(n,o,f,m,v,w)}function oi(i,n,o,f,m){i.emplaceBack(n,o,f,m),i.emplaceBack(n,o,f,m),i.emplaceBack(n,o,f,m),i.emplaceBack(n,o,f,m)}function it(i){for(const n of i.sections)if(Cp(n.text))return!0;return!1}class Ye{constructor(n){this.layoutVertexArray=new Et,this.indexArray=new pn,this.programConfigurations=n,this.segments=new $i,this.dynamicLayoutVertexArray=new Ft,this.opacityVertexArray=new vn,this.placedSymbolArray=new Ui,this.globeExtVertexArray=new At}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,jx.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,ki.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,wt,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Nx.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}ln(Ye,"SymbolBuffers");class ft{constructor(n,o,f){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new f,this.segments=new $i,this.collisionVertexArray=new kn,this.collisionVertexArrayExt=new Yn}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,G_.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,ro.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ln(ft,"CollisionBuffers");class Ot{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ls([]),this.placementViewportMatrix=ls([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=qp(this.zoom,o["text-size"]),this.iconSizeData=qp(this.zoom,o["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),v=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&m.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map((w=>ps[w])),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new Ye(new Cl(this.layers,this.zoom,(n=>/^text/.test(n)))),this.icon=new Ye(new Cl(this.layers,this.zoom,(n=>/^icon/.test(n)))),this.glyphOffsetArray=new si,this.lineVertexArray=new Fi,this.symbolInstances=new ri}calculateGlyphDependencies(n,o,f,m,v){for(let w=0;w<n.length;w++)if(o[n.charCodeAt(w)]=!0,m&&v){const C=ch[n.charAt(w)];C&&(o[C.charCodeAt(0)]=!0)}}populate(n,o,f,m){const v=this.layers[0],w=v.layout,C=this.projection.name==="globe",A=w.get("text-font"),k=w.get("text-field"),B=w.get("icon-image"),$=(k.value.kind!=="constant"||k.value.value instanceof xa&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),G=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,K=w.get("symbol-sort-key");if(this.features=[],!$&&!G)return;const ee=o.iconDependencies,oe=o.glyphDependencies,de=o.availableImages,Ae=new j(this.zoom);for(const{feature:Fe,id:Re,index:De,sourceLayerIndex:$e}of n){const Ne=v._featureFilter.needGeometry,ut=eo(Fe,Ne);if(!v._featureFilter.filter(Ae,ut,f))continue;if(Ne||(ut.geometry=la(Fe,f,m)),C&&Fe.type!==1&&f.z<=5){const ht=ut.geometry,It=.98078528056,zt=(Ut,Ht)=>ja(yi(Ut.x,Ut.y,f,1),yi(Ht.x,Ht.y,f,1))<It;for(let Ut=0;Ut<ht.length;Ut++)ht[Ut]=px(ht[Ut],zt)}let st,bt;if($){const ht=v.getValueAndResolveTokens("text-field",ut,f,de),It=xa.factory(ht);it(It)&&(this.hasRTLText=!0),(!this.hasRTLText||M()==="unavailable"||this.hasRTLText&&D.isParsed())&&(st=H_(It,v,ut))}if(G){const ht=v.getValueAndResolveTokens("icon-image",ut,f,de);bt=ht instanceof oa?ht:oa.fromString(ht)}if(!st&&!bt)continue;const Gt=this.sortFeaturesByKey?K.evaluate(ut,{},f):void 0;if(this.features.push({id:Re,text:st,icon:bt,index:De,sourceLayerIndex:$e,geometry:ut.geometry,properties:Fe.properties,type:yt[Fe.type],sortKey:Gt}),bt&&(ee[bt.name]=!0),st){const ht=A.evaluate(ut,{},f).join(","),It=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ps.vertical)>=0;for(const zt of st.sections)if(zt.image)ee[zt.image.name]=!0;else{const Ut=Tp(st.toString()),Ht=zt.fontStack||ht,xt=oe[Ht]=oe[Ht]||{};this.calculateGlyphDependencies(zt.text,xt,It,this.allowVerticalPlacement,Ut)}}}w.get("symbol-placement")==="line"&&(this.features=(function(Fe){const Re={},De={},$e=[];let Ne=0;function ut(ht){$e.push(Fe[ht]),Ne++}function st(ht,It,zt){const Ut=De[ht];return delete De[ht],De[It]=Ut,$e[Ut].geometry[0].pop(),$e[Ut].geometry[0]=$e[Ut].geometry[0].concat(zt[0]),Ut}function bt(ht,It,zt){const Ut=Re[It];return delete Re[It],Re[ht]=Ut,$e[Ut].geometry[0].shift(),$e[Ut].geometry[0]=zt[0].concat($e[Ut].geometry[0]),Ut}function Gt(ht,It,zt){const Ut=zt?It[0][It[0].length-1]:It[0][0];return`${ht}:${Ut.x}:${Ut.y}`}for(let ht=0;ht<Fe.length;ht++){const It=Fe[ht],zt=It.geometry,Ut=It.text?It.text.toString():null;if(!Ut){ut(ht);continue}const Ht=Gt(Ut,zt),xt=Gt(Ut,zt,!0);if(Ht in De&&xt in Re&&De[Ht]!==Re[xt]){const an=bt(Ht,xt,zt),hn=st(Ht,xt,$e[an].geometry);delete Re[Ht],delete De[xt],De[Gt(Ut,$e[hn].geometry,!0)]=hn,$e[an].geometry=null}else Ht in De?st(Ht,xt,zt):xt in Re?bt(Ht,xt,zt):(ut(ht),Re[Ht]=Ne-1,De[xt]=Ne-1)}return $e.filter((ht=>ht.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Fe,Re)=>Fe.sortKey-Re.sortKey))}update(n,o,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,f,m),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,f,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=qt(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const f=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:m,y:v}of o)this.lineVertexArray.emplaceBack(m,v);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,o,f,m,v,w,C,A,k,B,$,G,K,ee){const oe=n.indexArray,de=n.layoutVertexArray,Ae=n.globeExtVertexArray,Fe=n.segments.prepareSegment(4*o.length,de,oe,this.canOverlap?w.sortKey:void 0),Re=this.glyphOffsetArray.length,De=Fe.vertexLength,$e=this.allowVerticalPlacement&&C===ps.vertical?Math.PI/2:0,Ne=w.text&&w.text.sections;for(let st=0;st<o.length;st++){const{tl:bt,tr:Gt,bl:ht,br:It,tex:zt,pixelOffsetTL:Ut,pixelOffsetBR:Ht,minFontScaleX:xt,minFontScaleY:an,glyphOffset:hn,isSDF:on,sectionIndex:Kn}=o[st],Zt=Fe.vertexLength,An=hn[1];if(wn(de,k.x,k.y,bt.x,An+bt.y,zt.x,zt.y,f,on,Ut.x,Ut.y,xt,an),wn(de,k.x,k.y,Gt.x,An+Gt.y,zt.x+zt.w,zt.y,f,on,Ht.x,Ut.y,xt,an),wn(de,k.x,k.y,ht.x,An+ht.y,zt.x,zt.y+zt.h,f,on,Ut.x,Ht.y,xt,an),wn(de,k.x,k.y,It.x,An+It.y,zt.x+zt.w,zt.y+zt.h,f,on,Ht.x,Ht.y,xt,an),A){const{x:Qn,y:Nr,z:Jn}=A.anchor,[Un,Ii,rr]=A.up;Hn(Ae,Qn,Nr,Jn,Un,Ii,rr),Hn(Ae,Qn,Nr,Jn,Un,Ii,rr),Hn(Ae,Qn,Nr,Jn,Un,Ii,rr),Hn(Ae,Qn,Nr,Jn,Un,Ii,rr),oi(n.dynamicLayoutVertexArray,Qn,Nr,Jn,$e)}else oi(n.dynamicLayoutVertexArray,k.x,k.y,k.z,$e);oe.emplaceBack(Zt,Zt+1,Zt+2),oe.emplaceBack(Zt+1,Zt+2,Zt+3),Fe.vertexLength+=4,Fe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(hn[0]),st!==o.length-1&&Kn===o[st+1].sectionIndex||n.programConfigurations.populatePaintArrays(de.length,w,w.index,{},K,ee,Ne&&Ne[Kn])}const ut=A?A.anchor:k;n.placedSymbolArray.emplaceBack(ut.x,ut.y,ut.z,k.x,k.y,Re,this.glyphOffsetArray.length-Re,De,B,$,k.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],C,0,!1,0,G,0)}_commitLayoutVertex(n,o,f,m,v,w,C){n.emplaceBack(o,f,m,v,w,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(n,o,f,m,v,w,C){const A=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),k=A.vertexLength,B=C.tileAnchorX,$=C.tileAnchorY;for(let K=0;K<4;K++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(o,-n.padding,-n.padding),f.collisionVertexArrayExt.emplaceBack(o,n.padding,-n.padding),f.collisionVertexArrayExt.emplaceBack(o,n.padding,n.padding),f.collisionVertexArrayExt.emplaceBack(o,-n.padding,n.padding),this._commitLayoutVertex(f.layoutVertexArray,m,v,w,B,$,new ue(n.x1,n.y1)),this._commitLayoutVertex(f.layoutVertexArray,m,v,w,B,$,new ue(n.x2,n.y1)),this._commitLayoutVertex(f.layoutVertexArray,m,v,w,B,$,new ue(n.x2,n.y2)),this._commitLayoutVertex(f.layoutVertexArray,m,v,w,B,$,new ue(n.x1,n.y2)),A.vertexLength+=4;const G=f.indexArray;G.emplaceBack(k,k+1),G.emplaceBack(k+1,k+2),G.emplaceBack(k+2,k+3),G.emplaceBack(k+3,k),A.primitiveLength+=4}_addTextDebugCollisionBoxes(n,o,f,m,v,w){for(let C=m;C<v;C++){const A=f.get(C),k=this.getSymbolInstanceTextSize(n,w,o,C);this._addCollisionDebugVertices(A,k,this.textCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(n,o,f,m,v,w){for(let C=m;C<v;C++){const A=f.get(C),k=this.getSymbolInstanceIconSize(n,o,w.placedIconSymbolIndex);this._addCollisionDebugVertices(A,k,this.iconCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,w)}}generateCollisionDebugBuffers(n,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ft(Nt,Ux.members,vr),this.iconCollisionBox=new ft(Nt,Ux.members,vr);const f=lh(this.iconSizeData,n),m=lh(this.textSizeData,n);for(let v=0;v<this.symbolInstances.length;v++){const w=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(m,n,o,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(m,n,o,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,n,o,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,n,o,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(n,o,f,m){const v=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:m),w=sh(this.textSizeData,n,v)/Pa;return this.tilePixelRatio*w}getSymbolInstanceIconSize(n,o,f){const m=this.icon.placedSymbolArray.get(f),v=sh(this.iconSizeData,n,m);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(n,o,f){n.emplaceBack(o,-f,-f),n.emplaceBack(o,f,-f),n.emplaceBack(o,f,f),n.emplaceBack(o,-f,f)}_updateTextDebugCollisionBoxes(n,o,f,m,v,w){for(let C=m;C<v;C++){const A=f.get(C),k=this.getSymbolInstanceTextSize(n,w,o,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,k,A.padding)}}_updateIconDebugCollisionBoxes(n,o,f,m,v,w){for(let C=m;C<v;C++){const A=f.get(C),k=this.getSymbolInstanceIconSize(n,o,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,k,A.padding)}}updateCollisionDebugBuffers(n,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=lh(this.iconSizeData,n),m=lh(this.textSizeData,n);for(let v=0;v<this.symbolInstances.length;v++){const w=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(m,n,o,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(m,n,o,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(f,n,o,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,n,o,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,o,f,m,v,w,C,A,k){const B={};if(o<f){const{x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De,featureIndex:$e}=n.get(o);B.textBox={x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De},B.textFeatureIndex=$e}if(m<v){const{x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De,featureIndex:$e}=n.get(m);B.verticalTextBox={x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De},B.verticalTextFeatureIndex=$e}if(w<C){const{x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De,featureIndex:$e}=n.get(w);B.iconBox={x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De},B.iconFeatureIndex=$e}if(A<k){const{x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De,featureIndex:$e}=n.get(A);B.verticalIconBox={x1:$,y1:G,x2:K,y2:ee,padding:oe,projectedAnchorX:de,projectedAnchorY:Ae,projectedAnchorZ:Fe,tileAnchorX:Re,tileAnchorY:De},B.verticalIconFeatureIndex=$e}return B}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const f=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const f=n.placedSymbolArray.get(o),m=f.vertexStartIndex+4*f.numGlyphs;for(let v=f.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),f=Math.cos(n),m=[],v=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const A=this.symbolInstances.get(C);m.push(0|Math.round(o*A.tileAnchorX+f*A.tileAnchorY)),v.push(A.featureIndex)}return w.sort(((C,A)=>m[C]-m[A]||v[A]-v[C])),w}addToSortKeyRanges(n,o){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===o?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const f=this.symbolInstances.get(o);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:m,centerJustifiedTextSymbolIndex:v,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:A,verticalPlacedIconSymbolIndex:k}=f;m>=0&&this.addIndicesForPlacedSymbol(this.text,m),v>=0&&v!==m&&this.addIndicesForPlacedSymbol(this.text,v),w>=0&&w!==v&&w!==m&&this.addIndicesForPlacedSymbol(this.text,w),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),A>=0&&this.addIndicesForPlacedSymbol(this.icon,A),k>=0&&this.addIndicesForPlacedSymbol(this.icon,k)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ln(Ot,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ot.MAX_GLYPHS=65535,Ot.addDynamicAttributes=oi;const Gn=new ze({"symbol-placement":new ie(_t.layout_symbol["symbol-placement"]),"symbol-spacing":new ie(_t.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ie(_t.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ye(_t.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ie(_t.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ie(_t.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ie(_t.layout_symbol["icon-ignore-placement"]),"icon-optional":new ie(_t.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ie(_t.layout_symbol["icon-rotation-alignment"]),"icon-size":new ye(_t.layout_symbol["icon-size"]),"icon-text-fit":new ie(_t.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ie(_t.layout_symbol["icon-text-fit-padding"]),"icon-image":new ye(_t.layout_symbol["icon-image"]),"icon-rotate":new ye(_t.layout_symbol["icon-rotate"]),"icon-padding":new ie(_t.layout_symbol["icon-padding"]),"icon-keep-upright":new ie(_t.layout_symbol["icon-keep-upright"]),"icon-offset":new ye(_t.layout_symbol["icon-offset"]),"icon-anchor":new ye(_t.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ie(_t.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ie(_t.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ie(_t.layout_symbol["text-rotation-alignment"]),"text-field":new ye(_t.layout_symbol["text-field"]),"text-font":new ye(_t.layout_symbol["text-font"]),"text-size":new ye(_t.layout_symbol["text-size"]),"text-max-width":new ye(_t.layout_symbol["text-max-width"]),"text-line-height":new ye(_t.layout_symbol["text-line-height"]),"text-letter-spacing":new ye(_t.layout_symbol["text-letter-spacing"]),"text-justify":new ye(_t.layout_symbol["text-justify"]),"text-radial-offset":new ye(_t.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ie(_t.layout_symbol["text-variable-anchor"]),"text-anchor":new ye(_t.layout_symbol["text-anchor"]),"text-max-angle":new ie(_t.layout_symbol["text-max-angle"]),"text-writing-mode":new ie(_t.layout_symbol["text-writing-mode"]),"text-rotate":new ye(_t.layout_symbol["text-rotate"]),"text-padding":new ie(_t.layout_symbol["text-padding"]),"text-keep-upright":new ie(_t.layout_symbol["text-keep-upright"]),"text-transform":new ye(_t.layout_symbol["text-transform"]),"text-offset":new ye(_t.layout_symbol["text-offset"]),"text-allow-overlap":new ie(_t.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ie(_t.layout_symbol["text-ignore-placement"]),"text-optional":new ie(_t.layout_symbol["text-optional"])});var Wr={paint:new ze({"icon-opacity":new ye(_t.paint_symbol["icon-opacity"]),"icon-color":new ye(_t.paint_symbol["icon-color"]),"icon-halo-color":new ye(_t.paint_symbol["icon-halo-color"]),"icon-halo-width":new ye(_t.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ye(_t.paint_symbol["icon-halo-blur"]),"icon-translate":new ie(_t.paint_symbol["icon-translate"]),"icon-translate-anchor":new ie(_t.paint_symbol["icon-translate-anchor"]),"text-opacity":new ye(_t.paint_symbol["text-opacity"]),"text-color":new ye(_t.paint_symbol["text-color"],{runtimeType:Ya,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new ye(_t.paint_symbol["text-halo-color"]),"text-halo-width":new ye(_t.paint_symbol["text-halo-width"]),"text-halo-blur":new ye(_t.paint_symbol["text-halo-blur"]),"text-translate":new ie(_t.paint_symbol["text-translate"]),"text-translate-anchor":new ie(_t.paint_symbol["text-translate-anchor"])}),layout:Gn};class Dn{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:rc,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ln(Dn,"FormatSectionOverride",{omit:["defaultValue"]});class ur extends Cs{constructor(n){super(n,Wr)}recalculate(n,o){super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const v of f)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,o,f,m){const v=this.layout.get(n).evaluate(o,{},f,m),w=this._unevaluatedLayout._values[n];return w.isDataDriven()||xc(w.value)||!v?v:(function(C,A){return A.replace(/{([^{}]+)}/g,((k,B)=>B in C?String(C[B]):""))})(o.properties,v)}createBucket(n){return new Ot(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of Wr.paint.overridableProperties){if(!ur.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),f=new Dn(o),m=new Po(f,o.property.specification);let v=null;v=o.value.kind==="constant"||o.value.kind==="source"?new Gs("source",m):new bc("composite",m,o.value.zoomStops,o.value._interpolationType),this.paint._values[n]=new xe(o.property,v,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,f){return!(!this.layout||o.isDataDriven()||f.isDataDriven())&&ur.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const f=n.get("text-field"),m=Wr.paint.properties[o];let v=!1;const w=C=>{for(const A of C)if(m.overrides&&m.overrides.hasOverride(A))return void(v=!0)};if(f.value.kind==="constant"&&f.value.value instanceof xa)w(f.value.value.sections);else if(f.value.kind==="source"){const C=k=>{v||(k instanceof fl&&Qr(k.value)===nu?w(k.value.sections):k instanceof so?w(k.sections):k.eachChild(C))},A=f.value;A._styleExpression&&C(A._styleExpression.expression)}return v}getProgramConfiguration(n){return new kc(this,n)}}var jr={paint:new ze({"background-color":new ie(_t.paint_background["background-color"]),"background-pattern":new ie(_t.paint_background["background-pattern"]),"background-opacity":new ie(_t.paint_background["background-opacity"])})},ei={paint:new ze({"raster-opacity":new ie(_t.paint_raster["raster-opacity"]),"raster-hue-rotate":new ie(_t.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ie(_t.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ie(_t.paint_raster["raster-brightness-max"]),"raster-saturation":new ie(_t.paint_raster["raster-saturation"]),"raster-contrast":new ie(_t.paint_raster["raster-contrast"]),"raster-resampling":new ie(_t.paint_raster["raster-resampling"]),"raster-fade-duration":new ie(_t.paint_raster["raster-fade-duration"])})};class Hu extends Cs{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var RS={paint:new ze({"sky-type":new ie(_t.paint_sky["sky-type"]),"sky-atmosphere-sun":new ie(_t.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ie(_t.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ie(_t.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ie(_t.paint_sky["sky-gradient-radius"]),"sky-gradient":new ke(_t.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ie(_t.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ie(_t.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ie(_t.paint_sky["sky-opacity"])})};function kS(i,n,o){const f=[0,0,1],m=Na([]);return d_(m,m,o?-me(i)+Math.PI:me(i)),h_(m,m,-me(n)),c_(f,f,m),Ja(f,f)}const l7={circle:class extends Cs{constructor(i){super(i,_S)}createBucket(i){return new Tg(i)}queryRadius(i){const n=i;return th("circle-radius",this,n)+th("circle-stroke-width",this,n)+Ru(this.paint.get("circle-translate"))}queryIntersectsFeature(i,n,o,f,m,v,w,C){const A=Op(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),k=this.paint.get("circle-radius").evaluate(n,o)+this.paint.get("circle-stroke-width").evaluate(n,o);return _x(i,f,v,w,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",A,k)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new kc(this,i)}},heatmap:class extends Cs{createBucket(i){return new li(i)}constructor(i){super(i,ua),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=zl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return th("heatmap-radius",this,i)}queryIntersectsFeature(i,n,o,f,m,v,w,C){const A=this.paint.get("heatmap-radius").evaluate(n,o);return _x(i,f,v,w,C,!0,!0,new ue(0,0),A)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new kc(this,i)}},hillshade:class extends Cs{constructor(i){super(i,nh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Cs{constructor(i){super(i,Ex)}getProgramIds(){const i=this.paint.get("fill-pattern"),n=i&&i.constantOr(1),o=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(i){return new kc(this,i)}recalculate(i,n){super.recalculate(i,n);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Ag(i)}queryRadius(){return Ru(this.paint.get("fill-translate"))}queryIntersectsFeature(i,n,o,f,m,v){return!i.queryGeometry.isAboveHorizon&&Il(E_(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Cs{constructor(i){super(i,Px)}createBucket(i){return new Vo(i)}queryRadius(){return Ru(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new kc(this,i)}queryIntersectsFeature(i,n,o,f,m,v,w,C,A){const k=Op(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),B=this.paint.get("fill-extrusion-height").evaluate(n,o),$=this.paint.get("fill-extrusion-base").evaluate(n,o),G=[0,0],K=C&&v.elevation,ee=v.elevation?v.elevation.exaggeration():1,oe=i.tile.getBucket(this);if(K&&oe instanceof Vo){const De=oe.centroidVertexArray,$e=A+1;$e<De.length&&(G[0]=De.geta_centroid_pos0($e),G[1]=De.geta_centroid_pos1($e))}if(G[0]===0&&G[1]===1)return!1;v.projection.name==="globe"&&(f=Lg([f],[new ue(0,0),new ue(En,En)],i.tileID.canonical).map((De=>De.polygon)).flat());const de=K?C:null,[Ae,Fe]=(function(De,$e,Ne,ut,st,bt,Gt,ht,It,zt,Ut){return De.projection.name==="globe"?(function(Ht,xt,an,hn,on,Kn,Zt,An,Qn,Nr,Jn){const Un=[],Ii=[],rr=Ht.projection.upVectorScale(Jn,Ht.center.lat,Ht.worldSize).metersToTile,ir=[0,0,0,1],ui=[0,0,0,1],xi=(fi,Vi,ra,ma)=>{fi[0]=Vi,fi[1]=ra,fi[2]=ma,fi[3]=1},bi=zx();an>0&&(an+=bi),hn+=bi;for(const fi of xt){const Vi=[],ra=[];for(const ma of fi){const hi=ma.x+on.x,Sa=ma.y+on.y,ga=Ht.projection.projectTilePoint(hi,Sa,Jn),Qi=Ht.projection.upVector(Jn,ma.x,ma.y);let Gr=an,ya=hn;if(Zt){const wi=Ir(hi,Sa,an,hn,Zt,An,Qn,Nr);Gr+=wi.base,ya+=wi.top}an!==0?xi(ir,ga.x+Qi[0]*rr*Gr,ga.y+Qi[1]*rr*Gr,ga.z+Qi[2]*rr*Gr):xi(ir,ga.x,ga.y,ga.z),xi(ui,ga.x+Qi[0]*rr*ya,ga.y+Qi[1]*rr*ya,ga.z+Qi[2]*rr*ya),qi(ir,ir,Kn),qi(ui,ui,Kn),Vi.push(new Ll(ir[0],ir[1],ir[2])),ra.push(new Ll(ui[0],ui[1],ui[2]))}Un.push(Vi),Ii.push(ra)}return[Un,Ii]})(De,$e,Ne,ut,st,bt,Gt,ht,It,zt,Ut):Gt?(function(Ht,xt,an,hn,on,Kn,Zt,An,Qn){const Nr=[],Jn=[],Un=[0,0,0,1];for(const Ii of Ht){const rr=[],ir=[];for(const ui of Ii){const xi=ui.x+hn.x,bi=ui.y+hn.y,fi=Ir(xi,bi,xt,an,Kn,Zt,An,Qn);Un[0]=xi,Un[1]=bi,Un[2]=fi.base,Un[3]=1,zc(Un,Un,on),Un[3]=Math.max(Un[3],1e-5);const Vi=new Ll(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);Un[0]=xi,Un[1]=bi,Un[2]=fi.top,Un[3]=1,zc(Un,Un,on),Un[3]=Math.max(Un[3],1e-5);const ra=new Ll(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);rr.push(Vi),ir.push(ra)}Nr.push(rr),Jn.push(ir)}return[Nr,Jn]})($e,Ne,ut,st,bt,Gt,ht,It,zt):(function(Ht,xt,an,hn,on){const Kn=[],Zt=[],An=on[8]*xt,Qn=on[9]*xt,Nr=on[10]*xt,Jn=on[11]*xt,Un=on[8]*an,Ii=on[9]*an,rr=on[10]*an,ir=on[11]*an;for(const ui of Ht){const xi=[],bi=[];for(const fi of ui){const Vi=fi.x+hn.x,ra=fi.y+hn.y,ma=on[0]*Vi+on[4]*ra+on[12],hi=on[1]*Vi+on[5]*ra+on[13],Sa=on[2]*Vi+on[6]*ra+on[14],ga=on[3]*Vi+on[7]*ra+on[15],Qi=ma+An,Gr=hi+Qn,ya=Sa+Nr,wi=Math.max(ga+Jn,1e-5),Go=ma+Un,_a=hi+Ii,ao=Sa+rr,Va=Math.max(ga+ir,1e-5);xi.push(new Ll(Qi/wi,Gr/wi,ya/wi)),bi.push(new Ll(Go/Va,_a/Va,ao/Va))}Kn.push(xi),Zt.push(bi)}return[Kn,Zt]})($e,Ne,ut,st,bt)})(v,f,$,B,k,w,de,G,ee,v.center.lat,i.tileID.canonical),Re=i.queryGeometry;return(function(De,$e,Ne){let ut=1/0;Il(Ne,$e)&&(ut=N_(Ne,$e[0]));for(let st=0;st<$e.length;st++){const bt=$e[st],Gt=De[st];for(let ht=0;ht<bt.length-1;ht++){const It=bt[ht],zt=[It,bt[ht+1],Gt[ht+1],Gt[ht],It];kl(Ne,zt)&&(ut=Math.min(ut,N_(Ne,zt)))}}return ut!==1/0&&ut})(Ae,Fe,Re.isPointQuery()?Re.screenBounds:Re.screenGeometry)}},line:class extends Cs{constructor(i){super(i,V_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof fc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,n){super.recalculate(i,n),this.paint._values["line-floorwidth"]=Bx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new oh(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new kc(this,i)}queryRadius(i){const n=i,o=Fx(th("line-width",this,n),th("line-gap-width",this,n)),f=th("line-offset",this,n);return o/2+Math.abs(f)+Ru(this.paint.get("line-translate"))}queryIntersectsFeature(i,n,o,f,m,v){if(i.queryGeometry.isAboveHorizon)return!1;const w=E_(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,i.pixelToTileUnitsFactor),C=i.pixelToTileUnitsFactor/2*Fx(this.paint.get("line-width").evaluate(n,o),this.paint.get("line-gap-width").evaluate(n,o)),A=this.paint.get("line-offset").evaluate(n,o);return A&&(f=(function(k,B){const $=[],G=new ue(0,0);for(let K=0;K<k.length;K++){const ee=k[K],oe=[];for(let de=0;de<ee.length;de++){const Ae=ee[de],Fe=ee[de+1],Re=de===0?G:Ae.sub(ee[de-1])._unit()._perp(),De=de===ee.length-1?G:Fe.sub(Ae)._unit()._perp(),$e=Re._add(De)._unit();$e._mult(1/($e.x*De.x+$e.y*De.y)),oe.push($e._mult(B)._add(Ae))}$.push(oe)}return $})(f,A*i.pixelToTileUnitsFactor)),(function(k,B,$){for(let G=0;G<B.length;G++){const K=B[G];if(k.length>=3){for(let ee=0;ee<K.length;ee++)if(tl(k,K[ee]))return!0}if(T_(k,K,$))return!0}return!1})(w,f,C)}isTileClipped(){return!0}},symbol:ur,background:class extends Cs{constructor(i){super(i,jr)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Cs{constructor(i){super(i,ei)}getProgramIds(){return["raster"]}},sky:class extends Cs{constructor(i){super(i,RS),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=zl({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(i,n){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),m=!f,v=i.style.light,w=v.properties.get("position");return m&&v.properties.get("anchor")==="viewport"&&sn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),m?kS(w.azimuthal,90-w.polar,n):kS(f[0],90-f[1],n)}const o=this.paint.get("sky-gradient-center");return kS(o[0],90-o[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}}};class u0{constructor(n,o,f,m){this.context=n,this.format=f,this.texture=n.gl.createTexture(),this.update(o,m)}update(n,o,f){const{width:m,height:v}=n,{context:w}=this,{gl:C}=w,{HTMLImageElement:A,HTMLCanvasElement:k,HTMLVideoElement:B,ImageData:$,ImageBitmap:G}=E;if(C.bindTexture(C.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!o||o.premultiply!==!1)),f||this.size&&this.size[0]===m&&this.size[1]===v){const{x:K,y:ee}=f||{x:0,y:0};n instanceof A||n instanceof k||n instanceof B||n instanceof $||G&&n instanceof G?C.texSubImage2D(C.TEXTURE_2D,0,K,ee,C.RGBA,C.UNSIGNED_BYTE,n):C.texSubImage2D(C.TEXTURE_2D,0,K,ee,m,v,C.RGBA,C.UNSIGNED_BYTE,n.data)}else this.size=[m,v],n instanceof A||n instanceof k||n instanceof B||n instanceof $||G&&n instanceof G?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,n):C.texImage2D(C.TEXTURE_2D,0,this.format,m,v,0,this.format,C.UNSIGNED_BYTE,n.data);this.useMipmap=!!(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&C.generateMipmap(C.TEXTURE_2D)}bind(n,o){const{context:f}=this,{gl:m}=f;m.bindTexture(m.TEXTURE_2D,this.texture),n!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,n),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap?n===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_NEAREST:n),this.filter=n),o!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,o),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class c7{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class u7{constructor(){this.tasks={},this.taskQueue=[],Rt(["process"],this),this.invoker=new c7(this.process),this.nextId=0}add(n,o){const f=this.nextId++,m=(function({type:v,isSymbolTile:w,zoom:C}){return C=C||0,v==="message"?0:v!=="maybePrepare"||w?v!=="parseTile"||w?v==="parseTile"&&w?300-C:v==="maybePrepare"&&w?400-C:500:200-C:100-C})(o);if(m===0){gn();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:n,metadata:o,priority:m,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){gn();try{if(this.taskQueue=this.taskQueue.filter((f=>!!this.tasks[f])),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const o=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let n=null,o=1/0;for(let m=0;m<this.taskQueue.length;m++){const v=this.tasks[this.taskQueue[m]];v.priority<o&&(o=v.priority,n=m)}if(n===null)return null;const f=this.taskQueue[n];return this.taskQueue.splice(n,1),f}remove(){this.invoker.remove()}}class W5{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const f=n[o];this._stringToNumber[f]=o,this._numberToString[o]=f}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const f7=["tile","layer","source","sourceLayer","state"];class Z5{constructor(n,o,f,m,v){this.type="Feature",this._vectorTileFeature=n,this._z=o,this._x=f,this._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const o of f7)this[o]!==void 0&&(n[o]=this[o]);return n}}const Fl=32,Wu=33,Bd=new Uint16Array(8184);for(let i=0;i<2046;i++){let n=i+2,o=0,f=0,m=0,v=0,w=0,C=0;for(1&n?m=v=w=Fl:o=f=C=Fl;(n>>=1)>1;){const k=o+m>>1,B=f+v>>1;1&n?(m=o,v=f,o=w,f=C):(o=m,f=v,m=w,v=C),w=k,C=B}const A=4*i;Bd[A+0]=o,Bd[A+1]=f,Bd[A+2]=m,Bd[A+3]=v}const Zu=new Uint16Array(2178),Fd=new Uint8Array(1089),lb=new Uint16Array(1089);function X5(i){return i===0?-.03125:i===32?.03125:0}var Y5=Ke([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const K5={type:2,extent:En,loadGeometry:()=>[[new ue(0,0),new ue(En+1,0),new ue(En+1,En+1),new ue(0,En+1),new ue(0,0)]]};class IS{constructor(n,o,f,m,v){this.tileID=n,this.uid=Pt(),this.uses=0,this.tileSize=o,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=v,this.expiredRequestCount=0,this.state="loading",m&&m.transform&&(this.projection=m.transform.projection)}registerFadeDuration(n){const o=n+this.timeAdded;o<Aa.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Bl(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,o,f){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=(function(m,v){const w={};if(!v)return w;for(const C of m){const A=C.layerIds.map((k=>v.getLayer(k))).filter(Boolean);if(A.length!==0){C.layers=A,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map((k=>A.filter((B=>B.id===k))[0])));for(const k of A)w[k.id]=C}}return w})(n.buckets,o.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof Ot){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof Ot&&v.hasRTLText){this.hasRTLText=!0,D.isLoading()||D.isLoaded()||M()!=="deferred"||z();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(m).queryRadius(v))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new Yr}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(n)}const o=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new u0(n,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new u0(n,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new u0(n,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,o,f,m,v,w,C,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:m,pixelPosMatrix:C,transform:w,params:v,tileTransform:this.tileTransform},n,o,f):{}}querySourceFeatures(n,o){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),v=o?o.sourceLayer:"",w=m._geojsonTileLayer||m[v];if(!w)return;const C=bo(o&&o.filter),{z:A,x:k,y:B}=this.tileID.canonical,$={z:A,x:k,y:B};for(let G=0;G<w.length;G++){const K=w.feature(G);if(C.needGeometry){const de=eo(K,!0);if(!C.filter(new j(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!C.filter(new j(this.tileID.overscaledZ),K))continue;const ee=f.getId(K,v),oe=new Z5(K,A,k,B,ee);oe.tile=$,n.push(oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const o=this.expirationTime;if(n.cacheControl){const f=yn(n.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(o)if(this.expirationTime<o)m=!0;else{const v=this.expirationTime-o;v?this.expirationTime=f+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!o)return;const f=this.latestFeatureIndex.loadVTLayers(),m=o.style.listImages();for(const v in this.buckets){if(!o.style.hasLayer(v))continue;const w=this.buckets[v],C=w.layers[0].sourceLayer||"_geojsonTileLayer",A=f[C],k=n[C];if(!A||!k||Object.keys(k).length===0)continue;if(w.update(k,A,m,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof oh||w instanceof Ag){const $=o.style._getSourceCache(w.layers[0].source);o._terrain&&o._terrain.enabled&&$&&w.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile($.id,this.tileID)}const B=o&&o.style&&o.style.getLayer(v);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Aa.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=Aa.now()+n}setTexture(n,o){const f=o.context,m=f.gl;this.texture=this.texture||o.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new u0(f,n,m.RGBA,{useMipmap:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE))}setDependencies(n,o){const f={};for(const m of o)f[m]=!0;this.dependencies[n]=f}hasDependency(n,o){for(const f of n){const m=this.dependencies[f];if(m){for(const v of o)if(m[v])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const f=la(K5,this.tileID.canonical,this.tileTransform)[0],m=new $t,v=new uo;for(let w=0;w<f.length;w++){const{x:C,y:A}=f[w];m.emplaceBack(C,A),v.emplaceBack(w)}v.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(v),this._tileDebugBuffer=n.createVertexBuffer(m,Au.members),this._tileDebugSegments=$i.simpleSegment(0,0,m.length,v.length)}_makeTileBoundsBuffers(n,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const f=la(K5,this.tileID.canonical,this.tileTransform)[0];let m,v;if(this.isRaster){const w=(function(C,A){const k=Bl(C,A),B=Math.pow(2,C.z);for(let de=0;de<Wu;de++)for(let Ae=0;Ae<Wu;Ae++){const Fe=Uo((C.x+(Ae+X5(Ae))/Fl)/B),Re=Vr((C.y+(de+X5(de))/Fl)/B),De=A.project(Fe,Re),$e=de*Wu+Ae;Zu[2*$e+0]=Math.round((De.x*k.scale-k.x)*En),Zu[2*$e+1]=Math.round((De.y*k.scale-k.y)*En)}Fd.fill(0),lb.fill(0);for(let de=2045;de>=0;de--){const Ae=4*de,Fe=Bd[Ae+0],Re=Bd[Ae+1],De=Bd[Ae+2],$e=Bd[Ae+3],Ne=Fe+De>>1,ut=Re+$e>>1,st=Ne+ut-Re,bt=ut+Fe-Ne,Gt=Re*Wu+Fe,ht=$e*Wu+De,It=ut*Wu+Ne,zt=Math.hypot((Zu[2*Gt+0]+Zu[2*ht+0])/2-Zu[2*It+0],(Zu[2*Gt+1]+Zu[2*ht+1])/2-Zu[2*It+1])>=16;Fd[It]=Fd[It]||(zt?1:0),de<1022&&(Fd[It]=Fd[It]||Fd[(Re+bt>>1)*Wu+(Fe+st>>1)]||Fd[($e+bt>>1)*Wu+(De+st>>1)])}const $=new vt,G=new pn;let K=0;function ee(de,Ae){const Fe=Ae*Wu+de;return lb[Fe]===0&&($.emplaceBack(Zu[2*Fe+0],Zu[2*Fe+1],de*En/Fl,Ae*En/Fl),lb[Fe]=++K),lb[Fe]-1}function oe(de,Ae,Fe,Re,De,$e){const Ne=de+Fe>>1,ut=Ae+Re>>1;if(Math.abs(de-De)+Math.abs(Ae-$e)>1&&Fd[ut*Wu+Ne])oe(De,$e,de,Ae,Ne,ut),oe(Fe,Re,De,$e,Ne,ut);else{const st=ee(de,Ae),bt=ee(Fe,Re),Gt=ee(De,$e);G.emplaceBack(st,bt,Gt)}}return oe(0,0,Fl,Fl,Fl,0),oe(Fl,Fl,0,0,0,Fl),{vertices:$,indices:G}})(this.tileID.canonical,o);m=w.vertices,v=w.indices}else{m=new vt,v=new pn;for(const{x:C,y:A}of f)m.emplaceBack(C,A,0,0);const w=Bu(m.int16,void 0,4);for(let C=0;C<w.length;C+=3)v.emplaceBack(w[C],w[C+1],w[C+2])}this._tileBoundsBuffer=n.createVertexBuffer(m,Y5.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(v),this._tileBoundsSegments=$i.simpleSegment(0,0,m.length,v.length)}_makeGlobeTileDebugBuffers(n,o){const f=o.projection;if(!f||f.name!=="globe"||o.freezeTileCoverage)return;const m=this.tileID.canonical,v=gd(ux(m,o)),w=Yf(o.zoom);let C;w>0&&(C=sg(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,m,o,v,C,w),this._makeGlobeTileDebugTextBuffer(n,m,o,v,C,w)}_globePoint(n,o,f,m,v,w,C){let A=yi(n,o,f);if(w){const k=1<<f.z,B=qa(m.center.lng),$=_i(m.center.lat),G=(f.x+.5)/k-B;let K=0;G>.5?K=-1:G<-.5&&(K=1);let ee=(n/En+f.x)/k+K,oe=(o/En+f.y)/k;ee=(ee-B)*m._pixelsPerMercatorPixel+B,oe=(oe-$)*m._pixelsPerMercatorPixel+$;const de=[ee*m.worldSize,oe*m.worldSize,0];qi(de,de,w),A=Pc(A,de,C)}return qi(A,A,v)}_makeGlobeTileDebugBorderBuffer(n,o,f,m,v,w){const C=new $t,A=new uo,k=new rt,B=(G,K,ee,oe,de)=>{const Ae=(ee-G)/(de-1),Fe=(oe-K)/(de-1),Re=C.length;for(let De=0;De<de;De++){const $e=G+De*Ae,Ne=K+De*Fe;C.emplaceBack($e,Ne);const ut=this._globePoint($e,Ne,o,f,m,v,w);k.emplaceBack(ut[0],ut[1],ut[2]),A.emplaceBack(Re+De)}},$=En;B(0,0,$,0,16),B($,0,$,$,16),B($,$,0,$,16),B(0,$,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(A),this._tileDebugBuffer=n.createVertexBuffer(C,Au.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(k,p_.members),this._tileDebugSegments=$i.simpleSegment(0,0,C.length,A.length)}_makeGlobeTileDebugTextBuffer(n,o,f,m,v,w){const C=En/4,A=new $t,k=new pn,B=new rt,$=25;k.reserve(32),A.reserve($),B.reserve($);const G=(K,ee)=>$*K+ee;for(let K=0;K<$;K++){const ee=K*C;for(let oe=0;oe<$;oe++){const de=oe*C;A.emplaceBack(de,ee);const Ae=this._globePoint(de,ee,o,f,m,v,w);B.emplaceBack(Ae[0],Ae[1],Ae[2])}}for(let K=0;K<4;K++)for(let ee=0;ee<4;ee++){const oe=G(K,ee),de=G(K,ee+1),Ae=G(K+1,ee),Fe=G(K+1,ee+1);k.emplaceBack(oe,de,Ae),k.emplaceBack(Ae,de,Fe)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(k),this._tileDebugTextBuffer=n.createVertexBuffer(A,Au.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(B,p_.members),this._tileDebugTextSegments=$i.simpleSegment(0,0,$,32)}}class h7{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,o,f){const m=String(o);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][m]=this.stateChanges[n][m]||{},nt(this.stateChanges[n][m],f),this.deletedStates[n]===null){this.deletedStates[n]={};for(const v in this.state[n])v!==m&&(this.deletedStates[n][v]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][m]===null){this.deletedStates[n][m]={};for(const v in this.state[n][m])f[v]||(this.deletedStates[n][m][v]=null)}else for(const v in f)this.deletedStates[n]&&this.deletedStates[n][m]&&this.deletedStates[n][m][v]===null&&delete this.deletedStates[n][m][v]}removeFeatureState(n,o,f){if(this.deletedStates[n]===null)return;const m=String(o);if(this.deletedStates[n]=this.deletedStates[n]||{},f&&o!==void 0)this.deletedStates[n][m]!==null&&(this.deletedStates[n][m]=this.deletedStates[n][m]||{},this.deletedStates[n][m][f]=null);else if(o!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][m])for(f in this.deletedStates[n][m]={},this.stateChanges[n][m])this.deletedStates[n][m][f]=null;else this.deletedStates[n][m]=null;else this.deletedStates[n]=null}getState(n,o){const f=String(o),m=nt({},(this.state[n]||{})[f],(this.stateChanges[n]||{})[f]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const v=this.deletedStates[n][o];if(v===null)return{};for(const w in v)delete m[w]}return m}initializeTileState(n,o){n.setFeatureState(this.state,o)}coalesceChanges(n,o){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),nt(this.state[m][w],this.stateChanges[m][w]),v[w]=this.state[m][w];f[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const w in this.state[m])v[w]={},this.state[m][w]={};else for(const w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else if(this.state[m][w])for(const C of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][C];v[w]=this.state[m][w]}f[m]=f[m]||{},nt(f[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in n)n[m].setFeatureState(f,o)}}class Q5{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,o){const f=this.toIdx(n,o);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(n,o){return this.leaves[this.toIdx(n,o)]}toIdx(n,o){return o*this.size+n}}function J5(i,n,o,f){let m=0,v=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(o[w]<i[w]||o[w]>n[w])return null}else{const C=1/f[w];let A=(i[w]-o[w])*C,k=(n[w]-o[w])*C;if(A>k){const B=A;A=k,k=B}if(A>m&&(m=A),k<v&&(v=k),m>v)return null}return m}function ek(i,n,o,f,m,v,w,C,A,k,B){const $=f-i,G=m-n,K=v-o,ee=w-i,oe=C-n,de=A-o,Ae=B[1]*de-B[2]*oe,Fe=B[2]*ee-B[0]*de,Re=B[0]*oe-B[1]*ee,De=$*Ae+G*Fe+K*Re;if(Math.abs(De)<1e-15)return null;const $e=1/De,Ne=k[0]-i,ut=k[1]-n,st=k[2]-o,bt=(Ne*Ae+ut*Fe+st*Re)*$e;if(bt<0||bt>1)return null;const Gt=ut*K-st*G,ht=st*$-Ne*K,It=Ne*G-ut*$,zt=(B[0]*Gt+B[1]*ht+B[2]*It)*$e;return zt<0||bt+zt>1?null:(ee*Gt+oe*ht+de*It)*$e}function tk(i,n,o){return(i-n)/(o-n)}function nk(i,n,o,f,m,v,w,C,A){const k=1<<o,B=v-f,$=w-m,G=(i+1)/k*B+f,K=(n+0)/k*$+m,ee=(n+1)/k*$+m;C[0]=(i+0)/k*B+f,C[1]=K,A[0]=G,A[1]=ee}class rk{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=(function(v){const w=Math.ceil(Math.log2(v.dim/8)),C=[];let A=Math.ceil(Math.pow(2,w));const k=1/A,B=(K,ee,oe,de,Ae)=>{const Fe=de?1:0,Re=(K+1)*oe-Fe,De=ee*oe,$e=(ee+1)*oe-Fe;Ae[0]=K*oe,Ae[1]=De,Ae[2]=Re,Ae[3]=$e};let $=new Q5(A);const G=[];for(let K=0;K<A*A;K++){B(K%A,Math.floor(K/A),k,!1,G);const ee=jd(G[0],G[1],v),oe=jd(G[2],G[1],v),de=jd(G[2],G[3],v),Ae=jd(G[0],G[3],v);$.minimums.push(Math.min(ee,oe,de,Ae)),$.maximums.push(Math.max(ee,oe,de,Ae)),$.leaves.push(1)}for(C.push($),A/=2;A>=1;A/=2){const K=C[C.length-1];$=new Q5(A);for(let ee=0;ee<A*A;ee++){B(ee%A,Math.floor(ee/A),2,!0,G);const oe=K.getElevation(G[0],G[1]),de=K.getElevation(G[2],G[1]),Ae=K.getElevation(G[2],G[3]),Fe=K.getElevation(G[0],G[3]),Re=K.isLeaf(G[0],G[1]),De=K.isLeaf(G[2],G[1]),$e=K.isLeaf(G[2],G[3]),Ne=K.isLeaf(G[0],G[3]),ut=Math.min(oe.min,de.min,Ae.min,Fe.min),st=Math.max(oe.max,de.max,Ae.max,Fe.max),bt=Re&&De&&$e&&Ne;$.maximums.push(st),$.minimums.push(ut),$.leaves.push(st-ut<=5&&bt?1:0)}C.push($)}return C})(this.dem),f=o.length-1,m=o[f];this._addNode(m.minimums[0],m.maximums[0],m.leaves[0]),this._construct(o,0,0,f,0)}raycastRoot(n,o,f,m,v,w,C=1){return J5([n,o,-100],[f,m,this.maximums[0]*C],v,w)}raycast(n,o,f,m,v,w,C=1){if(!this.nodeCount)return null;const A=this.raycastRoot(n,o,f,m,v,w,C);if(A==null)return null;const k=[],B=[],$=[],G=[],K=[{idx:0,t:A,nodex:0,nodey:0,depth:0}];for(;K.length>0;){const{idx:ee,t:oe,nodex:de,nodey:Ae,depth:Fe}=K.pop();if(this.leaves[ee]){nk(de,Ae,Fe,n,o,f,m,$,G);const De=1<<Fe,$e=(de+0)/De,Ne=(de+1)/De,ut=(Ae+0)/De,st=(Ae+1)/De,bt=jd($e,ut,this.dem)*C,Gt=jd(Ne,ut,this.dem)*C,ht=jd(Ne,st,this.dem)*C,It=jd($e,st,this.dem)*C,zt=ek($[0],$[1],bt,G[0],$[1],Gt,G[0],G[1],ht,v,w),Ut=ek(G[0],G[1],ht,$[0],G[1],It,$[0],$[1],bt,v,w),Ht=Math.min(zt!==null?zt:Number.MAX_VALUE,Ut!==null?Ut:Number.MAX_VALUE);if(Ht!==Number.MAX_VALUE)return Ht;{const xt=fd([],v,w,oe);if(ik(bt,Gt,It,ht,tk(xt[0],$[0],G[0]),tk(xt[1],$[1],G[1]))>=xt[2])return oe}continue}let Re=0;for(let De=0;De<this._siblingOffset.length;De++){nk((de<<1)+this._siblingOffset[De][0],(Ae<<1)+this._siblingOffset[De][1],Fe+1,n,o,f,m,$,G),$[2]=-100,G[2]=this.maximums[this.childOffsets[ee]+De]*C;const $e=J5($,G,v,w);if($e!=null){const Ne=$e;k[De]=Ne;let ut=!1;for(let st=0;st<Re&&!ut;st++)Ne>=k[B[st]]&&(B.splice(st,0,De),ut=!0);ut||(B[Re]=De),Re++}}for(let De=0;De<Re;De++){const $e=B[De];K.push({idx:this.childOffsets[ee]+$e,t:k[$e],nodex:(de<<1)+this._siblingOffset[$e][0],nodey:(Ae<<1)+this._siblingOffset[$e][1],depth:Fe+1})}}return null}_addNode(n,o,f){return this.minimums.push(n),this.maximums.push(o),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(n,o,f,m,v){if(n[m].isLeaf(o,f)===1)return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const w=m-1,C=n[w];let A=0,k=0;for(let B=0;B<this._siblingOffset.length;B++){const $=2*o+this._siblingOffset[B][0],G=2*f+this._siblingOffset[B][1],K=C.getElevation($,G),ee=C.isLeaf($,G),oe=this._addNode(K.min,K.max,ee);ee&&(A|=1<<B),k||(k=oe)}for(let B=0;B<this._siblingOffset.length;B++)A&1<<B||this._construct(n,2*o+this._siblingOffset[B][0],2*f+this._siblingOffset[B][1],w,k+B)}}function ik(i,n,o,f,m,v){return Cr(Cr(i,o,v),Cr(n,f,v),m)}function jd(i,n,o){const f=o.dim,m=Be(i*f-.5,0,f-1),v=Be(n*f-.5,0,f-1),w=Math.floor(m),C=Math.floor(v),A=Math.min(w+1,f-1),k=Math.min(C+1,f-1);return ik(o.get(w,C),o.get(A,C),o.get(w,k),o.get(A,k),m-w,v-C)}const ak={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function d7(i,n,o){return(256*i*256+256*n+o)/10-1e4}function p7(i,n,o){return 256*i+n+o/256-32768}class cb{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,o,f,m=!1,v=!1){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return sn(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const w=this.dim=o.height-2,C=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=f||"mapbox",this.borderReady=m,!m){for(let A=0;A<w;A++)C[this._idx(-1,A)]=C[this._idx(0,A)],C[this._idx(w,A)]=C[this._idx(w-1,A)],C[this._idx(A,-1)]=C[this._idx(A,0)],C[this._idx(A,w)]=C[this._idx(A,w-1)];C[this._idx(-1,-1)]=C[this._idx(0,0)],C[this._idx(w,-1)]=C[this._idx(w-1,0)],C[this._idx(-1,w)]=C[this._idx(0,w-1)],C[this._idx(w,w)]=C[this._idx(w-1,w-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new rk(this)}get(n,o,f=!1){f&&(n=Be(n,-1,this.dim),o=Be(o,-1,this.dim));const m=4*this._idx(n,o);return(this.encoding==="terrarium"?p7:d7)(this.pixels[m],this.pixels[m+1],this.pixels[m+2])}static getUnpackVector(n){return ak[n]}get unpackVector(){return ak[this.encoding]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}static pack(n,o){const f=[0,0,0,0],m=cb.getUnpackVector(o);let v=Math.floor((n+m[3])/m[2]);return f[2]=v%256,v=Math.floor(v/256),f[1]=v%256,v=Math.floor(v/256),f[0]=v,f}getPixels(){return new ca({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,o,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=o*this.dim,v=o*this.dim+this.dim,w=f*this.dim,C=f*this.dim+this.dim;switch(o){case-1:m=v-1;break;case 1:v=m+1}switch(f){case-1:w=C-1;break;case 1:C=w+1}const A=-o*this.dim,k=-f*this.dim;for(let B=w;B<C;B++)for(let $=m;$<v;$++){const G=4*this._idx($,B),K=4*this._idx($+A,B+k);this.pixels[G+0]=n.pixels[K+0],this.pixels[G+1]=n.pixels[K+1],this.pixels[G+2]=n.pixels[K+2],this.pixels[G+3]=n.pixels[K+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}ln(cb,"DEMData"),ln(rk,"DemMinMaxQuadTree",{omit:["dem"]});class m7{constructor(n,o){this.max=n,this.onRemove=o,this.reset()}reset(){for(const n in this.data)for(const o of this.data[n])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(n,o,f){const m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:o,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout((()=>{this.remove(n,v)}),f)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const o=this.data[n].shift();return o.timeout&&clearTimeout(o.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),o.value}getByKey(n){const o=this.data[n];return o?o[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,o){if(!this.has(n))return this;const f=n.wrapped().key,m=o===void 0?0:this.data[f].indexOf(o),v=this.data[f][m];return this.data[f].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(n){const o=[];for(const f in this.data)for(const m of this.data[f])n(m.value)||o.push(m);for(const f of o)this.remove(f.value.tileID,f)}}class Wg{constructor(n,o,f){this.func=n,this.mask=o,this.range=f}}Wg.ReadOnly=!1,Wg.ReadWrite=!0,Wg.disabled=new Wg(519,Wg.ReadOnly,[0,1]);const zS=7680;class LS{constructor(n,o,f,m,v,w){this.test=n,this.ref=o,this.mask=f,this.fail=m,this.depthFail=v,this.pass=w}}LS.disabled=new LS({func:519,mask:0},0,0,zS,zS,zS);class Xu{constructor(n,o,f){this.blendFunction=n,this.blendColor=o,this.mask=f}}Xu.Replace=[1,0],Xu.disabled=new Xu(Xu.Replace,Ni.transparent,[!1,!1,!1,!1]),Xu.unblended=new Xu(Xu.Replace,Ni.transparent,[!0,!0,!0,!0]),Xu.alphaBlended=new Xu([1,771],Ni.transparent,[!0,!0,!0,!0]);const PS=1029,DS=2305;class Vc{constructor(n,o,f){this.enable=n,this.mode=o,this.frontFace=f}}Vc.disabled=new Vc(!1,PS,DS),Vc.backCCW=new Vc(!0,PS,DS),Vc.backCW=new Vc(!0,PS,2304),Vc.frontCW=new Vc(!0,1028,2304),Vc.frontCCW=new Vc(!0,1028,DS);class tm extends Rn{constructor(n,o,f){super(),this.id=n,this._onlySymbols=f,o.on("data",(m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))})),o.on("error",(()=>{this._sourceErrored=!0})),this._source=o,this._tiles={},this._cache=new m7(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new h7,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const o=this._tiles[n];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,o){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,o)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,(()=>{}))}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,(()=>{}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const f=this._tiles[o];f.upload(n),f.prepare(this.map.style.imageManager)}}getIds(){return at(this._tiles).map((n=>n.tileID)).sort(ok).map((n=>n.key))}getRenderableIds(n){const o=[];for(const f in this._tiles)this._isIdRenderable(+f,n)&&o.push(this._tiles[f]);return n?o.sort(((f,m)=>{const v=f.tileID,w=m.tileID,C=new ue(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),A=new ue(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-w.overscaledZ||A.y-C.y||A.x-C.x})).map((f=>f.tileID.key)):o.map((f=>f.tileID)).sort(ok).map((f=>f.key))}hasRenderableParent(n){const o=this.findLoadedParent(n,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(n,o){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(o||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,o){const f=this._tiles[n];f&&(f.state!=="loading"&&(f.state=o),this._loadTile(f,this._tileLoaded.bind(this,f,n,o)))}_tileLoaded(n,o,f,m){if(m)if(n.state="errored",m.status!==404)this._source.fire(new oo(m,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const v=this.map.painter.terrain;this.update(this.transform,v.getScaledDemTileSize(),!0),v.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=Aa.now(),f==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(o,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new Yi("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const o=this.getRenderableIds();for(let m=0;m<o.length;m++){const v=o[m];if(n.neighboringTiles&&n.neighboringTiles[v]){const w=this.getTileByID(v);f(n,w),f(w,n)}}function f(m,v){if(!m.dem||m.dem.borderReady)return;m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0;let w=v.tileID.canonical.x-m.tileID.canonical.x;const C=v.tileID.canonical.y-m.tileID.canonical.y,A=Math.pow(2,m.tileID.canonical.z),k=v.tileID.key;w===0&&C===0||Math.abs(C)>1||(Math.abs(w)>1&&(Math.abs(w+A)===1?w+=A:Math.abs(w-A)===1&&(w-=A)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,w,C),m.neighboringTiles&&m.neighboringTiles[k]&&(m.neighboringTiles[k].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,o,f,m){for(const v in this._tiles){let w=this._tiles[v];if(m[v]||!w.hasData()||w.tileID.overscaledZ<=o||w.tileID.overscaledZ>f)continue;let C=w.tileID;for(;w&&w.tileID.overscaledZ>o+1;){const k=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[k.key],w&&w.hasData()&&(C=k)}let A=C;for(;A.overscaledZ>o;)if(A=A.scaledTo(A.overscaledZ-1),n[A.key]){m[C.key]=C;break}}}findLoadedParent(n,o){if(n.key in this._loadedParentTiles){const f=this._loadedParentTiles[n.key];return f&&f.tileID.overscaledZ>=o?f:null}for(let f=n.overscaledZ-1;f>=o;f--){const m=n.scaledTo(f),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(n){const o=this._tiles[n.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,o){o=o||this._source.tileSize;const f=Math.ceil(n.width/o)+1,m=Math.ceil(n.height/o)+1,v=Math.floor(f*m*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,v):v,C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(C)}handleWrapJump(n){const o=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,o){const f={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+o),f[v.tileID.key]=v}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(+m,this._tiles[m])}}update(n,o,f){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let m;this.updateCacheSize(n,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((C=>new ho(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y))):(m=n.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(m=m.filter((C=>this._source.hasTile(C))))):m=[];const v=this._updateRetainedTiles(m);if(sk(this._source.type)&&m.length!==0){const C={},A={},k=Object.keys(v);for(const $ of k){const G=v[$],K=this._tiles[$];if(!K||K.fadeEndTime&&K.fadeEndTime<=Aa.now())continue;const ee=this.findLoadedParent(G,Math.max(G.overscaledZ-tm.maxOverzooming,this._source.minzoom));ee&&(this._addTile(ee.tileID),C[ee.tileID.key]=ee.tileID),A[$]=G}const B=m[m.length-1].overscaledZ;for(const $ in this._tiles){const G=this._tiles[$];if(v[$]||!G.hasData())continue;let K=G.tileID;for(;K.overscaledZ>B;){K=K.scaledTo(K.overscaledZ-1);const ee=this._tiles[K.key];if(ee&&ee.hasData()&&A[K.key]){v[$]=G.tileID;break}}}for(const $ in C)v[$]||(this._coveredTiles[$]=!0,v[$]=C[$])}for(const C in v)this._tiles[C].clearFadeHold();const w=(function(C,A){const k=[];for(const B in C)B in A||k.push(B);return k})(this._tiles,v);for(const C of w){const A=this._tiles[C];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(+C)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const o={};if(n.length===0)return o;const f={},m=n.reduce(((k,B)=>Math.min(k,B.overscaledZ)),1/0),v=n[0].overscaledZ,w=Math.max(v-tm.maxOverzooming,this._source.minzoom),C=Math.max(v+tm.maxUnderzooming,this._source.minzoom),A={};for(const k of n){const B=this._addTile(k);o[k.key]=k,B.hasData()||m<this._source.maxzoom&&(A[k.key]=k)}this._retainLoadedChildren(A,m,C,o);for(const k of n){let B=this._tiles[k.key];if(B.hasData())continue;if(k.canonical.z>=this._source.maxzoom){const G=k.children(this._source.maxzoom)[0],K=this.getTile(G);if(K&&K.hasData()){o[G.key]=G;continue}}else{const G=k.children(this._source.maxzoom);if(o[G[0].key]&&o[G[1].key]&&o[G[2].key]&&o[G[3].key])continue}let $=B.wasRequested();for(let G=k.overscaledZ-1;G>=w;--G){const K=k.scaledTo(G);if(f[K.key]||(f[K.key]=!0,B=this.getTile(K),!B&&$&&(B=this._addTile(K)),B&&(o[K.key]=K,$=B.wasRequested(),B.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const o=[];let f,m=this._tiles[n].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}o.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;m=v}for(const v of o)this._loadedParentTiles[v]=f}}_addTile(n){let o=this._tiles[n.key];if(o)return o;o=this._cache.getAndRemove(n),o&&(this._setTileReloadTimer(n.key,o),o.tileID=n,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,o)));const f=!!o;if(!f){const m=this.map?this.map.painter:null;o=new IS(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,m,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,n.key,o.state))}return o?(o.uses++,this._tiles[n.key]=o,f||this._source.fire(new Yi("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(n,o){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const f=o.getExpiryTimeout();f&&(this._timers[n]=setTimeout((()=>{this._reloadTile(n,"expired"),delete this._timers[n]}),f))}_removeTile(n){const o=this._tiles[n];o&&(o.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,o,f){const m=[],v=this.transform;if(!v)return m;const w=v.projection.name==="globe",C=qa(v.center.lng);for(const A in this._tiles){const k=this._tiles[A];if(f&&k.clearQueryDebugViz(),k.holdingForFade())continue;let B;if(w){const $=k.tileID.canonical;if($.z===0){const G=[Math.abs(Be(C,...f0($,-1))-C),Math.abs(Be(C,...f0($,1))-C)];B=[0,2*G.indexOf(Math.min(...G))-1]}else{const G=[Math.abs(Be(C,...f0($,-1))-C),Math.abs(Be(C,...f0($,0))-C),Math.abs(Be(C,...f0($,1))-C)];B=[G.indexOf(Math.min(...G))-1]}}else B=[0];for(const $ of B){const G=n.containsTile(k,v,o,$);G&&m.push(G)}}return m}getVisibleCoordinates(n){const o=this.getRenderableIds(n).map((f=>this._tiles[f].tileID));for(const f of o)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(sk(this._source.type))for(const n in this._tiles){const o=this._tiles[n];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=Aa.now())return!0}return!1}setFeatureState(n,o,f){this._state.updateState(n=n||"_geojsonTileLayer",o,f)}removeFeatureState(n,o,f){this._state.removeFeatureState(n=n||"_geojsonTileLayer",o,f)}getFeatureState(n,o){return this._state.getState(n=n||"_geojsonTileLayer",o)}setDependencies(n,o,f){const m=this._tiles[n];m&&m.setDependencies(o,f)}reloadTilesForDependencies(n,o){for(const f in this._tiles)this._tiles[f].hasDependency(n,o)&&this._reloadTile(+f,"reloading");this._cache.filter((f=>!f.hasDependency(n,o)))}_preloadTiles(n,o){if(!this._sourceLoaded){const C=()=>{this._sourceLoaded&&(this._source.off("data",C),this._preloadTiles(n,o))};return void this._source.on("data",C)}const f=new Map,m=Array.isArray(n)?n:[n],v=this.map.painter.terrain,w=this.usedForTerrain&&v?v.getScaledDemTileSize():this._source.tileSize;for(const C of m){const A=C.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const k of A)f.set(k.key,k);this.usedForTerrain&&C.updateElevation(!1)}Ge(Array.from(f.values()),((C,A)=>{const k=new IS(C,this._source.tileSize*C.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(k,(B=>{this._source.type==="raster-dem"&&k.dem&&this._backfillDEM(k),A(B,k)}))}),o)}}function ok(i,n){const o=Math.abs(2*i.wrap)-+(i.wrap<0),f=Math.abs(2*n.wrap)-+(n.wrap<0);return i.overscaledZ-n.overscaledZ||f-o||n.canonical.y-i.canonical.y||n.canonical.x-i.canonical.x}function sk(i){return i==="raster"||i==="image"||i==="video"||i==="custom"}function f0(i,n){const o=1<<i.z;return[i.x/o+n,(i.x+1)/o+n]}tm.maxOverzooming=10,tm.maxUnderzooming=3;class ub{constructor(n,o,f){this._demTile=n,this._dem=this._demTile.dem,this._scale=o,this._offset=f}static create(n,o,f){const m=f||n.findDEMTileFor(o);if(!m||!m.dem)return;const v=m.dem,w=m.tileID,C=1<<o.canonical.z-w.canonical.z;return new ub(m,m.tileSize/En/C,[(o.canonical.x/C-w.canonical.x)*v.dim,(o.canonical.y/C-w.canonical.y)*v.dim])}tileCoordToPixel(n,o){const f=o*this._scale+this._offset[1],m=Math.floor(n*this._scale+this._offset[0]),v=Math.floor(f);return new ue(m,v)}getElevationAt(n,o,f,m){const v=n*this._scale+this._offset[0],w=o*this._scale+this._offset[1],C=Math.floor(v),A=Math.floor(w),k=this._dem;return m=!!m,f?Cr(Cr(k.get(C,A,m),k.get(C,A+1,m),w-A),Cr(k.get(C+1,A,m),k.get(C+1,A+1,m),w-A),v-C):k.get(C,A,m)}getElevationAtPixel(n,o,f){return this._dem.get(n,o,!!f)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*fs(1,n)*this._dem.stride}}class lk{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ys(En,16,0),this.featureIndexArray=new Ks,this.promoteId=o}insert(n,o,f,m,v,w=0){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,v,w);const A=this.grid;for(let k=0;k<o.length;k++){const B=o[k],$=[1/0,1/0,-1/0,-1/0];for(let G=0;G<B.length;G++){const K=B[G];$[0]=Math.min($[0],K.x),$[1]=Math.min($[1],K.y),$[2]=Math.max($[2],K.x),$[3]=Math.max($[3],K.y)}$[0]<En&&$[1]<En&&$[2]>=0&&$[3]>=0&&A.insert(C,$[0],$[1],$[2],$[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new P_(new uh(this.rawTileData)).layers,this.sourceLayerCoder=new W5(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,o,f,m){this.loadVTLayers();const v=n.params||{},w=bo(v.filter),C=n.tileResult,A=n.transform,k=C.bufferedTilespaceBounds,B=this.grid.query(k.min.x,k.min.y,k.max.x,k.max.y,((ee,oe,de,Ae)=>eh(C.bufferedTilespaceGeometry,ee,oe,de,Ae)));B.sort(g7);let $=null;A.elevation&&B.length>0&&($=ub.create(A.elevation,this.tileID));const G={};let K;for(let ee=0;ee<B.length;ee++){const oe=B[ee];if(oe===K)continue;K=oe;const de=this.featureIndexArray.get(oe);let Ae=null;this.loadMatchingFeature(G,de,w,v.layers,v.availableImages,o,f,m,((Fe,Re,De,$e=0)=>(Ae||(Ae=la(Fe,this.tileID.canonical,n.tileTransform)),Re.queryIntersectsFeature(C,Fe,De,Ae,this.z,n.transform,n.pixelPosMatrix,$,$e))))}return G}loadMatchingFeature(n,o,f,m,v,w,C,A,k){const{featureIndex:B,bucketIndex:$,sourceLayerIndex:G,layoutVertexArrayOffset:K}=o,ee=this.bucketLayerIDs[$];if(m&&!(function(Fe,Re){for(let De=0;De<Fe.length;De++)if(Re.indexOf(Fe[De])>=0)return!0;return!1})(m,ee))return;const oe=this.sourceLayerCoder.decode(G),de=this.vtLayers[oe].feature(B);if(f.needGeometry){const Fe=eo(de,!0);if(!f.filter(new j(this.tileID.overscaledZ),Fe,this.tileID.canonical))return}else if(!f.filter(new j(this.tileID.overscaledZ),de))return;const Ae=this.getId(de,oe);for(let Fe=0;Fe<ee.length;Fe++){const Re=ee[Fe];if(m&&m.indexOf(Re)<0)continue;const De=w[Re];if(!De)continue;let $e={};Ae!==void 0&&A&&($e=A.getState(De.sourceLayer||"_geojsonTileLayer",Ae));const Ne=nt({},C[Re]);Ne.paint=ck(Ne.paint,De.paint,de,$e,v),Ne.layout=ck(Ne.layout,De.layout,de,$e,v);const ut=!k||k(de,De,$e,K);if(!ut)continue;const st=new Z5(de,this.z,this.x,this.y,Ae);st.layer=Ne;let bt=n[Re];bt===void 0&&(bt=n[Re]=[]),bt.push({featureIndex:B,feature:st,intersectionZ:ut})}}lookupSymbolFeatures(n,o,f,m,v,w,C,A){const k={};this.loadVTLayers();const B=bo(v);for(const $ of n)this.loadMatchingFeature(k,{bucketIndex:f,sourceLayerIndex:m,featureIndex:$,layoutVertexArrayOffset:0},B,w,C,A,o);return k}loadFeature(n){const{featureIndex:o,sourceLayerIndex:f}=n;this.loadVTLayers();const m=this.sourceLayerCoder.decode(f),v=this.vtFeatures[m];if(v[o])return v[o];const w=this.vtLayers[m].feature(o);return v[o]=w,w}hasLayer(n){for(const o of this.bucketLayerIDs)for(const f of o)if(n===f)return!0;return!1}getId(n,o){let f=n.id;if(this.promoteId){const m=typeof this.promoteId=="string"?this.promoteId:this.promoteId[o];m!=null&&(f=n.properties[m]),typeof f=="boolean"&&(f=Number(f))}return f}}function ck(i,n,o,f,m){return Xe(i,((v,w)=>{const C=n instanceof Ee?n.get(w):null;return C&&C.evaluate?C.evaluate(o,f,m):C}))}function g7(i,n){return n-i}ln(lk,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class uk{constructor(n,o){this.width=n,this.height=o,this.nextRow=0,this.image=new nl({width:n,height:o}),this.positions={},this.uploaded=!1}getDash(n,o){const f=this.getKey(n,o);return this.positions[f]}trim(){const n=this.width,o=this.height=Yt(this.nextRow);this.image.resize({width:n,height:o})}getKey(n,o){return n.join(",")+o}getDashRanges(n,o,f){const m=[];let v=n.length%2==1?-n[n.length-1]*f:0,w=n[0]*f,C=!0;m.push({left:v,right:w,isDash:C,zeroLength:n[0]===0});let A=n[0];for(let k=1;k<n.length;k++){C=!C;const B=n[k];v=A*f,A+=B,w=A*f,m.push({left:v,right:w,isDash:C,zeroLength:B===0})}return m}addRoundDash(n,o,f){const m=o/2;for(let v=-f;v<=f;v++){const w=this.width*(this.nextRow+f+v);let C=0,A=n[C];for(let k=0;k<this.width;k++){k/A.right>1&&(A=n[++C]);const B=Math.abs(k-A.left),$=Math.abs(k-A.right),G=Math.min(B,$);let K;const ee=v/f*(m+1);if(A.isDash){const oe=m-Math.abs(ee);K=Math.sqrt(G*G+oe*oe)}else K=m-Math.sqrt(G*G+ee*ee);this.image.data[w+k]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(n,o){for(let A=n.length-1;A>=0;--A){const k=n[A],B=n[A+1];k.zeroLength?n.splice(A,1):B&&B.isDash===k.isDash&&(B.left=k.left,n.splice(A,1))}const f=n[0],m=n[n.length-1];f.isDash===m.isDash&&(f.left=m.left-this.width,m.right=f.right+this.width);const v=this.width*this.nextRow;let w=0,C=n[w];for(let A=0;A<this.width;A++){A/C.right>1&&(C=n[++w]);const k=Math.abs(A-C.left),B=Math.abs(A-C.right),$=Math.min(k,B);this.image.data[v+A]=Math.max(0,Math.min(255,(C.isDash?$:-$)+o+128))}}addDash(n,o){const f=this.getKey(n,o);if(this.positions[f])return this.positions[f];const m=o==="round",v=m?7:0,w=2*v+1;if(this.nextRow+w>this.height)return sn("LineAtlas out of space"),null;n.length===0&&n.push(1);let C=0;for(let B=0;B<n.length;B++)n[B]<0&&(sn("Negative value is found in line dasharray, replacing values with 0"),n[B]=0),C+=n[B];if(C!==0){const B=this.width/C,$=this.getDashRanges(n,this.width,B);m?this.addRoundDash($,B,v):this.addRegularDash($,o==="square"?.5*B:0)}const A=this.nextRow+v;this.nextRow+=w;const k={tl:[A,v],br:[C,0]};return this.positions[f]=k,k}}ln(uk,"LineAtlas");const fk=1*ks;class hk{constructor(n){const o={},f=[];for(const C in n){const A=n[C],k=o[C]={};for(const B in A.glyphs){const $=A.glyphs[+B];if(!$||$.bitmap.width===0||$.bitmap.height===0)continue;const G=$.metrics.localGlyph?fk:1,K={x:0,y:0,w:$.bitmap.width+2*G,h:$.bitmap.height+2*G};f.push(K),k[B]=K}}const{w:m,h:v}=t0(f),w=new nl({width:m||1,height:v||1});for(const C in n){const A=n[C];for(const k in A.glyphs){const B=A.glyphs[+k];if(!B||B.bitmap.width===0||B.bitmap.height===0)continue;const $=o[C][k],G=B.metrics.localGlyph?fk:1;nl.copy(B.bitmap,w,{x:0,y:0},{x:$.x+G,y:$.y+G},B.bitmap)}}this.image=w,this.positions=o}}ln(hk,"GlyphAtlas");class y7{constructor(n){this.tileID=new ho(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Bl(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,o,f,m,v){this.status="parsing",this.data=n,this.collisionBoxArray=new Yr;const w=new W5(Object.keys(n.layers).sort()),C=new lk(this.tileID,this.promoteId);C.bucketLayerIDs=[];const A={},k=new uk(256,256),B={featureIndex:C,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:k,availableImages:f},$=o.familiesBySource[this.source];for(const $e in $){const Ne=n.layers[$e];if(!Ne)continue;let ut=!1,st=!1;for(const ht of $[$e])ht[0].type==="symbol"?ut=!0:st=!0;if(this.isSymbolTile===!0&&!ut||this.isSymbolTile===!1&&!st)continue;Ne.version===1&&sn(`Vector tile source "${this.source}" layer "${$e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const bt=w.encode($e),Gt=[];for(let ht=0;ht<Ne.length;ht++){const It=Ne.feature(ht),zt=C.getId(It,$e);Gt.push({feature:It,id:zt,index:ht,sourceLayerIndex:bt})}for(const ht of $[$e]){const It=ht[0];this.isSymbolTile!==void 0&&It.type==="symbol"!==this.isSymbolTile||It.minzoom&&this.zoom<Math.floor(It.minzoom)||It.maxzoom&&this.zoom>=It.maxzoom||It.visibility!=="none"&&(OS(ht,this.zoom,f),(A[It.id]=It.createBucket({index:C.bucketLayerIDs.length,layers:ht,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(Gt,B,this.tileID.canonical,this.tileTransform),C.bucketLayerIDs.push(ht.map((zt=>zt.id))))}}let G,K,ee,oe;k.trim();const de={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ae=()=>{if(G)return v(G);if(K&&ee&&oe){const $e=new hk(K),Ne=new Qx(ee,oe);for(const ut in A){const st=A[ut];st instanceof Ot?(OS(st.layers,this.zoom,f),Qp(st,K,$e.positions,ee,Ne.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):st.hasPattern&&(st instanceof oh||st instanceof Ag||st instanceof Vo)&&(OS(st.layers,this.zoom,f),st.addFeatures(B,this.tileID.canonical,Ne.patternPositions,f,this.tileTransform))}this.status="done",v(null,{buckets:at(A).filter((ut=>!ut.isEmpty())),featureIndex:C,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$e.image,lineAtlas:k,imageAtlas:Ne,glyphMap:this.returnDependencies?K:null,iconMap:this.returnDependencies?ee:null,glyphPositions:this.returnDependencies?$e.positions:null})}},Fe=Xe(B.glyphDependencies,($e=>Object.keys($e).map(Number)));Object.keys(Fe).length?m.send("getGlyphs",{uid:this.uid,stacks:Fe},(($e,Ne)=>{G||(G=$e,K=Ne,Ae())}),void 0,!1,de):K={};const Re=Object.keys(B.iconDependencies);Re.length?m.send("getImages",{icons:Re,source:this.source,tileID:this.tileID,type:"icons"},(($e,Ne)=>{G||(G=$e,ee=Ne,Ae())}),void 0,!1,de):ee={};const De=Object.keys(B.patternDependencies);De.length?m.send("getImages",{icons:De,source:this.source,tileID:this.tileID,type:"patterns"},(($e,Ne)=>{G||(G=$e,oe=Ne,Ae())}),void 0,!1,de):oe={},Ae()}}function OS(i,n,o){const f=new j(n);for(const m of i)m.recalculate(f,o)}class dk{constructor(n){this.entries={},this.scheduler=n}request(n,o,f,m){const v=this.entries[n]=this.entries[n]||{callbacks:[]};if(v.result){const[w,C]=v.result;return this.scheduler?this.scheduler.add((()=>{m(w,C)}),o):m(w,C),()=>{}}return v.callbacks.push(m),v.cancel||(v.cancel=f(((w,C)=>{v.result=[w,C];for(const A of v.callbacks)this.scheduler?this.scheduler.add((()=>{A(w,C)}),o):A(w,C);setTimeout((()=>delete this.entries[n]),3e3)}))),()=>{v.result||(v.callbacks=v.callbacks.filter((w=>w!==m)),v.callbacks.length||(v.cancel(),delete this.entries[n]))}}}function pk(i,n,o){const f=JSON.stringify(i.request);return i.data&&(this.deduped.entries[f]={result:[null,i.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},(m=>{const v=fr(i.request,((w,C,A,k)=>{w?m(w):C&&m(null,{vectorTile:o?void 0:new P_(new uh(C)),rawData:C,cacheControl:A,expires:k})}));return()=>{v.cancel(),m()}}),n)}const mk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class BS{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,f]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=mk[15&f];if(!v)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(n,2,1),[C]=new Uint32Array(n,4,1);return new BS(C,w,v,n)}constructor(n,o=64,f=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=f,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=mk.indexOf(this.ArrayType),w=2*n*this.ArrayType.BYTES_PER_ELEMENT,C=n*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-C%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+A,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+A),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+C+A,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=n,this.coords[this._pos++]=o,f}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return FS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:w,nodeSize:C}=this,A=[0,v.length-1,0],k=[];for(;A.length;){const B=A.pop()||0,$=A.pop()||0,G=A.pop()||0;if($-G<=C){for(let de=G;de<=$;de++){const Ae=w[2*de],Fe=w[2*de+1];Ae>=n&&Ae<=f&&Fe>=o&&Fe<=m&&k.push(v[de])}continue}const K=G+$>>1,ee=w[2*K],oe=w[2*K+1];ee>=n&&ee<=f&&oe>=o&&oe<=m&&k.push(v[K]),(B===0?n<=ee:o<=oe)&&(A.push(G),A.push(K-1),A.push(1-B)),(B===0?f>=ee:m>=oe)&&(A.push(K+1),A.push($),A.push(1-B))}return k}within(n,o,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:w}=this,C=[0,m.length-1,0],A=[],k=f*f;for(;C.length;){const B=C.pop()||0,$=C.pop()||0,G=C.pop()||0;if($-G<=w){for(let de=G;de<=$;de++)yk(v[2*de],v[2*de+1],n,o)<=k&&A.push(m[de]);continue}const K=G+$>>1,ee=v[2*K],oe=v[2*K+1];yk(ee,oe,n,o)<=k&&A.push(m[K]),(B===0?n-f<=ee:o-f<=oe)&&(C.push(G),C.push(K-1),C.push(1-B)),(B===0?n+f>=ee:o+f>=oe)&&(C.push(K+1),C.push($),C.push(1-B))}return A}}function FS(i,n,o,f,m,v){if(m-f<=o)return;const w=f+m>>1;gk(i,n,w,f,m,v),FS(i,n,o,f,w-1,1-v),FS(i,n,o,w+1,m,1-v)}function gk(i,n,o,f,m,v){for(;m>f;){if(m-f>600){const k=m-f+1,B=o-f+1,$=Math.log(k),G=.5*Math.exp(2*$/3),K=.5*Math.sqrt($*G*(k-G)/k)*(B-k/2<0?-1:1);gk(i,n,o,Math.max(f,Math.floor(o-B*G/k+K)),Math.min(m,Math.floor(o+(k-B)*G/k+K)),v)}const w=n[2*o+v];let C=f,A=m;for(h0(i,n,f,o),n[2*m+v]>w&&h0(i,n,f,m);C<A;){for(h0(i,n,C,A),C++,A--;n[2*C+v]<w;)C++;for(;n[2*A+v]>w;)A--}n[2*f+v]===w?h0(i,n,f,A):(A++,h0(i,n,A,m)),A<=o&&(f=A+1),o<=A&&(m=A-1)}}function h0(i,n,o,f){jS(i,o,f),jS(n,2*o,2*f),jS(n,2*o+1,2*f+1)}function jS(i,n,o){const f=i[n];i[n]=i[o],i[o]=f}function yk(i,n,o,f){const m=i-o,v=n-f;return m*m+v*v}a.ARRAY_TYPE=So,a.AUTH_ERR_MSG=Oe,a.Aabb=Ua,a.Actor=class{constructor(i,n,o){this.target=i,this.parent=n,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Rt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=gn()?i:E,this.scheduler=new u7}send(i,n,o,f,m=!1,v){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=v,this.callbacks[w]=o);const C=Xt(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:i,hasCallback:!!o,targetMapId:f,mustQueue:m,sourceMapId:this.mapId,data:os(n,C)},C),{cancel:()=>{o&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(i){const n=i.data,o=n.id;if(o&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const f=this.cancelCallbacks[o];delete this.cancelCallbacks[o],f&&f.cancel()}else if(n.mustQueue||gn()){const f=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add((()=>this.processTask(o,n)),f&&f.metadata||{type:"message"})}else this.processTask(o,n)}processTask(i,n){if(n.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(n.error?o(Tc(n.error)):o(null,Tc(n.data)))}else{const o=Xt(this.globalScope)?void 0:[],f=n.hasCallback?(v,w)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:v?os(v):null,data:os(w,o)},o)}:v=>{},m=Tc(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,m,f);else if(this.parent.getWorkerSource){const v=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,v[0],m.source)[v[1]](m,f)}else f(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.CanonicalTileID=Ad,a.Color=Ni,a.ColorMode=Xu,a.CullFaceMode=Vc,a.DEMData=cb,a.DataConstantProperty=ie,a.DedupedRequest=dk,a.DepthMode=Wg,a.EXTENT=En,a.Elevation=class{isDataAvailableAtPoint(i){const n=this._source();if(this.isUsingMockSource()||!n||i.y<0||i.y>1)return!1;const o=n.getSource().maxzoom,f=1<<o,m=Math.floor(i.x),v=Math.floor((i.x-m)*f),w=Math.floor(i.y*f),C=this.findDEMTileFor(new ho(o,m,o,v,w));return!(!C||!C.dem)}getAtPointOrZero(i,n=0){return this.getAtPoint(i,n)||0}getAtPoint(i,n,o=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const f=this._source();if(!f||i.y<0||i.y>1)return n;const m=f.getSource().maxzoom,v=1<<m,w=Math.floor(i.x),C=i.x-w,A=new ho(m,w,m,Math.floor(C*v),Math.floor(i.y*v)),k=this.findDEMTileFor(A);if(!k||!k.dem)return n;const B=k.dem,$=1<<k.tileID.canonical.z,G=(C*$-k.tileID.canonical.x)*B.dim,K=(i.y*$-k.tileID.canonical.y)*B.dim,ee=Math.floor(G),oe=Math.floor(K);return(o?this.exaggeration():1)*Cr(Cr(B.get(ee,oe),B.get(ee,oe+1),K-oe),Cr(B.get(ee+1,oe),B.get(ee+1,oe+1),K-oe),G-ee)}getAtTileOffset(i,n,o){const f=1<<i.canonical.z;return this.getAtPointOrZero(new vi(i.wrap+(i.canonical.x+n/En)/f,(i.canonical.y+o/En)/f))}getAtTileOffsetFunc(i,n,o,f){return m=>{const v=this.getAtTileOffset(i,m.x,m.y),w=f.upVector(i.canonical,m.x,m.y);return To(w,w,v*f.upVectorScale(i.canonical,n,o).metersToTile),w}}getForTilePoints(i,n,o,f){if(this.isUsingMockSource())return!1;const m=ub.create(this,i,f);return!!m&&(n.forEach((v=>{v[2]=this.exaggeration()*m.getElevationAt(v[0],v[1],o)})),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(i);if(!n||!n.dem)return null;const o=n.dem.tree,f=n.tileID,m=1<<i.canonical.z-f.canonical.z;let v=i.canonical.x/m-f.canonical.x,w=i.canonical.y/m-f.canonical.y,C=0;for(let A=0;A<i.canonical.z-f.canonical.z&&!o.leaves[C];A++){v*=2,w*=2;const k=2*Math.floor(w)+Math.floor(v);C=o.childOffsets[C]+k,v%=1,w%=1}return{min:this.exaggeration()*o.minimums[C],max:this.exaggeration()*o.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,n,o){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},a.ErrorEvent=oo,a.EvaluationParameters=j,a.Event=Yi,a.Evented=Rn,a.FillExtrusionBucket=Vo,a.Frustum=dd,a.FrustumCorners=m_,a.GLOBE_RADIUS=Qs,a.GLOBE_SCALE_MATCH_LATITUDE=45,a.GLOBE_ZOOM_THRESHOLD_MAX=g_,a.GLOBE_ZOOM_THRESHOLD_MIN=pg,a.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_fillGridMeshWithLods(i,n){const o=new $t,f=new pn,m=[],v=i+1+2,w=n[0]+1,C=n[0]+1+(1+n.length),A=(k,B,$)=>{let G=k===v-1?k-2:k===0?k:k-1;return G+=$?24575:0,[G,B]};for(let k=0;k<v;++k)o.emplaceBack(...A(k,0,!0));for(let k=0;k<w;++k)for(let B=0;B<v;++B)o.emplaceBack(...A(B,k,(B===0||B===v-1)&&!0));for(let k=0;k<n.length;++k){const B=n[k];for(let $=0;$<v;++$)o.emplaceBack(...A($,B,!0))}for(let k=0;k<n.length;++k){const B=f.length,$=n[k]+1+2,G=new pn;for(let oe=0;oe<$-1;oe++){const de=oe===$-2,Ae=de?v*(C-n.length+k-oe):v;for(let Fe=0;Fe<v-1;Fe++){const Re=oe*v+Fe;oe===0||de||Fe===0||Fe===v-2?(G.emplaceBack(Re+1,Re,Re+Ae),G.emplaceBack(Re+Ae,Re+Ae+1,Re+1)):(f.emplaceBack(Re+1,Re,Re+Ae),f.emplaceBack(Re+Ae,Re+Ae+1,Re+1))}}const K=$i.simpleSegment(0,B,o.length,f.length-B);for(let oe=0;oe<G.uint16.length;oe+=3)f.emplaceBack(G.uint16[oe],G.uint16[oe+1],G.uint16[oe+2]);const ee=$i.simpleSegment(0,B,o.length,f.length-B);m.push({withoutSkirts:K,withSkirts:ee})}return{vertices:o,indices:f,segments:m}}_createGrid(i){const n=this._fillGridMeshWithLods(Lc,Zf);this._gridSegments=n.segments,this._gridBuffer=i.createVertexBuffer(n.vertices,Au.members),this._gridIndexBuffer=i.createIndexBuffer(n.indices,!0)}_createPoles(i){const n=new pn;for(let m=0;m<=Lc;m++)n.emplaceBack(0,m+1,m+2);this._poleIndexBuffer=i.createIndexBuffer(n,!0);const o=new Lr,f=new Lr;this._poleSegments=[];for(let m=0,v=0;m<pg;m++){const w=360/(1<<m);o.emplaceBack(0,-Qs,0,.5,0),f.emplaceBack(0,-Qs,0,.5,1);for(let C=0;C<=Lc;C++){const A=C/Lc,k=Cr(0,w,A),[B,$,G]=Oc(hx,w_,k,Qs);o.emplaceBack(B,$,G,A,0),f.emplaceBack(B,$,G,A,1)}this._poleSegments.push($i.simpleSegment(v,0,66,64)),v+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(o,hd,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(f,hd,!1)}getGridBuffers(i,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,n){if(!this._wireframeSegments){const o=new vr,f=Lc,m=f+1+2,v=1;this._wireframeSegments=[];for(let w=0,C=0;w<Zf.length;w++){const A=Zf[w];for(let B=v;B<A+v;B++)for(let $=v;$<f+v;$++){const G=B*m+$;o.emplaceBack(G,G+1),o.emplaceBack(G,G+m),o.emplaceBack(G,G+m+1)}const k=A*f*3;this._wireframeSegments.push($i.simpleSegment(0,C,(A+1)*m,k)),C+=k}this._wireframeIndexBuffer=i.createIndexBuffer(o)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},a.GlyphManager=dh,a.ImagePosition=n0,a.KDBush=BS,a.LivePerformanceUtils=kr,a.LngLat=qr,a.LngLatBounds=Ic,a.LocalGlyphMode=Ng,a.MAX_MERCATOR_LATITUDE=za,a.MercatorCoordinate=vi,a.ONE_EM=Pa,a.OverscaledTileID=ho,a.PerformanceMarkers=qn,a.Point=ue,a.Properties=ze,a.RGBAImage=ca,a.Ray=dg,a.RequestManager=class{constructor(i,n,o){this._transformRequestFn=i,this._customAccessToken=n,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const i=(function(){let n="";for(let o=0;o<10;o++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Y,n].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,n){return this._transformRequestFn&&this._transformRequestFn(i,n)||{url:i}}normalizeStyleURL(i,n){if(!Ue(i))return i;const o=Lt(i);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeGlyphsURL(i,n){if(!Ue(i))return i;const o=Lt(i);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeSourceURL(i,n,o,f){if(!Ue(i))return i;const m=Lt(i);return m.path=`/v4/${m.authority}.json`,m.params.push("secure"),o&&m.params.push(`language=${o}`),f&&m.params.push(`worldview=${f}`),this._makeAPIURL(m,this._customAccessToken||n)}normalizeSpriteURL(i,n,o,f){const m=Lt(i);return Ue(i)?(m.path=`/styles/v1${m.path}/sprite${n}${o}`,this._makeAPIURL(m,this._customAccessToken||f)):(m.path+=`${n}${o}`,Mt(m))}normalizeTileURL(i,n,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Ue(i))return i;const f=Lt(i);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||o&&f.authority!=="raster"&&o===512?"@2x":""}${F.supported?".webp":"$1"}`),f.authority==="raster"?f.path=`/${P.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${P.TILE_URL_VERSION}${f.path}`);const m=this._customAccessToken||(function(v){for(const w of v){const C=w.match(/^access_token=(.*)$/);if(C)return C[1]}return null})(f.params)||P.ACCESS_TOKEN;return P.REQUIRE_ACCESS_TOKEN&&m&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,m)}canonicalizeTileURL(i,n){const o=Lt(i);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return i;let f="mapbox://";o.path.match(/^\/raster\/v1\//)?f+=`raster/${o.path.replace(`/${P.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${o.path.replace(`/${P.TILE_URL_VERSION}/`,"")}`;let m=o.params;return n&&(m=m.filter((v=>!v.match(/^access_token=/)))),m.length&&(f+=`?${m.join("&")}`),f}canonicalizeTileset(i,n){const o=!!n&&Ue(n),f=[];for(const m of i.tiles||[])Qe(m)?f.push(this.canonicalizeTileURL(m,o)):f.push(m);return f}_makeAPIURL(i,n){const o="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=Lt(P.API_URL);if(i.protocol=f.protocol,i.authority=f.authority,i.protocol==="http"){const m=i.params.indexOf("secure");m>=0&&i.params.splice(m,1)}if(f.path!=="/"&&(i.path=`${f.path}${i.path}`),!P.REQUIRE_ACCESS_TOKEN)return Mt(i);if(n=n||P.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return i.params=i.params.filter((m=>m.indexOf("access_token")===-1)),i.params.push(`access_token=${n||""}`),Mt(i)}},a.ResourceType=un,a.SegmentVector=$i,a.SourceCache=tm,a.StencilMode=LS,a.StructArrayLayout1ui2=uo,a.StructArrayLayout2f1f2i16=rn,a.StructArrayLayout2i4=$t,a.StructArrayLayout2ui4=vr,a.StructArrayLayout3f12=Yn,a.StructArrayLayout3ui6=pn,a.StructArrayLayout4i8=vt,a.StructArrayLayout5f20=Lr,a.Texture=u0,a.Tile=IS,a.Transitionable=ne,a.Uniform1f=kp,a.Uniform1i=class extends Ac{constructor(i){super(i),this.current=0}set(i,n,o){this.fetchUniformLocation(i,n)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.Uniform2f=class extends Ac{constructor(i){super(i),this.current=[0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}},a.Uniform3f=class extends Ac{constructor(i){super(i),this.current=[0,0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}},a.Uniform4f=t_,a.UniformColor=n_,a.UniformMatrix2f=class extends Ac{constructor(i){super(i),this.current=ex}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let f=0;f<4;f++)if(o[f]!==this.current[f]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}}},a.UniformMatrix3f=class extends Ac{constructor(i){super(i),this.current=Jv}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let f=0;f<9;f++)if(o[f]!==this.current[f]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}}},a.UniformMatrix4f=class extends Ac{constructor(i){super(i),this.current=r_}set(i,n,o){if(this.fetchUniformLocation(i,n)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let f=1;f<16;f++)if(o[f]!==this.current[f]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}},a.UnwrappedTileID=Pg,a.ValidationError=Qt,a.VectorTileFeature=zg,a.VectorTileWorkerSource=class extends Rn{constructor(i,n,o,f,m){super(),this.actor=i,this.layerIndex=n,this.availableImages=o,this.loadVectorData=m||pk,this.loading={},this.loaded={},this.deduped=new dk(i.scheduler),this.isSpriteLoaded=f,this.scheduler=i.scheduler}loadTile(i,n){const o=i.uid,f=i&&i.request,m=f&&f.collectResourceTiming,v=this.loading[o]=new y7(i);v.abort=this.loadVectorData(i,((w,C)=>{const A=!this.loading[o];if(delete this.loading[o],A||w||!C)return v.status="done",A||(this.loaded[o]=v),n(w);const k=C.rawData,B={};C.expires&&(B.expires=C.expires),C.cacheControl&&(B.cacheControl=C.cacheControl),v.vectorTile=C.vectorTile||new P_(new uh(k));const $=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,((G,K)=>{if(G||!K)return n(G);const ee={};if(m){const oe=Er(f);oe.length>0&&(ee.resourceTiming=JSON.parse(JSON.stringify(oe)))}n(null,nt({rawTileData:k.slice(0)},K,B,ee))}))};this.isSpriteLoaded?$():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add($,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):$()})),this.loaded=this.loaded||{},this.loaded[o]=v}))}reloadTile(i,n){const o=this.loaded,f=i.uid,m=this;if(o&&o[f]){const v=o[f];v.showCollisionBoxes=i.showCollisionBoxes,v.enableTerrain=!!i.enableTerrain,v.projection=i.projection,v.tileTransform=Bl(i.tileID.canonical,i.projection);const w=(C,A)=>{const k=v.reloadCallback;k&&(delete v.reloadCallback,v.parse(v.vectorTile,m.layerIndex,this.availableImages,m.actor,k)),n(C,A)};v.status==="parsing"?v.reloadCallback=w:v.status==="done"&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(i,n){const o=i.uid,f=this.loading[o];f&&(f.abort&&f.abort(),delete this.loading[o]),n()}removeTile(i,n){const o=this.loaded,f=i.uid;o&&o[f]&&delete o[f],n()}},a.WritingMode=ps,a.ZoomDependentExpression=bc,a.add=cs,a.addDynamicAttributes=oi,a.adjoint=function(i,n){var o=n[0],f=n[1],m=n[2],v=n[3],w=n[4],C=n[5],A=n[6],k=n[7],B=n[8];return i[0]=w*B-C*k,i[1]=m*k-f*B,i[2]=f*C-m*w,i[3]=C*A-v*B,i[4]=o*B-m*A,i[5]=m*v-o*C,i[6]=v*k-w*A,i[7]=f*A-o*k,i[8]=o*w-f*v,i},a.asyncAll=Ge,a.bezier=Pe,a.bindAll=Rt,a.boundsAttributes=Y5,a.bufferConvexPolygon=function(i,n){const o=[];for(let f=0;f<i.length;f++){const m=Ce(f-1,-1,i.length-1),v=Ce(f+1,-1,i.length-1),w=i[f],C=i[v],A=i[m].sub(w).unit(),k=C.sub(w).unit(),B=k.angleWithSep(A.x,A.y),$=A.add(k).unit().mult(-1*n/Math.sin(B/2));o.push(w.add($))}return o},a.cacheEntryPossiblyAdded=function(i){cr++,cr>Tn&&(i.getActor().send("enforceCacheSizeLimit",tr),cr=0)},a.calculateGlobeLabelMatrix=function(i,n){const{x:o,y:f}=i.point,m=Bc(o,f,i.worldSize/i._pixelsPerMercatorPixel,0,0);return Eu(m,m,Xf($a(n)))},a.calculateGlobeMatrix=function(i){const{x:n,y:o}=i.point,{lng:f,lat:m}=i._center;return Bc(n,o,i.worldSize,f,m)},a.calculateGlobeMercatorMatrix=function(i){const n=i.pixelsPerMeter,o=n/fs(1,i.center.lat),f=ls(new Float64Array(16));return Gf(f,f,[i.point.x,i.point.y,0]),Cu(f,f,[o,o,n]),Float32Array.from(f)},a.circumferenceAtLatitude=xg,a.clamp=Be,a.clearTileCache=function(i){if(!lr())return;const n=E.caches.delete(er);i&&n.catch(i).then((()=>i()))},a.clipLine=Xp,a.clone=function(i){var n=new So(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},a.clone$1=Vt,a.collisionCircleLayout=$x,a.config=P,a.conjugate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=n[3],i},a.create=function(){var i=new So(16);return So!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},a.create$1=s_,a.createExpression=Vs,a.createLayout=Ke,a.createStyleLayer=function(i){return i.type==="custom"?new Hu(i):new l7[i.type](i)},a.cross=hg,a.degToRad=me,a.distance=function(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1],n[2]-i[2])},a.div=function(i,n,o){return i[0]=n[0]/o[0],i[1]=n[1]/o[1],i[2]=n[2]/o[2],i},a.dot=ja,a.earthRadius=yd,a.ease=et,a.easeCubicInOut=pe,a.ecefToLatLng=function([i,n,o]){const f=Math.hypot(i,n,o),m=Math.atan2(i,o),v=.5*Math.PI-Math.acos(-n/f);return new qr(be(m),be(v))},a.emitValidationErrors=ng,a.endsWith=kt,a.enforceCacheSizeLimit=function(i){Sn(),Ln&&Ln.then((n=>{n.keys().then((o=>{for(let f=0;f<o.length-i;f++)n.delete(o[f])}))}))},a.evaluateSizeForFeature=sh,a.evaluateSizeForZoom=lh,a.evaluateVariableOffset=Uc,a.evented=T,a.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]},a.exactEquals$1=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]},a.exported=Aa,a.exported$1=F,a.extend=nt,a.extend$1=Xa,a.fillExtrusionHeightLift=zx,a.filterObject=xn,a.fromMat4=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],i},a.fromQuat=function(i,n){var o=n[0],f=n[1],m=n[2],v=n[3],w=o+o,C=f+f,A=m+m,k=o*w,B=f*w,$=f*C,G=m*w,K=m*C,ee=m*A,oe=v*w,de=v*C,Ae=v*A;return i[0]=1-$-ee,i[1]=B+Ae,i[2]=G-de,i[3]=0,i[4]=B-Ae,i[5]=1-k-ee,i[6]=K+oe,i[7]=0,i[8]=G+de,i[9]=K-oe,i[10]=1-k-$,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},a.fromRotation=function(i,n){var o=Math.sin(n),f=Math.cos(n);return i[0]=f,i[1]=o,i[2]=0,i[3]=-o,i[4]=f,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},a.fromScaling=ax,a.furthestTileCorner=function(i){const n=Math.round((i+45+360)%360/90)%4;return Ie[n]},a.getAABBPointSquareDist=function(i,n,o){let f=0;for(let m=0;m<2;++m){const v=o?o[m]:0;i[m]>v&&(f+=(i[m]-v)*(i[m]-v)),n[m]<v&&(f+=(v-n[m])*(v-n[m]))}return f},a.getAnchorAlignment=Wp,a.getAnchorJustification=yh,a.getBounds=function(i){let n=1/0,o=1/0,f=-1/0,m=-1/0;for(const v of i)n=Math.min(n,v.x),o=Math.min(o,v.y),f=Math.max(f,v.x),m=Math.max(m,v.y);return{min:new ue(n,o),max:new ue(f,m)}},a.getColumn=_n,a.getDefaultExportFromCjs=J,a.getGridMatrix=function(i,n,o,f){const m=n.getNorth(),v=n.getSouth(),w=n.getWest(),C=n.getEast(),A=1<<i.z,k=C-w,B=m-v,$=k/Lc,G=-B/Zf[o],K=[0,$,0,G,0,0,m,w,0];if(i.z>0){const ee=180/f;ix(K,K,[ee/k+1,0,0,0,ee/B+1,0,-.5*ee/$,.5*ee/G,1])}return K[2]=A,K[5]=i.x,K[8]=i.y,K},a.getImage=Me,a.getJSON=function(i,n){return Nn(nt(i,{type:"json"}),n)},a.getLatitudinalLod=function(i){const n=za-5;i=Be(i,-n,n)/n*90;const o=Math.pow(Math.abs(Math.sin(me(i))),3);return Math.round(o*(Zf.length-1))},a.getMapSessionAPI=Kr,a.getPerformanceMeasurement=Er,a.getProjection=qt,a.getRTLTextPluginStatus=M,a.getReferrer=fn,a.getTilePoint=function(i,{x:n,y:o},f=0){return new ue(((n-f)*i.scale-i.x)*En,(o*i.scale-i.y)*En)},a.getTileVec3=function(i,n,o=0){return Hf(((n.x-o)*i.scale-i.x)*En,(n.y*i.scale-i.y)*En,dx(n.z,n.y))},a.getVideo=function(i,n){const o=E.document.createElement("video");o.muted=!0,o.onloadstart=function(){n(null,o)};for(let f=0;f<i.length;f++){const m=E.document.createElement("source");Zr(i[f])||(o.crossOrigin="Anonymous"),m.src=i[f],o.appendChild(m)}return{cancel:()=>{}}},a.globeCenterToScreenPoint=function(i){const n=[0,0,0],o=ls(new Float64Array(16));return Eu(o,i.pixelMatrix,i.globeMatrix),qi(n,n,o),new ue(n[0],n[1])},a.globeDenormalizeECEF=Xf,a.globeECEFOrigin=function(i,n){const o=[0,0,0];return qi(o,o,gd($a(n.canonical))),qi(o,o,i),o},a.globeMetersToEcef=pd,a.globeNormalizeECEF=gd,a.globePixelsToTileUnits=function(i,n){return En/(512*Math.pow(2,i))*_g($a(n))},a.globePoleMatrixForTile=function(i,n,o){const f=ls(new Float64Array(16)),m=(n/(1<<i)-.5)*Math.PI*2;return cg(f,o.globeMatrix,m),Float32Array.from(f)},a.globeTileBounds=$a,a.globeTiltAtLngLat=b_,a.globeToMercatorTransition=Yf,a.globeUseCustomAntiAliasing=function(i,n,o){const f=Yf(o.zoom),m=i.style.map._antialias,v=!!n.extStandardDerivatives,w=n.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return f===0&&!m&&!w&&v},a.identity=ls,a.identity$1=Na,a.invert=sg,a.isFullscreen=function(){return!!E.document.fullscreenElement||!!E.document.webkitFullscreenElement},a.isLngLatBehindGlobe=Kf,a.isMapAuthenticated=function(i){return Xr.has(i)},a.isMapboxURL=Ue,a.isSafariWithAntialiasingBug=function(i){const n=i.navigator?i.navigator.userAgent:null;return!!Xt(i)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.latFromMercatorY=Vr,a.latLngToECEF=Ml,a.len=ox,a.length=cd,a.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},a.lngFromMercatorX=Uo,a.loadVectorTile=pk,a.makeRequest=Nn,a.mapValue=function(i,n,o,f,m){return Be((i-n)/(o-n)*(m-f)+f,f,m)},a.mercatorScale=S_,a.mercatorXfromLng=qa,a.mercatorYfromLat=_i,a.mercatorZfromAltitude=fs,a.mul=Ip,a.mul$1=u_,a.multiply=Eu,a.multiply$1=ix,a.multiply$2=fg,a.nextPowerOfTwo=Yt,a.normalize=Ja,a.normalize$1=lx,a.normalize$2=sx,a.number=Cr,a.ortho=function(i,n,o,f,m,v,w){var C=1/(n-o),A=1/(f-m),k=1/(v-w);return i[0]=-2*C,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*A,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*k,i[11]=0,i[12]=(n+o)*C,i[13]=(m+f)*A,i[14]=(w+v)*k,i[15]=1,i},a.pbf=Gx,a.perspective=function(i,n,o,f,m){var v,w=1/Math.tan(n/2);return i[0]=w/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=w,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,m!=null&&m!==1/0?(i[10]=(m+f)*(v=1/(f-m)),i[14]=2*m*f*v):(i[10]=-1,i[14]=-2*f),i},a.pick=function(i,n){const o={};for(let f=0;f<n.length;f++){const m=n[f];m in i&&(o[m]=i[m])}return o},a.plugin=D,a.pointGeometry=Se,a.polesInViewport=function(i){const n=ls(new Float64Array(16));Eu(n,i.pixelMatrix,i.globeMatrix);const o=[0,us,0],f=[0,No,0];return qi(o,o,n),qi(f,f,n),[o[0]>0&&o[0]<=i.width&&o[1]>0&&o[1]<=i.height&&!Kf(i,new qr(i.center.lat,90)),f[0]>0&&f[0]<=i.width&&f[1]>0&&f[1]<=i.height&&!Kf(i,new qr(i.center.lat,-90))]},a.polygonContainsPoint=tl,a.polygonIntersectsBox=eh,a.polygonIntersectsPolygon=kl,a.polygonizeBounds=function(i,n,o=0,f=!0){const m=new ue(o,o),v=i.sub(m),w=n.add(m),C=[v,new ue(w.x,v.y),w,new ue(v.x,w.y)];return f&&C.push(v.clone()),C},a.posAttributes=Au,a.postMapLoadEvent=Fn,a.postPerformanceEvent=Rr,a.postTurnstileEvent=Mn,a.potpack=t0,a.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},a.radToDeg=be,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.registerForPluginStateChange=function(i){return i({pluginStatus:_,pluginURL:s}),T.on("pluginStateChange",i),i},a.removeAuthState=function(i){Xr.delete(i)},a.renderColorRamp=zl,a.resample=Rl,a.rotateX=lg,a.rotateX$1=h_,a.rotateY=cg,a.rotateY$1=d_,a.rotateZ=function(i,n,o){var f=Math.sin(o),m=Math.cos(o),v=n[0],w=n[1],C=n[2],A=n[3],k=n[4],B=n[5],$=n[6],G=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=v*m+k*f,i[1]=w*m+B*f,i[2]=C*m+$*f,i[3]=A*m+G*f,i[4]=k*m-v*f,i[5]=B*m-w*f,i[6]=$*m-C*f,i[7]=G*m-A*f,i},a.rotateZ$1=function(i,n,o){o*=.5;var f=n[0],m=n[1],v=n[2],w=n[3],C=Math.sin(o),A=Math.cos(o);return i[0]=f*A+m*C,i[1]=m*A-f*C,i[2]=v*A+w*C,i[3]=w*A-v*C,i},a.scale=Cu,a.scale$1=f_,a.scale$2=To,a.scaleAndAdd=fd,a.set=function(i,n,o,f){return i[0]=n,i[1]=o,i[2]=f,i},a.setCacheLimits=function(i,n){tr=i,Tn=n},a.setColumn=function(i,n,o){i[4*n+0]=o[0],i[4*n+1]=o[1],i[4*n+2]=o[2],i[4*n+3]=o[3]},a.setRTLTextPlugin=function(i,n,o=!1){if(_===Su||_===Tu||_===od)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=Aa.resolveURL(i),_=Su,Ec=n,x(),o||z()},a.smoothstep=dt,a.spec=_t,a.squaredLength=function(i){var n=i[0],o=i[1],f=i[2];return n*n+o*o+f*f},a.storeAuthState=function(i,n){n?Xr.add(i):Xr.delete(i)},a.sub=Ms,a.subtract=ug,a.symbolSize=qx,a.tileAABB=function(i,n,o,f,m,v,w,C,A){if(A.name==="globe")return Dc(i,n,new Ad(o,f,m));const k=Bl({z:o,x:f,y:m},A);return new Ua([(v+k.x/k.scale)*n,n*(k.y/k.scale),w],[(v+k.x2/k.scale)*n,n*(k.y2/k.scale),C])},a.tileCornersToBounds=md,a.tileTransform=Bl,a.transformMat3=function(i,n,o){var f=n[0],m=n[1],v=n[2];return i[0]=f*o[0]+m*o[3]+v*o[6],i[1]=f*o[1]+m*o[4]+v*o[7],i[2]=f*o[2]+m*o[5]+v*o[8],i},a.transformMat4=qi,a.transformMat4$1=zc,a.transformQuat=c_,a.transitionTileAABBinECEF=ux,a.translate=Gf,a.transpose=function(i,n){if(i===n){var o=n[1],f=n[2],m=n[5];i[1]=n[3],i[2]=n[6],i[3]=o,i[5]=n[7],i[6]=f,i[7]=m}else i[0]=n[0],i[1]=n[3],i[2]=n[6],i[3]=n[1],i[4]=n[4],i[5]=n[7],i[6]=n[2],i[7]=n[5],i[8]=n[8];return i},a.triggerPluginCompletionEvent=d,a.uniqueId=Pt,a.updateGlobeVertexNormal=function(i,n,o,f,m){const v=5*n+2;i.float32[v+0]=o,i.float32[v+1]=f,i.float32[v+2]=m},a.validateCustomStyleLayer=function(i){const n=[],o=i.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateFilter=i=>wo(Oo(i)),a.validateFog=i=>wo(nd(i)),a.validateLayer=i=>wo(ed(i)),a.validateLight=i=>wo(Xs(i)),a.validateSource=i=>wo(bl(i)),a.validateStyle=wl,a.validateTerrain=i=>wo(is(i)),a.values=at,a.vectorTile=jp,a.version=R,a.warnOnce=sn,a.window=E,a.wrap=Ce})),y(["./shared"],(function(a){function E(Le){if(typeof Le=="number"||typeof Le=="boolean"||typeof Le=="string"||Le==null)return JSON.stringify(Le);if(Array.isArray(Le)){let ce="[";for(const Me of Le)ce+=`${E(Me)},`;return`${ce}]`}let le="{";for(const ce of Object.keys(Le).sort())le+=`${ce}:${E(Le[ce])},`;return`${le}}`}function R(Le){let le="";for(const ce of a.refProperties)le+=`/${E(Le[ce])}`;return le}class L{constructor(le){this.keyCache={},le&&this.replace(le)}replace(le){this._layerConfigs={},this._layers={},this.update(le,[])}update(le,ce){for(const Oe of le)this._layerConfigs[Oe.id]=Oe,(this._layers[Oe.id]=a.createStyleLayer(Oe)).compileFilter(),this.keyCache[Oe.id]&&delete this.keyCache[Oe.id];for(const Oe of ce)delete this.keyCache[Oe],delete this._layerConfigs[Oe],delete this._layers[Oe];this.familiesBySource={};const Me=(function(Oe,Ue){const Qe={};for(let je=0;je<Oe.length;je++){const tt=Ue&&Ue[Oe[je].id]||R(Oe[je]);Ue&&(Ue[Oe[je].id]=tt);let Tt=Qe[tt];Tt||(Tt=Qe[tt]=[]),Tt.push(Oe[je])}const qe=[];for(const je in Qe)qe.push(Qe[je]);return qe})(a.values(this._layerConfigs),this.keyCache);for(const Oe of Me){const Ue=Oe.map((Lt=>this._layers[Lt.id])),Qe=Ue[0];if(Qe.visibility==="none")continue;const qe=Qe.source||"";let je=this.familiesBySource[qe];je||(je=this.familiesBySource[qe]={});const tt=Qe.sourceLayer||"_geojsonTileLayer";let Tt=je[tt];Tt||(Tt=je[tt]=[]),Tt.push(Ue)}}}class P{loadTile(le,ce){const{uid:Me,encoding:Oe,rawImageData:Ue,padding:Qe,buildQuadTree:qe}=le,je=a.window.ImageBitmap&&Ue instanceof a.window.ImageBitmap?this.getImageData(Ue,Qe):Ue;ce(null,new a.DEMData(Me,je,Oe,Qe<1,qe))}getImageData(le,ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(le.width,le.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=le.width,this.offscreenCanvas.height=le.height,this.offscreenCanvasContext.drawImage(le,0,0,le.width,le.height);const Me=this.offscreenCanvasContext.getImageData(-ce,-ce,le.width+2*ce,le.height+2*ce);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Me}}function F(Le,le){if(Le.length!==0){U(Le[0],le);for(var ce=1;ce<Le.length;ce++)U(Le[ce],!le)}}function U(Le,le){for(var ce=0,Me=0,Oe=0,Ue=Le.length,Qe=Ue-1;Oe<Ue;Qe=Oe++){var qe=(Le[Oe][0]-Le[Qe][0])*(Le[Qe][1]+Le[Oe][1]),je=ce+qe;Me+=Math.abs(ce)>=Math.abs(qe)?ce-je+qe:qe-je+ce,ce=je}ce+Me>=0!=!!le&&Le.reverse()}var N=a.getDefaultExportFromCjs((function Le(le,ce){var Me,Oe=le&&le.type;if(Oe==="FeatureCollection")for(Me=0;Me<le.features.length;Me++)Le(le.features[Me],ce);else if(Oe==="GeometryCollection")for(Me=0;Me<le.geometries.length;Me++)Le(le.geometries[Me],ce);else if(Oe==="Feature")Le(le.geometry,ce);else if(Oe==="Polygon")F(le.coordinates,ce);else if(Oe==="MultiPolygon")for(Me=0;Me<le.coordinates.length;Me++)F(le.coordinates[Me],ce);return le}));const q=a.VectorTileFeature.prototype.toGeoJSON;var Z={exports:{}},Q=a.pointGeometry,Y=a.vectorTile.VectorTileFeature,J=re;function re(Le,le){this.options=le||{},this.features=Le,this.length=Le.length}function ae(Le,le){this.id=typeof Le.id=="number"?Le.id:void 0,this.type=Le.type,this.rawGeometry=Le.type===1?[Le.geometry]:Le.geometry,this.properties=Le.tags,this.extent=le||4096}re.prototype.feature=function(Le){return new ae(this.features[Le],this.options.extent)},ae.prototype.loadGeometry=function(){var Le=this.rawGeometry;this.geometry=[];for(var le=0;le<Le.length;le++){for(var ce=Le[le],Me=[],Oe=0;Oe<ce.length;Oe++)Me.push(new Q(ce[Oe][0],ce[Oe][1]));this.geometry.push(Me)}return this.geometry},ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Le=this.geometry,le=1/0,ce=-1/0,Me=1/0,Oe=-1/0,Ue=0;Ue<Le.length;Ue++)for(var Qe=Le[Ue],qe=0;qe<Qe.length;qe++){var je=Qe[qe];le=Math.min(le,je.x),ce=Math.max(ce,je.x),Me=Math.min(Me,je.y),Oe=Math.max(Oe,je.y)}return[le,Me,ce,Oe]},ae.prototype.toGeoJSON=Y.prototype.toGeoJSON;var fe=a.pbf,Se=J;function Te(Le){var le=new fe;return(function(ce,Me){for(var Oe in ce.layers)Me.writeMessage(3,ue,ce.layers[Oe])})(Le,le),le.finish()}function ue(Le,le){var ce;le.writeVarintField(15,Le.version||1),le.writeStringField(1,Le.name||""),le.writeVarintField(5,Le.extent||4096);var Me={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<Le.length;ce++)Me.feature=Le.feature(ce),le.writeMessage(2,_e,Me);var Oe=Me.keys;for(ce=0;ce<Oe.length;ce++)le.writeStringField(3,Oe[ce]);var Ue=Me.values;for(ce=0;ce<Ue.length;ce++)le.writeMessage(4,pe,Ue[ce])}function _e(Le,le){var ce=Le.feature;ce.id!==void 0&&le.writeVarintField(1,ce.id),le.writeMessage(2,se,Le),le.writeVarintField(3,ce.type),le.writeMessage(4,Ie,ce)}function se(Le,le){var ce=Le.feature,Me=Le.keys,Oe=Le.values,Ue=Le.keycache,Qe=Le.valuecache;for(var qe in ce.properties){var je=ce.properties[qe],tt=Ue[qe];if(je!==null){tt===void 0&&(Me.push(qe),Ue[qe]=tt=Me.length-1),le.writeVarint(tt);var Tt=typeof je;Tt!=="string"&&Tt!=="boolean"&&Tt!=="number"&&(je=JSON.stringify(je));var Lt=Tt+":"+je,Mt=Qe[Lt];Mt===void 0&&(Oe.push(je),Qe[Lt]=Mt=Oe.length-1),le.writeVarint(Mt)}}}function me(Le,le){return(le<<3)+(7&Le)}function be(Le){return Le<<1^Le>>31}function Ie(Le,le){for(var ce=Le.loadGeometry(),Me=Le.type,Oe=0,Ue=0,Qe=ce.length,qe=0;qe<Qe;qe++){var je=ce[qe],tt=1;Me===1&&(tt=je.length),le.writeVarint(me(1,tt));for(var Tt=Me===3?je.length-1:je.length,Lt=0;Lt<Tt;Lt++){Lt===1&&Me!==1&&le.writeVarint(me(2,Tt-1));var Mt=je[Lt].x-Oe,dn=je[Lt].y-Ue;le.writeVarint(be(Mt)),le.writeVarint(be(dn)),Oe+=Mt,Ue+=dn}Me===3&&le.writeVarint(me(7,1))}}function pe(Le,le){var ce=typeof Le;ce==="string"?le.writeStringField(1,Le):ce==="boolean"?le.writeBooleanField(7,Le):ce==="number"&&(Le%1!=0?le.writeDoubleField(3,Le):Le<0?le.writeSVarintField(6,Le):le.writeVarintField(5,Le))}Z.exports=Te,Z.exports.fromVectorTileJs=Te,Z.exports.fromGeojsonVt=function(Le,le){le=le||{};var ce={};for(var Me in Le)ce[Me]=new Se(Le[Me].features,le),ce[Me].name=Me,ce[Me].version=le.version,ce[Me].extent=le.extent;return Te({layers:ce})},Z.exports.GeoJSONWrapper=Se;var Pe=a.getDefaultExportFromCjs(Z.exports);const et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Le=>Le},Be=Math.fround||(dt=new Float32Array(1),Le=>(dt[0]=+Le,dt[0]));var dt;const Ce=3,Ge=5,at=6;class nt{constructor(le){this.options=Object.assign(Object.create(et),le),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(le){const{log:ce,minZoom:Me,maxZoom:Oe}=this.options;ce&&console.time("total time");const Ue=`prepare ${le.length} points`;ce&&console.time(Ue),this.points=le;const Qe=[];for(let je=0;je<le.length;je++){const tt=le[je];if(!tt.geometry)continue;const[Tt,Lt]=tt.geometry.coordinates,Mt=Be(Ct(Tt)),dn=Be(Yt(Lt));Qe.push(Mt,dn,1/0,je,-1,1),this.options.reduce&&Qe.push(0)}let qe=this.trees[Oe+1]=this._createTree(Qe);ce&&console.timeEnd(Ue);for(let je=Oe;je>=Me;je--){const tt=+Date.now();qe=this.trees[je]=this._createTree(this._cluster(qe,je)),ce&&console.log("z%d: %d clusters in %dms",je,qe.numItems,+Date.now()-tt)}return ce&&console.timeEnd("total time"),this}getClusters(le,ce){let Me=((le[0]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,le[1]));let Ue=le[2]===180?180:((le[2]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)Me=-180,Ue=180;else if(Me>Ue){const Lt=this.getClusters([Me,Oe,180,Qe],ce),Mt=this.getClusters([-180,Oe,Ue,Qe],ce);return Lt.concat(Mt)}const qe=this.trees[this._limitZoom(ce)],je=qe.range(Ct(Me),Yt(Qe),Ct(Ue),Yt(Oe)),tt=qe.data,Tt=[];for(const Lt of je){const Mt=this.stride*Lt;Tt.push(tt[Mt+Ge]>1?gt(tt,Mt,this.clusterProps):this.points[tt[Mt+Ce]])}return Tt}getChildren(le){const ce=this._getOriginId(le),Me=this._getOriginZoom(le),Oe="No cluster with the specified id.",Ue=this.trees[Me];if(!Ue)throw new Error(Oe);const Qe=Ue.data;if(ce*this.stride>=Qe.length)throw new Error(Oe);const qe=this.options.radius/(this.options.extent*Math.pow(2,Me-1)),je=Ue.within(Qe[ce*this.stride],Qe[ce*this.stride+1],qe),tt=[];for(const Tt of je){const Lt=Tt*this.stride;Qe[Lt+4]===le&&tt.push(Qe[Lt+Ge]>1?gt(Qe,Lt,this.clusterProps):this.points[Qe[Lt+Ce]])}if(tt.length===0)throw new Error(Oe);return tt}getLeaves(le,ce,Me){const Oe=[];return this._appendLeaves(Oe,le,ce=ce||10,Me=Me||0,0),Oe}getTile(le,ce,Me){const Oe=this.trees[this._limitZoom(le)],Ue=Math.pow(2,le),{extent:Qe,radius:qe}=this.options,je=qe/Qe,tt=(Me-je)/Ue,Tt=(Me+1+je)/Ue,Lt={features:[]};return this._addTileFeatures(Oe.range((ce-je)/Ue,tt,(ce+1+je)/Ue,Tt),Oe.data,ce,Me,Ue,Lt),ce===0&&this._addTileFeatures(Oe.range(1-je/Ue,tt,1,Tt),Oe.data,Ue,Me,Ue,Lt),ce===Ue-1&&this._addTileFeatures(Oe.range(0,tt,je/Ue,Tt),Oe.data,-1,Me,Ue,Lt),Lt.features.length?Lt:null}getClusterExpansionZoom(le){let ce=this._getOriginZoom(le)-1;for(;ce<=this.options.maxZoom;){const Me=this.getChildren(le);if(ce++,Me.length!==1)break;le=Me[0].properties.cluster_id}return ce}_appendLeaves(le,ce,Me,Oe,Ue){const Qe=this.getChildren(ce);for(const qe of Qe){const je=qe.properties;if(je&&je.cluster?Ue+je.point_count<=Oe?Ue+=je.point_count:Ue=this._appendLeaves(le,je.cluster_id,Me,Oe,Ue):Ue<Oe?Ue++:le.push(qe),le.length===Me)break}return Ue}_createTree(le){const ce=new a.KDBush(le.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Me=0;Me<le.length;Me+=this.stride)ce.add(le[Me],le[Me+1]);return ce.finish(),ce.data=le,ce}_addTileFeatures(le,ce,Me,Oe,Ue,Qe){for(const qe of le){const je=qe*this.stride,tt=ce[je+Ge]>1;let Tt,Lt,Mt;if(tt)Tt=Pt(ce,je,this.clusterProps),Lt=ce[je],Mt=ce[je+1];else{const In=this.points[ce[je+Ce]];Tt=In.properties;const[Bn,Mn]=In.geometry.coordinates;Lt=Ct(Bn),Mt=Yt(Mn)}const dn={type:1,geometry:[[Math.round(this.options.extent*(Lt*Ue-Me)),Math.round(this.options.extent*(Mt*Ue-Oe))]],tags:Tt};let bn;bn=tt||this.options.generateId?ce[je+Ce]:this.points[ce[je+Ce]].id,bn!==void 0&&(dn.id=bn),Qe.features.push(dn)}}_limitZoom(le){return Math.max(this.options.minZoom,Math.min(Math.floor(+le),this.options.maxZoom+1))}_cluster(le,ce){const{radius:Me,extent:Oe,reduce:Ue,minPoints:Qe}=this.options,qe=Me/(Oe*Math.pow(2,ce)),je=le.data,tt=[],Tt=this.stride;for(let Lt=0;Lt<je.length;Lt+=Tt){if(je[Lt+2]<=ce)continue;je[Lt+2]=ce;const Mt=je[Lt],dn=je[Lt+1],bn=le.within(je[Lt],je[Lt+1],qe),In=je[Lt+Ge];let Bn=In;for(const Mn of bn){const nr=Mn*Tt;je[nr+2]>ce&&(Bn+=je[nr+Ge])}if(Bn>In&&Bn>=Qe){let Mn,nr=Mt*In,Fn=dn*In,pr=-1;const Rr=((Lt/Tt|0)<<5)+(ce+1)+this.points.length;for(const Ci of bn){const Kr=Ci*Tt;if(je[Kr+2]<=ce)continue;je[Kr+2]=ce;const Xr=je[Kr+Ge];nr+=je[Kr]*Xr,Fn+=je[Kr+1]*Xr,je[Kr+4]=Rr,Ue&&(Mn||(Mn=this._map(je,Lt,!0),pr=this.clusterProps.length,this.clusterProps.push(Mn)),Ue(Mn,this._map(je,Kr)))}je[Lt+4]=Rr,tt.push(nr/Bn,Fn/Bn,1/0,Rr,-1,Bn),Ue&&tt.push(pr)}else{for(let Mn=0;Mn<Tt;Mn++)tt.push(je[Lt+Mn]);if(Bn>1)for(const Mn of bn){const nr=Mn*Tt;if(!(je[nr+2]<=ce)){je[nr+2]=ce;for(let Fn=0;Fn<Tt;Fn++)tt.push(je[nr+Fn])}}}}return tt}_getOriginId(le){return le-this.points.length>>5}_getOriginZoom(le){return(le-this.points.length)%32}_map(le,ce,Me){if(le[ce+Ge]>1){const Qe=this.clusterProps[le[ce+at]];return Me?Object.assign({},Qe):Qe}const Oe=this.points[le[ce+Ce]].properties,Ue=this.options.map(Oe);return Me&&Ue===Oe?Object.assign({},Ue):Ue}}function gt(Le,le,ce){return{type:"Feature",id:Le[le+Ce],properties:Pt(Le,le,ce),geometry:{type:"Point",coordinates:[(Me=Le[le],360*(Me-.5)),pt(Le[le+1])]}};var Me}function Pt(Le,le,ce){const Me=Le[le+Ge],Oe=Me>=1e4?`${Math.round(Me/1e3)}k`:Me>=1e3?Math.round(Me/100)/10+"k":Me,Ue=Le[le+at],Qe=Ue===-1?{}:Object.assign({},ce[Ue]);return Object.assign(Qe,{cluster:!0,cluster_id:Le[le+Ce],point_count:Me,point_count_abbreviated:Oe})}function Ct(Le){return Le/360+.5}function Yt(Le){const le=Math.sin(Le*Math.PI/180),ce=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return ce<0?0:ce>1?1:ce}function pt(Le){const le=(180-360*Le)*Math.PI/180;return 360*Math.atan(Math.exp(le))/Math.PI-90}function Rt(Le,le,ce,Me){for(var Oe,Ue=Me,Qe=ce-le>>1,qe=ce-le,je=Le[le],tt=Le[le+1],Tt=Le[ce],Lt=Le[ce+1],Mt=le+3;Mt<ce;Mt+=3){var dn=kt(Le[Mt],Le[Mt+1],je,tt,Tt,Lt);if(dn>Ue)Oe=Mt,Ue=dn;else if(dn===Ue){var bn=Math.abs(Mt-Qe);bn<qe&&(Oe=Mt,qe=bn)}}Ue>Me&&(Oe-le>3&&Rt(Le,le,Oe,Me),Le[Oe+2]=Ue,ce-Oe>3&&Rt(Le,Oe,ce,Me))}function kt(Le,le,ce,Me,Oe,Ue){var Qe=Oe-ce,qe=Ue-Me;if(Qe!==0||qe!==0){var je=((Le-ce)*Qe+(le-Me)*qe)/(Qe*Qe+qe*qe);je>1?(ce=Oe,Me=Ue):je>0&&(ce+=Qe*je,Me+=qe*je)}return(Qe=Le-ce)*Qe+(qe=le-Me)*qe}function Xe(Le,le,ce,Me){var Oe={id:Le===void 0?null:Le,type:le,geometry:ce,tags:Me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(Ue){var Qe=Ue.geometry,qe=Ue.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")xn(Ue,Qe);else if(qe==="Polygon"||qe==="MultiLineString")for(var je=0;je<Qe.length;je++)xn(Ue,Qe[je]);else if(qe==="MultiPolygon")for(je=0;je<Qe.length;je++)for(var tt=0;tt<Qe[je].length;tt++)xn(Ue,Qe[je][tt])})(Oe),Oe}function xn(Le,le){for(var ce=0;ce<le.length;ce+=3)Le.minX=Math.min(Le.minX,le[ce]),Le.minY=Math.min(Le.minY,le[ce+1]),Le.maxX=Math.max(Le.maxX,le[ce]),Le.maxY=Math.max(Le.maxY,le[ce+1])}function Vt(Le,le,ce,Me){if(le.geometry){var Oe=le.geometry.coordinates,Ue=le.geometry.type,Qe=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),qe=[],je=le.id;if(ce.promoteId?je=le.properties[ce.promoteId]:ce.generateId&&(je=Me||0),Ue==="Point")Kt(Oe,qe);else if(Ue==="MultiPoint")for(var tt=0;tt<Oe.length;tt++)Kt(Oe[tt],qe);else if(Ue==="LineString")sn(Oe,qe,Qe,!1);else if(Ue==="MultiLineString"){if(ce.lineMetrics){for(tt=0;tt<Oe.length;tt++)sn(Oe[tt],qe=[],Qe,!1),Le.push(Xe(je,"LineString",qe,le.properties));return}Jt(Oe,qe,Qe,!1)}else if(Ue==="Polygon")Jt(Oe,qe,Qe,!0);else{if(Ue!=="MultiPolygon"){if(Ue==="GeometryCollection"){for(tt=0;tt<le.geometry.geometries.length;tt++)Vt(Le,{id:je,geometry:le.geometry.geometries[tt],properties:le.properties},ce,Me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<Oe.length;tt++){var Tt=[];Jt(Oe[tt],Tt,Qe,!0),qe.push(Tt)}}Le.push(Xe(je,Ue,qe,le.properties))}}function Kt(Le,le){le.push(zn(Le[0])),le.push(gn(Le[1])),le.push(0)}function sn(Le,le,ce,Me){for(var Oe,Ue,Qe=0,qe=0;qe<Le.length;qe++){var je=zn(Le[qe][0]),tt=gn(Le[qe][1]);le.push(je),le.push(tt),le.push(0),qe>0&&(Qe+=Me?(Oe*tt-je*Ue)/2:Math.sqrt(Math.pow(je-Oe,2)+Math.pow(tt-Ue,2))),Oe=je,Ue=tt}var Tt=le.length-3;le[2]=1,Rt(le,0,Tt,ce),le[Tt+2]=1,le.size=Math.abs(Qe),le.start=0,le.end=le.size}function Jt(Le,le,ce,Me){for(var Oe=0;Oe<Le.length;Oe++){var Ue=[];sn(Le[Oe],Ue,ce,Me),le.push(Ue)}}function zn(Le){return Le/360+.5}function gn(Le){var le=Math.sin(Le*Math.PI/180),ce=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return ce<0?0:ce>1?1:ce}function yn(Le,le,ce,Me,Oe,Ue,Qe,qe){if(Me/=le,Ue>=(ce/=le)&&Qe<Me)return Le;if(Qe<ce||Ue>=Me)return null;for(var je=[],tt=0;tt<Le.length;tt++){var Tt=Le[tt],Lt=Tt.geometry,Mt=Tt.type,dn=Oe===0?Tt.minX:Tt.minY,bn=Oe===0?Tt.maxX:Tt.maxY;if(dn>=ce&&bn<Me)je.push(Tt);else if(!(bn<ce||dn>=Me)){var In=[];if(Mt==="Point"||Mt==="MultiPoint")Cn(Lt,In,ce,Me,Oe);else if(Mt==="LineString")Xt(Lt,In,ce,Me,Oe,!1,qe.lineMetrics);else if(Mt==="MultiLineString")_n(Lt,In,ce,Me,Oe,!1);else if(Mt==="Polygon")_n(Lt,In,ce,Me,Oe,!0);else if(Mt==="MultiPolygon")for(var Bn=0;Bn<Lt.length;Bn++){var Mn=[];_n(Lt[Bn],Mn,ce,Me,Oe,!0),Mn.length&&In.push(Mn)}if(In.length){if(qe.lineMetrics&&Mt==="LineString"){for(Bn=0;Bn<In.length;Bn++)je.push(Xe(Tt.id,Mt,In[Bn],Tt.tags));continue}Mt!=="LineString"&&Mt!=="MultiLineString"||(In.length===1?(Mt="LineString",In=In[0]):Mt="MultiLineString"),Mt!=="Point"&&Mt!=="MultiPoint"||(Mt=In.length===3?"Point":"MultiPoint"),je.push(Xe(Tt.id,Mt,In,Tt.tags))}}}return je.length?je:null}function Cn(Le,le,ce,Me,Oe){for(var Ue=0;Ue<Le.length;Ue+=3){var Qe=Le[Ue+Oe];Qe>=ce&&Qe<=Me&&(le.push(Le[Ue]),le.push(Le[Ue+1]),le.push(Le[Ue+2]))}}function Xt(Le,le,ce,Me,Oe,Ue,Qe){for(var qe,je,tt=jn(Le),Tt=Oe===0?tr:Tn,Lt=Le.start,Mt=0;Mt<Le.length-3;Mt+=3){var dn=Le[Mt],bn=Le[Mt+1],In=Le[Mt+2],Bn=Le[Mt+3],Mn=Le[Mt+4],nr=Oe===0?dn:bn,Fn=Oe===0?Bn:Mn,pr=!1;Qe&&(qe=Math.sqrt(Math.pow(dn-Bn,2)+Math.pow(bn-Mn,2))),nr<ce?Fn>ce&&(je=Tt(tt,dn,bn,Bn,Mn,ce),Qe&&(tt.start=Lt+qe*je)):nr>Me?Fn<Me&&(je=Tt(tt,dn,bn,Bn,Mn,Me),Qe&&(tt.start=Lt+qe*je)):er(tt,dn,bn,In),Fn<ce&&nr>=ce&&(je=Tt(tt,dn,bn,Bn,Mn,ce),pr=!0),Fn>Me&&nr<=Me&&(je=Tt(tt,dn,bn,Bn,Mn,Me),pr=!0),!Ue&&pr&&(Qe&&(tt.end=Lt+qe*je),le.push(tt),tt=jn(Le)),Qe&&(Lt+=qe)}var Rr=Le.length-3;dn=Le[Rr],bn=Le[Rr+1],In=Le[Rr+2],(nr=Oe===0?dn:bn)>=ce&&nr<=Me&&er(tt,dn,bn,In),Rr=tt.length-3,Ue&&Rr>=3&&(tt[Rr]!==tt[0]||tt[Rr+1]!==tt[1])&&er(tt,tt[0],tt[1],tt[2]),tt.length&&le.push(tt)}function jn(Le){var le=[];return le.size=Le.size,le.start=Le.start,le.end=Le.end,le}function _n(Le,le,ce,Me,Oe,Ue){for(var Qe=0;Qe<Le.length;Qe++)Xt(Le[Qe],le,ce,Me,Oe,Ue,!1)}function er(Le,le,ce,Me){Le.push(le),Le.push(ce),Le.push(Me)}function tr(Le,le,ce,Me,Oe,Ue){var Qe=(Ue-le)/(Me-le);return Le.push(Ue),Le.push(ce+(Oe-ce)*Qe),Le.push(1),Qe}function Tn(Le,le,ce,Me,Oe,Ue){var Qe=(Ue-ce)/(Oe-ce);return Le.push(le+(Me-le)*Qe),Le.push(Ue),Le.push(1),Qe}function Ln(Le,le){for(var ce=[],Me=0;Me<Le.length;Me++){var Oe,Ue=Le[Me],Qe=Ue.type;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")Oe=Xn(Ue.geometry,le);else if(Qe==="MultiLineString"||Qe==="Polygon"){Oe=[];for(var qe=0;qe<Ue.geometry.length;qe++)Oe.push(Xn(Ue.geometry[qe],le))}else if(Qe==="MultiPolygon")for(Oe=[],qe=0;qe<Ue.geometry.length;qe++){for(var je=[],tt=0;tt<Ue.geometry[qe].length;tt++)je.push(Xn(Ue.geometry[qe][tt],le));Oe.push(je)}ce.push(Xe(Ue.id,Qe,Oe,Ue.tags))}return ce}function Xn(Le,le){var ce=[];ce.size=Le.size,Le.start!==void 0&&(ce.start=Le.start,ce.end=Le.end);for(var Me=0;Me<Le.length;Me+=3)ce.push(Le[Me]+le,Le[Me+1],Le[Me+2]);return ce}function lr(Le,le){if(Le.transformed)return Le;var ce,Me,Oe,Ue=1<<Le.z,Qe=Le.x,qe=Le.y;for(ce=0;ce<Le.features.length;ce++){var je=Le.features[ce],tt=je.geometry,Tt=je.type;if(je.geometry=[],Tt===1)for(Me=0;Me<tt.length;Me+=2)je.geometry.push(Sn(tt[Me],tt[Me+1],le,Ue,Qe,qe));else for(Me=0;Me<tt.length;Me++){var Lt=[];for(Oe=0;Oe<tt[Me].length;Oe+=2)Lt.push(Sn(tt[Me][Oe],tt[Me][Oe+1],le,Ue,Qe,qe));je.geometry.push(Lt)}}return Le.transformed=!0,Le}function Sn(Le,le,ce,Me,Oe,Ue){return[Math.round(ce*(Le*Me-Oe)),Math.round(ce*(le*Me-Ue))]}function zr(Le,le,ce,Me,Oe){for(var Ue=le===Oe.maxZoom?0:Oe.tolerance/((1<<le)*Oe.extent),Qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:Me,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},qe=0;qe<Le.length;qe++){Qe.numFeatures++,cr(Qe,Le[qe],Ue,Oe);var je=Le[qe].minX,tt=Le[qe].minY,Tt=Le[qe].maxX,Lt=Le[qe].maxY;je<Qe.minX&&(Qe.minX=je),tt<Qe.minY&&(Qe.minY=tt),Tt>Qe.maxX&&(Qe.maxX=Tt),Lt>Qe.maxY&&(Qe.maxY=Lt)}return Qe}function cr(Le,le,ce,Me){var Oe=le.geometry,Ue=le.type,Qe=[];if(Ue==="Point"||Ue==="MultiPoint")for(var qe=0;qe<Oe.length;qe+=3)Qe.push(Oe[qe]),Qe.push(Oe[qe+1]),Le.numPoints++,Le.numSimplified++;else if(Ue==="LineString")un(Qe,Oe,Le,ce,!1,!1);else if(Ue==="MultiLineString"||Ue==="Polygon")for(qe=0;qe<Oe.length;qe++)un(Qe,Oe[qe],Le,ce,Ue==="Polygon",qe===0);else if(Ue==="MultiPolygon")for(var je=0;je<Oe.length;je++){var tt=Oe[je];for(qe=0;qe<tt.length;qe++)un(Qe,tt[qe],Le,ce,!0,qe===0)}if(Qe.length){var Tt=le.tags||null;if(Ue==="LineString"&&Me.lineMetrics){for(var Lt in Tt={},le.tags)Tt[Lt]=le.tags[Lt];Tt.mapbox_clip_start=Oe.start/Oe.size,Tt.mapbox_clip_end=Oe.end/Oe.size}var Mt={geometry:Qe,type:Ue==="Polygon"||Ue==="MultiPolygon"?3:Ue==="LineString"||Ue==="MultiLineString"?2:1,tags:Tt};le.id!==null&&(Mt.id=le.id),Le.features.push(Mt)}}function un(Le,le,ce,Me,Oe,Ue){var Qe=Me*Me;if(Me>0&&le.size<(Oe?Qe:Me))ce.numPoints+=le.length/3;else{for(var qe=[],je=0;je<le.length;je+=3)(Me===0||le[je+2]>Qe)&&(ce.numSimplified++,qe.push(le[je]),qe.push(le[je+1])),ce.numPoints++;Oe&&(function(tt,Tt){for(var Lt=0,Mt=0,dn=tt.length,bn=dn-2;Mt<dn;bn=Mt,Mt+=2)Lt+=(tt[Mt]-tt[bn])*(tt[Mt+1]+tt[bn+1]);if(Lt>0===Tt)for(Mt=0,dn=tt.length;Mt<dn/2;Mt+=2){var In=tt[Mt],Bn=tt[Mt+1];tt[Mt]=tt[dn-2-Mt],tt[Mt+1]=tt[dn-1-Mt],tt[dn-2-Mt]=In,tt[dn-1-Mt]=Bn}})(qe,Ue),Le.push(qe)}}function Wt(Le,le){var ce=(le=this.options=(function(Oe,Ue){for(var Qe in Ue)Oe[Qe]=Ue[Qe];return Oe})(Object.create(this.options),le)).debug;if(ce&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");var Me=(function(Oe,Ue){var Qe=[];if(Oe.type==="FeatureCollection")for(var qe=0;qe<Oe.features.length;qe++)Vt(Qe,Oe.features[qe],Ue,qe);else Vt(Qe,Oe.type==="Feature"?Oe:{geometry:Oe},Ue);return Qe})(Le,le);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Me=(function(Oe,Ue){var Qe=Ue.buffer/Ue.extent,qe=Oe,je=yn(Oe,1,-1-Qe,Qe,0,-1,2,Ue),tt=yn(Oe,1,1-Qe,2+Qe,0,-1,2,Ue);return(je||tt)&&(qe=yn(Oe,1,-Qe,1+Qe,0,-1,2,Ue)||[],je&&(qe=Ln(je,1).concat(qe)),tt&&(qe=qe.concat(Ln(tt,-1)))),qe})(Me,le),Me.length&&this.splitTile(Me,0,0,0),ce&&(Me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function fn(Le,le,ce){return 32*((1<<Le)*ce+le)+Le}function Nn(Le,le){const ce=Le.tileID.canonical;if(!this._geoJSONIndex)return le(null,null);const Me=this._geoJSONIndex.getTile(ce.z,ce.x,ce.y);if(!Me)return le(null,null);const Oe=new class{constructor(Qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Qe.length,this._features=Qe}feature(Qe){return new class{constructor(qe){this._feature=qe,this.extent=a.EXTENT,this.type=qe.type,this.properties=qe.tags,"id"in qe&&!isNaN(qe.id)&&(this.id=parseInt(qe.id,10))}loadGeometry(){if(this._feature.type===1){const qe=[];for(const je of this._feature.geometry)qe.push([new a.Point(je[0],je[1])]);return qe}{const qe=[];for(const je of this._feature.geometry){const tt=[];for(const Tt of je)tt.push(new a.Point(Tt[0],Tt[1]));qe.push(tt)}return qe}}toGeoJSON(qe,je,tt){return q.call(this,qe,je,tt)}}(this._features[Qe])}}(Me.features);let Ue=Pe(Oe);Ue.byteOffset===0&&Ue.byteLength===Ue.buffer.byteLength||(Ue=new Uint8Array(Ue)),le(null,{vectorTile:Oe,rawData:Ue.buffer})}Wt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Wt.prototype.splitTile=function(Le,le,ce,Me,Oe,Ue,Qe){for(var qe=[Le,le,ce,Me],je=this.options,tt=je.debug;qe.length;){Me=qe.pop(),ce=qe.pop(),le=qe.pop(),Le=qe.pop();var Tt=1<<le,Lt=fn(le,ce,Me),Mt=this.tiles[Lt];if(!Mt&&(tt>1&&console.time("creation"),Mt=this.tiles[Lt]=zr(Le,le,ce,Me,je),this.tileCoords.push({z:le,x:ce,y:Me}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,ce,Me,Mt.numFeatures,Mt.numPoints,Mt.numSimplified),console.timeEnd("creation"));var dn="z"+le;this.stats[dn]=(this.stats[dn]||0)+1,this.total++}if(Mt.source=Le,Oe){if(le===je.maxZoom||le===Oe)continue;var bn=1<<Oe-le;if(ce!==Math.floor(Ue/bn)||Me!==Math.floor(Qe/bn))continue}else if(le===je.indexMaxZoom||Mt.numPoints<=je.indexMaxPoints)continue;if(Mt.source=null,Le.length!==0){tt>1&&console.time("clipping");var In,Bn,Mn,nr,Fn,pr,Rr=.5*je.buffer/je.extent,Ci=.5-Rr,Kr=.5+Rr,Xr=1+Rr;In=Bn=Mn=nr=null,Fn=yn(Le,Tt,ce-Rr,ce+Kr,0,Mt.minX,Mt.maxX,je),pr=yn(Le,Tt,ce+Ci,ce+Xr,0,Mt.minX,Mt.maxX,je),Le=null,Fn&&(In=yn(Fn,Tt,Me-Rr,Me+Kr,1,Mt.minY,Mt.maxY,je),Bn=yn(Fn,Tt,Me+Ci,Me+Xr,1,Mt.minY,Mt.maxY,je),Fn=null),pr&&(Mn=yn(pr,Tt,Me-Rr,Me+Kr,1,Mt.minY,Mt.maxY,je),nr=yn(pr,Tt,Me+Ci,Me+Xr,1,Mt.minY,Mt.maxY,je),pr=null),tt>1&&console.timeEnd("clipping"),qe.push(In||[],le+1,2*ce,2*Me),qe.push(Bn||[],le+1,2*ce,2*Me+1),qe.push(Mn||[],le+1,2*ce+1,2*Me),qe.push(nr||[],le+1,2*ce+1,2*Me+1)}}},Wt.prototype.getTile=function(Le,le,ce){var Me=this.options,Oe=Me.extent,Ue=Me.debug;if(Le<0||Le>24)return null;var Qe=1<<Le,qe=fn(Le,le=(le%Qe+Qe)%Qe,ce);if(this.tiles[qe])return lr(this.tiles[qe],Oe);Ue>1&&console.log("drilling down to z%d-%d-%d",Le,le,ce);for(var je,tt=Le,Tt=le,Lt=ce;!je&&tt>0;)tt--,Tt=Math.floor(Tt/2),Lt=Math.floor(Lt/2),je=this.tiles[fn(tt,Tt,Lt)];return je&&je.source?(Ue>1&&console.log("found parent tile z%d-%d-%d",tt,Tt,Lt),Ue>1&&console.time("drilling down"),this.splitTile(je.source,tt,Tt,Lt,Le,le,ce),Ue>1&&console.timeEnd("drilling down"),this.tiles[qe]?lr(this.tiles[qe],Oe):null):null};class fr extends a.VectorTileWorkerSource{constructor(le,ce,Me,Oe,Ue){super(le,ce,Me,Oe,Nn),Ue&&(this.loadGeoJSON=Ue)}loadData(le,ce){const Me=le&&le.request,Oe=Me&&Me.collectResourceTiming;this.loadGeoJSON(le,((Ue,Qe)=>{if(Ue||!Qe)return ce(Ue);if(typeof Qe!="object")return ce(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));{N(Qe,!0);try{if(le.filter){const je=a.createExpression(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map((Tt=>`${Tt.key}: ${Tt.message}`)).join(", "));Qe={type:"FeatureCollection",features:Qe.features.filter((Tt=>je.value.evaluate({zoom:0},Tt)))}}this._geoJSONIndex=le.cluster?new nt((function({superclusterOptions:je,clusterProperties:tt}){if(!tt||!je)return je;const Tt={},Lt={},Mt={accumulated:null,zoom:0},dn={properties:null},bn=Object.keys(tt);for(const In of bn){const[Bn,Mn]=tt[In],nr=a.createExpression(Mn),Fn=a.createExpression(typeof Bn=="string"?[Bn,["accumulated"],["get",In]]:Bn);Tt[In]=nr.value,Lt[In]=Fn.value}return je.map=In=>{dn.properties=In;const Bn={};for(const Mn of bn)Bn[Mn]=Tt[Mn].evaluate(Mt,dn);return Bn},je.reduce=(In,Bn)=>{dn.properties=Bn;for(const Mn of bn)Mt.accumulated=In[Mn],In[Mn]=Lt[Mn].evaluate(Mt,dn)},je})(le)).load(Qe.features):(function(je,tt){return new Wt(je,tt)})(Qe,le.geojsonVtOptions)}catch(je){return ce(je)}this.loaded={};const qe={};if(Oe){const je=a.getPerformanceMeasurement(Me);je&&(qe.resourceTiming={},qe.resourceTiming[le.source]=JSON.parse(JSON.stringify(je)))}ce(null,qe)}}))}reloadTile(le,ce){const Me=this.loaded;return Me&&Me[le.uid]?super.reloadTile(le,ce):this.loadTile(le,ce)}loadGeoJSON(le,ce){if(le.request)a.getJSON(le.request,ce);else{if(typeof le.data!="string")return ce(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));try{return ce(null,JSON.parse(le.data))}catch{return ce(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(le,ce){try{ce(null,this._geoJSONIndex.getClusterExpansionZoom(le.clusterId))}catch(Me){ce(Me)}}getClusterChildren(le,ce){try{ce(null,this._geoJSONIndex.getChildren(le.clusterId))}catch(Me){ce(Me)}}getClusterLeaves(le,ce){try{ce(null,this._geoJSONIndex.getLeaves(le.clusterId,le.limit,le.offset))}catch(Me){ce(Me)}}}class Zr{constructor(le){this.self=le,this.actor=new a.Actor(le,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.getProjection({name:"mercator"}),this.workerSourceTypes={vector:a.VectorTileWorkerSource,geojson:fr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ce,Me)=>{if(this.workerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.workerSourceTypes[ce]=Me},this.self.registerRTLTextPlugin=ce=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ce.applyArabicShaping,a.plugin.processBidirectionalText=ce.processBidirectionalText,a.plugin.processStyledBidirectionalText=ce.processStyledBidirectionalText}}clearCaches(le,ce,Me){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le],Me()}checkIfReady(le,ce,Me){Me()}setReferrer(le,ce){this.referrer=ce}spriteLoaded(le,ce){this.isSpriteLoaded[le]=ce;for(const Me in this.workerSources[le]){const Oe=this.workerSources[le][Me];for(const Ue in Oe)Oe[Ue]instanceof a.VectorTileWorkerSource&&(Oe[Ue].isSpriteLoaded=ce,Oe[Ue].fire(new a.Event("isSpriteLoaded")))}}setImages(le,ce,Me){this.availableImages[le]=ce;for(const Oe in this.workerSources[le]){const Ue=this.workerSources[le][Oe];for(const Qe in Ue)Ue[Qe].availableImages=ce}Me()}enableTerrain(le,ce,Me){this.terrain=ce,Me()}setProjection(le,ce){this.projections[le]=a.getProjection(ce)}setLayers(le,ce,Me){this.getLayerIndex(le).replace(ce),Me()}updateLayers(le,ce,Me){this.getLayerIndex(le).update(ce.layers,ce.removedIds),Me()}loadTile(le,ce,Me){const Oe=this.enableTerrain?a.extend({enableTerrain:this.terrain},ce):ce;Oe.projection=this.projections[le]||this.defaultProjection,this.getWorkerSource(le,ce.type,ce.source).loadTile(Oe,Me)}loadDEMTile(le,ce,Me){const Oe=this.enableTerrain?a.extend({buildQuadTree:this.terrain},ce):ce;this.getDEMWorkerSource(le,ce.source).loadTile(Oe,Me)}reloadTile(le,ce,Me){const Oe=this.enableTerrain?a.extend({enableTerrain:this.terrain},ce):ce;Oe.projection=this.projections[le]||this.defaultProjection,this.getWorkerSource(le,ce.type,ce.source).reloadTile(Oe,Me)}abortTile(le,ce,Me){this.getWorkerSource(le,ce.type,ce.source).abortTile(ce,Me)}removeTile(le,ce,Me){this.getWorkerSource(le,ce.type,ce.source).removeTile(ce,Me)}removeSource(le,ce,Me){if(!this.workerSources[le]||!this.workerSources[le][ce.type]||!this.workerSources[le][ce.type][ce.source])return;const Oe=this.workerSources[le][ce.type][ce.source];delete this.workerSources[le][ce.type][ce.source],Oe.removeSource!==void 0?Oe.removeSource(ce,Me):Me()}loadWorkerSource(le,ce,Me){try{this.self.importScripts(ce.url),Me()}catch(Oe){Me(Oe.toString())}}syncRTLPluginState(le,ce,Me){try{a.plugin.setState(ce);const Oe=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Oe!=null){this.self.importScripts(Oe);const Ue=a.plugin.isParsed();Me(Ue?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Oe}`),Ue)}}catch(Oe){Me(Oe.toString())}}getAvailableImages(le){let ce=this.availableImages[le];return ce||(ce=[]),ce}getLayerIndex(le){let ce=this.layerIndexes[le];return ce||(ce=this.layerIndexes[le]=new L),ce}getWorkerSource(le,ce,Me){if(this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][ce]||(this.workerSources[le][ce]={}),!this.workerSources[le][ce][Me]){const Oe={send:(Ue,Qe,qe,je,tt,Tt)=>{this.actor.send(Ue,Qe,qe,le,tt,Tt)},scheduler:this.actor.scheduler};this.workerSources[le][ce][Me]=new this.workerSourceTypes[ce](Oe,this.getLayerIndex(le),this.getAvailableImages(le),this.isSpriteLoaded[le])}return this.workerSources[le][ce][Me]}getDEMWorkerSource(le,ce){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][ce]||(this.demWorkerSources[le][ce]=new P),this.demWorkerSources[le][ce]}enforceCacheSizeLimit(le,ce){a.enforceCacheSizeLimit(ce)}getWorkerPerformanceMetrics(le,ce,Me){Me(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Zr(self)),Zr})),y(["./shared"],(function(a){function E(_,s){if(Array.isArray(_)){if(!Array.isArray(s)||_.length!==s.length)return!1;for(let d=0;d<_.length;d++)if(!E(_[d],s[d]))return!1;return!0}if(typeof _=="object"&&_!==null&&s!==null){if(typeof s!="object"||Object.keys(_).length!==Object.keys(s).length)return!1;for(const d in _)if(!E(_[d],s[d]))return!1;return!0}return _===s}var R=L;function L(_){return!(function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,T,M=new Blob([""],{type:"text/javascript"}),z=URL.createObjectURL(M);try{T=new Worker(z),x=!0}catch{x=!1}return T&&T.terminate(),URL.revokeObjectURL(z),x})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var x=document.createElement("canvas");x.width=x.height=1;var T=x.getContext("2d");if(!T)return!1;var M=T.getImageData(0,0,1,1);return M&&M.width===x.width})()?(P[d=s&&s.failIfMajorPerformanceCaveat]===void 0&&(P[d]=(function(x){var T,M=(function(z){var D=document.createElement("canvas"),j=Object.create(L.webGLContextAttributes);return j.failIfMajorPerformanceCaveat=z,D.getContext("webgl",j)||D.getContext("experimental-webgl",j)})(x);if(!M)return!1;try{T=M.createShader(M.VERTEX_SHADER)}catch{return!1}return!(!T||M.isContextLost())&&(M.shaderSource(T,"void main() {}"),M.compileShader(T),M.getShaderParameter(T,M.COMPILE_STATUS)===!0)})(d)),P[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d})(_)}var P={};function F(_,s,d){const x=a.window.document.createElement(_);return s!==void 0&&(x.className=s),d&&d.appendChild(x),x}function U(_,s,d){const x=a.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const T of Object.keys(s))x.setAttributeNS(null,T,s[T]);return d&&d.appendChild(x),x}L.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const N=a.window.document&&a.window.document.documentElement.style,q=N&&N.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Z;function Q(){N&&q&&(Z=N[q],N[q]="none")}function Y(){N&&q&&(N[q]=Z)}function J(_){_.preventDefault(),_.stopPropagation(),a.window.removeEventListener("click",J,!0)}function re(){a.window.addEventListener("click",J,!0),a.window.setTimeout((()=>{a.window.removeEventListener("click",J,!0)}),0)}function ae(_,s){const d=_.getBoundingClientRect();return Te(_,d,s)}function fe(_,s){const d=_.getBoundingClientRect(),x=[];for(let T=0;T<s.length;T++)x.push(Te(_,d,s[T]));return x}function Se(_){return a.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function Te(_,s,d){const x=_.offsetWidth===s.width?1:_.offsetWidth/s.width;return new a.Point((d.clientX-s.left)*x,(d.clientY-s.top)*x)}function ue(_,s){var d=s[0],x=s[1],T=s[2],M=s[3],z=d*M-T*x;return z?(_[0]=M*(z=1/z),_[1]=-x*z,_[2]=-T*z,_[3]=d*z,_):null}function _e(_){const{userImage:s}=_;return!!(s&&s.render&&s.render())&&(_.data.replace(new Uint8Array(s.data.buffer)),!0)}class se extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,callback:x}of this.requestors)this._notify(d,x);this.requestors=[]}}hasImage(s){return!!this.getImage(s)}getImage(s){return this.images[s]}addImage(s,d){this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let x=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),x=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),x=!1),this._validateContent(d.content,d)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),x=!1),x}_validateStretch(s,d){if(!s)return!0;let x=0;for(const T of s){if(T[0]<x||T[1]<T[0]||d<T[1])return!1;x=T[1]}return!0}_validateContent(s,d){return!(s&&(s.length!==4||s[0]<0||d.data.width<s[0]||s[1]<0||d.data.height<s[1]||s[2]<0||d.data.width<s[2]||s[3]<0||d.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,d){d.version=this.images[s].version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,d){let x=!0;if(!this.isLoaded())for(const T of s)this.images[T]||(x=!1);this.isLoaded()||x?this._notify(s,d):this.requestors.push({ids:s,callback:d})}_notify(s,d){const x={};for(const T of s){this.images[T]||this.fire(new a.Event("styleimagemissing",{id:T}));const M=this.images[T];M?x[T]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:a.warnOnce(`Image "${T}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,x)}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],x=this.getImage(s);if(!x)return null;if(d&&d.position.version===x.version)return d.position;if(d)d.position.version=x.version;else{const T={w:x.data.width+2,h:x.data.height+2,x:0,y:0},M=new a.ImagePosition(T,x);this.patterns[s]={bin:T,position:M}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(s,this.atlasImage,d.RGBA),this.atlasTexture&&this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const M in this.patterns)s.push(this.patterns[M].bin);const{w:d,h:x}=a.potpack(s),T=this.atlasImage;T.resize({width:d||1,height:x||1});for(const M in this.patterns){const{bin:z}=this.patterns[M],D=z.x+1,j=z.y+1,W=this.images[M].data,H=W.width,ne=W.height;a.RGBAImage.copy(W,T,{x:0,y:0},{x:D,y:j},{width:H,height:ne}),a.RGBAImage.copy(W,T,{x:0,y:ne-1},{x:D,y:j-1},{width:H,height:1}),a.RGBAImage.copy(W,T,{x:0,y:0},{x:D,y:j+ne},{width:H,height:1}),a.RGBAImage.copy(W,T,{x:H-1,y:0},{x:D-1,y:j},{width:1,height:ne}),a.RGBAImage.copy(W,T,{x:0,y:0},{x:D+H,y:j},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const x=this.images[d];_e(x)&&this.updateImage(d,x)}}}const me=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(_,s){return(function([d,x,T]){const M=a.degToRad(x+90),z=a.degToRad(T);return{x:d*Math.cos(M)*Math.sin(z),y:d*Math.sin(M)*Math.sin(z),z:d*Math.cos(z),azimuthal:x,polar:T}})(_.expression.evaluate(s))}interpolate(_,s,d){return{x:a.number(_.x,s.x,d),y:a.number(_.y,s.y,d),z:a.number(_.z,s.z,d),azimuthal:a.number(_.azimuthal,s.azimuthal,d),polar:a.number(_.polar,s.polar,d)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)});class be extends a.Evented{constructor(s){super(),this._transitionable=new a.Transitionable(me),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(a.validateLight,s,d))for(const x in s){const T=s[x];a.endsWith(x,"-transition")?this._transitionable.setTransition(x.slice(0,-11),T):this._transitionable.setValue(x,T)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,x){return(!x||x.validate!==!1)&&a.emitValidationErrors(this,s.call(a.validateStyle,a.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}const Ie=new a.Properties({source:new a.DataConstantProperty(a.spec.terrain.source),exaggeration:new a.DataConstantProperty(a.spec.terrain.exaggeration)});let pe=class extends a.Evented{constructor(_,s){super(),this._transitionable=new a.Transitionable(Ie),this.set(_),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=s}get(){return this._transitionable.serialize()}set(_){for(const s in _){const d=_[s];a.endsWith(s,"-transition")?this._transitionable.setTransition(s.slice(0,-11),d):this._transitionable.setValue(s,d)}}updateTransitions(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(_){this.properties=this._transitioning.possiblyEvaluate(_)}};function Pe(_,s,d,x){const T=a.smoothstep(45,65,d),[M,z]=et(_,x),D=a.length(s);let j=1-Math.min(1,Math.exp((D-M)/(z-M)*-6));return j*=j*j,j=Math.min(1,1.00747*j),j*T*_.alpha}function et(_,s){const d=.5/Math.tan(.5*s);return[_.range[0]+d,_.range[1]+d]}const Be=new a.Properties({range:new a.DataConstantProperty(a.spec.fog.range),color:new a.DataConstantProperty(a.spec.fog.color),"high-color":new a.DataConstantProperty(a.spec.fog["high-color"]),"space-color":new a.DataConstantProperty(a.spec.fog["space-color"]),"horizon-blend":new a.DataConstantProperty(a.spec.fog["horizon-blend"]),"star-intensity":new a.DataConstantProperty(a.spec.fog["star-intensity"])});class dt extends a.Evented{constructor(s,d){super(),this._transitionable=new a.Transitionable(Be),this.set(s),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const s=this._transform,d=s.projection.name==="globe",x=a.globeToMercatorTransition(s.zoom),T=this.properties.get("range"),M=[.5,3];return{range:d?[a.number(M[0],T[0],x),a.number(M[1],T[1],x)]:T,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,d={}){if(!this._validate(a.validateFog,s,d)){for(const x of Object.keys(a.spec.fog))s&&s[x]===void 0&&(s[x]=a.spec.fog[x].default);for(const x in s){const T=s[x];a.endsWith(x,"-transition")?this._transitionable.setTransition(x.slice(0,-11),T):this._transitionable.setValue(x,T)}}}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.smoothstep(45,65,s))*d.a}getOpacityAtLatLng(s,d){return this._transform.projection.supportsFog?(function(x,T,M){const z=a.MercatorCoordinate.fromLngLat(T),D=M.elevation?M.elevation.getAtPointOrZero(z):0,j=[z.x,z.y,D];return a.transformMat4(j,j,M.mercatorFogMatrix),Pe(x,j,M.pitch,M._fov)})(this.state,s,d):0}getFovAdjustedRange(s){return this._transform.projection.supportsFog?et(this.state,s):[0,1]}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,x){return(!x||x.validate!==!1)&&a.emitValidationErrors(this,s.call(a.validateStyle,a.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class Ce{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const x=this.workerPool.acquire(this.id);for(let T=0;T<x.length;T++){const M=new Ce.Actor(x[T],d,this.id);M.name=`Worker ${T}`,this.actors.push(M)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(s,d,x){a.asyncAll(this.actors,((T,M)=>{T.send(s,d,M)}),x=x||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((s=>{s.remove()})),this.actors=[],this.workerPool.release(this.id)}}function Ge(_,s,d){return s*(a.EXTENT/(_.tileSize*Math.pow(2,d-_.tileID.overscaledZ)))}Ce.Actor=a.Actor;class at{constructor(s,d,x,T){this.screenBounds=s,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=x,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,T)}static createFromScreenPoints(s,d){let x,T;if(s instanceof a.Point||typeof s[0]=="number"){const M=a.Point.convert(s);x=[M],T=d.isPointAboveHorizon(M)}else{const M=a.Point.convert(s[0]),z=a.Point.convert(s[1]);x=[M,z],T=a.polygonizeBounds(M,z).every((D=>d.isPointAboveHorizon(D)))}return new at(x,d.getCameraPoint(),T,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return a.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const d=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],T=a.polygonizeBounds(d,x,0,!1);return this.cameraPoint.y>x.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<x.x?T.splice(3,0,this.cameraPoint):this.cameraPoint.x>=x.x?T[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(T[3]=this.cameraPoint)),a.bufferConvexPolygon(T,s)}bufferedCameraGeometryGlobe(s){const d=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],T=a.polygonizeBounds(d,x,s),M=this.cameraPoint.clone();switch(3*((M.y>d.y)+(M.y>x.y))+((M.x>d.x)+(M.x>x.x))){case 0:T[0]=M,T[4]=M.clone();break;case 1:T.splice(1,0,M);break;case 2:T[1]=M;break;case 3:T.splice(4,0,M);break;case 5:T.splice(2,0,M);break;case 6:T[3]=M;break;case 7:T.splice(3,0,M);break;case 8:T[2]=M}return T}containsTile(s,d,x,T=0){const M=s.queryPadding/d._pixelsPerMercatorPixel+1,z=x?this._bufferedCameraMercator(M,d):this._bufferedScreenMercator(M,d);let D=s.tileID.wrap+(z.unwrapped?T:0);const j=z.polygon.map((Ee=>a.getTilePoint(s.tileTransform,Ee,D)));if(!a.polygonIntersectsBox(j,0,0,a.EXTENT,a.EXTENT))return;D=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?T:0);const W=this.screenGeometryMercator.polygon.map((Ee=>a.getTileVec3(s.tileTransform,Ee,D))),H=W.map((Ee=>new a.Point(Ee[0],Ee[1]))),ne=d.getFreeCameraOptions().position||new a.MercatorCoordinate(0,0,0),he=a.getTileVec3(s.tileTransform,ne,D),ve=W.map((Ee=>{const ie=a.sub(Ee,Ee,he);return a.normalize(ie,ie),new a.Ray(he,ie)})),we=Ge(s,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:H,tilespaceRays:ve,bufferedTilespaceGeometry:j,bufferedTilespaceBounds:(xe=a.getBounds(j),xe.min.x=a.clamp(xe.min.x,0,a.EXTENT),xe.min.y=a.clamp(xe.min.y,0,a.EXTENT),xe.max.x=a.clamp(xe.max.x,0,a.EXTENT),xe.max.y=a.clamp(xe.max.y,0,a.EXTENT),xe),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:we};var xe}_bufferedScreenMercator(s,d){const x=Pt(s);if(this._screenRaycastCache[x])return this._screenRaycastCache[x];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),d):{polygon:this.bufferedScreenGeometry(s).map((M=>d.pointCoordinate3D(M))),unwrapped:!0},this._screenRaycastCache[x]=T,T}}_bufferedCameraMercator(s,d){const x=Pt(s);if(this._cameraRaycastCache[x])return this._cameraRaycastCache[x];{let T;return T=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),d):{polygon:this.bufferedCameraGeometry(s).map((M=>d.pointCoordinate3D(M))),unwrapped:!0},this._cameraRaycastCache[x]=T,T}}_projectAndResample(s,d){const x=(function(M,z){const D=a.multiply([],z.pixelMatrix,z.globeMatrix),j=[0,-a.GLOBE_RADIUS,0,1],W=[0,a.GLOBE_RADIUS,0,1],H=[0,0,0,1];a.transformMat4$1(j,j,D),a.transformMat4$1(W,W,D),a.transformMat4$1(H,H,D);const ne=new a.Point(j[0]/j[3],j[1]/j[3]),he=new a.Point(W[0]/W[3],W[1]/W[3]),ve=a.polygonContainsPoint(M,ne)&&j[3]<H[3],we=a.polygonContainsPoint(M,he)&&W[3]<H[3];if(!ve&&!we)return null;const xe=(function(He,Je,Ke){for(let ct=1;ct<He.length;ct++){const $t=gt(Je.pointCoordinate3D(He[ct-1]).x),rt=gt(Je.pointCoordinate3D(He[ct]).x);if(Ke<0){if($t<rt)return{idx:ct,t:-$t/(rt-1-$t)}}else if(rt<$t)return{idx:ct,t:(1-$t)/(rt+1-$t)}}return null})(M,z,ve?-1:1);if(!xe)return null;const{idx:Ee,t:ie}=xe;let ye=Ee>1?nt(M.slice(0,Ee),z):[],ke=Ee<M.length?nt(M.slice(Ee),z):[];ye=ye.map((He=>new a.Point(gt(He.x),He.y))),ke=ke.map((He=>new a.Point(gt(He.x),He.y)));const ze=[...ye];ze.length===0&&ze.push(ke[ke.length-1]);const Ve=a.number(ze[ze.length-1].y,(ke.length===0?ye[0]:ke[0]).y,ie);let We;return We=ve?[new a.Point(0,Ve),new a.Point(0,0),new a.Point(1,0),new a.Point(1,Ve)]:[new a.Point(1,Ve),new a.Point(1,1),new a.Point(0,1),new a.Point(0,Ve)],ze.push(...We),ke.length===0?ze.push(ye[0]):ze.push(...ke),{polygon:ze.map((He=>new a.MercatorCoordinate(He.x,He.y))),unwrapped:!1}})(s,d);if(x)return x;const T=(function(M,z){let D=!1,j=-1/0,W=0;for(let ne=0;ne<M.length-1;ne++)M[ne].x>j&&(j=M[ne].x,W=ne);for(let ne=0;ne<M.length-1;ne++){const he=(W+ne)%(M.length-1),ve=M[he],we=M[he+1];Math.abs(ve.x-we.x)>.5&&(ve.x<we.x?(ve.x+=1,he===0&&(M[M.length-1].x+=1)):(we.x+=1,he+1===M.length-1&&(M[0].x+=1)),D=!0)}const H=a.mercatorXfromLng(z.center.lng);return D&&H<Math.abs(H-1)&&M.forEach((ne=>{ne.x-=1})),{polygon:M,unwrapped:D}})(nt(s,d).map((M=>new a.Point(gt(M.x),M.y))),d);return{polygon:T.polygon.map((M=>new a.MercatorCoordinate(M.x,M.y))),unwrapped:T.unwrapped}}}function nt(_,s){return a.resample(_,(d=>{const x=s.pointCoordinate3D(d);d.x=x.x,d.y=x.y}),1/256)}function gt(_){return _<0?1+_%1:_%1}function Pt(_){return 100*_|0}function Ct(_,s,d,x,T){const M=function(z,D){if(z)return T(z);if(D){_.url&&D.tiles&&_.tiles&&delete _.tiles;const j=a.pick(a.extend(D,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(j.vectorLayers=D.vector_layers,j.vectorLayerIds=j.vectorLayers.map((W=>W.id))),j.tiles=s.canonicalizeTileset(j,_.url),T(null,j)}};return _.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(_.url,null,d,x),a.ResourceType.Source),M):a.exported.frame((()=>M(null,_)))}class Yt{constructor(s,d,x){this.bounds=a.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=x||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),x=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*d),T=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*d),M=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*d),z=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*d);return s.x>=x&&s.x<M&&s.y>=T&&s.y<z}}class pt{constructor(s,d,x){this.context=s;const T=s.gl;this.buffer=T.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),T.bufferData(T.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class kt{constructor(s,d,x,T){this.length=d.length,this.attributes=x,this.itemSize=d.bytesPerElement,this.dynamicDraw=T,this.context=s;const M=s.gl;this.buffer=M.createBuffer(),s.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let x=0;x<this.attributes.length;x++){const T=d.attributes[this.attributes[x].name];T!==void 0&&s.enableVertexAttribArray(T)}}setVertexAttribPointers(s,d,x){for(let T=0;T<this.attributes.length;T++){const M=this.attributes[T],z=d.attributes[M.name];z!==void 0&&s.vertexAttribPointer(z,M.components,s[Rt[M.type]],!1,this.itemSize,M.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Xe{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xn extends Xe{getDefault(){return a.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Vt extends Xe{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Kt extends Xe{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class sn extends Xe{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Jt extends Xe{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class zn extends Xe{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class gn extends Xe{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class yn extends Xe{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class Cn extends Xe{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class Xt extends Xe{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class jn extends Xe{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class _n extends Xe{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class er extends Xe{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class tr extends Xe{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Tn extends Xe{getDefault(){return a.Color.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Ln extends Xe{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Xn extends Xe{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class lr extends Xe{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Sn extends Xe{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}let zr,cr=class extends Xe{getDefault(){return null}set(_){(_!==this.current||this.dirty)&&(this.gl.useProgram(_),this.current=_,this.dirty=!1)}};class un extends Xe{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Wt extends Xe{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class fn extends Xe{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Nn extends Xe{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class fr extends Xe{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Zr extends Xe{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Le extends Xe{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class le extends Xe{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class ce extends Xe{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Me extends Xe{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Oe extends Xe{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Ue extends Xe{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Qe extends Ue{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class qe extends Ue{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class je extends qe{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class tt{constructor(s,d,x,T){this.context=s,this.width=d,this.height=x;const M=this.framebuffer=s.gl.createFramebuffer();this.colorAttachment=new Qe(s,M),T&&(this.depthAttachment=new qe(s,M))}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const x=this.depthAttachment.get();x&&s.deleteRenderbuffer(x)}s.deleteFramebuffer(this.framebuffer)}}class Tt{constructor(s,d=!1){if(this.gl=s,this.isWebGL2=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),d){const x=s;this.extVertexArrayObject={createVertexArrayOES:x.createVertexArray.bind(s),deleteVertexArrayOES:x.deleteVertexArray.bind(s),bindVertexArrayOES:x.bindVertexArray.bind(s)}}this.clearColor=new xn(this),this.clearDepth=new Vt(this),this.clearStencil=new Kt(this),this.colorMask=new sn(this),this.depthMask=new Jt(this),this.stencilMask=new zn(this),this.stencilFunc=new gn(this),this.stencilOp=new yn(this),this.stencilTest=new Cn(this),this.depthRange=new Xt(this),this.depthTest=new jn(this),this.depthFunc=new _n(this),this.blend=new er(this),this.blendFunc=new tr(this),this.blendColor=new Tn(this),this.blendEquation=new Ln(this),this.cullFace=new Xn(this),this.cullFaceSide=new lr(this),this.frontFace=new Sn(this),this.program=new cr(this),this.activeTexture=new un(this),this.viewport=new Wt(this),this.bindFramebuffer=new fn(this),this.bindRenderbuffer=new Nn(this),this.bindTexture=new fr(this),this.bindVertexBuffer=new Zr(this),this.bindElementBuffer=new Le(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new le(this),this.pixelStoreUnpack=new ce(this),this.pixelStoreUnpackPremultiplyAlpha=new Me(this),this.pixelStoreUnpackFlipY=new Oe(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),d||(this.extTextureHalfFloat=s.getExtension("OES_texture_half_float")),(d||this.extTextureHalfFloat&&s.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=d||s.getExtension("OES_standard_derivatives"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new pt(this,s,d)}createVertexBuffer(s,d,x){return new kt(this,s,d,x)}createRenderbuffer(s,d,x){const T=this.gl,M=T.createRenderbuffer();return this.bindRenderbuffer.set(M),T.renderbufferStorage(T.RENDERBUFFER,s,d,x),this.bindRenderbuffer.set(null),M}createFramebuffer(s,d,x){return new tt(this,s,d,x)}clear({color:s,depth:d,stencil:x}){const T=this.gl;let M=0;s&&(M|=T.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(M|=T.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),x!==void 0&&(M|=T.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),T.clear(M)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){E(s.blendFunction,a.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Lt extends a.Evented{constructor(s,d,x,T){if(super(),this.id=s,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T),this._tileWorkers={},this._deduped=new a.DedupedRequest}load(s){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,x=this.map._worldview;this._tileJSONRequest=Ct(this._options,this.map._requestManager,d,x,((T,M)=>{this._tileJSONRequest=null,this._loaded=!0,T?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),x&&x.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${x}`),this.fire(new a.ErrorEvent(T))):M&&(a.extend(this,M),M.bounds&&(this.tileBounds=new Yt(M.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(M.tiles,this.map._requestManager._customAccessToken),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(T)}))}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}loadTile(s,d){const x=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),T={request:this.map._requestManager.transformRequest(x,a.ResourceType.Tile),data:void 0,uid:s.uid,tileID:s.tileID,tileZoom:s.tileZoom,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:s.isSymbolTile};if(T.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired")s.state==="loading"?s.reloadCallback=d:s.request=s.actor.send("reloadTile",T,M.bind(this));else if(s.actor=this._tileWorkers[x]=this._tileWorkers[x]||this.dispatcher.getActor(),this.dispatcher.ready)s.request=s.actor.send("loadTile",T,M.bind(this),void 0,!0);else{const z=a.loadVectorTile.call({deduped:this._deduped},T,((D,j)=>{D||!j?M.call(this,D):(T.data={cacheControl:j.cacheControl,expires:j.expires,rawData:j.rawData.slice(0)},s.actor&&s.actor.send("loadTile",T,M.bind(this),void 0,!0))}),!0);s.request={cancel:z}}function M(z,D){return delete s.request,s.aborted?d(null):z&&z.status!==404?d(z):(D&&D.resourceTiming&&(s.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&s.setExpiryData(D),s.loadVectorData(D,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id})}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Mt extends a.Evented{constructor(s,d,x,T){super(),this.id=s,this.dispatcher=x,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}load(s){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ct(this._options,this.map._requestManager,null,null,((d,x)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new a.ErrorEvent(d)):x&&(a.extend(this,x),x.bounds&&(this.tileBounds=new Yt(x.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(x.tiles),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(d)}))}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,d){const x=a.exported.devicePixelRatio>=2,T=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),x,this.tileSize);s.request=a.getImage(this.map._requestManager.transformRequest(T,a.ResourceType.Tile),((M,z,D,j)=>(delete s.request,s.aborted?(s.state="unloaded",d(null)):M?(s.state="errored",d(M)):z?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:D,expires:j}),s.setTexture(z,this.map.painter),s.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),void d(null)):d(null))))}static loadTileData(s,d,x){s.setTexture(d,x)}static unloadTileData(s,d){s.texture&&d.saveTileTexture(s.texture)}abortTile(s,d){s.request&&(s.request.cancel(),delete s.request),d()}unloadTile(s,d){s.texture&&this.map.painter.saveTileTexture(s.texture),d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function dn(_,s,d,x,T,M,z,D){const j=[_,d,T,s,x,M,1,1,1],W=[z,D,1],H=a.adjoint([],j),[ne,he,ve]=a.transformMat3(W,W,a.transpose(H,H));return a.multiply$1(j,[ne,0,0,0,he,0,0,0,ve],j)}class bn extends a.Evented{constructor(s,d,x,T){super(),this.id=s,this.dispatcher=x,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(T),this.options=d,this._dirty=!1}load(s,d){this._loaded=d||!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),((x,T)=>{if(this._imageRequest=null,this._loaded=!0,x)this.fire(new a.ErrorEvent(x));else if(T){const{HTMLImageElement:M}=a.window;this.image=T instanceof M?a.exported.getImageData(T):T,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(s){this.coordinates=s,this._boundsArray=void 0;const d=s.map(a.MercatorCoordinate.fromLngLat);return this.tileID=(function(x){let T=1/0,M=1/0,z=-1/0,D=-1/0;for(const ne of x)T=Math.min(T,ne.x),M=Math.min(M,ne.y),z=Math.max(z,ne.x),D=Math.max(D,ne.y);const j=Math.max(z-T,D-M),W=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),H=Math.pow(2,W);return new a.CanonicalTileID(W,Math.floor((T+z)/2*H),Math.floor((M+D)/2*H))})(d),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(s){for(const j in this.tiles){const W=this.tiles[j];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}if(this._boundsArray)return;const d=a.tileTransform(this.tileID,this.map.transform.projection),[x,T,M,z]=this.coordinates.map((j=>{const W=d.projection.project(j[0],j[1]);return a.getTilePoint(d,W)._round()}));this.perspectiveTransform=(function(j,W,H,ne,he,ve,we,xe,Ee,ie){const ye=dn(0,0,j,0,0,W,j,W),ke=dn(H,ne,he,ve,we,xe,Ee,ie);return a.multiply$1(ke,a.adjoint(ye,ye),ke),[ke[6]/ke[8]*j/a.EXTENT,ke[7]/ke[8]*W/a.EXTENT]})(this.width,this.height,x.x,x.y,T.x,T.y,z.x,z.y,M.x,M.y);const D=this._boundsArray=new a.StructArrayLayout4i8;D.emplaceBack(x.x,x.y,0,0),D.emplaceBack(T.x,T.y,a.EXTENT,0),D.emplaceBack(z.x,z.y,0,a.EXTENT),D.emplaceBack(M.x,M.y,a.EXTENT,a.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=s.createVertexBuffer(D,a.boundsAttributes.members),this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new a.Texture(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(s)}loadTile(s,d){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},d(null)):(s.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const In={vector:Lt,raster:Mt,"raster-dem":class extends Mt{constructor(_,s,d,x){super(_,s,d,x),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(_,s){const d=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function x(T,M){T&&(_.state="errored",s(T)),M&&(_.dem=M,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",s(null))}_.request=a.getImage(this.map._requestManager.transformRequest(d,a.ResourceType.Tile),(function(T,M,z,D){if(delete _.request,_.aborted)_.state="unloaded",s(null);else if(T)_.state="errored",s(T);else if(M){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:z,expires:D});const j=a.window.ImageBitmap&&M instanceof a.window.ImageBitmap&&(zr==null&&(zr=a.window.OffscreenCanvas&&new a.window.OffscreenCanvas(1,1).getContext("2d")&&typeof a.window.createImageBitmap=="function"),zr),W=1-(M.width-a.prevPowerOfTwo(M.width))/2;W<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const H=j?M:a.exported.getImageData(M,W),ne={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:H,encoding:this.encoding,padding:W};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",ne,x.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(_){const s=_.canonical,d=Math.pow(2,s.z),x=(s.x-1+d)%d,T=s.x===0?_.wrap-1:_.wrap,M=(s.x+1+d)%d,z=s.x+1===d?_.wrap+1:_.wrap,D={};return D[new a.OverscaledTileID(_.overscaledZ,T,s.z,x,s.y).key]={backfilled:!1},D[new a.OverscaledTileID(_.overscaledZ,z,s.z,M,s.y).key]={backfilled:!1},s.y>0&&(D[new a.OverscaledTileID(_.overscaledZ,T,s.z,x,s.y-1).key]={backfilled:!1},D[new a.OverscaledTileID(_.overscaledZ,_.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},D[new a.OverscaledTileID(_.overscaledZ,z,s.z,M,s.y-1).key]={backfilled:!1}),s.y+1<d&&(D[new a.OverscaledTileID(_.overscaledZ,T,s.z,x,s.y+1).key]={backfilled:!1},D[new a.OverscaledTileID(_.overscaledZ,_.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},D[new a.OverscaledTileID(_.overscaledZ,z,s.z,M,s.y+1).key]={backfilled:!1}),D}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends a.Evented{constructor(_,s,d,x){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(x),this._data=s.data,this._options=a.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const T=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*T,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*T,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:a.EXTENT,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*T,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},s),this}getClusterChildren(_,s){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},s),this}getClusterLeaves(_,s,d,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:s,offset:d},x),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=a.extend({},this.workerOptions),s=this._data;typeof s=="string"?(_.request=this.map._requestManager.transformRequest(a.exported.resolveURL(s),a.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(s),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,((d,x)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new a.ErrorEvent(d));else{const T={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&x&&x.resourceTiming&&x.resourceTiming[this.id]&&(T.resourceTiming=x.resourceTiming[this.id]),this.fire(new a.Event("data",T)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(_,s){const d=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(d,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((x,T)=>(delete _.request,_.unloadVectorData(),_.aborted?s(null):x?s(x):(_.loadVectorData(T,this.map.painter,d==="reloadTile"),s(null)))),void 0,d==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends bn{constructor(_,s,d,x){super(_,s,d,x),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const s of _.urls)this.urls.push(this.map._requestManager.transformRequest(s,a.ResourceType.Source).url);a.getVideo(this.urls,((s,d)=>{this._loaded=!0,s?this.fire(new a.ErrorEvent(s)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const s=this.video.seekable;_<s.start(0)||_>s.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,s=_.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(_,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:bn,canvas:class extends bn{constructor(_,s,d,x){super(_,s,d,x),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((M=>typeof M!="number"))))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(s,this.canvas,s.gl.RGBA,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends a.Evented{constructor(_,s,d,x){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=s,this.setEventedParent(x),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Yt(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),a.extend(this,a.pick(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:s,y:d,z:x}=_.canonical;return this._implementation.hasTile({x:s,y:d,z:x})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,s){const{x:d,y:x,z:T}=_.tileID.canonical,M=new a.window.AbortController;_.request=Promise.resolve(this._implementation.loadTile({x:d,y:x,z:T},{signal:M.signal})).then((function(z){return delete _.request,_.aborted?(_.state="unloaded",s(null)):z===void 0?(_.state="errored",s(null)):z===null?(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",s(null)):(function(D){return D instanceof a.window.ImageData||D instanceof a.window.HTMLCanvasElement||D instanceof a.window.ImageBitmap||D instanceof a.window.HTMLImageElement})(z)?(this.loadTileData(_,z),_.state="loaded",void s(null)):(_.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch((z=>{z.code!==20&&(_.state="errored",s(z))})),_.request.cancel=()=>M.abort()}loadTileData(_,s){Mt.loadTileData(_,s,this._map.painter)}unloadTileData(_){Mt.unloadTileData(_,this._map.painter)}unloadTile(_,s){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:d,y:x,z:T}=_.tileID.canonical;this._implementation.unloadTile({x:d,y:x,z:T})}s()}abortTile(_,s){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),s()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Bn=function(_,s,d,x){const T=new In[s.type](_,s,d,x);if(T.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${T.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],T),T};function Mn(_,s){const d=a.identity([]);return a.scale(d,d,[.5*_.width,.5*-_.height,1]),a.translate(d,d,[1,-1,0]),a.multiply(d,d,_.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(d)}function nr(_,s,d,x,T,M,z,D=!1){const j=_.tilesIn(x,z,D);j.sort(pr);const W=[];for(const ne of j)W.push({wrappedTileID:ne.tile.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(s,d,_._state,ne,T,M,Mn(_.transform,ne.tile.tileID),D)});const H=(function(ne){const he={},ve={};for(const we of ne){const xe=we.queryResults,Ee=we.wrappedTileID,ie=ve[Ee]=ve[Ee]||{};for(const ye in xe){const ke=xe[ye],ze=ie[ye]=ie[ye]||{},Ve=he[ye]=he[ye]||[];for(const We of ke)ze[We.featureIndex]||(ze[We.featureIndex]=!0,Ve.push(We))}}return he})(W);for(const ne in H)H[ne].forEach((he=>{const ve=he.feature,we=ve.layer;we&&we.type!=="background"&&we.type!=="sky"&&(ve.source=we.source,we["source-layer"]&&(ve.sourceLayer=we["source-layer"]),ve.state=ve.id!==void 0?_.getFeatureState(we["source-layer"],ve.id):{})}));return H}function Fn(_,s){const d=_.getRenderableIds().map((M=>_.getTileByID(M))),x=[],T={};for(let M=0;M<d.length;M++){const z=d[M],D=z.tileID.canonical.key;T[D]||(T[D]=!0,z.querySourceFeatures(x,s))}return x}function pr(_,s){const d=_.tileID,x=s.tileID;return d.overscaledZ-x.overscaledZ||d.canonical.y-x.canonical.y||d.wrap-x.wrap||d.canonical.x-x.canonical.x}function Rr(){return Ec.workerClass!=null?new Ec.workerClass:new a.window.Worker(Ec.workerUrl)}const Ci="mapboxgl_preloaded_worker_pool";class Kr{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Kr.workerCount;)this.workers.push(new Rr);return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach((d=>{d.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ci]}numActive(){return Object.keys(this.active).length}}let Xr;function qn(){return Xr||(Xr=new Kr),Xr}function kr(_,s){const d={};for(const x in _)x!=="ref"&&(d[x]=_[x]);return a.refProperties.forEach((x=>{x in s&&(d[x]=s[x])})),d}function gr(_){_=_.slice();const s=Object.create(null);for(let d=0;d<_.length;d++)s[_[d].id]=_[d];for(let d=0;d<_.length;d++)"ref"in _[d]&&(_[d]=kr(_[d],s[_[d].ref]));return _}Kr.workerCount=2;const On={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Er(_,s,d){d.push({command:On.addSource,args:[_,s[_]]})}function Wn(_,s,d){s.push({command:On.removeSource,args:[_]}),d[_]=!0}function Ur(_,s,d,x){Wn(_,d,x),Er(_,s,d)}function mi(_,s,d){let x;for(x in _[d])if(_[d].hasOwnProperty(x)&&x!=="data"&&!E(_[d][x],s[d][x]))return!1;for(x in s[d])if(s[d].hasOwnProperty(x)&&x!=="data"&&!E(_[d][x],s[d][x]))return!1;return!0}function Ji(_,s,d,x,T,M){let z;for(z in s=s||{},_=_||{})_.hasOwnProperty(z)&&(E(_[z],s[z])||d.push({command:M,args:[x,z,s[z],T]}));for(z in s)s.hasOwnProperty(z)&&!_.hasOwnProperty(z)&&(E(_[z],s[z])||d.push({command:M,args:[x,z,s[z],T]}))}function Aa(_){return _.id}function ea(_,s){return _[s.id]=s,_}class ko{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.clamp(s,0,1);let d=1,x=this._distances[d];const T=s*this.paddedLength+this.padding;for(;x<T&&d<this._distances.length;)x=this._distances[++d];const M=d-1,z=this._distances[M],D=x-z,j=D>0?(T-z)/D:0;return this.points[M].mult(1-j).add(this.points[d].mult(j))}}class Yi{constructor(s,d,x){const T=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(s/x),this.yCellCount=Math.ceil(d/x);for(let z=0;z<this.xCellCount*this.yCellCount;z++)T.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,x,T,M){this._forEachCell(d,x,T,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(x),this.bboxes.push(T),this.bboxes.push(M)}insertCircle(s,d,x,T){this._forEachCell(d-T,x-T,d+T,x+T,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(x),this.circles.push(T)}_insertBoxCell(s,d,x,T,M,z){this.boxCells[M].push(z)}_insertCircleCell(s,d,x,T,M,z){this.circleCells[M].push(z)}_query(s,d,x,T,M,z){if(x<0||s>this.width||T<0||d>this.height)return!M&&[];const D=[];if(s<=0&&d<=0&&this.width<=x&&this.height<=T){if(M)return!0;for(let j=0;j<this.boxKeys.length;j++)D.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const W=this.circles[3*j],H=this.circles[3*j+1],ne=this.circles[3*j+2];D.push({key:this.circleKeys[j],x1:W-ne,y1:H-ne,x2:W+ne,y2:H+ne})}return z?D.filter(z):D}return this._forEachCell(s,d,x,T,this._queryCell,D,{hitTest:M,seenUids:{box:{},circle:{}}},z),M?D.length>0:D}_queryCircle(s,d,x,T,M){const z=s-x,D=s+x,j=d-x,W=d+x;if(D<0||z>this.width||W<0||j>this.height)return!T&&[];const H=[];return this._forEachCell(z,j,D,W,this._queryCellCircle,H,{hitTest:T,circle:{x:s,y:d,radius:x},seenUids:{box:{},circle:{}}},M),T?H.length>0:H}query(s,d,x,T,M){return this._query(s,d,x,T,!1,M)}hitTest(s,d,x,T,M){return this._query(s,d,x,T,!0,M)}hitTestCircle(s,d,x,T){return this._queryCircle(s,d,x,!0,T)}_queryCell(s,d,x,T,M,z,D,j){const W=D.seenUids,H=this.boxCells[M];if(H!==null){const he=this.bboxes;for(const ve of H)if(!W.box[ve]){W.box[ve]=!0;const we=4*ve;if(s<=he[we+2]&&d<=he[we+3]&&x>=he[we+0]&&T>=he[we+1]&&(!j||j(this.boxKeys[ve]))){if(D.hitTest)return z.push(!0),!0;z.push({key:this.boxKeys[ve],x1:he[we],y1:he[we+1],x2:he[we+2],y2:he[we+3]})}}}const ne=this.circleCells[M];if(ne!==null){const he=this.circles;for(const ve of ne)if(!W.circle[ve]){W.circle[ve]=!0;const we=3*ve;if(this._circleAndRectCollide(he[we],he[we+1],he[we+2],s,d,x,T)&&(!j||j(this.circleKeys[ve]))){if(D.hitTest)return z.push(!0),!0;{const xe=he[we],Ee=he[we+1],ie=he[we+2];z.push({key:this.circleKeys[ve],x1:xe-ie,y1:Ee-ie,x2:xe+ie,y2:Ee+ie})}}}}}_queryCellCircle(s,d,x,T,M,z,D,j){const W=D.circle,H=D.seenUids,ne=this.boxCells[M];if(ne!==null){const ve=this.bboxes;for(const we of ne)if(!H.box[we]){H.box[we]=!0;const xe=4*we;if(this._circleAndRectCollide(W.x,W.y,W.radius,ve[xe+0],ve[xe+1],ve[xe+2],ve[xe+3])&&(!j||j(this.boxKeys[we])))return z.push(!0),!0}}const he=this.circleCells[M];if(he!==null){const ve=this.circles;for(const we of he)if(!H.circle[we]){H.circle[we]=!0;const xe=3*we;if(this._circlesCollide(ve[xe],ve[xe+1],ve[xe+2],W.x,W.y,W.radius)&&(!j||j(this.circleKeys[we])))return z.push(!0),!0}}}_forEachCell(s,d,x,T,M,z,D,j){const W=this._convertToXCellCoord(s),H=this._convertToYCellCoord(d),ne=this._convertToXCellCoord(x),he=this._convertToYCellCoord(T);for(let ve=W;ve<=ne;ve++)for(let we=H;we<=he;we++)if(M.call(this,s,d,x,T,this.xCellCount*we+ve,z,D,j))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,x,T,M,z){const D=T-s,j=M-d,W=x+z;return W*W>D*D+j*j}_circleAndRectCollide(s,d,x,T,M,z,D){const j=(z-T)/2,W=Math.abs(s-(T+j));if(W>j+x)return!1;const H=(D-M)/2,ne=Math.abs(d-(M+H));if(ne>H+x)return!1;if(W<=j||ne<=H)return!0;const he=W-j,ve=ne-H;return he*he+ve*ve<=x*x}}const oo={unknown:0,flipRequired:1,flipNotRequired:2},Rn=Math.tan(85*Math.PI/180);function _t(_,s,d,x,T,M,z){const D=a.create();if(d)if(M.name==="globe"){const j=a.calculateGlobeLabelMatrix(T,s);a.multiply(D,D,j)}else{const j=ue([],z);D[0]=j[0],D[1]=j[1],D[4]=j[2],D[5]=j[3],x||a.rotateZ(D,D,T.angle)}else a.multiply(D,T.labelPlaneMatrix,_);return D}function Xa(_,s,d,x,T,M,z){const D=_t(_,s,d,x,T,M,z);return M.name==="globe"&&d||(D[2]=D[6]=D[10]=D[14]=0),D}function Bi(_,s,d,x,T,M,z){if(d){if(M.name==="globe"){const D=_t(_,s,d,x,T,M,z);return a.invert(D,D),a.multiply(D,_,D),D}{const D=a.clone(_),j=a.identity([]);return j[0]=z[0],j[1]=z[1],j[4]=z[2],j[5]=z[3],a.multiply(D,D,j),x||a.rotateZ(D,D,-T.angle),D}}return T.glCoordMatrix}function Mi(_,s,d,x){const T=[_,s,d,1];d?a.transformMat4$1(T,T,x):ar(T,T,x);const M=T[3];return T[0]/=M,T[1]/=M,T[2]/=M,T}function _o(_,s){return Math.min(.5+_/s*.5,1.5)}function Jo(_,s){const d=_[0]/_[3],x=_[1]/_[3];return d>=-s[0]&&d<=s[0]&&x>=-s[1]&&x<=s[1]}function ip(_,s,d,x,T,M,z,D,j,W){const H=d.transform,ne=x?_.textSizeData:_.iconSizeData,he=a.evaluateSizeForZoom(ne,d.transform.zoom),ve=H.projection.name==="globe",we=[256/d.width*2+1,256/d.height*2+1],xe=x?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;xe.clear();let Ee=null;ve&&(Ee=x?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const ie=_.lineVertexArray,ye=x?_.text.placedSymbolArray:_.icon.placedSymbolArray,ke=d.transform.width/d.transform.height;let ze,Ve=!1;for(let We=0;We<ye.length;We++){const He=ye.get(We),{numGlyphs:Je,writingMode:Ke}=He;if(Ke!==a.WritingMode.vertical||Ve||ze===a.WritingMode.horizontal||(Ve=!0),ze=Ke,(He.hidden||Ke===a.WritingMode.vertical)&&!Ve){Io(Je,xe);continue}Ve=!1;const ct=new a.Point(He.tileAnchorX,He.tileAnchorY);let{x:$t,y:rt,z:vt}=H.projection.projectTilePoint(ct.x,ct.y,W.canonical);if(j){const[Pn,Nt,rn]=j(ct);$t+=Pn,rt+=Nt,vt+=rn}const lt=[$t,rt,vt,1];if(a.transformMat4$1(lt,lt,s),!Jo(lt,we)){Io(Je,xe);continue}const Ft=_o(d.transform.cameraToCenterDistance,lt[3]),ot=a.evaluateSizeForFeature(ne,he,He),St=z?ot/Ft:ot*Ft,jt=Mi($t,rt,vt,T);if(jt[3]<=0){Io(Je,xe);continue}let Et={};const At=z?null:j,vn=tn(He,St,!1,D,s,T,M,_.glyphOffsetArray,ie,xe,Ee,jt,ct,Et,ke,At,H.projection,W,z);Ve=vn.useVertical,At&&vn.needsFlipping&&(Et={}),(vn.notEnoughRoom||Ve||vn.needsFlipping&&tn(He,St,!0,D,s,T,M,_.glyphOffsetArray,ie,xe,Ee,jt,ct,Et,ke,At,H.projection,W,z).notEnoughRoom)&&Io(Je,xe)}x?(_.text.dynamicLayoutVertexBuffer.updateData(xe),Ee&&_.text.globeExtVertexBuffer.updateData(Ee)):(_.icon.dynamicLayoutVertexBuffer.updateData(xe),Ee&&_.icon.globeExtVertexBuffer.updateData(Ee))}function Oh(_,s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe){const{lineStartIndex:Ee,glyphStartIndex:ie,segment:ye}=D,ke=ie+D.numGlyphs,ze=Ee+D.lineLength,Ve=s.getoffsetX(ie),We=s.getoffsetX(ke-1),He=Ya(_*Ve,d,x,T,M,z,ye,Ee,ze,j,W,H,ne,he,!0,ve,we,xe);if(!He)return null;const Je=Ya(_*We,d,x,T,M,z,ye,Ee,ze,j,W,H,ne,he,!0,ve,we,xe);return Je?{first:He,last:Je}:null}function rc(_,s,d,x){return _===a.WritingMode.horizontal&&Math.abs(x)>Math.abs(d)?{useVertical:!0}:_===a.WritingMode.vertical?x>0?{needsFlipping:!0}:null:s!==oo.unknown&&(function(T,M){return T===0||Math.abs(M/T)>Rn})(d,x)?s===oo.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function tn(_,s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe,Ee,ie,ye){const ke=s/24,ze=_.lineOffsetX*ke,Ve=_.lineOffsetY*ke,{lineStartIndex:We,glyphStartIndex:He,numGlyphs:Je,segment:Ke,writingMode:ct,flipState:$t}=_,rt=We+_.lineLength,vt=lt=>{if(H){const[jt,Et,At]=lt.up,vn=W.length;a.updateGlobeVertexNormal(H,vn+0,jt,Et,At),a.updateGlobeVertexNormal(H,vn+1,jt,Et,At),a.updateGlobeVertexNormal(H,vn+2,jt,Et,At),a.updateGlobeVertexNormal(H,vn+3,jt,Et,At)}const[Ft,ot,St]=lt.point;a.addDynamicAttributes(W,Ft,ot,St,lt.angle)};if(Je>1){const lt=Oh(ke,D,ze,Ve,d,ne,he,_,j,M,ve,xe,!1,Ee,ie,ye);if(!lt)return{notEnoughRoom:!0};if(x&&!d){let[Ft,ot,St]=lt.first.point,[jt,Et,At]=lt.last.point;[Ft,ot]=Mi(Ft,ot,St,z),[jt,Et]=Mi(jt,Et,At,z);const vn=rc(ct,$t,(jt-Ft)*we,Et-ot);if(_.flipState=vn&&vn.needsFlipping?oo.flipRequired:oo.flipNotRequired,vn)return vn}vt(lt.first);for(let Ft=He+1;Ft<He+Je-1;Ft++){const ot=Ya(ke*D.getoffsetX(Ft),ze,Ve,d,ne,he,Ke,We,rt,j,M,ve,xe,!1,!1,Ee,ie,ye);if(!ot)return W.length-=4*(Ft-He),{notEnoughRoom:!0};vt(ot)}vt(lt.last)}else{if(x&&!d){const Ft=Mi(he.x,he.y,0,T),ot=We+Ke+1,St=new a.Point(j.getx(ot),j.gety(ot)),jt=Mi(St.x,St.y,0,T),Et=jt[3]>0?jt:Vn(he,St,Ft,1,T,void 0,Ee,ie.canonical),At=rc(ct,$t,(Et[0]-Ft[0])*we,Et[1]-Ft[1]);if(_.flipState=At&&At.needsFlipping?oo.flipRequired:oo.flipNotRequired,At)return At}const lt=Ya(ke*D.getoffsetX(He),ze,Ve,d,ne,he,Ke,We,rt,j,M,ve,xe,!1,!1,Ee,ie,ye);if(!lt)return{notEnoughRoom:!0};vt(lt)}return{}}function hr(_,s,d,x,T){const{x:M,y:z,z:D}=x.projectTilePoint(_.x,_.y,s);if(!T)return Mi(M,z,D,d);const[j,W,H]=T(_);return Mi(M+j,z+W,D+H,d)}function Vn(_,s,d,x,T,M,z,D){const j=hr(_.sub(s)._unit()._add(_),D,T,z,M);return a.sub(j,d,j),a.normalize(j,j),a.scaleAndAdd(j,d,j,x)}function Ya(_,s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe,Ee,ie){const ye=x?_-s:_+s;let ke=ye>0?1:-1,ze=0;x&&(ke*=-1,ze=Math.PI),ke<0&&(ze+=Math.PI);let Ve=D+z+(ke>0?0:1)|0,We=T,He=T,Je=0,Ke=0;const ct=Math.abs(ye),$t=[],rt=[];let vt=M,lt=vt;const Ft=()=>Vn(lt,vt,He,ct-Je+1,H,he,xe,Ee.canonical);for(;Je+Ke<=ct;){if(Ve+=ke,Ve<D||Ve>=j)return null;if(He=We,lt=vt,$t.push(He),ve&&rt.push(lt),vt=new a.Point(W.getx(Ve),W.gety(Ve)),We=ne[Ve],!We){const rn=hr(vt,Ee.canonical,H,xe,he);We=rn[3]>0?ne[Ve]=rn:Ft()}Je+=Ke,Ke=a.distance(He,We)}we&&he&&(ne[Ve]&&(We=Ft(),Ke=a.distance(He,We)),ne[Ve]=We);const ot=(ct-Je)/Ke,St=vt.sub(lt)._mult(ot)._add(lt),jt=a.sub([],We,He),Et=a.scaleAndAdd([],He,jt,ot);let At=[0,0,1],vn=jt[0],Pn=jt[1];if(ie&&(At=xe.upVector(Ee.canonical,St.x,St.y),At[0]!==0||At[1]!==0||At[2]!==1)){const rn=[At[2],0,-At[0]],kn=a.cross([],At,rn);a.normalize(rn,rn),a.normalize(kn,kn),vn=a.dot(jt,rn),Pn=a.dot(jt,kn)}if(d){const rn=a.cross([],At,jt);a.normalize(rn,rn),a.scaleAndAdd(Et,Et,rn,d*ke)}const Nt=ze+Math.atan2(Pn,vn);return $t.push(Et),ve&&rt.push(St),{point:Et,angle:Nt,path:$t,tilePath:rt,up:At}}function Io(_,s){const d=s.length,x=d+4*_;s.resize(x),s.float32.fill(-1/0,4*d,4*x)}function ar(_,s,d){const x=s[0],T=s[1];return _[0]=d[0]*x+d[4]*T+d[12],_[1]=d[1]*x+d[5]*T+d[13],_[3]=d[3]*x+d[7]*T+d[15],_}const va=100;class nu{constructor(s,d,x=new Yi(s.width+200,s.height+200,25),T=new Yi(s.width+200,s.height+200,25)){this.transform=s,this.grid=x,this.ignoredGrid=T,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+va,this.screenBottomBoundary=s.height+va,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=d}placeCollisionBox(s,d,x,T,M,z,D,j){let W=x.projectedAnchorX,H=x.projectedAnchorY,ne=x.projectedAnchorZ;const he=x.elevation,ve=x.tileID,we=s.getProjection();if(he&&ve){const[We,He,Je]=we.upVector(ve.canonical,x.tileAnchorX,x.tileAnchorY),Ke=we.upVectorScale(ve.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;W+=We*he*Ke,H+=He*he*Ke,ne+=Je*he*Ke}const xe=this.projectAndGetPerspectiveRatio(D,W,H,ne,x.tileID,we.name==="globe"||!!he||this.transform.pitch>0,we),Ee=z*xe.perspectiveRatio,ie=(x.x1*d+T.x-x.padding)*Ee+xe.point.x,ye=(x.y1*d+T.y-x.padding)*Ee+xe.point.y,ke=(x.x2*d+T.x+x.padding)*Ee+xe.point.x,ze=(x.y2*d+T.y+x.padding)*Ee+xe.point.y,Ve=xe.perspectiveRatio<=.55||xe.occluded;return!this.isInsideGrid(ie,ye,ke,ze)||!M&&this.grid.hitTest(ie,ye,ke,ze,j)||Ve?{box:[],offscreen:!1,occluded:xe.occluded}:{box:[ie,ye,ke,ze],offscreen:this.isOffscreen(ie,ye,ke,ze),occluded:!1}}placeCollisionCircles(s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe){const Ee=[],ie=this.transform.elevation,ye=s.getProjection(),ke=ie?ie.getAtTileOffsetFunc(xe,this.transform.center.lat,this.transform.worldSize,ye):null,ze=new a.Point(x.tileAnchorX,x.tileAnchorY);let{x:Ve,y:We,z:He}=ye.projectTilePoint(ze.x,ze.y,xe.canonical);if(ke){const[St,jt,Et]=ke(ze);Ve+=St,We+=jt,He+=Et}const Je=ye.name==="globe",Ke=this.projectAndGetPerspectiveRatio(D,Ve,We,He,xe,Je||!!ie||this.transform.pitch>0,ye),{perspectiveRatio:ct}=Ke,$t=(ne?z/ct:z*ct)/a.ONE_EM,rt=Mi(Ve,We,He,j),vt=Ke.signedDistanceFromCamera>0?Oh($t,M,x.lineOffsetX*$t,x.lineOffsetY*$t,!1,rt,ze,x,T,j,{},ie&&!ne?ke:null,ne&&!!ie,ye,xe,ne):null;let lt=!1,Ft=!1,ot=!0;if(vt&&!Ke.occluded){const St=.5*ve*ct+we,jt=new a.Point(-100,-100),Et=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),At=new ko,{first:vn,last:Pn}=vt,Nt=vn.path.length;let rn=[];for(let pn=Nt-1;pn>=1;pn--)rn.push(vn.path[pn]);for(let pn=1;pn<Pn.path.length;pn++)rn.push(Pn.path[pn]);const kn=2.5*St;W&&(rn=rn.map((([pn,_r,$r],Br)=>(ke&&!Je&&($r=ke(Br<Nt-1?vn.tilePath[Nt-1-Br]:Pn.tilePath[Br-Nt+2])[2]),Mi(pn,_r,$r,W)))),rn.some((pn=>pn[3]<=0))&&(rn=[]));let Yn=[];if(rn.length>0){let pn=1/0,_r=-1/0,$r=1/0,Br=-1/0;for(const Lr of rn)pn=Math.min(pn,Lr[0]),$r=Math.min($r,Lr[1]),_r=Math.max(_r,Lr[0]),Br=Math.max(Br,Lr[1]);_r>=jt.x&&pn<=Et.x&&Br>=jt.y&&$r<=Et.y&&(Yn=[rn.map((Lr=>new a.Point(Lr[0],Lr[1])))],(pn<jt.x||_r>Et.x||$r<jt.y||Br>Et.y)&&(Yn=a.clipLine(Yn,jt.x,jt.y,Et.x,Et.y)))}for(const pn of Yn){At.reset(pn,.25*St);let _r=0;_r=At.length<=.5*St?1:Math.ceil(At.paddedLength/kn)+1;for(let $r=0;$r<_r;$r++){const Br=$r/Math.max(_r-1,1),Lr=At.lerp(Br),Fa=Lr.x+va,vr=Lr.y+va;Ee.push(Fa,vr,St,0);const uo=Fa-St,Fo=vr-St,gi=Fa+St,Yr=vr+St;if(ot=ot&&this.isOffscreen(uo,Fo,gi,Yr),Ft=Ft||this.isInsideGrid(uo,Fo,gi,Yr),!d&&this.grid.hitTestCircle(Fa,vr,St,he)&&(lt=!0,!H))return{circles:[],offscreen:!1,collisionDetected:lt,occluded:!1}}}}return{circles:!H&&lt||!Ft?[]:Ee,offscreen:ot,collisionDetected:lt,occluded:Ke.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let x=1/0,T=1/0,M=-1/0,z=-1/0;for(const H of s){const ne=new a.Point(H.x+va,H.y+va);x=Math.min(x,ne.x),T=Math.min(T,ne.y),M=Math.max(M,ne.x),z=Math.max(z,ne.y),d.push(ne)}const D=this.grid.query(x,T,M,z).concat(this.ignoredGrid.query(x,T,M,z)),j={},W={};for(const H of D){const ne=H.key;if(j[ne.bucketInstanceId]===void 0&&(j[ne.bucketInstanceId]={}),j[ne.bucketInstanceId][ne.featureIndex])continue;const he=[new a.Point(H.x1,H.y1),new a.Point(H.x2,H.y1),new a.Point(H.x2,H.y2),new a.Point(H.x1,H.y2)];a.polygonIntersectsPolygon(d,he)&&(j[ne.bucketInstanceId][ne.featureIndex]=!0,W[ne.bucketInstanceId]===void 0&&(W[ne.bucketInstanceId]=[]),W[ne.bucketInstanceId].push(ne.featureIndex))}return W}insertCollisionBox(s,d,x,T,M){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:T,collisionGroupID:M},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,x,T,M){const z=d?this.ignoredGrid:this.grid,D={bucketInstanceId:x,featureIndex:T,collisionGroupID:M};for(let j=0;j<s.length;j+=4)z.insertCircle(D,s[j],s[j+1],s[j+2])}projectAndGetPerspectiveRatio(s,d,x,T,M,z,D){const j=[d,x,T,1];let W=!1;T||this.transform.pitch>0?(a.transformMat4$1(j,j,s),this.fogState&&M&&D.name!=="globe"&&(W=(function(he,ve,we,xe,Ee,ie){const ye=ie.calculateFogTileMatrix(Ee),ke=[ve,we,xe];return a.transformMat4(ke,ke,ye),Pe(he,ke,ie.pitch,ie._fov)})(this.fogState,d,x,T,M.toUnwrapped(),this.transform)>.9)):ar(j,j,s);const H=j[3];return{point:new a.Point((j[0]/H+1)/2*this.transform.width+va,(-j[1]/H+1)/2*this.transform.height+va),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(D)/H*.5,1.5),signedDistanceFromCamera:H,occluded:z&&j[2]>H||W}}isOffscreen(s,d,x,T){return x<va||s>=this.screenRightBoundary||T<va||d>this.screenBottomBoundary}isInsideGrid(s,d,x,T){return x>=0&&s<this.gridRightBoundary&&T>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=a.identity([]);return a.translate(s,s,[-100,-100,0]),s}}function ul(_,s,d){const x=s.createTileMatrix(_,_.worldSize,d.toUnwrapped());return a.multiply(new Float32Array(16),_.projMatrix,x)}function Ra(_,s,d){if(s.projection.name===d.projection.name)return _.projMatrix;const x=d.clone();return x.setProjection(s.projection),ul(x,s.getProjection(),_)}function Ai(_,s,d){return s.name===d.projection.name?_.projMatrix:ul(d,s,_)}class ap{constructor(s,d,x,T){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):T&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class ys{constructor(s,d,x,T,M,z=!1){this.text=new ap(s?s.text:null,d,x,M),this.icon=new ap(s?s.icon:null,d,T,M),this.clipped=z}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ic{constructor(s,d,x,T=!1){this.text=s,this.icon=d,this.skipFade=x,this.clipped=T}}class bf{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class op{constructor(s,d,x,T,M){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=x,this.bucketIndex=T,this.tileID=M}}class wf{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:x=>x.collisionGroupID===d}}return this.collisionGroups[s]}}function vo(_,s,d,x,T){const{horizontalAlign:M,verticalAlign:z}=a.getAnchorAlignment(_),D=-(M-.5)*s,j=-(z-.5)*d,W=a.evaluateVariableOffset(_,x);return new a.Point(D+W[0]*T,j+W[1]*T)}function ac(_,s,d,x,T){const M=new a.Point(_,s);return d&&M._rotate(x?T:-T),M}class ru{constructor(s,d,x,T,M){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new nu(this.transform,M),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new wf(x),this.collisionCircleArrays={},this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,d,x,T){const M=x.getBucket(d),z=x.latestFeatureIndex;if(!M||!z||d.id!==M.layerIds[0])return;const D=M.layers[0].layout,j=x.collisionBoxArray,W=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),H=x.tileSize/a.EXTENT,ne=x.tileID.toUnwrapped();this.transform.setProjection(M.projection);const he=(ve=x.tileID,we=M.getProjection(),xe=this.transform,we.name===this.projection?xe.calculateProjMatrix(ve.toUnwrapped()):ul(xe,we,ve));var ve,we,xe;const Ee=D.get("text-pitch-alignment")==="map",ie=D.get("text-rotation-alignment")==="map";d.compileFilter();const ye=d.dynamicFilter(),ke=d.dynamicFilterNeedsFeature(),ze=this.transform.calculatePixelsToTileUnitsMatrix(x),Ve=Xa(he,x.tileID.canonical,Ee,ie,this.transform,M.getProjection(),ze);let We=null;if(Ee){const Ke=Bi(he,x.tileID.canonical,Ee,ie,this.transform,M.getProjection(),ze);We=a.multiply([],this.transform.labelPlaneMatrix,Ke)}let He=null;ye&&x.latestFeatureIndex&&(He={unwrappedTileID:ne,dynamicFilter:ye,dynamicFilterNeedsFeature:ke,featureIndex:x.latestFeatureIndex}),this.retainedQueryData[M.bucketInstanceId]=new op(M.bucketInstanceId,z,M.sourceLayerIndex,M.index,x.tileID);const Je={bucket:M,layout:D,posMatrix:he,textLabelPlaneMatrix:Ve,labelToScreenMatrix:We,clippingData:He,scale:W,textPixelRatio:H,holdingForFade:x.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.evaluateSizeForZoom(M.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(T)for(const Ke of M.sortKeyRanges){const{sortKey:ct,symbolInstanceStart:$t,symbolInstanceEnd:rt}=Ke;s.push({sortKey:ct,symbolInstanceStart:$t,symbolInstanceEnd:rt,parameters:Je})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:Je})}attemptAnchorPlacement(s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe,Ee,ie,ye){const{textOffset0:ke,textOffset1:ze,crossTileID:Ve}=he,We=[ke,ze],He=vo(s,x,T,We,M),Je=this.collisionIndex.placeCollisionBox(we,M,d,ac(He.x,He.y,z,D,this.transform.angle),ne,j,W,H.predicate);if(Ee){const Ke=we.getSymbolInstanceIconSize(ye,this.transform.zoom,he.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(we,Ke,Ee,ac(He.x,He.y,z,D,this.transform.angle),ne,j,W,H.predicate).box.length===0)return}if(Je.box.length>0){let Ke;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ve]&&this.prevPlacement.placements[Ve]&&this.prevPlacement.placements[Ve].text&&(Ke=this.prevPlacement.variableOffsets[Ve].anchor),this.variableOffsets[Ve]={textOffset:We,width:x,height:T,anchor:s,textScale:M,prevAnchor:Ke},this.markUsedJustification(we,s,he,xe),we.allowVerticalPlacement&&(this.markUsedOrientation(we,xe,he),this.placedOrientations[Ve]=xe),{shift:He,placedGlyphBoxes:Je}}}placeLayerBucketPart(s,d,x,T){const{bucket:M,layout:z,posMatrix:D,textLabelPlaneMatrix:j,labelToScreenMatrix:W,clippingData:H,textPixelRatio:ne,holdingForFade:he,collisionBoxArray:ve,partiallyEvaluatedTextSize:we,partiallyEvaluatedIconSize:xe,collisionGroup:Ee}=s.parameters,ie=z.get("text-optional"),ye=z.get("icon-optional"),ke=z.get("text-allow-overlap"),ze=z.get("icon-allow-overlap"),Ve=z.get("text-rotation-alignment")==="map",We=z.get("text-pitch-alignment")==="map",He=z.get("icon-text-fit")!=="none",Je=z.get("symbol-z-order")==="viewport-y";this.transform.setProjection(M.projection);let Ke=ke&&(ze||!M.hasIconData()||ye),ct=ze&&(ke||!M.hasTextData()||ie);!M.collisionArrays&&ve&&M.deserializeCollisionBoxes(ve),x&&T&&M.updateCollisionDebugBuffers(this.transform.zoom,ve);const $t=(rt,vt,lt)=>{const{crossTileID:Ft,numVerticalGlyphVertices:ot}=rt;if(H){const gi={zoom:this.transform.zoom,pitch:this.transform.pitch};let Yr=null;if(H.dynamicFilterNeedsFeature){const Pr=this.retainedQueryData[M.bucketInstanceId];Yr=H.featureIndex.loadFeature({featureIndex:rt.featureIndex,bucketIndex:Pr.bucketIndex,sourceLayerIndex:Pr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,H.dynamicFilter)(gi,Yr,this.retainedQueryData[M.bucketInstanceId].tileID.canonical,new a.Point(rt.tileAnchorX,rt.tileAnchorY),this.transform.calculateDistanceTileData(H.unwrappedTileID)))return this.placements[Ft]=new ic(!1,!1,!1,!0),void d.add(Ft)}if(d.has(Ft))return;if(he)return void(this.placements[Ft]=new ic(!1,!1,!1));let St=!1,jt=!1,Et=!0,At=!1,vn=!1,Pn=null,Nt={box:null,offscreen:null,occluded:null},rn={box:null},kn=null,Yn=null,pn=null,_r=0,$r=0,Br=0;lt.textFeatureIndex?_r=lt.textFeatureIndex:rt.useRuntimeCollisionCircles&&(_r=rt.featureIndex),lt.verticalTextFeatureIndex&&($r=lt.verticalTextFeatureIndex);const Lr=gi=>{gi.tileID=this.retainedQueryData[M.bucketInstanceId].tileID;const Yr=this.transform.elevation;(Yr||gi.elevation)&&(gi.elevation=Yr?Yr.getAtTileOffset(gi.tileID,gi.tileAnchorX,gi.tileAnchorY):0)},Fa=lt.textBox;if(Fa){Lr(Fa);const gi=Pr=>{let Ui=a.WritingMode.horizontal;if(M.allowVerticalPlacement&&!Pr&&this.prevPlacement){const Ia=this.prevPlacement.placedOrientations[Ft];Ia&&(this.placedOrientations[Ft]=Ia,Ui=Ia,this.markUsedOrientation(M,Ui,rt))}return Ui},Yr=(Pr,Ui)=>{if(M.allowVerticalPlacement&&ot>0&&lt.verticalTextBox){for(const Ia of M.writingModes)if(Ia===a.WritingMode.vertical?(Nt=Ui(),rn=Nt):Nt=Pr(),Nt&&Nt.box&&Nt.box.length)break}else Nt=Pr()};if(z.get("text-variable-anchor")){let Pr=z.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ft]){const ri=this.prevPlacement.variableOffsets[Ft];Pr.indexOf(ri.anchor)>0&&(Pr=Pr.filter((si=>si!==ri.anchor)),Pr.unshift(ri.anchor))}const Ui=(ri,si,Fi)=>{const Ss=M.getSymbolInstanceTextSize(we,rt,this.transform.zoom,vt),Ks=(ri.x2-ri.x1)*Ss+2*ri.padding,jo=(ri.y2-ri.y1)*Ss+2*ri.padding,Ts=He&&!ze?si:null;Ts&&Lr(Ts);let Qa={box:[],offscreen:!1,occluded:!1};const Cc=ke?2*Pr.length:Pr.length;for(let Mc=0;Mc<Cc;++Mc){const qf=this.attemptAnchorPlacement(Pr[Mc%Pr.length],ri,Ks,jo,Ss,Ve,We,ne,D,Ee,Mc>=Pr.length,rt,vt,M,Fi,Ts,we,xe);if(qf&&(Qa=qf.placedGlyphBoxes,Qa&&Qa.box&&Qa.box.length)){St=!0,Pn=qf.shift;break}}return Qa};Yr((()=>Ui(Fa,lt.iconBox,a.WritingMode.horizontal)),(()=>{const ri=lt.verticalTextBox;return ri&&Lr(ri),M.allowVerticalPlacement&&!(Nt&&Nt.box&&Nt.box.length)&&ot>0&&ri?Ui(ri,lt.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),Nt&&(St=Nt.box,Et=Nt.offscreen,At=Nt.occluded);const Ia=gi(!(!Nt||!Nt.box));if(!St&&this.prevPlacement){const ri=this.prevPlacement.variableOffsets[Ft];ri&&(this.variableOffsets[Ft]=ri,this.markUsedJustification(M,ri.anchor,rt,Ia))}}else{const Pr=(Ui,Ia)=>{const ri=M.getSymbolInstanceTextSize(we,rt,this.transform.zoom,vt),si=this.collisionIndex.placeCollisionBox(M,ri,Ui,new a.Point(0,0),ke,ne,D,Ee.predicate);return si&&si.box&&si.box.length&&(this.markUsedOrientation(M,Ia,rt),this.placedOrientations[Ft]=Ia),si};Yr((()=>Pr(Fa,a.WritingMode.horizontal)),(()=>{const Ui=lt.verticalTextBox;return M.allowVerticalPlacement&&ot>0&&Ui?(Lr(Ui),Pr(Ui,a.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),gi(!!(Nt&&Nt.box&&Nt.box.length))}}if(kn=Nt,St=kn&&kn.box&&kn.box.length>0,Et=kn&&kn.offscreen,At=kn&&kn.occluded,rt.useRuntimeCollisionCircles){const gi=M.text.placedSymbolArray.get(rt.centerJustifiedTextSymbolIndex>=0?rt.centerJustifiedTextSymbolIndex:rt.verticalPlacedTextSymbolIndex),Yr=a.evaluateSizeForFeature(M.textSizeData,we,gi),Pr=z.get("text-padding");Yn=this.collisionIndex.placeCollisionCircles(M,ke,gi,M.lineVertexArray,M.glyphOffsetArray,Yr,D,j,W,x,We,Ee.predicate,rt.collisionCircleDiameter*Yr/a.ONE_EM,Pr,this.retainedQueryData[M.bucketInstanceId].tileID),St=ke||Yn.circles.length>0&&!Yn.collisionDetected,Et=Et&&Yn.offscreen,At=Yn.occluded}if(lt.iconFeatureIndex&&(Br=lt.iconFeatureIndex),lt.iconBox){const gi=Yr=>{Lr(Yr);const Pr=He&&Pn?ac(Pn.x,Pn.y,Ve,We,this.transform.angle):new a.Point(0,0),Ui=M.getSymbolInstanceIconSize(xe,this.transform.zoom,rt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(M,Ui,Yr,Pr,ze,ne,D,Ee.predicate)};rn&&rn.box&&rn.box.length&&lt.verticalIconBox?(pn=gi(lt.verticalIconBox),jt=pn.box.length>0):(pn=gi(lt.iconBox),jt=pn.box.length>0),Et=Et&&pn.offscreen,vn=pn.occluded}const vr=ie||rt.numHorizontalGlyphVertices===0&&ot===0,uo=ye||rt.numIconVertices===0;if(vr||uo?uo?vr||(jt=jt&&St):St=jt&&St:jt=St=jt&&St,St&&kn&&kn.box&&this.collisionIndex.insertCollisionBox(kn.box,z.get("text-ignore-placement"),M.bucketInstanceId,rn&&rn.box&&$r?$r:_r,Ee.ID),jt&&pn&&this.collisionIndex.insertCollisionBox(pn.box,z.get("icon-ignore-placement"),M.bucketInstanceId,Br,Ee.ID),Yn&&(St&&this.collisionIndex.insertCollisionCircles(Yn.circles,z.get("text-ignore-placement"),M.bucketInstanceId,_r,Ee.ID),x)){const gi=M.bucketInstanceId;let Yr=this.collisionCircleArrays[gi];Yr===void 0&&(Yr=this.collisionCircleArrays[gi]=new bf);for(let Pr=0;Pr<Yn.circles.length;Pr+=4)Yr.circles.push(Yn.circles[Pr+0]),Yr.circles.push(Yn.circles[Pr+1]),Yr.circles.push(Yn.circles[Pr+2]),Yr.circles.push(Yn.collisionDetected?1:0)}const Fo=M.projection.name!=="globe";Ke=Ke&&(Fo||!At),ct=ct&&(Fo||!vn),this.placements[Ft]=new ic(St||Ke,jt||ct,Et||M.justReloaded),d.add(Ft)};if(Je){const rt=M.getSortedSymbolIndexes(this.transform.angle);for(let vt=rt.length-1;vt>=0;--vt){const lt=rt[vt];$t(M.symbolInstances.get(lt),lt,M.collisionArrays[lt])}}else for(let rt=s.symbolInstanceStart;rt<s.symbolInstanceEnd;rt++)$t(M.symbolInstances.get(rt),rt,M.collisionArrays[rt]);if(x&&M.bucketInstanceId in this.collisionCircleArrays){const rt=this.collisionCircleArrays[M.bucketInstanceId];a.invert(rt.invProjMatrix,D),rt.viewportMatrix=this.collisionIndex.getViewportMatrix()}M.justReloaded=!1}markUsedJustification(s,d,x,T){const{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:z,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:j,crossTileID:W}=x,H=a.getAnchorJustification(d),ne=T===a.WritingMode.vertical?j:H==="left"?M:H==="center"?z:H==="right"?D:-1;M>=0&&(s.text.placedSymbolArray.get(M).crossTileID=ne>=0&&M!==ne?0:W),z>=0&&(s.text.placedSymbolArray.get(z).crossTileID=ne>=0&&z!==ne?0:W),D>=0&&(s.text.placedSymbolArray.get(D).crossTileID=ne>=0&&D!==ne?0:W),j>=0&&(s.text.placedSymbolArray.get(j).crossTileID=ne>=0&&j!==ne?0:W)}markUsedOrientation(s,d,x){const T=d===a.WritingMode.horizontal||d===a.WritingMode.horizontalOnly?d:0,M=d===a.WritingMode.vertical?d:0,{leftJustifiedTextSymbolIndex:z,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:j,verticalPlacedTextSymbolIndex:W}=x,H=s.text.placedSymbolArray;z>=0&&(H.get(z).placedOrientation=T),D>=0&&(H.get(D).placedOrientation=T),j>=0&&(H.get(j).placedOrientation=T),W>=0&&(H.get(W).placedOrientation=M)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let x=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const T=d?d.symbolFadeChange(s):1,M=d?d.opacities:{},z=d?d.variableOffsets:{},D=d?d.placedOrientations:{};for(const j in this.placements){const W=this.placements[j],H=M[j];H?(this.opacities[j]=new ys(H,T,W.text,W.icon,null,W.clipped),x=x||W.text!==H.text.placed||W.icon!==H.icon.placed):(this.opacities[j]=new ys(null,T,W.text,W.icon,W.skipFade,W.clipped),x=x||W.text||W.icon)}for(const j in M){const W=M[j];if(!this.opacities[j]){const H=new ys(W,T,!1,!1);H.isHidden()||(this.opacities[j]=H,x=x||W.text.placed||W.icon.placed)}}for(const j in z)this.variableOffsets[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.variableOffsets[j]=z[j]);for(const j in D)this.placedOrientations[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.placedOrientations[j]=D[j]);x?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const x=new Set;for(const T of d){const M=T.getBucket(s);M&&T.latestFeatureIndex&&s.id===M.layerIds[0]&&this.updateBucketOpacities(M,x,T.collisionBoxArray)}}updateBucketOpacities(s,d,x){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const T=s.layers[0].layout,M=!!s.layers[0].dynamicFilter(),z=new ys(null,0,!1,!1,!0),D=T.get("text-allow-overlap"),j=T.get("icon-allow-overlap"),W=T.get("text-variable-anchor"),H=T.get("text-rotation-alignment")==="map",ne=T.get("text-pitch-alignment")==="map",he=T.get("icon-text-fit")!=="none",ve=new ys(null,0,D&&(j||!s.hasIconData()||T.get("icon-optional")),j&&(D||!s.hasTextData()||T.get("text-optional")),!0);!s.collisionArrays&&x&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(x);const we=(Ee,ie,ye)=>{for(let ke=0;ke<ie/4;ke++)Ee.opacityVertexArray.emplaceBack(ye)};let xe=0;for(let Ee=0;Ee<s.symbolInstances.length;Ee++){const ie=s.symbolInstances.get(Ee),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:ke,crossTileID:ze,numIconVertices:Ve}=ie,We=d.has(ze);let He=this.opacities[ze];We?He=z:He||(He=ve,this.opacities[ze]=He),d.add(ze);const Je=ye>0||ke>0,Ke=Ve>0,ct=this.placedOrientations[ze],$t=ct===a.WritingMode.vertical,rt=ct===a.WritingMode.horizontal||ct===a.WritingMode.horizontalOnly;if(!Je&&!Ke||He.isHidden()||xe++,Je){const vt=Ns(He.text);we(s.text,ye,$t?Qr:vt),we(s.text,ke,rt?Qr:vt);const lt=He.text.isHidden(),{leftJustifiedTextSymbolIndex:Ft,centerJustifiedTextSymbolIndex:ot,rightJustifiedTextSymbolIndex:St,verticalPlacedTextSymbolIndex:jt}=ie,Et=s.text.placedSymbolArray,At=lt||$t?1:0;Ft>=0&&(Et.get(Ft).hidden=At),ot>=0&&(Et.get(ot).hidden=At),St>=0&&(Et.get(St).hidden=At),jt>=0&&(Et.get(jt).hidden=lt||rt?1:0);const vn=this.variableOffsets[ze];vn&&this.markUsedJustification(s,vn.anchor,ie,ct);const Pn=this.placedOrientations[ze];Pn&&(this.markUsedJustification(s,"left",ie,Pn),this.markUsedOrientation(s,Pn,ie))}if(Ke){const vt=Ns(He.icon),{placedIconSymbolIndex:lt,verticalPlacedIconSymbolIndex:Ft}=ie,ot=s.icon.placedSymbolArray,St=He.icon.isHidden()?1:0;lt>=0&&(we(s.icon,Ve,$t?Qr:vt),ot.get(lt).hidden=St),Ft>=0&&(we(s.icon,ie.numVerticalIconVertices,rt?Qr:vt),ot.get(Ft).hidden=St)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const vt=s.collisionArrays[Ee];if(vt){let lt=new a.Point(0,0),Ft=!0;if(vt.textBox||vt.verticalTextBox){if(W){const St=this.variableOffsets[ze];St?(lt=vo(St.anchor,St.width,St.height,St.textOffset,St.textScale),H&&lt._rotate(ne?this.transform.angle:-this.transform.angle)):Ft=!1}M&&(Ft=!He.clipped),vt.textBox&&es(s.textCollisionBox.collisionVertexArray,He.text.placed,!Ft||$t,lt.x,lt.y),vt.verticalTextBox&&es(s.textCollisionBox.collisionVertexArray,He.text.placed,!Ft||rt,lt.x,lt.y)}const ot=Ft&&!!(!rt&&vt.verticalIconBox);vt.iconBox&&es(s.iconCollisionBox.collisionVertexArray,He.icon.placed,ot,he?lt.x:0,he?lt.y:0),vt.verticalIconBox&&es(s.iconCollisionBox.collisionVertexArray,He.icon.placed,!ot,he?lt.x:0,he?lt.y:0)}}}if(s.fullyClipped=xe===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const Ee=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Ee.invProjMatrix,s.placementViewportMatrix=Ee.viewportMatrix,s.collisionCircleArray=Ee.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const x=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*x>s}setStale(){this.stale=!0}}function es(_,s,d,x,T){_.emplaceBack(s?1:0,d?1:0,x||0,T||0),_.emplaceBack(s?1:0,d?1:0,x||0,T||0),_.emplaceBack(s?1:0,d?1:0,x||0,T||0),_.emplaceBack(s?1:0,d?1:0,x||0,T||0)}const da=Math.pow(2,25),Ni=Math.pow(2,24),Sf=Math.pow(2,17),Bh=Math.pow(2,16),xa=Math.pow(2,9),oa=Math.pow(2,8),Fh=Math.pow(2,1);function Ns(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const s=_.placed?1:0,d=Math.floor(127*_.opacity);return d*da+s*Ni+d*Sf+s*Bh+d*xa+s*oa+d*Fh+s}const Qr=0;class oc{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(s,d,x,T,M){const z=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(z,T,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort(((D,j)=>D.sortKey-j.sortKey)));this._currentPartIndex<z.length;){const D=z[this._currentPartIndex];if(d.placeLayerBucketPart(D,this._seenCrossTileIDs,x,D.symbolInstanceStart===0),this._currentPartIndex++,M())return!0}return!1}}class iu{constructor(s,d,x,T,M,z,D,j){this.placement=new ru(s,M,z,D,j),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(s,d,x){const T=a.exported.now(),M=()=>{const z=a.exported.now()-T;return!this._forceFullPlacement&&z>2};for(;this._currentPlacementIndex>=0;){const z=d[s[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=D)&&(!z.maxzoom||z.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new oc(z)),this._inProgressLayer.continuePlacement(x[z.source],this.placement,this._showCollisionBoxes,z,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const fl=512/a.EXTENT/2;class sa{constructor(s,d,x){this.tileID=s,this.bucketInstanceId=x,this.index=new a.KDBush(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const T=s.canonical.x*a.EXTENT,M=s.canonical.y*a.EXTENT;for(let z=0;z<d.length;z++){const{key:D,crossTileID:j,tileAnchorX:W,tileAnchorY:H}=d.get(z),ne=Math.floor((T+W)*fl),he=Math.floor((M+H)*fl);this.index.add(ne,he),this.keys.push(D),this.crossTileIDs.push(j)}this.index.finish()}findMatches(s,d,x){const T=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),M=fl/Math.pow(2,d.canonical.z-this.tileID.canonical.z),z=d.canonical.x*a.EXTENT,D=d.canonical.y*a.EXTENT;for(let j=0;j<s.length;j++){const W=s.get(j);if(W.crossTileID)continue;const{key:H,tileAnchorX:ne,tileAnchorY:he}=W,ve=Math.floor((z+ne)*M),we=Math.floor((D+he)*M),xe=this.index.range(ve-T,we-T,ve+T,we+T);for(const Ee of xe){const ie=this.crossTileIDs[Ee];if(this.keys[Ee]===H&&!x.has(ie)){x.add(ie),W.crossTileID=ie;break}}}}}class au{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const x in this.indexes){const T=this.indexes[x],M={};for(const z in T){const D=T[z];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+d),M[D.tileID.key]=D}this.indexes[x]=M}this.lng=s}addBucket(s,d,x){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let M=0;M<d.symbolInstances.length;M++)d.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]=new Set);const T=this.usedCrossTileIDs[s.overscaledZ];for(const M in this.indexes){const z=this.indexes[M];if(Number(M)>s.overscaledZ)for(const D in z){const j=z[D];j.tileID.isChildOf(s)&&j.findMatches(d.symbolInstances,s,T)}else{const D=z[s.scaledTo(Number(M)).key];D&&D.findMatches(d.symbolInstances,s,T)}}for(let M=0;M<d.symbolInstances.length;M++){const z=d.symbolInstances.get(M);z.crossTileID||(z.crossTileID=x.generate(),T.add(z.crossTileID))}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new sa(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const x of d.crossTileIDs)this.usedCrossTileIDs[s].delete(x)}removeStaleBuckets(s){let d=!1;for(const x in this.indexes){const T=this.indexes[x];for(const M in T)s[T[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,T[M]),delete T[M],d=!0)}return d}}class Ki{constructor(){this.layerIndexes={},this.crossTileIDs=new au,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,x,T){let M=this.layerIndexes[s.id];M===void 0&&(M=this.layerIndexes[s.id]=new jh);let z=!1;const D={};T.name!=="globe"&&M.handleWrapJump(x);for(const j of d){const W=j.getBucket(s);W&&s.id===W.layerIds[0]&&(W.bucketInstanceId||(W.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(j.tileID,W,this.crossTileIDs)&&(z=!0),D[W.bucketInstanceId]=!0)}return M.removeStaleBuckets(D)&&(z=!0),z}pruneUnusedLayers(s){const d={};s.forEach((x=>{d[x]=!0}));for(const x in this.layerIndexes)d[x]||delete this.layerIndexes[x]}}const so=(_,s)=>a.emitValidationErrors(_,s&&s.filter((d=>d.identifier!=="source.canvas"))),sc=a.pick(On,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Tf=a.pick(On,["setCenter","setZoom","setBearing","setPitch"]),sp={version:8,layers:[],sources:{}},hl={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class zo extends a.Evented{constructor(s,d={}){super(),this.map=s,this.dispatcher=new Ce(qn(),this),this.imageManager=new se,this.imageManager.setEventedParent(this),this.glyphManager=new a.GlyphManager(s._requestManager,d.localFontFamily?a.LocalGlyphMode.all:d.localIdeographFontFamily?a.LocalGlyphMode.ideographs:a.LocalGlyphMode.none,d.localFontFamily||d.localIdeographFontFamily),this.crossTileSymbolIndex=new Ki,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const x=this;this._rtlTextPluginCallback=zo.registerForPluginStateChange((T=>{x.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:T.pluginStatus,pluginURL:T.pluginURL},((M,z)=>{if(a.triggerPluginCompletionEvent(M),z&&z.every((D=>D)))for(const D in x._sourceCaches){const j=x._sourceCaches[D],W=j.getSource().type;W!=="vector"&&W!=="geojson"||j.reload()}}))})),this.on("data",(T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const M=this.getSource(T.sourceId);if(M&&M.vectorLayerIds)for(const z in this._layers){const D=this._layers[z];D.source===M.id&&this._validateLayer(D)}}))}loadURL(s,d={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const x=typeof d.validate=="boolean"?d.validate:!a.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,d.accessToken);const T=this.map._requestManager.transformRequest(s,a.ResourceType.Style);this._request=a.getJSON(T,((M,z)=>{this._request=null,M?this.fire(new a.ErrorEvent(M)):z&&this._load(z,x)}))}loadJSON(s,d={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame((()=>{this._request=null,this._load(s,d.validate!==!1)}))}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(sp,!1)}_updateLayerCount(s,d){const x=d?1:-1;s.is3D()&&(this._num3DLayers+=x),s.type==="circle"&&(this._numCircleLayers+=x),s.type==="symbol"&&(this._numSymbolLayers+=x)}_load(s,d){if(d&&so(this,a.validateStyle(s)))return;this._loaded=!0,this.stylesheet=a.clone$1(s),this._updateMapProjection();for(const T in s.sources)this.addSource(T,s.sources[T],{validate:!1});this._changed=!1,s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(s.glyphs);const x=gr(this.stylesheet.layers);this._order=x.map((T=>T.id)),this._layers={},this._serializedLayers={};for(const T of x){const M=a.createStyleLayer(T);M.setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new be(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(s){this._spriteRequest=(function(d,x,T){let M,z,D;const j=a.exported.devicePixelRatio>1?"@2x":"";let W=a.getJSON(x.transformRequest(x.normalizeSpriteURL(d,j,".json"),a.ResourceType.SpriteJSON),((he,ve)=>{W=null,D||(D=he,M=ve,ne())})),H=a.getImage(x.transformRequest(x.normalizeSpriteURL(d,j,".png"),a.ResourceType.SpriteImage),((he,ve)=>{H=null,D||(D=he,z=ve,ne())}));function ne(){if(D)T(D);else if(M&&z){const he=a.exported.getImageData(z),ve={};for(const we in M){const{width:xe,height:Ee,x:ie,y:ye,sdf:ke,pixelRatio:ze,stretchX:Ve,stretchY:We,content:He}=M[we],Je=new a.RGBAImage({width:xe,height:Ee});a.RGBAImage.copy(he,Je,{x:ie,y:ye},{x:0,y:0},{width:xe,height:Ee}),ve[we]={data:Je,pixelRatio:ze,sdf:ke,stretchX:Ve,stretchY:We,content:He}}T(null,ve)}}return{cancel(){W&&(W.cancel(),W=null),H&&(H.cancel(),H=null)}}})(s,this.map._requestManager,((d,x)=>{if(this._spriteRequest=null,d)this.fire(new a.ErrorEvent(d));else if(x)for(const T in x)this.imageManager.addImage(T,x[T]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new a.Event("data",{dataType:"style"}))}))}_validateLayer(s){const d=this.getSource(s.source);if(!d)return;const x=s.sourceLayer;x&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(x)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${x}" does not exist on source "${d.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const d=[];for(const x of s){const T=this._layers[x];T.type!=="custom"&&d.push(T.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(s){return!!this.terrain&&(typeof s.isLayerDraped=="function"?s.isLayerDraped():hl[s.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(s){if(!this._loaded)return;const d=this._changed;if(this._changed){const T=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(T.length||M.length)&&this._updateWorkerLayers(T,M);for(const z in this._updatedSources){const D=this._updatedSources[z];D==="reload"?this._reloadSource(z):D==="clear"&&this._clearSource(z)}this._updateTilesForChangedImages();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(s);this.light.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._resetUpdates()}const x={};for(const T in this._sourceCaches){const M=this._sourceCaches[T];x[T]=M.used,M.used=!1}for(const T of this._order){const M=this._layers[T];if(M.recalculate(s,this._availableImages),!M.isHidden(s.zoom)){const D=this._getLayerSourceCache(M);D&&(D.used=!0)}const z=this.map.painter;if(z){const D=M.getProgramIds();if(!D)continue;const j=M.getProgramConfiguration(s.zoom);for(const W of D)z.useProgram(W,j)}}for(const T in x){const M=this._sourceCaches[T];x[T]!==M.used&&M.getSource().fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:M.getSource().id}))}this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),d&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(s){if(this._checkLoaded(),so(this,a.validateStyle(s)))return!1;(s=a.clone$1(s)).layers=gr(s.layers);const d=(function(T,M){if(!T)return[{command:On.setStyle,args:[M]}];let z=[];try{if(!E(T.version,M.version))return[{command:On.setStyle,args:[M]}];E(T.center,M.center)||z.push({command:On.setCenter,args:[M.center]}),E(T.zoom,M.zoom)||z.push({command:On.setZoom,args:[M.zoom]}),E(T.bearing,M.bearing)||z.push({command:On.setBearing,args:[M.bearing]}),E(T.pitch,M.pitch)||z.push({command:On.setPitch,args:[M.pitch]}),E(T.sprite,M.sprite)||z.push({command:On.setSprite,args:[M.sprite]}),E(T.glyphs,M.glyphs)||z.push({command:On.setGlyphs,args:[M.glyphs]}),E(T.transition,M.transition)||z.push({command:On.setTransition,args:[M.transition]}),E(T.light,M.light)||z.push({command:On.setLight,args:[M.light]}),E(T.fog,M.fog)||z.push({command:On.setFog,args:[M.fog]}),E(T.projection,M.projection)||z.push({command:On.setProjection,args:[M.projection]});const D={},j=[];(function(ne,he,ve,we){let xe;for(xe in he=he||{},ne=ne||{})ne.hasOwnProperty(xe)&&(he.hasOwnProperty(xe)||Wn(xe,ve,we));for(xe in he){if(!he.hasOwnProperty(xe))continue;const Ee=he[xe];ne.hasOwnProperty(xe)?E(ne[xe],Ee)||(ne[xe].type==="geojson"&&Ee.type==="geojson"&&mi(ne,he,xe)?ve.push({command:On.setGeoJSONSourceData,args:[xe,Ee.data]}):Ur(xe,he,ve,we)):Er(xe,he,ve)}})(T.sources,M.sources,j,D);const W=[];T.layers&&T.layers.forEach((ne=>{ne.source&&D[ne.source]?z.push({command:On.removeLayer,args:[ne.id]}):W.push(ne)}));let H=T.terrain;H&&D[H.source]&&(z.push({command:On.setTerrain,args:[void 0]}),H=void 0),z=z.concat(j),E(H,M.terrain)||z.push({command:On.setTerrain,args:[M.terrain]}),(function(ne,he,ve){he=he||[];const we=(ne=ne||[]).map(Aa),xe=he.map(Aa),Ee=ne.reduce(ea,{}),ie=he.reduce(ea,{}),ye=we.slice(),ke=Object.create(null);let ze,Ve,We,He,Je,Ke,ct;for(ze=0,Ve=0;ze<we.length;ze++)We=we[ze],ie.hasOwnProperty(We)?Ve++:(ve.push({command:On.removeLayer,args:[We]}),ye.splice(ye.indexOf(We,Ve),1));for(ze=0,Ve=0;ze<xe.length;ze++)We=xe[xe.length-1-ze],ye[ye.length-1-ze]!==We&&(Ee.hasOwnProperty(We)?(ve.push({command:On.removeLayer,args:[We]}),ye.splice(ye.lastIndexOf(We,ye.length-Ve),1)):Ve++,Ke=ye[ye.length-ze],ve.push({command:On.addLayer,args:[ie[We],Ke]}),ye.splice(ye.length-ze,0,We),ke[We]=!0);for(ze=0;ze<xe.length;ze++)if(We=xe[ze],He=Ee[We],Je=ie[We],!ke[We]&&!E(He,Je))if(E(He.source,Je.source)&&E(He["source-layer"],Je["source-layer"])&&E(He.type,Je.type)){for(ct in Ji(He.layout,Je.layout,ve,We,null,On.setLayoutProperty),Ji(He.paint,Je.paint,ve,We,null,On.setPaintProperty),E(He.filter,Je.filter)||ve.push({command:On.setFilter,args:[We,Je.filter]}),E(He.minzoom,Je.minzoom)&&E(He.maxzoom,Je.maxzoom)||ve.push({command:On.setLayerZoomRange,args:[We,Je.minzoom,Je.maxzoom]}),He)He.hasOwnProperty(ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?Ji(He[ct],Je[ct],ve,We,ct.slice(6),On.setPaintProperty):E(He[ct],Je[ct])||ve.push({command:On.setLayerProperty,args:[We,ct,Je[ct]]}));for(ct in Je)Je.hasOwnProperty(ct)&&!He.hasOwnProperty(ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?Ji(He[ct],Je[ct],ve,We,ct.slice(6),On.setPaintProperty):E(He[ct],Je[ct])||ve.push({command:On.setLayerProperty,args:[We,ct,Je[ct]]}))}else ve.push({command:On.removeLayer,args:[We]}),Ke=ye[ye.lastIndexOf(We)+1],ve.push({command:On.addLayer,args:[Je,Ke]})})(W,M.layers,z)}catch(D){console.warn("Unable to compute style diff:",D),z=[{command:On.setStyle,args:[M]}]}return z})(this.serialize(),s).filter((T=>!(T.command in Tf)));if(d.length===0)return!1;const x=d.filter((T=>!(T.command in sc)));if(x.length>0)throw new Error(`Unimplemented: ${x.map((T=>T.command)).join(", ")}.`);return d.forEach((T=>{T.command!=="setTransition"&&T.command!=="setProjection"&&this[T.command].apply(this,T.args)})),this.stylesheet=s,this._updateMapProjection(),!0}addImage(s,d){return this.getImage(s)?this.fire(new a.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,d),this._afterImageUpdated(s),this)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s),this._afterImageUpdated(s),this):this.fire(new a.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(s,d,x={}){if(this._checkLoaded(),this.getSource(s)!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.validateSource,`sources.${s}`,d,null,x))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const T=Bn(s,d,this.dispatcher,this);T.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(s),source:T.serialize(),sourceId:s})));const M=z=>{const D=(z?"symbol:":"other:")+s,j=this._sourceCaches[D]=new a.SourceCache(D,T,z);(z?this._symbolSourceCaches:this._otherSourceCaches)[s]=j,j.style=this,j.onAdd(this.map)};M(!1),d.type!=="vector"&&d.type!=="geojson"||M(!0),T.onAdd&&T.onAdd(this.map),this._changed=!0}removeSource(s){this._checkLoaded();const d=this.getSource(s);if(!d)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===s)return this.fire(new a.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${T}" is using it.`)));if(this.terrain&&this.terrain.get().source===s)return this.fire(new a.ErrorEvent(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const x=this._getSourceCaches(s);for(const T of x)delete this._sourceCaches[T.id],delete this._updatedSources[T.id],T.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:T.getSource().id})),T.setEventedParent(null),T.clearTiles();return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(s,d){this._checkLoaded(),this.getSource(s).setData(d),this._changed=!0}getSource(s){const d=this._getSourceCache(s);return d&&d.getSource()}_getSources(){const s=[];for(const d in this._otherSourceCaches){const x=this._getSourceCache(d);x&&s.push(x.getSource())}return s}addLayer(s,d,x={}){this._checkLoaded();const T=s.id;if(this.getLayer(T))return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${T}" already exists on this map`)));let M;if(s.type==="custom"){if(so(this,a.validateCustomStyleLayer(s)))return;M=a.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(T,s.source),s=a.clone$1(s),s=a.extend(s,{source:T})),this._validate(a.validateLayer,`layers.${T}`,s,{arrayIndex:-1},x))return;M=a.createStyleLayer(s),this._validateLayer(M),M.setEventedParent(this,{layer:{id:T}}),this._serializedLayers[M.id]=M.serialize(),this._updateLayerCount(M,!0)}const z=d?this._order.indexOf(d):this._order.length;if(d&&z===-1)return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`)));this._order.splice(z,0,T),this._layerOrderChanged=!0,this._layers[T]=M;const D=this._getLayerSourceCache(M);if(this._removedLayers[T]&&M.source&&D&&M.type!=="custom"){const j=this._removedLayers[T];delete this._removedLayers[T],j.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",D.pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const x=this._order.indexOf(s);this._order.splice(x,1);const T=d?this._order.indexOf(d):this._order.length;d&&T===-1?this.fire(new a.ErrorEvent(new Error(`Layer with id "${d}" does not exist on this map.`))):(this._order.splice(T,0,s),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be removed.`)));d.setEventedParent(null),this._updateLayerCount(d,!1);const x=this._order.indexOf(s);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}hasLayerType(s){for(const d in this._layers)if(this._layers[d].type===s)return!0;return!1}setLayerZoomRange(s,d,x){this._checkLoaded();const T=this.getLayer(s);T?T.minzoom===d&&T.maxzoom===x||(d!=null&&(T.minzoom=d),x!=null&&(T.maxzoom=x),this._updateLayer(T)):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(s,d,x={}){this._checkLoaded();const T=this.getLayer(s);if(T){if(!E(T.filter,d))return d==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(a.validateFilter,`layers.${T.id}.filter`,d,{layerType:T.type},x)||(T.filter=a.clone$1(d),this._updateLayer(T)))}else this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be filtered.`)))}getFilter(s){const d=this.getLayer(s);return d&&a.clone$1(d.filter)}setLayoutProperty(s,d,x,T={}){this._checkLoaded();const M=this.getLayer(s);M?E(M.getLayoutProperty(d),x)||(M.setLayoutProperty(d,x,T),this._updateLayer(M)):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(s,d){const x=this.getLayer(s);if(x)return x.getLayoutProperty(d);this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style.`)))}setPaintProperty(s,d,x,T={}){this._checkLoaded();const M=this.getLayer(s);M?E(M.getPaintProperty(d),x)||(M.setPaintProperty(d,x,T)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(s,d){const x=this.getLayer(s);return x&&x.getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const x=s.source,T=s.sourceLayer,M=this.getSource(x);if(!M)return void this.fire(new a.ErrorEvent(new Error(`The source '${x}' does not exist in the map's style.`)));const z=M.type;if(z==="geojson"&&T)return void this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(z==="vector"&&!T)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided.")));const D=this._getSourceCaches(x);for(const j of D)j.setFeatureState(T,s.id,d)}removeFeatureState(s,d){this._checkLoaded();const x=s.source,T=this.getSource(x);if(!T)return void this.fire(new a.ErrorEvent(new Error(`The source '${x}' does not exist in the map's style.`)));const M=T.type,z=M==="vector"?s.sourceLayer:void 0;if(M==="vector"&&!z)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const D=this._getSourceCaches(x);for(const j of D)j.removeFeatureState(z,s.id,d)}getFeatureState(s){this._checkLoaded();const d=s.source,x=s.sourceLayer,T=this.getSource(d);if(T){if(T.type!=="vector"||x)return s.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(d)[0].getFeatureState(x,s.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const s={};for(const d in this._sourceCaches){const x=this._sourceCaches[d].getSource();s[x.id]||(s[x.id]=x.serialize())}return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:s,layers:this._serializeLayers(this._order)},(d=>d!==void 0))}_updateLayer(s){this._updatedLayers[s.id]=!0;const d=this._getLayerSourceCache(s);s.source&&!this._updatedSources[s.source]&&d&&d.getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",d.pause()),this._changed=!0,s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const d=z=>this._layers[z].type==="fill-extrusion",x={},T=[];for(let z=this._order.length-1;z>=0;z--){const D=this._order[z];if(d(D)){x[D]=z;for(const j of s){const W=j[D];if(W)for(const H of W)T.push(H)}}}T.sort(((z,D)=>D.intersectionZ-z.intersectionZ));const M=[];for(let z=this._order.length-1;z>=0;z--){const D=this._order[z];if(d(D))for(let j=T.length-1;j>=0;j--){const W=T[j].feature;if(x[W.layer.id]<z)break;M.push(W),T.pop()}else for(const j of s){const W=j[D];if(W)for(const H of W)M.push(H.feature)}}return M}queryRenderedFeatures(s,d,x){d&&d.filter&&this._validate(a.validateFilter,"queryRenderedFeatures.filter",d.filter,null,d);const T={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const j of d.layers){const W=this._layers[j];if(!W)return this.fire(new a.ErrorEvent(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];T[W.source]=!0}}const M=[];d.availableImages=this._availableImages;const z=d&&d.layers?d.layers.some((j=>{const W=this.getLayer(j);return W&&W.is3D()})):this.has3DLayers(),D=at.createFromScreenPoints(s,x);for(const j in this._sourceCaches){const W=this._sourceCaches[j].getSource().id;d.layers&&!T[W]||M.push(nr(this._sourceCaches[j],this._layers,this._serializedLayers,D,d,x,z,!!this.map._showQueryGeometry))}return this.placement&&M.push((function(j,W,H,ne,he,ve,we){const xe={},Ee=ve.queryRenderedSymbols(ne),ie=[];for(const ye of Object.keys(Ee).map(Number))ie.push(we[ye]);ie.sort(pr);for(const ye of ie){const ke=ye.featureIndex.lookupSymbolFeatures(Ee[ye.bucketInstanceId],W,ye.bucketIndex,ye.sourceLayerIndex,he.filter,he.layers,he.availableImages,j);for(const ze in ke){const Ve=xe[ze]=xe[ze]||[],We=ke[ze];We.sort(((He,Je)=>{const Ke=ye.featureSortOrder;if(Ke){const ct=Ke.indexOf(He.featureIndex);return Ke.indexOf(Je.featureIndex)-ct}return Je.featureIndex-He.featureIndex}));for(const He of We)Ve.push(He)}}for(const ye in xe)xe[ye].forEach((ke=>{const ze=ke.feature,Ve=H(j[ye]);if(!Ve)return;const We=Ve.getFeatureState(ze.layer["source-layer"],ze.id);ze.source=ze.layer.source,ze.layer["source-layer"]&&(ze.sourceLayer=ze.layer["source-layer"]),ze.state=We}));return xe})(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),D.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(s,d){d&&d.filter&&this._validate(a.validateFilter,"querySourceFeatures.filter",d.filter,null,d);const x=this._getSourceCaches(s);let T=[];for(const M of x)T=T.concat(Fn(M,d));return T}addSourceType(s,d,x){return zo.getSourceType(s)?x(new Error(`A source type called "${s}" already exists.`)):(zo.setSourceType(s,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:d.workerSourceURL},x):x(null,null))}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const x=this.light.getLight();let T=!1;for(const z in s)if(!E(s[z],x[z])){T=!0;break}if(!T)return;const M=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(s,d),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(s,d=1){if(this._checkLoaded(),!s)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let x=s;if(d===1){if(typeof x.source=="object"){const T="terrain-dem-src";this.addSource(T,x.source),x=a.clone$1(x),x=a.extend(x,{source:T})}if(this._validate(a.validateTerrain,"terrain",x))return}if(!this.terrain||this.terrain&&d!==this.terrain.drapeRenderMode){if(!x)return;this._createTerrain(x,d)}else{const T=this.terrain,M=T.get();for(const z of Object.keys(a.spec.terrain))!x.hasOwnProperty(z)&&a.spec.terrain[z].default&&(x[z]=a.spec.terrain[z].default);for(const z in x)if(!E(x[z],M[z])){T.set(x),this.stylesheet.terrain=x;const D=this._setTransitionParameters({duration:0});T.updateTransitions(D);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const d=this.fog=new dt(s,this.map.transform);this.stylesheet.fog=s;const x=this._setTransitionParameters({duration:0});d.updateTransitions(x)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask((()=>{for(const s of this.map._markers)s._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog,x=d.get();Object.keys(s).length===0&&d.set(s);for(const T in s)if(!E(s[T],x[T])){d.set(s),this.stylesheet.fog=s;const M=this._setTransitionParameters({duration:0});d.updateTransitions(M);break}}else this._createFog(s);this._markersNeedUpdate=!0}_setTransitionParameters(s){return{now:a.exported.now(),transition:a.extend(s,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const s=this._order.filter((x=>this.isLayerDraped(this._layers[x]))),d=this._order.filter((x=>!this.isLayerDraped(this._layers[x])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...d)}_createTerrain(s,d){const x=this.terrain=new pe(s,d);this.stylesheet.terrain=s,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const T=this._setTransitionParameters({duration:0});x.updateTransitions(T)}_force3DLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const d=this._layers[s];d.type==="symbol"&&this._updateLayer(d)}}_validate(s,d,x,T,M={}){return(!M||M.validate!==!1)&&so(this,s.call(a.validateStyle,a.extend({key:d,style:this.serialize(),value:x,styleSpec:a.spec},T)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this._sourceCaches)this._sourceCaches[s].clearTiles(),this._sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){const d=this._getSourceCaches(s);for(const x of d)x.clearTiles()}_reloadSource(s){const d=this._getSourceCaches(s);for(const x of d)x.resume(),x.reload()}_reloadSources(){for(const s of this._getSources())s.reload&&s.reload()}_updateSources(s){for(const d in this._sourceCaches)this._sourceCaches[d].update(s)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const d=this._sourceCaches[s];d.resume(),d.reload()}}_updatePlacement(s,d,x,T,M=!1){let z=!1,D=!1;const j={};for(const W of this._order){const H=this._layers[W];if(H.type!=="symbol")continue;if(!j[H.source]){const he=this._getLayerSourceCache(H);if(!he)continue;j[H.source]=he.getRenderableIds(!0).map((ve=>he.getTileByID(ve))).sort(((ve,we)=>we.tileID.overscaledZ-ve.tileID.overscaledZ||(ve.tileID.isLessThan(we.tileID)?-1:1)))}const ne=this.crossTileSymbolIndex.addLayer(H,j[H.source],s.center.lng,s.projection);z=z||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),M=M||this._layerOrderChanged||x===0,this._layerOrderChanged&&this.fire(new a.Event("neworder")),(M||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),s.zoom))&&(this.pauseablePlacement=new iu(s,this._order,M,d,x,T,this.placement,this.fog&&s.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,j),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),D=!0),z&&this.pauseablePlacement.placement.setStale()),D||z)for(const W of this._order){const H=this._layers[W];H.type==="symbol"&&this.placement.updateLayerOpacities(H,j[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d,x){this.imageManager.getImages(d.icons,x),this._updateTilesForChangedImages();const T=M=>{M&&M.setDependencies(d.tileID.key,d.type,d.icons)};T(this._otherSourceCaches[d.source]),T(this._symbolSourceCaches[d.source])}getGlyphs(s,d,x){this.glyphManager.getGlyphs(d.stacks,x)}getResource(s,d,x){return a.makeRequest(d,x)}_getSourceCache(s){return this._otherSourceCaches[s]}_getLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}_getSourceCaches(s){const d=[];return this._otherSourceCaches[s]&&d.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&d.push(this._symbolSourceCaches[s]),d}_isSourceCacheLoaded(s){const d=this._getSourceCaches(s);return d.length===0?(this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${s}'`))),!1):d.every((x=>x.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}zo.getSourceType=function(_){return In[_]},zo.setSourceType=function(_,s){In[_]=s},zo.registerForPluginStateChange=a.registerForPluginStateChange;var lc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,_s="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",vs=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Ef=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Us=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Nh={},dl={};const Cf=[];cc(lc,Cf),cc(vs,Cf),cc(Ef,Cf),cc(Us,Cf),Nh=Or("",vs),dl=Or(Us,Ef);const Vm=Or(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Uh=lc,lp=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var cp={background:Or(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Or(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Or(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Or("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Or(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Or(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Or(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Or(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Or(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Or(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Or(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Or(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Or(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_s),skyboxGradient:Or(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_s),skyboxCapture:Or(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Or(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Or(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function cc(_,s){const d=_.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let x of d)if(x=x.trim(),x[0]==="#"&&x.includes("if")&&!x.includes("endif")){x=x.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const T=x.split(" ");for(const M of T)s.includes(M)||s.push(M)}}function Or(_,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=s.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),T={},M=[...Cf];return cc(_,M),cc(s,M),{fragmentSource:_=_.replace(d,((z,D,j,W,H)=>(T[H]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${H}
varying ${j} ${W} ${H};
#else
uniform ${j} ${W} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${j} ${W} ${H} = u_${H};
#endif
`))),vertexSource:s=s.replace(d,((z,D,j,W,H)=>{const ne=W==="float"?"vec2":"vec4",he=H.match(/color/)?"color":ne;return T[H]?D==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${j} ${ne} a_${H};
varying ${j} ${W} ${H};
#else
uniform ${j} ${W} u_${H};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${j} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${he}(a_${H}, u_${H}_t);
#else
    ${j} ${W} ${H} = u_${H};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${j} ${ne} a_${H};
#else
uniform ${j} ${W} u_${H};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${j} ${W} ${H} = a_${H};
#else
    ${j} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${j} ${W} ${H} = unpack_mix_${he}(a_${H}, u_${H}_t);
#else
    ${j} ${W} ${H} = u_${H};
#endif
`})),staticAttributes:x,usedDefines:M}}class Wy{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,d,x,T,M,z,D){this.context=s;let j=this.boundPaintVertexBuffers.length!==T.length;for(let H=0;!j&&H<T.length;H++)this.boundPaintVertexBuffers[H]!==T[H]&&(j=!0);let W=this.boundDynamicVertexBuffers.length!==D.length;for(let H=0;!W&&H<D.length;H++)this.boundDynamicVertexBuffers[H]!==D[H]&&(W=!0);if(!s.extVertexArrayObject||!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==x||j||W||this.boundIndexBuffer!==M||this.boundVertexOffset!==z)this.freshBind(d,x,T,M,z,D);else{s.bindVertexArrayOES.set(this.vao);for(const H of D)H&&H.bind();M&&M.dynamicDraw&&M.bind()}}freshBind(s,d,x,T,M,z){let D;const j=s.numAttributes,W=this.context,H=W.gl;if(W.extVertexArrayObject)this.vao&&this.destroy(),this.vao=W.extVertexArrayObject.createVertexArrayOES(),W.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=T,this.boundVertexOffset=M,this.boundDynamicVertexBuffers=z;else{D=W.currentNumAttributes||0;for(let ne=j;ne<D;ne++)H.disableVertexAttribArray(ne)}d.enableAttributes(H,s),d.bind(),d.setVertexAttribPointers(H,s,M);for(const ne of x)ne.enableAttributes(H,s),ne.bind(),ne.setVertexAttribPointers(H,s,M);for(const ne of z)ne&&(ne.enableAttributes(H,s),ne.bind(),ne.setVertexAttribPointers(H,s,M));T&&T.bind(),W.currentNumAttributes=j}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function up(_,s){const d=Math.pow(2,s.canonical.z),x=s.canonical.y;return[new a.MercatorCoordinate(0,x/d).toLngLat().lat,new a.MercatorCoordinate(0,(x+1)/d).toLngLat().lat]}function Gm(_,s,d,x,T,M,z){const D=_.context,j=D.gl,W=d.fbo;if(!W)return;_.prepareDrawTile();const H=_.useProgram("hillshade");D.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,W.colorAttachment.get());const ne=((xe,Ee,ie,ye)=>{const ke=ie.paint.get("hillshade-shadow-color"),ze=ie.paint.get("hillshade-highlight-color"),Ve=ie.paint.get("hillshade-accent-color");let We=ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=xe.transform.angle);const He=!xe.options.moving;return{u_matrix:ye||xe.transform.calculateProjMatrix(Ee.tileID.toUnwrapped(),He),u_image:0,u_latrange:up(0,Ee.tileID),u_light:[ie.paint.get("hillshade-exaggeration"),We],u_shadow:ke,u_highlight:ze,u_accent:Ve}})(_,d,x,_.terrain?s.projMatrix:null);_.prepareDrawProgram(D,H,s.toUnwrapped());const{tileBoundsBuffer:he,tileBoundsIndexBuffer:ve,tileBoundsSegments:we}=_.getTileBoundsBuffers(d);H.draw(D,j.TRIANGLES,T,M,z,a.CullFaceMode.disabled,ne,x.id,he,ve,we)}function Mf(_,s,d){if(!s.needsDEMTextureUpload)return;const x=_.context,T=x.gl;x.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||_.getTileTexture(d.stride);const M=d.getPixels();s.demTexture?s.demTexture.update(M,{premultiply:!1}):s.demTexture=new a.Texture(x,M,T.RGBA,{premultiply:!1}),s.needsDEMTextureUpload=!1}function Hm(_,s,d,x,T,M){const z=_.context,D=z.gl;if(!s.dem)return;const j=s.dem;if(z.activeTexture.set(D.TEXTURE1),Mf(_,s,j),!s.demTexture)return;s.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);const W=j.dim;z.activeTexture.set(D.TEXTURE0);let H=s.fbo;if(!H){const we=new a.Texture(z,{width:W,height:W,data:null},D.RGBA);we.bind(D.LINEAR,D.CLAMP_TO_EDGE),H=s.fbo=z.createFramebuffer(W,W,!0),H.colorAttachment.set(we.texture)}z.bindFramebuffer.set(H.framebuffer),z.viewport.set([0,0,W,W]);const{tileBoundsBuffer:ne,tileBoundsIndexBuffer:he,tileBoundsSegments:ve}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(z,D.TRIANGLES,x,T,M,a.CullFaceMode.disabled,((we,xe)=>{const Ee=xe.stride,ie=a.create();return a.ortho(ie,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(ie,ie,[0,-a.EXTENT,0]),{u_matrix:ie,u_image:1,u_dimension:[Ee,Ee],u_zoom:we.overscaledZ,u_unpack:xe.unpackVector}})(s.tileID,j),d.id,ne,he,ve),s.needsHillshadePrepare=!1}const fp=_=>({u_matrix:new a.UniformMatrix4f(_),u_image0:new a.Uniform1i(_),u_skirt_height:new a.Uniform1f(_)}),ou=(_,s)=>({u_matrix:_,u_image0:0,u_skirt_height:s}),Af=(_,s,d,x,T,M,z,D,j,W,H,ne,he,ve,we)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(x),u_merc_matrix:d,u_zoom_transition:T,u_merc_center:M,u_image0:0,u_frustum_tl:z,u_frustum_tr:D,u_frustum_br:j,u_frustum_bl:W,u_globe_pos:H,u_globe_radius:ne,u_viewport:he,u_grid_matrix:we?Float32Array.from(we):new Float32Array(9),u_skirt_height:ve});function su(_,s){return _!=null&&s!=null&&!(!_.hasData()||!s.hasData())&&_.demTexture!=null&&s.demTexture!=null&&_.tileID.key!==s.tileID.key}const $s=new class{constructor(){this.operations={}}newMorphing(_,s,d,x,T){if(_ in this.operations){const M=this.operations[_];M.to.tileID.key!==d.tileID.key&&(M.queued=d)}else this.operations[_]={startTime:x,phase:0,duration:T,from:s,to:d,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const s=this.operations[_];return{from:s.from,to:s.to,phase:s.phase}}update(_){for(const s in this.operations){const d=this.operations[s];for(d.phase=(_-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,_)){delete this.operations[s];break}}}_nextOp(_,s){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=s,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},uc={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function $h(_){return 6*Math.pow(1.5,22-_)}function Wm(_,s){const d=1<<_.z;return!s&&(_.x===0||_.x===d-1)||_.y===0||_.y===d-1}const Rf=_=>({u_matrix:_});function hp(_,s,d,x,T){if(T>0){const M=a.exported.now(),z=(M-_.timeAdded)/T,D=s?(M-s.timeAdded)/T:-1,j=d.getSource(),W=x.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),H=!s||Math.abs(s.tileID.overscaledZ-W)>Math.abs(_.tileID.overscaledZ-W),ne=H&&_.refreshedUponExpiration?1:a.clamp(H?z:1-D,0,1);return _.refreshedUponExpiration&&z>=1&&(_.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ne}:{opacity:ne,mix:0}}return{opacity:1,mix:0}}class dp extends a.SourceCache{constructor(s){const d={type:"raster-dem",maxzoom:s.transform.maxZoom},x=new Ce(qn(),null),T=Bn("mock-dem",d,x,s.style);super("mock-dem",T,!1),T.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,d){s.state="loaded",d(null)}}class qh extends a.SourceCache{constructor(s){const d=Bn("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new Ce(qn(),null),s.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,d,x){if(s.freezeTileCoverage)return;this.transform=s;const T=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((M,z)=>{if(M[z.key]="",!this._tiles[z.key]){const D=new a.Tile(z,this._source.tileSize*z.overscaleFactor(),s.tileZoom);D.state="loaded",this._tiles[z.key]=D}return M}),{});for(const M in this._tiles)M in T||(this.freeFBO(M),this._tiles[M].unloadVectorData(),delete this._tiles[M])}freeFBO(s){const d=this.proxyCachedFBO[s];if(d!==void 0){const x=Object.values(d);this.renderCachePool.push(...x),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach((s=>s.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class lu extends a.OverscaledTileID{constructor(s,d,x){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=d,this.projMatrix=x}}class fc extends a.Elevation{constructor(s,d){super(),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[x,T,M]=(function(j){const W=new a.StructArrayLayout2i4,H=new a.StructArrayLayout3ui6,ne=131;W.reserve(17161),H.reserve(33800);const he=a.EXTENT/128,ve=a.EXTENT+he/2,we=ve+he;for(let Ee=-he;Ee<we;Ee+=he)for(let ie=-he;ie<we;ie+=he){const ye=ie<0||ie>ve||Ee<0||Ee>ve?24575:0,ke=a.clamp(Math.round(ie),0,a.EXTENT),ze=a.clamp(Math.round(Ee),0,a.EXTENT);W.emplaceBack(ke+ye,ze)}const xe=(Ee,ie)=>{const ye=ie*ne+Ee;H.emplaceBack(ye+1,ye,ye+ne),H.emplaceBack(ye+ne,ye+ne+1,ye+1)};for(let Ee=1;Ee<129;Ee++)for(let ie=1;ie<129;ie++)xe(ie,Ee);return[0,129].forEach((Ee=>{for(let ie=0;ie<130;ie++)xe(ie,Ee),xe(Ee,ie)})),[W,H,32768]})(),z=s.context;this.gridBuffer=z.createVertexBuffer(x,a.posAttributes.members),this.gridIndexBuffer=z.createIndexBuffer(T),this.gridSegments=a.SegmentVector.simpleSegment(0,0,x.length,T.length),this.gridNoSkirtSegments=a.SegmentVector.simpleSegment(0,0,x.length,M),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new qh(d.map),this.orthoMatrix=a.create(),a.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.EXTENT,0,a.EXTENT,0,1);const D=z.gl;this._overlapStencilMode=new a.StencilMode({func:D.GEQUAL,mask:255},0,255,D.KEEP,D.KEEP,D.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new dp(d.map)}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),s.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=s,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(s,d,x){if(s&&s.terrain){this._style!==s&&(this.style=s),this.enabled=!0;const T=s.terrain.properties;this.sourceCache=s.terrain.drapeRenderMode===0?this._mockSourceCache:s._getSourceCache(T.get("source")),this._exaggeration=T.get("exaggeration");const M=()=>{this.sourceCache.used&&a.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const z=this.getScaledDemTileSize();this.sourceCache.update(d,z,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,M(),this._initializing=!0),M(),d.updateElevation(!0,x),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const s=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||s.efficiency!==100&&a.warnOnce(`Terrain render cache efficiency is not optimal (${s.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${s.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._sourceCaches)this._style._sourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((s=>s.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,x=this.painter.transform;this._initializing&&(this._initializing=x._centerAltitude===0&&this.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(x.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const T=this.proxyCoords=d.getIds().map((j=>{const W=d.getTileByID(j).tileID;return W.projMatrix=x.calculateProjMatrix(W.toUnwrapped()),W}));(function(j,W){const H=W.transform.pointCoordinate(W.transform.getCameraPoint()),ne=new a.Point(H.x,H.y);j.sort(((he,ve)=>{if(ve.overscaledZ-he.overscaledZ)return ve.overscaledZ-he.overscaledZ;const we=new a.Point(he.canonical.x+(1<<he.canonical.z)*he.wrap,he.canonical.y),xe=new a.Point(ve.canonical.x+(1<<ve.canonical.z)*ve.wrap,ve.canonical.y),Ee=ne.mult(1<<he.canonical.z);return Ee.x-=.5,Ee.y-=.5,Ee.distSqr(we)-Ee.distSqr(xe)}))})(T,this.painter),this._previousZoom=x.zoom;const M=this.proxyToSource||{};this.proxyToSource={},T.forEach((j=>{this.proxyToSource[j.key]={}})),this.terrainTileForTile={};const z=this._style._sourceCaches;for(const j in z){const W=z[j];if(!W.used||(W!==this.sourceCache&&this.resetTileLookupCache(W.id),this._setupProxiedCoordsForOrtho(W,s[j],M),W.usedForTerrain))continue;const H=s[j];W.getSource().reparseOverscaled&&this._assignTerrainTiles(H)}this.proxiedCoords[d.id]=T.map((j=>new lu(j,j.key,this.orthoMatrix))),this._assignTerrainTiles(T),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(M),this.renderingToTexture=!1,this._updateTimestamp=a.exported.now();const D={};this._visibleDemTiles=[];for(const j of this.proxyCoords){const W=this.terrainTileForTile[j.key];if(!W)continue;const H=W.tileID.key;H in D||(this._visibleDemTiles.push(W),D[H]=H)}}_assignTerrainTiles(s){this._initializing||s.forEach((d=>{if(this.terrainTileForTile[d.key])return;const x=this._findTileCoveringTileID(d,this.sourceCache);x&&(this.terrainTileForTile[d.key]=x)}))}_prepareDEMTextures(){const s=this.painter.context,d=s.gl;for(const x in this.terrainTileForTile){const T=this.terrainTileForTile[x],M=T.dem;!M||T.demTexture&&!T.needsDEMTextureUpload||(s.activeTexture.set(d.TEXTURE1),Mf(this.painter,T,M))}}_prepareDemTileUniforms(s,d,x,T){if(!d||d.demTexture==null)return!1;const M=s.tileID.canonical,z=Math.pow(2,d.tileID.canonical.z-M.z),D=T||"";return x[`u_dem_tl${D}`]=[M.x*z%1,M.y*z%1],x[`u_dem_scale${D}`]=z,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const s=this.painter.context,d=s.gl;if(!this._emptyDepthBufferTexture){const x=new a.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.Texture(s,x,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let s=0;const d=this._visibleDemTiles.reduce(((x,T)=>{if(!T.dem)return x;const M=T.dem.tree.minimums[0];return M>0&&s++,x+M}),0);return s?d/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,d=s.gl;s.activeTexture.set(d.TEXTURE2);const x=this._getLoadedAreaMinimum(),T=new a.RGBAImage({width:1,height:1},new Uint8Array(a.DEMData.pack(x,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let M=this._emptyDEMTexture;return M?M.update(T,{premultiply:!1}):M=this._emptyDEMTexture=new a.Texture(s,T,d.RGBA,{premultiply:!1}),M}setupElevationDraw(s,d,x){const T=this.painter.context,M=T.gl,z=(D=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:a.DEMData.getUnpackVector(D),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var D;z.u_dem_size=this.sourceCache.getSource().tileSize,z.u_exaggeration=this.exaggeration();let j=null,W=null,H=1;if(x&&x.morphing&&this._useVertexMorphing){const ne=x.morphing.srcDemTile,he=x.morphing.dstDemTile;H=x.morphing.phase,ne&&he&&(this._prepareDemTileUniforms(s,ne,z,"_prev")&&(W=ne),this._prepareDemTileUniforms(s,he,z)&&(j=he))}if(W&&j?(T.activeTexture.set(M.TEXTURE2),j.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),T.activeTexture.set(M.TEXTURE4),W.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE,M.NEAREST),z.u_dem_lerp=H):(j=this.terrainTileForTile[s.tileID.key],T.activeTexture.set(M.TEXTURE2),(this._prepareDemTileUniforms(s,j,z)?j.demTexture:this.emptyDEMTexture).bind(M.NEAREST,M.CLAMP_TO_EDGE)),T.activeTexture.set(M.TEXTURE3),x&&x.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),this._depthFBO&&(z.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE),z.u_depth_size_inv=[1,1]),x&&x.useMeterToDem&&j){const ne=(1<<j.tileID.canonical.z)*a.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;z.u_meter_to_dem=ne}if(x&&x.labelPlaneMatrixInv&&(z.u_label_plane_matrix_inv=x.labelPlaneMatrixInv),d.setTerrainUniformValues(T,z),this.painter.transform.projection.name==="globe"){const ne=this.globeUniformValues(this.painter.transform,s.tileID.canonical,x&&x.useDenormalizedUpVectorScale);d.setGlobeUniformValues(T,ne)}}globeUniformValues(s,d,x){const T=s.projection;return{u_tile_tl_up:T.upVector(d,0,0),u_tile_tr_up:T.upVector(d,a.EXTENT,0),u_tile_br_up:T.upVector(d,a.EXTENT,a.EXTENT),u_tile_bl_up:T.upVector(d,0,a.EXTENT),u_tile_up_scale:x?a.globeMetersToEcef(1):T.upVectorScale(d,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const d=this.painter,x=this.painter.context;s.length!==0&&(x.bindFramebuffer.set(null),x.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(T,M,z,D,j){if(T.transform.projection.name==="globe")(function(W,H,ne,he,ve){const we=W.context,xe=we.gl;let Ee,ie;const ye=W.options.showTerrainWireframe?2:0,ke=W.transform,ze=a.globeUseCustomAntiAliasing(W,we,ke),Ve=(Ft,ot)=>{if(ie===Ft)return;const St=[uc[Ft],"PROJECTION_GLOBE_VIEW"];ze&&St.push("CUSTOM_ANTIALIASING"),ot&&St.push(uc[ye]),Ee=W.useProgram("globeRaster",null,St),ie=Ft},We=W.colorModeForRenderPass(),He=new a.DepthMode(xe.LEQUAL,a.DepthMode.ReadWrite,W.depthRangeFor3D);$s.update(ve);const Je=a.calculateGlobeMercatorMatrix(ke),Ke=[a.mercatorXfromLng(ke.center.lng),a.mercatorYfromLat(ke.center.lat)],ct=ye?[!1,!0]:[!1],$t=W.globeSharedBuffers,rt=[ke.width*a.exported.devicePixelRatio,ke.height*a.exported.devicePixelRatio],vt=Float32Array.from(ke.globeMatrix),lt={useDenormalizedUpVectorScale:!0};if(ct.forEach((Ft=>{const ot=W.transform,St=$h(ot.zoom)*H.exaggeration();ie=-1;const jt=Ft?xe.LINES:xe.TRIANGLES;for(const Et of he){const At=ne.getTile(Et),vn=a.StencilMode.disabled,Pn=H.prevTerrainTileForTile[Et.key],Nt=H.terrainTileForTile[Et.key];su(Pn,Nt)&&$s.newMorphing(Et.key,Pn,Nt,ve,250),we.activeTexture.set(xe.TEXTURE0),At.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);const rn=$s.getMorphValuesForProxy(Et.key),kn=rn?1:0;rn&&a.extend$1(lt,{morphing:{srcDemTile:rn.from,dstDemTile:rn.to,phase:a.easeCubicInOut(rn.phase)}});const Yn=a.tileCornersToBounds(Et.canonical),pn=a.getLatitudinalLod(Yn.getCenter().lat),_r=a.getGridMatrix(Et.canonical,Yn,pn,ot.worldSize/ot._pixelsPerMercatorPixel),$r=a.globeNormalizeECEF(a.globeTileBounds(Et.canonical)),Br=Af(ot.projMatrix,vt,Je,$r,a.globeToMercatorTransition(ot.zoom),Ke,ot.frustumCorners.TL,ot.frustumCorners.TR,ot.frustumCorners.BR,ot.frustumCorners.BL,ot.globeCenterInViewSpace,ot.globeRadius,rt,St,_r);if(Ve(kn,Ft),H.setupElevationDraw(At,Ee,lt),W.prepareDrawProgram(we,Ee,Et.toUnwrapped()),$t){const[Lr,Fa,vr]=Ft?$t.getWirefameBuffers(W.context,pn):$t.getGridBuffers(pn,St!==0);Ee.draw(we,jt,He,vn,We,a.CullFaceMode.backCCW,Br,"globe_raster",Lr,Fa,vr)}}})),$t){const Ft=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ze&&Ft.push("CUSTOM_ANTIALIASING"),Ee=W.useProgram("globeRaster",null,Ft);for(const ot of he){const{x:St,y:jt,z:Et}=ot.canonical,At=jt===0,vn=jt===(1<<Et)-1,[Pn,Nt,rn,kn]=$t.getPoleBuffers(Et);if(kn&&(At||vn)){const Yn=ne.getTile(ot);we.activeTexture.set(xe.TEXTURE0),Yn.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE);let pn=a.globePoleMatrixForTile(Et,St,ke);const _r=a.globeNormalizeECEF(a.globeTileBounds(ot.canonical)),$r=(Br,Lr)=>Br.draw(we,xe.TRIANGLES,He,a.StencilMode.disabled,We,a.CullFaceMode.disabled,Af(ke.projMatrix,pn,pn,_r,0,Ke,ke.frustumCorners.TL,ke.frustumCorners.TR,ke.frustumCorners.BR,ke.frustumCorners.BL,ke.globeCenterInViewSpace,ke.globeRadius,rt,0),"globe_pole_raster",Lr,rn,kn);H.setupElevationDraw(Yn,Ee,lt),W.prepareDrawProgram(we,Ee,ot.toUnwrapped()),At&&$r(Ee,Pn),vn&&(pn=a.scale(a.create(),pn,[1,-1,1]),$r(Ee,Nt))}}}})(T,M,z,D,j);else{const W=T.context,H=W.gl;let ne,he;const ve=T.options.showTerrainWireframe?2:0,we=(ke,ze)=>{if(he===ke)return;const Ve=[uc[ke]];ze&&Ve.push(uc[ve]),ne=T.useProgram("terrainRaster",null,Ve),he=ke},xe=T.colorModeForRenderPass(),Ee=new a.DepthMode(H.LEQUAL,a.DepthMode.ReadWrite,T.depthRangeFor3D);$s.update(j);const ie=T.transform,ye=$h(ie.zoom)*M.exaggeration();(ve?[!1,!0]:[!1]).forEach((ke=>{he=-1;const ze=ke?H.LINES:H.TRIANGLES,[Ve,We]=ke?M.getWirefameBuffer():[M.gridIndexBuffer,M.gridSegments];for(const He of D){const Je=z.getTile(He),Ke=a.StencilMode.disabled,ct=M.prevTerrainTileForTile[He.key],$t=M.terrainTileForTile[He.key];su(ct,$t)&&$s.newMorphing(He.key,ct,$t,j,250),W.activeTexture.set(H.TEXTURE0),Je.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST);const rt=$s.getMorphValuesForProxy(He.key),vt=rt?1:0;let lt;rt&&(lt={morphing:{srcDemTile:rt.from,dstDemTile:rt.to,phase:a.easeCubicInOut(rt.phase)}});const Ft=ou(He.projMatrix,Wm(He.canonical,ie.renderWorldCopies)?ye/10:ye);we(vt,ke),M.setupElevationDraw(Je,ne,lt),T.prepareDrawProgram(W,ne,He.toUnwrapped()),ne.draw(W,ze,Ee,Ke,xe,a.CullFaceMode.backCCW,Ft,"terrain_raster",M.gridBuffer,Ve,We)}}))}})(d,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const d=this.painter,x=this.painter.context,T=this.proxySourceCache,M=this.proxiedCoords[T.id],z=this._drapedRenderBatches.shift(),D=[],j=d.style.order;let W=0;for(const H of M){const ne=T.getTileByID(H.proxyTileKey),he=T.proxyCachedFBO[H.key]?T.proxyCachedFBO[H.key][s]:void 0,ve=he!==void 0?T.renderCache[he]:this.pool[W++],we=he!==void 0;if(ne.texture=ve.tex,we&&!ve.dirty){D.push(ne.tileID);continue}let xe;x.bindFramebuffer.set(ve.fb.framebuffer),this.renderedToTile=!1,ve.dirty&&(x.clear({color:a.Color.transparent,stencil:0}),ve.dirty=!1);for(let Ee=z.start;Ee<=z.end;++Ee){const ie=d.style._layers[j[Ee]];if(ie.isHidden(d.transform.zoom))continue;const ye=d.style._getLayerSourceCache(ie),ke=ye?this.proxyToSource[H.key][ye.id]:[H];if(!ke)continue;const ze=ke;x.viewport.set([0,0,ve.fb.width,ve.fb.height]),xe!==(ye?ye.id:null)&&(this._setupStencil(ve,ke,ie,ye),xe=ye?ye.id:null),d.renderLayer(d,ye,ie,ze)}this.renderedToTile?(ve.dirty=!0,D.push(ne.tileID)):we||--W,W===5&&(W=0,this.renderToBackBuffer(D))}return this.renderToBackBuffer(D),this.renderingToTexture=!1,x.bindFramebuffer.set(null),x.viewport.set([0,0,d.width,d.height]),z.end+1}postRender(){}renderCacheEfficiency(s){const d=s.order.length;if(d===0)return{efficiency:100};let x,T=0,M=0,z=!1;for(let D=0;D<d;++D){const j=s._layers[s.order[D]];this._style.isLayerDraped(j)?(z&&++T,++M):z||(z=!0,x=j.id)}return M===0?{efficiency:100}:{efficiency:100*(1-T/M),firstUndrapedLayer:x}}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter((d=>d.dem)).forEach((d=>{s=Math.min(s,d.dem.tree.minimums[0])})),s===0?s:(s-30)*this._exaggeration}raycast(s,d,x){if(!this._visibleDemTiles)return null;const T=this._visibleDemTiles.filter((M=>M.dem)).map((M=>{const z=M.tileID,D=1<<z.overscaledZ,{x:j,y:W}=z.canonical,H=j/D,ne=(j+1)/D,he=W/D,ve=(W+1)/D;return{minx:H,miny:he,maxx:ne,maxy:ve,t:M.dem.tree.raycastRoot(H,he,ne,ve,s,d,x),tile:M}}));T.sort(((M,z)=>(M.t!==null?M.t:Number.MAX_VALUE)-(z.t!==null?z.t:Number.MAX_VALUE)));for(const M of T){if(M.t==null)return null;const z=M.tile.dem.tree.raycast(M.minx,M.miny,M.maxx,M.maxy,s,d,x);if(z!=null)return z}return null}_createFBO(){const s=this.painter.context,d=s.gl,x=this.drapeBufferSize;s.activeTexture.set(d.TEXTURE0);const T=new a.Texture(s,{width:x[0],height:x[1],data:null},d.RGBA);T.bind(d.LINEAR,d.CLAMP_TO_EDGE);const M=s.createFramebuffer(x[0],x[1],!1);return M.colorAttachment.set(T.texture),M.depthAttachment=new je(s,M.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,x[0],x[1]),this._stencilRef=0,M.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):M.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&!s.extTextureFilterAnisotropicForceOff&&d.texParameterf(d.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:M,tex:T,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const s in this._style._sourceCaches)if(this._style._sourceCaches[s].hasTransition())return!0;return this._style.order.some((s=>{const d=this._style._layers[s],x=d.isHidden(this.painter.transform.zoom);return d.type==="custom"?!x&&d.shouldRedrape():!x&&d.hasTransition()}))}_clearLineLayersFromRenderCache(){let s=!1;for(const x of this._style._getSources())if(x instanceof Lt){s=!0;break}if(!s)return;const d={};for(let x=0;x<this._style.order.length;++x){const T=this._style._layers[this._style.order[x]],M=this._style._getLayerSourceCache(T);if(M&&!d[M.id]&&!T.isHidden(this.painter.transform.zoom)&&T.type==="line"&&T.widthExpression()instanceof a.ZoomDependentExpression){d[M.id]=!0;for(const z of this.proxyCoords){const D=this.proxyToSource[z.key][M.id];if(D)for(const j of D)this._clearRenderCacheForTile(M.id,j)}}}}_clearRasterLayersFromRenderCache(){let s=!1;for(const x in this._style._sourceCaches)if(this._style._sourceCaches[x]._source instanceof Mt){s=!0;break}if(!s)return;const d={};for(let x=0;x<this._style.order.length;++x){const T=this._style._layers[this._style.order[x]],M=this._style._getLayerSourceCache(T);if(!M||d[M.id]||T.isHidden(this.painter.transform.zoom)||T.type!=="raster")continue;const z=T.paint.get("raster-fade-duration");for(const D of this.proxyCoords){const j=this.proxyToSource[D.key][M.id];if(j)for(const W of j){const H=hp(M.getTile(W),M.findLoadedParent(W,0),M,this.painter.transform,z);(H.opacity!==1||H.mix!==0)&&this._clearRenderCacheForTile(M.id,W)}}}}_setupDrapedRenderBatches(){const s=this._style.order,d=s.length;if(d===0)return;const x=[];let T,M=0,z=this._style._layers[s[M]];for(;!this._style.isLayerDraped(z)&&z.isHidden(this.painter.transform.zoom)&&++M<d;)z=this._style._layers[s[M]];for(;M<d;++M){const D=this._style._layers[s[M]];D.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(D)?T===void 0&&(T=M):T!==void 0&&(x.push({start:T,end:M-1}),T=void 0))}T!==void 0&&x.push({start:T,end:M-1}),this._drapedRenderBatches=x}_setupRenderCache(s){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const z=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let D=0;D<z.length;++D){const j=Object.values(z[D]);d.renderCachePool.push(...j)}}return}this._clearRasterLayersFromRenderCache();const x=this.proxyCoords,T=this._tilesDirty;for(let z=x.length-1;z>=0;z--){const D=x[z];if(d.getTileByID(D.key),d.proxyCachedFBO[D.key]!==void 0){const j=s[D.key],W=this.proxyToSource[D.key];let H=0;for(const ne in W){const he=W[ne],ve=j[ne];if(!ve||ve.length!==he.length||he.some(((we,xe)=>we!==ve[xe]||T[ne]&&T[ne].hasOwnProperty(we.key)))){H=-1;break}++H}for(const ne in d.proxyCachedFBO[D.key])d.renderCache[d.proxyCachedFBO[D.key][ne]].dirty=H<0||H!==Object.values(j).length}}const M=[...this._drapedRenderBatches];M.sort(((z,D)=>D.end-D.start-(z.end-z.start)));for(const z of M)for(const D of x){if(d.proxyCachedFBO[D.key])continue;let j=d.renderCachePool.pop();j===void 0&&d.renderCache.length<50&&(j=d.renderCache.length,d.renderCache.push(this._createFBO())),j!==void 0&&(d.proxyCachedFBO[D.key]={},d.proxyCachedFBO[D.key][z.start]=j,d.renderCache[j].dirty=!0)}this._tilesDirty={}}_setupStencil(s,d,x,T){if(!T||!this._sourceTilesOverlap[T.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const M=this.painter.context,z=M.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let D;if(x.isTileClipped())D=d.length,this._overlapStencilMode.test={func:z.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);D=1,this._overlapStencilMode.test={func:z.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+D>255&&(M.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=D,this._overlapStencilMode.ref=this._stencilRef,x.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):a.StencilMode.disabled}_renderTileClippingMasks(s,d){const x=this.painter,T=this.painter.context,M=T.gl;x._tileClippingMaskIDs={},T.setColorMode(a.ColorMode.disabled),T.setDepthMode(a.DepthMode.disabled);const z=x.useProgram("clippingMask");for(const D of s){const j=x._tileClippingMaskIDs[D.key]=--d;z.draw(T,M.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:M.ALWAYS,mask:0},j,255,M.KEEP,M.KEEP,M.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,Rf(D.projMatrix),"$clipping",x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}pointCoordinate(s){const d=this.painter.transform;if(s.x<0||s.x>d.width||s.y<0||s.y>d.height)return null;const x=[s.x,s.y,1,1];a.transformMat4$1(x,x,d.pixelMatrixInverse),a.scale$1(x,x,1/x[3]),x[0]/=d.worldSize,x[1]/=d.worldSize;const T=d._camera.position,M=a.mercatorZfromAltitude(1,d.center.lat),z=[T[0],T[1],T[2]/M,0],D=a.subtract([],x.slice(0,3),z);a.normalize(D,D);const j=this.raycast(z,D,this._exaggeration);return j!==null&&j?(a.scaleAndAdd(z,z,D,j),z[3]=z[2],z[2]*=M,z):null}drawDepth(){const s=this.painter,d=s.context,x=this.proxySourceCache,T=Math.ceil(s.width),M=Math.ceil(s.height);if(!this._depthFBO||this._depthFBO.width===T&&this._depthFBO.height===M||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const z=d.gl,D=d.createFramebuffer(T,M,!0);d.activeTexture.set(z.TEXTURE0);const j=new a.Texture(d,{width:T,height:M,data:null},z.RGBA);j.bind(z.NEAREST,z.CLAMP_TO_EDGE),D.colorAttachment.set(j.texture);const W=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,T,M);D.depthAttachment.set(W),this._depthFBO=D,this._depthTexture=j}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,T,M]),(function(z,D,j,W){if(z.transform.projection.name==="globe")return;const H=z.context,ne=H.gl;H.clear({depth:1});const he=z.useProgram("terrainDepth"),ve=new a.DepthMode(ne.LESS,a.DepthMode.ReadWrite,z.depthRangeFor3D);for(const we of W){const xe=j.getTile(we),Ee=ou(we.projMatrix,0);D.setupElevationDraw(xe,he),he.draw(H,ne.TRIANGLES,ve,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.backCCW,Ee,"terrain_depth",D.gridBuffer,D.gridIndexBuffer,D.gridNoSkirtSegments)}})(s,this,x,this.proxyCoords)}_setupProxiedCoordsForOrtho(s,d,x){if(s.getSource()instanceof bn)return this._setupProxiedCoordsForImageSource(s,d,x);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const T=this.proxiedCoords[s.id]=[],M=this.proxyCoords;for(let D=0;D<M.length;D++){const j=M[D],W=this._findTileCoveringTileID(j,s);if(W){const H=this._createProxiedId(j,W,x[j.key]&&x[j.key][s.id]);T.push(H),this.proxyToSource[j.key][s.id]=[H]}}let z=!1;for(let D=0;D<d.length;D++){const j=s.getTile(d[D]);if(!j||!j.hasData())continue;const W=this._findTileCoveringTileID(j.tileID,this.proxySourceCache);if(W&&W.tileID.canonical.z!==j.tileID.canonical.z){const H=this.proxyToSource[W.tileID.key][s.id],ne=this._createProxiedId(W.tileID,j,x[W.tileID.key]&&x[W.tileID.key][s.id]);H?H.splice(H.length-1,0,ne):this.proxyToSource[W.tileID.key][s.id]=[ne],T.push(ne),z=!0}}this._sourceTilesOverlap[s.id]=z}_setupProxiedCoordsForImageSource(s,d,x){if(!s.getSource().loaded())return;const T=this.proxiedCoords[s.id]=[],M=this.proxyCoords,z=s.getSource(),D=new a.Point(z.tileID.x,z.tileID.y)._div(1<<z.tileID.z),j=z.coordinates.map(a.MercatorCoordinate.fromLngLat).reduce(((H,ne)=>(H.min.x=Math.min(H.min.x,ne.x-D.x),H.min.y=Math.min(H.min.y,ne.y-D.y),H.max.x=Math.max(H.max.x,ne.x-D.x),H.max.y=Math.max(H.max.y,ne.y-D.y),H)),{min:new a.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),W=(H,ne)=>{const he=H.wrap+H.canonical.x/(1<<H.canonical.z),ve=H.canonical.y/(1<<H.canonical.z),we=a.EXTENT/(1<<H.canonical.z),xe=ne.wrap+ne.canonical.x/(1<<ne.canonical.z),Ee=ne.canonical.y/(1<<ne.canonical.z);return he+we<xe+j.min.x||he>xe+j.max.x||ve+we<Ee+j.min.y||ve>Ee+j.max.y};for(let H=0;H<M.length;H++){const ne=M[H];for(let he=0;he<d.length;he++){const ve=s.getTile(d[he]);if(!ve||!ve.hasData()||W(ne,ve.tileID))continue;const we=this._createProxiedId(ne,ve,x[ne.key]&&x[ne.key][s.id]),xe=this.proxyToSource[ne.key][s.id];xe?xe.push(we):this.proxyToSource[ne.key][s.id]=[we],T.push(we)}}}_createProxiedId(s,d,x){let T=this.orthoMatrix;if(x){const M=x.find((z=>z.key===d.tileID.key));if(M)return M}if(d.tileID.key!==s.key){const M=s.canonical.z-d.tileID.canonical.z;let z,D,j;T=a.create();const W=d.tileID.wrap-s.wrap<<s.overscaledZ;M>0?(z=a.EXTENT>>M,D=z*((d.tileID.canonical.x<<M)-s.canonical.x+W),j=z*((d.tileID.canonical.y<<M)-s.canonical.y)):(z=a.EXTENT<<-M,D=a.EXTENT*(d.tileID.canonical.x-(s.canonical.x+W<<-M)),j=a.EXTENT*(d.tileID.canonical.y-(s.canonical.y<<-M))),a.ortho(T,0,z,0,z,0,1),a.translate(T,T,[D,j,0])}return new lu(d.tileID,s.key,T)}_findTileCoveringTileID(s,d){let x=d.getTile(s);if(x&&x.hasData())return x;const T=this._findCoveringTileCache[d.id],M=T[s.key];if(x=M?d.getTileByID(M):null,x&&x.hasData()||M===null)return x;let z=x?x.tileID:s,D=z.overscaledZ;const j=d.getSource().minzoom,W=[];if(!M){const ne=d.getSource().maxzoom;if(s.canonical.z>=ne){const he=s.canonical.z-ne;d.getSource().reparseOverscaled?(D=Math.max(s.canonical.z+2,d.transform.tileZoom),z=new a.OverscaledTileID(D,s.wrap,ne,s.canonical.x>>he,s.canonical.y>>he)):he!==0&&(D=ne,z=new a.OverscaledTileID(D,s.wrap,ne,s.canonical.x>>he,s.canonical.y>>he))}z.key!==s.key&&(W.push(z.key),x=d.getTile(z))}const H=ne=>{W.forEach((he=>{T[he]=ne})),W.length=0};for(D-=1;D>=j&&(!x||!x.hasData());D--){x&&H(x.tileID.key);const ne=z.calculateScaledKey(D);if(x=d.getTileByID(ne),x&&x.hasData())break;const he=T[ne];if(he===null)break;he===void 0?W.push(ne):x=d.getTileByID(he)}return H(x?x.tileID.key:null),x&&x.hasData()?x:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,d){let x=this._tilesDirty[s];x||(x=this._tilesDirty[s]={}),x[d.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const s=(function(d){let x=0;const T=new a.StructArrayLayout2ui4,M=131;for(let z=1;z<129;z++){for(let D=1;D<129;D++)x=z*M+D,T.emplaceBack(x,x+1),T.emplaceBack(x,x+M),T.emplaceBack(x+1,x+M),z===128&&T.emplaceBack(x+M,x+M+1);T.emplaceBack(x+1,x+1+M)}return T})();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(s),this.wireframeSegments=a.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,s.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Cr{static cacheKey(s,d,x,T){let M=`${d}${T?T.cacheKey:""}`;for(const z of x)s.usedDefines.includes(z)&&(M+=`/${z}`);return M}constructor(s,d,x,T,M,z){const D=s.gl;this.program=D.createProgram();const j=(function(ie){const ye=[];for(let ke=0;ke<ie.length;ke++){if(ie[ke]===null)continue;const ze=ie[ke].split(" ");ye.push(ze.pop())}return ye})(x.staticAttributes),W=T?T.getBinderAttributes():[],H=j.concat(W);let ne=T?T.defines():[];ne=ne.concat(z.map((ie=>`#define ${ie}`)));const he=s.isWebGL2?`#version 300 es
`:"",ve=he+ne.concat(s.extStandardDerivatives&&he.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(lp):lp,lp,Uh,Vm.fragmentSource,dl.fragmentSource,x.fragmentSource).join(`
`),we=he+ne.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Uh,Vm.vertexSource,dl.vertexSource,Nh.vertexSource,x.vertexSource).join(`
`),xe=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);D.shaderSource(xe,ve),D.compileShader(xe),D.attachShader(this.program,xe);const Ee=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())this.failedToCreate=!0;else{D.shaderSource(Ee,we),D.compileShader(Ee),D.attachShader(this.program,Ee),this.attributes={},this.numAttributes=H.length;for(let ie=0;ie<this.numAttributes;ie++)H[ie]&&(D.bindAttribLocation(this.program,ie,H[ie]),this.attributes[H[ie]]=ie);D.linkProgram(this.program),D.deleteShader(Ee),D.deleteShader(xe),this.fixedUniforms=M(s),this.binderUniforms=T?T.getUniforms(s):[],z.includes("TERRAIN")&&(this.terrainUniforms=(ie=>({u_dem:new a.Uniform1i(ie),u_dem_prev:new a.Uniform1i(ie),u_dem_unpack:new a.Uniform4f(ie),u_dem_tl:new a.Uniform2f(ie),u_dem_scale:new a.Uniform1f(ie),u_dem_tl_prev:new a.Uniform2f(ie),u_dem_scale_prev:new a.Uniform1f(ie),u_dem_size:new a.Uniform1f(ie),u_dem_lerp:new a.Uniform1f(ie),u_exaggeration:new a.Uniform1f(ie),u_depth:new a.Uniform1i(ie),u_depth_size_inv:new a.Uniform2f(ie),u_meter_to_dem:new a.Uniform1f(ie),u_label_plane_matrix_inv:new a.UniformMatrix4f(ie)}))(s)),z.includes("GLOBE")&&(this.globeUniforms=(ie=>({u_tile_tl_up:new a.Uniform3f(ie),u_tile_tr_up:new a.Uniform3f(ie),u_tile_br_up:new a.Uniform3f(ie),u_tile_bl_up:new a.Uniform3f(ie),u_tile_up_scale:new a.Uniform1f(ie)}))(s)),z.includes("FOG")&&(this.fogUniforms=(ie=>({u_fog_matrix:new a.UniformMatrix4f(ie),u_fog_range:new a.Uniform2f(ie),u_fog_color:new a.Uniform4f(ie),u_fog_horizon_blend:new a.Uniform1f(ie),u_fog_temporal_offset:new a.Uniform1f(ie),u_frustum_tl:new a.Uniform3f(ie),u_frustum_tr:new a.Uniform3f(ie),u_frustum_br:new a.Uniform3f(ie),u_frustum_bl:new a.Uniform3f(ie),u_globe_pos:new a.Uniform3f(ie),u_globe_radius:new a.Uniform1f(ie),u_globe_transition:new a.Uniform1f(ie),u_is_globe:new a.Uniform1i(ie),u_viewport:new a.Uniform2f(ie)}))(s))}}setTerrainUniformValues(s,d){if(!this.terrainUniforms)return;const x=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const T in d)x[T]&&x[T].set(this.program,T,d[T])}}setGlobeUniformValues(s,d){if(!this.globeUniforms)return;const x=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const T in d)x[T]&&x[T].set(this.program,T,d[T])}}setFogUniformValues(s,d){if(!this.fogUniforms)return;const x=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const T in d)x[T].set(this.program,T,d[T])}}draw(s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe){const Ee=s.gl;if(this.failedToCreate)return;s.program.set(this.program),s.setDepthMode(x),s.setStencilMode(T),s.setColorMode(M),s.setCullFace(z);for(const ye of Object.keys(this.fixedUniforms))this.fixedUniforms[ye].set(this.program,ye,D[ye]);we&&we.setUniforms(this.program,s,this.binderUniforms,he,{zoom:ve});const ie={[Ee.LINES]:2,[Ee.TRIANGLES]:3,[Ee.LINE_STRIP]:1}[d];for(const ye of ne.get()){const ke=ye.vaos||(ye.vaos={});(ke[j]||(ke[j]=new Wy)).bind(s,this,W,we?we.getPaintVertexBuffers():[],H,ye.vertexOffset,xe||[]),Ee.drawElements(d,ye.primitiveLength*ie,Ee.UNSIGNED_SHORT,ye.primitiveOffset*ie*2)}}}function cu(_,s){const d=Math.pow(2,s.tileID.overscaledZ),x=s.tileSize*Math.pow(2,_.transform.tileZoom)/d,T=x*(s.tileID.canonical.x+s.tileID.wrap*d),M=x*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ge(s,1,_.transform.tileZoom),u_pixel_coord_upper:[T>>16,M>>16],u_pixel_coord_lower:[65535&T,65535&M]}}const pp=a.create(),Vh=(_,s,d,x,T,M,z,D,j,W,H)=>{const ne=s.style.light,he=ne.properties.get("position"),ve=[he.x,he.y,he.z],we=a.create$1();ne.properties.get("anchor")==="viewport"&&(a.fromRotation(we,-s.transform.angle),a.transformMat3(ve,ve,we));const xe=ne.properties.get("color"),Ee=s.transform,ie={u_matrix:_,u_lightpos:ve,u_lightintensity:ne.properties.get("intensity"),u_lightcolor:[xe.r,xe.g,xe.b],u_vertical_gradient:+d,u_opacity:x,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:pp,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:T,u_edge_radius:M};return Ee.projection.name==="globe"&&(ie.u_tile_id=[z.canonical.x,z.canonical.y,1<<z.canonical.z],ie.u_zoom_transition=j,ie.u_inv_rot_matrix=H,ie.u_merc_center=W,ie.u_up_dir=Ee.projection.upVector(new a.CanonicalTileID(0,0,0),W[0]*a.EXTENT,W[1]*a.EXTENT),ie.u_height_lift=D),ie},mp=(_,s,d,x,T,M,z,D,j,W,H,ne)=>{const he=Vh(_,s,d,x,T,M,z,j,W,H,ne),ve={u_height_factor:-Math.pow(2,z.overscaledZ)/D.tileSize/8};return a.extend(he,cu(s,D),ve)},pl=_=>({u_matrix:_}),ml=(_,s,d)=>a.extend(pl(_),cu(s,d)),Zy=(_,s)=>({u_matrix:_,u_world:s}),Xy=(_,s,d,x)=>a.extend(ml(_,s,d),{u_world:x}),Yy=a.create(),Gh=(_,s,d,x,T,M)=>{const z=_.transform,D=z.projection.name==="globe";let j;if(M.paint.get("circle-pitch-alignment")==="map")if(D){const H=a.globePixelsToTileUnits(z.zoom,s.canonical)*z._pixelsPerMercatorPixel;j=Float32Array.from([H,0,0,H])}else j=z.calculatePixelsToTileUnitsMatrix(d);else j=new Float32Array([z.pixelsToGLUnits[0],0,0,z.pixelsToGLUnits[1]]);const W={u_camera_to_center_distance:z.cameraToCenterDistance,u_matrix:_.translatePosMatrix(s.projMatrix,d,M.paint.get("circle-translate"),M.paint.get("circle-translate-anchor")),u_device_pixel_ratio:a.exported.devicePixelRatio,u_extrude_scale:j,u_inv_rot_matrix:Yy,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(D){W.u_inv_rot_matrix=x,W.u_merc_center=T,W.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],W.u_zoom_transition=a.globeToMercatorTransition(z.zoom);const H=T[0]*a.EXTENT,ne=T[1]*a.EXTENT;W.u_up_dir=z.projection.upVector(new a.CanonicalTileID(0,0,0),H,ne)}return W},Hh=_=>{const s=[];return _.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s},hc=(_,s,d,x)=>{const T=a.EXTENT/d.tileSize;return{u_matrix:_,u_camera_to_center_distance:s.getCameraToCenterDistance(x),u_extrude_scale:[s.pixelsToGLUnits[0]/T,s.pixelsToGLUnits[1]/T]}},gl=(_,s,d=1)=>({u_matrix:_,u_color:s,u_overlay:0,u_overlay_scale:d}),Zm=a.create(),kf=(_,s,d,x,T,M,z)=>{const D=_.transform,j=D.projection.name==="globe",W=j?a.globePixelsToTileUnits(D.zoom,s.canonical)*D._pixelsPerMercatorPixel:Ge(d,1,M),H={u_matrix:s.projMatrix,u_extrude_scale:W,u_intensity:z,u_inv_rot_matrix:Zm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(j){H.u_inv_rot_matrix=x,H.u_merc_center=T,H.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],H.u_zoom_transition=a.globeToMercatorTransition(D.zoom);const ne=T[0]*a.EXTENT,he=T[1]*a.EXTENT;H.u_up_dir=D.projection.upVector(new a.CanonicalTileID(0,0,0),ne,he)}return H},Xm=(_,s,d,x,T,M,z)=>{const D=_.transform,j=D.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:If(_,s,d,x),u_pixels_to_tile_units:j,u_device_pixel_ratio:M,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:T,u_texsize:fu(d)?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:yl(s,_.transform),u_alpha_discard_threshold:0,u_trim_offset:z}},uu=(_,s,d,x,T)=>{const M=_.transform;return{u_matrix:If(_,s,d,x),u_texsize:s.imageAtlasTexture.size,u_pixels_to_tile_units:M.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:T,u_image:0,u_tile_units_to_pixels:yl(s,M),u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function yl(_,s){return 1/Ge(_,1,s.tileZoom)}function If(_,s,d,x){return _.translatePosMatrix(x||s.tileID.projMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}function fu(_){const s=_.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}const Wh=(_,s,d,x,T,M)=>{return{u_matrix:_,u_tl_parent:s,u_scale_parent:d,u_fade_t:x.mix,u_opacity:x.opacity*T.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:T.paint.get("raster-brightness-min"),u_brightness_high:T.paint.get("raster-brightness-max"),u_saturation_factor:(D=T.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(z=T.paint.get("raster-contrast"),z>0?1/(1-z):1+z),u_spin_weights:ts(T.paint.get("raster-hue-rotate")),u_perspective_transform:M};var z,D};function ts(_){_*=Math.PI/180;const s=Math.sin(_),d=Math.cos(_);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const Zh=a.create(),gp=(_,s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe)=>{const Ee=T.transform,ie={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Ee.cameraToCenterDistance,u_rotate_symbol:+d,u_aspect_ratio:Ee.width/Ee.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:z,u_coord_matrix:D,u_is_text:+j,u_pitch_with_map:+x,u_texsize:W,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Zh,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Zh,u_up_vector:[0,-1,0]};return xe.name==="globe"&&(ie.u_tile_id=[H.canonical.x,H.canonical.y,1<<H.canonical.z],ie.u_zoom_transition=ne,ie.u_inv_rot_matrix=ve,ie.u_merc_center=he,ie.u_camera_forward=Ee._camera.forward(),ie.u_ecef_origin=a.globeECEFOrigin(Ee.globeMatrix,H.toUnwrapped()),ie.u_tile_matrix=Float32Array.from(Ee.globeMatrix),ie.u_up_vector=we),ie},Xh=(_,s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe,Ee)=>a.extend(gp(_,s,d,x,T,M,z,D,j,W,ne,he,ve,we,xe,Ee),{u_gamma_scale:x?T.transform.cameraToCenterDistance*Math.cos(T.terrain?0:T.transform._pitch):1,u_device_pixel_ratio:a.exported.devicePixelRatio,u_is_halo:1}),Ym=(_,s,d,x,T,M,z,D,j,W,H,ne,he,ve,we,xe)=>a.extend(Xh(_,s,d,x,T,M,z,D,!0,j,!0,H,ne,he,ve,we,xe),{u_texsize_icon:W,u_texture_icon:1}),yp=(_,s,d)=>({u_matrix:_,u_opacity:s,u_color:d}),xo=(_,s,d,x,T)=>a.extend((function(M,z,D){const j=z.imageManager.getPattern(M.toString()),{width:W,height:H}=z.imageManager.getPixelSize(),ne=Math.pow(2,D.tileID.overscaledZ),he=D.tileSize*Math.pow(2,z.transform.tileZoom)/ne,ve=he*(D.tileID.canonical.x+D.tileID.wrap*ne),we=he*D.tileID.canonical.y;return{u_image:0,u_pattern_tl:j.tl,u_pattern_br:j.br,u_texsize:[W,H],u_pattern_size:j.displaySize,u_tile_units_to_pixels:1/Ge(D,1,z.transform.tileZoom),u_pixel_coord_upper:[ve>>16,we>>16],u_pixel_coord_lower:[65535&ve,65535&we]}})(x,d,T),{u_matrix:_,u_opacity:s}),dc={fillExtrusion:_=>({u_matrix:new a.UniformMatrix4f(_),u_lightpos:new a.Uniform3f(_),u_lightintensity:new a.Uniform1f(_),u_lightcolor:new a.Uniform3f(_),u_vertical_gradient:new a.Uniform1f(_),u_opacity:new a.Uniform1f(_),u_edge_radius:new a.Uniform1f(_),u_ao:new a.Uniform2f(_),u_tile_id:new a.Uniform3f(_),u_zoom_transition:new a.Uniform1f(_),u_inv_rot_matrix:new a.UniformMatrix4f(_),u_merc_center:new a.Uniform2f(_),u_up_dir:new a.Uniform3f(_),u_height_lift:new a.Uniform1f(_)}),fillExtrusionPattern:_=>({u_matrix:new a.UniformMatrix4f(_),u_lightpos:new a.Uniform3f(_),u_lightintensity:new a.Uniform1f(_),u_lightcolor:new a.Uniform3f(_),u_vertical_gradient:new a.Uniform1f(_),u_height_factor:new a.Uniform1f(_),u_edge_radius:new a.Uniform1f(_),u_ao:new a.Uniform2f(_),u_tile_id:new a.Uniform3f(_),u_zoom_transition:new a.Uniform1f(_),u_inv_rot_matrix:new a.UniformMatrix4f(_),u_merc_center:new a.Uniform2f(_),u_up_dir:new a.Uniform3f(_),u_height_lift:new a.Uniform1f(_),u_image:new a.Uniform1i(_),u_texsize:new a.Uniform2f(_),u_pixel_coord_upper:new a.Uniform2f(_),u_pixel_coord_lower:new a.Uniform2f(_),u_tile_units_to_pixels:new a.Uniform1f(_),u_opacity:new a.Uniform1f(_)}),fill:_=>({u_matrix:new a.UniformMatrix4f(_)}),fillPattern:_=>({u_matrix:new a.UniformMatrix4f(_),u_image:new a.Uniform1i(_),u_texsize:new a.Uniform2f(_),u_pixel_coord_upper:new a.Uniform2f(_),u_pixel_coord_lower:new a.Uniform2f(_),u_tile_units_to_pixels:new a.Uniform1f(_)}),fillOutline:_=>({u_matrix:new a.UniformMatrix4f(_),u_world:new a.Uniform2f(_)}),fillOutlinePattern:_=>({u_matrix:new a.UniformMatrix4f(_),u_world:new a.Uniform2f(_),u_image:new a.Uniform1i(_),u_texsize:new a.Uniform2f(_),u_pixel_coord_upper:new a.Uniform2f(_),u_pixel_coord_lower:new a.Uniform2f(_),u_tile_units_to_pixels:new a.Uniform1f(_)}),circle:_=>({u_camera_to_center_distance:new a.Uniform1f(_),u_extrude_scale:new a.UniformMatrix2f(_),u_device_pixel_ratio:new a.Uniform1f(_),u_matrix:new a.UniformMatrix4f(_),u_inv_rot_matrix:new a.UniformMatrix4f(_),u_merc_center:new a.Uniform2f(_),u_tile_id:new a.Uniform3f(_),u_zoom_transition:new a.Uniform1f(_),u_up_dir:new a.Uniform3f(_)}),collisionBox:_=>({u_matrix:new a.UniformMatrix4f(_),u_camera_to_center_distance:new a.Uniform1f(_),u_extrude_scale:new a.Uniform2f(_)}),collisionCircle:_=>({u_matrix:new a.UniformMatrix4f(_),u_inv_matrix:new a.UniformMatrix4f(_),u_camera_to_center_distance:new a.Uniform1f(_),u_viewport_size:new a.Uniform2f(_)}),debug:_=>({u_color:new a.UniformColor(_),u_matrix:new a.UniformMatrix4f(_),u_overlay:new a.Uniform1i(_),u_overlay_scale:new a.Uniform1f(_)}),clippingMask:_=>({u_matrix:new a.UniformMatrix4f(_)}),heatmap:_=>({u_extrude_scale:new a.Uniform1f(_),u_intensity:new a.Uniform1f(_),u_matrix:new a.UniformMatrix4f(_),u_inv_rot_matrix:new a.UniformMatrix4f(_),u_merc_center:new a.Uniform2f(_),u_tile_id:new a.Uniform3f(_),u_zoom_transition:new a.Uniform1f(_),u_up_dir:new a.Uniform3f(_)}),heatmapTexture:_=>({u_image:new a.Uniform1i(_),u_color_ramp:new a.Uniform1i(_),u_opacity:new a.Uniform1f(_)}),hillshade:_=>({u_matrix:new a.UniformMatrix4f(_),u_image:new a.Uniform1i(_),u_latrange:new a.Uniform2f(_),u_light:new a.Uniform2f(_),u_shadow:new a.UniformColor(_),u_highlight:new a.UniformColor(_),u_accent:new a.UniformColor(_)}),hillshadePrepare:_=>({u_matrix:new a.UniformMatrix4f(_),u_image:new a.Uniform1i(_),u_dimension:new a.Uniform2f(_),u_zoom:new a.Uniform1f(_),u_unpack:new a.Uniform4f(_)}),line:_=>({u_matrix:new a.UniformMatrix4f(_),u_pixels_to_tile_units:new a.UniformMatrix2f(_),u_device_pixel_ratio:new a.Uniform1f(_),u_units_to_pixels:new a.Uniform2f(_),u_dash_image:new a.Uniform1i(_),u_gradient_image:new a.Uniform1i(_),u_image_height:new a.Uniform1f(_),u_texsize:new a.Uniform2f(_),u_tile_units_to_pixels:new a.Uniform1f(_),u_alpha_discard_threshold:new a.Uniform1f(_),u_trim_offset:new a.Uniform2f(_)}),linePattern:_=>({u_matrix:new a.UniformMatrix4f(_),u_texsize:new a.Uniform2f(_),u_pixels_to_tile_units:new a.UniformMatrix2f(_),u_device_pixel_ratio:new a.Uniform1f(_),u_image:new a.Uniform1i(_),u_units_to_pixels:new a.Uniform2f(_),u_tile_units_to_pixels:new a.Uniform1f(_),u_alpha_discard_threshold:new a.Uniform1f(_)}),raster:_=>({u_matrix:new a.UniformMatrix4f(_),u_tl_parent:new a.Uniform2f(_),u_scale_parent:new a.Uniform1f(_),u_fade_t:new a.Uniform1f(_),u_opacity:new a.Uniform1f(_),u_image0:new a.Uniform1i(_),u_image1:new a.Uniform1i(_),u_brightness_low:new a.Uniform1f(_),u_brightness_high:new a.Uniform1f(_),u_saturation_factor:new a.Uniform1f(_),u_contrast_factor:new a.Uniform1f(_),u_spin_weights:new a.Uniform3f(_),u_perspective_transform:new a.Uniform2f(_)}),symbolIcon:_=>({u_is_size_zoom_constant:new a.Uniform1i(_),u_is_size_feature_constant:new a.Uniform1i(_),u_size_t:new a.Uniform1f(_),u_size:new a.Uniform1f(_),u_camera_to_center_distance:new a.Uniform1f(_),u_rotate_symbol:new a.Uniform1i(_),u_aspect_ratio:new a.Uniform1f(_),u_fade_change:new a.Uniform1f(_),u_matrix:new a.UniformMatrix4f(_),u_label_plane_matrix:new a.UniformMatrix4f(_),u_coord_matrix:new a.UniformMatrix4f(_),u_is_text:new a.Uniform1i(_),u_pitch_with_map:new a.Uniform1i(_),u_texsize:new a.Uniform2f(_),u_tile_id:new a.Uniform3f(_),u_zoom_transition:new a.Uniform1f(_),u_inv_rot_matrix:new a.UniformMatrix4f(_),u_merc_center:new a.Uniform2f(_),u_camera_forward:new a.Uniform3f(_),u_tile_matrix:new a.UniformMatrix4f(_),u_up_vector:new a.Uniform3f(_),u_ecef_origin:new a.Uniform3f(_),u_texture:new a.Uniform1i(_)}),symbolSDF:_=>({u_is_size_zoom_constant:new a.Uniform1i(_),u_is_size_feature_constant:new a.Uniform1i(_),u_size_t:new a.Uniform1f(_),u_size:new a.Uniform1f(_),u_camera_to_center_distance:new a.Uniform1f(_),u_rotate_symbol:new a.Uniform1i(_),u_aspect_ratio:new a.Uniform1f(_),u_fade_change:new a.Uniform1f(_),u_matrix:new a.UniformMatrix4f(_),u_label_plane_matrix:new a.UniformMatrix4f(_),u_coord_matrix:new a.UniformMatrix4f(_),u_is_text:new a.Uniform1i(_),u_pitch_with_map:new a.Uniform1i(_),u_texsize:new a.Uniform2f(_),u_texture:new a.Uniform1i(_),u_gamma_scale:new a.Uniform1f(_),u_device_pixel_ratio:new a.Uniform1f(_),u_tile_id:new a.Uniform3f(_),u_zoom_transition:new a.Uniform1f(_),u_inv_rot_matrix:new a.UniformMatrix4f(_),u_merc_center:new a.Uniform2f(_),u_camera_forward:new a.Uniform3f(_),u_tile_matrix:new a.UniformMatrix4f(_),u_up_vector:new a.Uniform3f(_),u_ecef_origin:new a.Uniform3f(_),u_is_halo:new a.Uniform1i(_)}),symbolTextAndIcon:_=>({u_is_size_zoom_constant:new a.Uniform1i(_),u_is_size_feature_constant:new a.Uniform1i(_),u_size_t:new a.Uniform1f(_),u_size:new a.Uniform1f(_),u_camera_to_center_distance:new a.Uniform1f(_),u_rotate_symbol:new a.Uniform1i(_),u_aspect_ratio:new a.Uniform1f(_),u_fade_change:new a.Uniform1f(_),u_matrix:new a.UniformMatrix4f(_),u_label_plane_matrix:new a.UniformMatrix4f(_),u_coord_matrix:new a.UniformMatrix4f(_),u_is_text:new a.Uniform1i(_),u_pitch_with_map:new a.Uniform1i(_),u_texsize:new a.Uniform2f(_),u_texsize_icon:new a.Uniform2f(_),u_texture:new a.Uniform1i(_),u_texture_icon:new a.Uniform1i(_),u_gamma_scale:new a.Uniform1f(_),u_device_pixel_ratio:new a.Uniform1f(_),u_is_halo:new a.Uniform1i(_)}),background:_=>({u_matrix:new a.UniformMatrix4f(_),u_opacity:new a.Uniform1f(_),u_color:new a.UniformColor(_)}),backgroundPattern:_=>({u_matrix:new a.UniformMatrix4f(_),u_opacity:new a.Uniform1f(_),u_image:new a.Uniform1i(_),u_pattern_tl:new a.Uniform2f(_),u_pattern_br:new a.Uniform2f(_),u_texsize:new a.Uniform2f(_),u_pattern_size:new a.Uniform2f(_),u_pixel_coord_upper:new a.Uniform2f(_),u_pixel_coord_lower:new a.Uniform2f(_),u_tile_units_to_pixels:new a.Uniform1f(_)}),terrainRaster:fp,terrainDepth:fp,skybox:_=>({u_matrix:new a.UniformMatrix4f(_),u_sun_direction:new a.Uniform3f(_),u_cubemap:new a.Uniform1i(_),u_opacity:new a.Uniform1f(_),u_temporal_offset:new a.Uniform1f(_)}),skyboxGradient:_=>({u_matrix:new a.UniformMatrix4f(_),u_color_ramp:new a.Uniform1i(_),u_center_direction:new a.Uniform3f(_),u_radius:new a.Uniform1f(_),u_opacity:new a.Uniform1f(_),u_temporal_offset:new a.Uniform1f(_)}),skyboxCapture:_=>({u_matrix_3f:new a.UniformMatrix3f(_),u_sun_direction:new a.Uniform3f(_),u_sun_intensity:new a.Uniform1f(_),u_color_tint_r:new a.Uniform4f(_),u_color_tint_m:new a.Uniform4f(_),u_luminance:new a.Uniform1f(_)}),globeRaster:_=>({u_proj_matrix:new a.UniformMatrix4f(_),u_globe_matrix:new a.UniformMatrix4f(_),u_normalize_matrix:new a.UniformMatrix4f(_),u_merc_matrix:new a.UniformMatrix4f(_),u_zoom_transition:new a.Uniform1f(_),u_merc_center:new a.Uniform2f(_),u_image0:new a.Uniform1i(_),u_grid_matrix:new a.UniformMatrix3f(_),u_skirt_height:new a.Uniform1f(_),u_frustum_tl:new a.Uniform3f(_),u_frustum_tr:new a.Uniform3f(_),u_frustum_br:new a.Uniform3f(_),u_frustum_bl:new a.Uniform3f(_),u_globe_pos:new a.Uniform3f(_),u_globe_radius:new a.Uniform1f(_),u_viewport:new a.Uniform2f(_)}),globeAtmosphere:_=>({u_frustum_tl:new a.Uniform3f(_),u_frustum_tr:new a.Uniform3f(_),u_frustum_br:new a.Uniform3f(_),u_frustum_bl:new a.Uniform3f(_),u_horizon:new a.Uniform1f(_),u_transition:new a.Uniform1f(_),u_fadeout_range:new a.Uniform1f(_),u_color:new a.Uniform4f(_),u_high_color:new a.Uniform4f(_),u_space_color:new a.Uniform4f(_),u_star_intensity:new a.Uniform1f(_),u_star_density:new a.Uniform1f(_),u_star_size:new a.Uniform1f(_),u_temporal_offset:new a.Uniform1f(_),u_horizon_angle:new a.Uniform1f(_),u_rotation_matrix:new a.UniformMatrix4f(_)})};let zf;function hu(_,s,d,x,T,M,z){const D=_.context,j=D.gl,W=_.transform,H=_.useProgram("collisionBox"),ne=[];let he=0,ve=0;for(let ze=0;ze<x.length;ze++){const Ve=x[ze],We=s.getTile(Ve),He=We.getBucket(d);if(!He)continue;const Je=Ra(Ve,He,W);let Ke=Je;T[0]===0&&T[1]===0||(Ke=_.translatePosMatrix(Je,We,T,M));const ct=z?He.textCollisionBox:He.iconCollisionBox,$t=He.collisionCircleArray;if($t.length>0){const rt=a.create(),vt=Ke;a.mul(rt,He.placementInvProjMatrix,W.glCoordMatrix),a.mul(rt,rt,He.placementViewportMatrix),ne.push({circleArray:$t,circleOffset:ve,transform:vt,invTransform:rt,projection:He.getProjection()}),he+=$t.length/4,ve=he}ct&&(_.terrain&&_.terrain.setupElevationDraw(We,H),H.draw(D,j.LINES,a.DepthMode.disabled,a.StencilMode.disabled,_.colorModeForRenderPass(),a.CullFaceMode.disabled,hc(Ke,W,We,He.getProjection()),d.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,W.zoom,null,[ct.collisionVertexBuffer,ct.collisionVertexBufferExt]))}if(!z||!ne.length)return;const we=_.useProgram("collisionCircle"),xe=new a.StructArrayLayout2f1f2i16;xe.resize(4*he),xe._trim();let Ee=0;for(const ze of ne)for(let Ve=0;Ve<ze.circleArray.length/4;Ve++){const We=4*Ve,He=ze.circleArray[We+0],Je=ze.circleArray[We+1],Ke=ze.circleArray[We+2],ct=ze.circleArray[We+3];xe.emplace(Ee++,He,Je,Ke,ct,0),xe.emplace(Ee++,He,Je,Ke,ct,1),xe.emplace(Ee++,He,Je,Ke,ct,2),xe.emplace(Ee++,He,Je,Ke,ct,3)}(!zf||zf.length<2*he)&&(zf=(function(ze){const Ve=2*ze,We=new a.StructArrayLayout3ui6;We.resize(Ve),We._trim();for(let He=0;He<Ve;He++){const Je=6*He;We.uint16[Je+0]=4*He+0,We.uint16[Je+1]=4*He+1,We.uint16[Je+2]=4*He+2,We.uint16[Je+3]=4*He+2,We.uint16[Je+4]=4*He+3,We.uint16[Je+5]=4*He+0}return We})(he));const ie=D.createIndexBuffer(zf,!0),ye=D.createVertexBuffer(xe,a.collisionCircleLayout.members,!0);for(const ze of ne){const Ve={u_matrix:ze.transform,u_inv_matrix:ze.invTransform,u_camera_to_center_distance:(ke=W).getCameraToCenterDistance(ze.projection),u_viewport_size:[ke.width,ke.height]};we.draw(D,j.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,_.colorModeForRenderPass(),a.CullFaceMode.disabled,Ve,d.id,ye,ie,a.SegmentVector.simpleSegment(0,2*ze.circleOffset,ze.circleArray.length,ze.circleArray.length/2),null,W.zoom)}var ke;ye.destroy(),ie.destroy()}const _p=a.create();function Yh({width:_,height:s,anchor:d,textOffset:x,textScale:T},M){const{horizontalAlign:z,verticalAlign:D}=a.getAnchorAlignment(d),j=-(z-.5)*_,W=-(D-.5)*s,H=a.evaluateVariableOffset(d,x);return new a.Point((j/T+H[0])*M,(W/T+H[1])*M)}function vp(_,s,d,x,T,M,z,D,j,W,H){const ne=_.text.placedSymbolArray,he=_.text.dynamicLayoutVertexArray,ve=_.icon.dynamicLayoutVertexArray,we={},xe=_.getProjection(),Ee=Ai(D,xe,M),ie=M.elevation,ye=xe.upVectorScale(D.canonical,M.center.lat,M.worldSize).metersToTile;he.clear();for(let ke=0;ke<ne.length;ke++){const ze=ne.get(ke),{tileAnchorX:Ve,tileAnchorY:We,numGlyphs:He}=ze,Je=ze.hidden||!ze.crossTileID||_.allowVerticalPlacement&&!ze.placedOrientation?null:x[ze.crossTileID];if(Je){let Ke=0,ct=0,$t=0;if(ie){const At=ie?ie.getAtTileOffset(D,Ve,We):0,[vn,Pn,Nt]=xe.upVector(D.canonical,Ve,We);Ke=At*vn*ye,ct=At*Pn*ye,$t=At*Nt*ye}let[rt,vt,lt,Ft]=Mi(ze.projectedAnchorX+Ke,ze.projectedAnchorY+ct,ze.projectedAnchorZ+$t,d?Ee:z);const ot=_o(M.getCameraToCenterDistance(xe),Ft);let St=T.evaluateSizeForFeature(_.textSizeData,W,ze)*ot/a.ONE_EM;d&&(St*=_.tilePixelRatio/j);const jt=Yh(Je,St);d?({x:rt,y:vt,z:lt}=xe.projectTilePoint(Ve+jt.x,We+jt.y,D.canonical),[rt,vt,lt]=Mi(rt+Ke,vt+ct,lt+$t,z)):(s&&jt._rotate(-M.angle),rt+=jt.x,vt+=jt.y,lt=0);const Et=_.allowVerticalPlacement&&ze.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let At=0;At<He;At++)a.addDynamicAttributes(he,rt,vt,lt,Et);H&&ze.associatedIconIndex>=0&&(we[ze.associatedIconIndex]={x:rt,y:vt,z:lt,angle:Et})}else Io(He,he)}if(H){ve.clear();const ke=_.icon.placedSymbolArray;for(let ze=0;ze<ke.length;ze++){const Ve=ke.get(ze),{numGlyphs:We}=Ve,He=we[ze];if(Ve.hidden||!He)Io(We,ve);else{const{x:Je,y:Ke,z:ct,angle:$t}=He;for(let rt=0;rt<We;rt++)a.addDynamicAttributes(ve,Je,Ke,ct,$t)}}_.icon.dynamicLayoutVertexBuffer.updateData(ve)}_.text.dynamicLayoutVertexBuffer.updateData(he)}function xp(_,s,d){return d.iconsInText&&s?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function pc(_,s,d,x,T,M,z,D,j,W,H,ne){const he=_.context,ve=he.gl,we=_.transform,xe=D==="map",Ee=j==="map",ie=xe&&d.layout.get("symbol-placement")!=="point",ye=xe&&!Ee&&!ie,ke=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ze=!1;const Ve=_.depthModeForSublayer(0,a.DepthMode.ReadOnly),We=[a.mercatorXfromLng(we.center.lng),a.mercatorYfromLat(we.center.lat)],He=d.layout.get("text-variable-anchor"),Je=we.projection.name==="globe",Ke=[],ct=[0,-1,0];let $t=ct;!Je&&!we.mercatorFromTransition||xe||($t=(function(rt){const vt=rt._camera.getWorldToCamera(rt.worldSize,1),lt=a.multiply([],vt,rt.globeMatrix);a.invert(lt,lt);const Ft=[0,0,0],ot=[0,1,0,0];return a.transformMat4$1(ot,ot,lt),Ft[0]=ot[0],Ft[1]=ot[1],Ft[2]=ot[2],a.normalize(Ft,Ft),Ft})(we));for(const rt of x){const vt=s.getTile(rt),lt=vt.getBucket(d);if(!lt||lt.projection.name==="mercator"&&Je)continue;const Ft=T?lt.text:lt.icon;if(!Ft||lt.fullyClipped||!Ft.segments.get().length)continue;const ot=Ft.programConfigurations.get(d.id),St=T||lt.sdfIcons,jt=T?lt.textSizeData:lt.iconSizeData,Et=Ee||we.pitch!==0,At=a.evaluateSizeForZoom(jt,we.zoom);let vn,Pn,Nt,rn,kn=[0,0],Yn=null;if(T)Pn=vt.glyphAtlasTexture,Nt=ve.LINEAR,vn=vt.glyphAtlasTexture.size,lt.iconsInText&&(kn=vt.imageAtlasTexture.size,Yn=vt.imageAtlasTexture,rn=Et||_.options.rotating||_.options.zooming||jt.kind==="composite"||jt.kind==="camera"?ve.LINEAR:ve.NEAREST);else{const jo=d.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;Pn=vt.imageAtlasTexture,Nt=St||_.options.rotating||_.options.zooming||jo||Et?ve.LINEAR:ve.NEAREST,vn=vt.imageAtlasTexture.size}const pn=lt.projection.name==="globe",_r=pn?$t:ct,$r=pn?a.globeToMercatorTransition(we.zoom):0,Br=Ai(rt,lt.getProjection(),we),Lr=we.calculatePixelsToTileUnitsMatrix(vt),Fa=_t(Br,vt.tileID.canonical,Ee,xe,we,lt.getProjection(),Lr),vr=_.terrain&&Ee&&ie?a.invert(a.create(),Fa):_p,uo=Bi(Br,vt.tileID.canonical,Ee,xe,we,lt.getProjection(),Lr),Fo=He&&lt.hasTextData(),gi=d.layout.get("icon-text-fit")!=="none"&&Fo&&lt.hasIconData();if(ie){const jo=we.elevation,Ts=jo?jo.getAtTileOffsetFunc(rt,we.center.lat,we.worldSize,lt.getProjection()):null,Qa=Xa(Br,vt.tileID.canonical,Ee,xe,we,lt.getProjection(),Lr);ip(lt,Br,_,T,Qa,uo,Ee,W,Ts,rt)}const Yr=ie||T&&He||gi,Pr=_.translatePosMatrix(Br,vt,M,z),Ui=Yr?_p:Fa,Ia=_.translatePosMatrix(uo,vt,M,z,!0),ri=lt.getProjection().createInversionMatrix(we,rt.canonical),si=[];_.terrainRenderModeElevated()&&Ee&&si.push("PITCH_WITH_MAP_TERRAIN"),pn&&si.push("PROJECTION_GLOBE_VIEW"),Yr&&si.push("PROJECTED_POS_ON_VIEWPORT");const Fi=St&&d.paint.get(T?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ss;Ss=St?lt.iconsInText?Ym(jt.kind,At,ye,Ee,_,Pr,Ui,Ia,vn,kn,rt,$r,We,ri,_r,lt.getProjection()):Xh(jt.kind,At,ye,Ee,_,Pr,Ui,Ia,T,vn,!0,rt,$r,We,ri,_r,lt.getProjection()):gp(jt.kind,At,ye,Ee,_,Pr,Ui,Ia,T,vn,rt,$r,We,ri,_r,lt.getProjection());const Ks={program:_.useProgram(xp(St,T,lt),ot,si),buffers:Ft,uniformValues:Ss,atlasTexture:Pn,atlasTextureIcon:Yn,atlasInterpolation:Nt,atlasInterpolationIcon:rn,isSDF:St,hasHalo:Fi,tile:vt,labelPlaneMatrixInv:vr};if(ke&&lt.canOverlap){ze=!0;const jo=Ft.segments.get();for(const Ts of jo)Ke.push({segments:new a.SegmentVector([Ts]),sortKey:Ts.sortKey,state:Ks})}else Ke.push({segments:Ft.segments,sortKey:0,state:Ks})}ze&&Ke.sort(((rt,vt)=>rt.sortKey-vt.sortKey));for(const rt of Ke){const vt=rt.state;if(_.terrain&&_.terrain.setupElevationDraw(vt.tile,vt.program,{useDepthForOcclusion:!Je,labelPlaneMatrixInv:vt.labelPlaneMatrixInv}),he.activeTexture.set(ve.TEXTURE0),vt.atlasTexture.bind(vt.atlasInterpolation,ve.CLAMP_TO_EDGE),vt.atlasTextureIcon&&(he.activeTexture.set(ve.TEXTURE1),vt.atlasTextureIcon&&vt.atlasTextureIcon.bind(vt.atlasInterpolationIcon,ve.CLAMP_TO_EDGE)),vt.isSDF){const lt=vt.uniformValues;vt.hasHalo&&(lt.u_is_halo=1,mc(vt.buffers,rt.segments,d,_,vt.program,Ve,H,ne,lt)),lt.u_is_halo=0}mc(vt.buffers,rt.segments,d,_,vt.program,Ve,H,ne,vt.uniformValues)}}function mc(_,s,d,x,T,M,z,D,j){const W=x.context,H=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer];T.draw(W,W.gl.TRIANGLES,M,z,D,a.CullFaceMode.disabled,j,d.id,_.layoutVertexBuffer,_.indexBuffer,s,d.paint,x.transform.zoom,_.programConfigurations.get(d.id),H)}function du(_,s,d,x,T,M,z){const D=_.context.gl,j=d.paint.get("fill-pattern"),W=j&&j.constantOr(1);let H,ne,he,ve,we;z?(ne=W&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=D.LINES):(ne=W?"fillPattern":"fill",H=D.TRIANGLES);for(const xe of x){const Ee=s.getTile(xe);if(W&&!Ee.patternsLoaded())continue;const ie=Ee.getBucket(d);if(!ie)continue;_.prepareDrawTile();const ye=ie.programConfigurations.get(d.id),ke=_.useProgram(ne,ye);W&&(_.context.activeTexture.set(D.TEXTURE0),Ee.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),ye.updatePaintBuffers());const ze=j.constantOr(null);if(ze&&Ee.imageAtlas){const We=Ee.imageAtlas.patternPositions[ze.toString()];We&&ye.setConstantPatternPositions(We)}const Ve=_.translatePosMatrix(xe.projMatrix,Ee,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(z){ve=ie.indexBuffer2,we=ie.segments2;const We=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[D.drawingBufferWidth,D.drawingBufferHeight];he=ne==="fillOutlinePattern"&&W?Xy(Ve,_,Ee,We):Zy(Ve,We)}else ve=ie.indexBuffer,we=ie.segments,he=W?ml(Ve,_,Ee):pl(Ve);_.prepareDrawProgram(_.context,ke,xe.toUnwrapped()),ke.draw(_.context,H,T,_.stencilModeForClipping(xe),M,a.CullFaceMode.disabled,he,d.id,ie.layoutVertexBuffer,ve,we,d.paint,_.transform.zoom,ye)}}function pu(_,s,d,x,T,M,z){const D=_.context,j=D.gl,W=_.transform,H=d.paint.get("fill-extrusion-pattern"),ne=H.constantOr(1),he=d.paint.get("fill-extrusion-opacity"),ve=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),d.paint.get("fill-extrusion-ambient-occlusion-radius")],we=d.layout.get("fill-extrusion-edge-radius"),xe=we>0&&!d.paint.get("fill-extrusion-rounded-roof"),Ee=xe?0:we,ie=W.projection.name==="globe"?a.fillExtrusionHeightLift():0,ye=W.projection.name==="globe",ke=ye?a.globeToMercatorTransition(W.zoom):0,ze=[a.mercatorXfromLng(W.center.lng),a.mercatorYfromLat(W.center.lat)],Ve=[];ye&&Ve.push("PROJECTION_GLOBE_VIEW"),ve[0]>0&&Ve.push("FAUX_AO"),xe&&Ve.push("ZERO_ROOF_RADIUS");for(const We of x){const He=s.getTile(We),Je=He.getBucket(d);if(!Je||Je.projection.name!==W.projection.name)continue;const Ke=Je.programConfigurations.get(d.id),ct=_.useProgram(ne?"fillExtrusionPattern":"fillExtrusion",Ke,Ve);if(_.terrain){const St=_.terrain;if(_.style.terrainSetForDrapingOnly())St.setupElevationDraw(He,ct,{useMeterToDem:!0});else{if(!Je.enableTerrain)continue;if(St.setupElevationDraw(He,ct,{useMeterToDem:!0}),bp(D,s,We,Je,d,St),!Je.centroidVertexBuffer){const jt=ct.attributes.a_centroid_pos;jt!==void 0&&j.vertexAttrib2f(jt,0,0)}}}ne&&(_.context.activeTexture.set(j.TEXTURE0),He.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Ke.updatePaintBuffers());const $t=H.constantOr(null);if($t&&He.imageAtlas){const St=He.imageAtlas.patternPositions[$t.toString()];St&&Ke.setConstantPatternPositions(St)}const rt=_.translatePosMatrix(We.projMatrix,He,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),vt=W.projection.createInversionMatrix(W,We.canonical),lt=d.paint.get("fill-extrusion-vertical-gradient"),Ft=ne?mp(rt,_,lt,he,ve,Ee,We,He,ie,ke,ze,vt):Vh(rt,_,lt,he,ve,Ee,We,ie,ke,ze,vt);_.prepareDrawProgram(D,ct,We.toUnwrapped());const ot=[];_.terrain&&ot.push(Je.centroidVertexBuffer),ye&&ot.push(Je.layoutVertexExtBuffer),ct.draw(D,D.gl.TRIANGLES,T,M,z,a.CullFaceMode.backCCW,Ft,d.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,d.paint,_.transform.zoom,Ke,ot)}}function bp(_,s,d,x,T,M){const z=[ie=>{let ye=ie.canonical.x-1,ke=ie.wrap;return ye<0&&(ye=(1<<ie.canonical.z)-1,ke--),new a.OverscaledTileID(ie.overscaledZ,ke,ie.canonical.z,ye,ie.canonical.y)},ie=>{let ye=ie.canonical.x+1,ke=ie.wrap;return ye===1<<ie.canonical.z&&(ye=0,ke++),new a.OverscaledTileID(ie.overscaledZ,ke,ie.canonical.z,ye,ie.canonical.y)},ie=>new a.OverscaledTileID(ie.overscaledZ,ie.wrap,ie.canonical.z,ie.canonical.x,(ie.canonical.y===0?1<<ie.canonical.z:ie.canonical.y)-1),ie=>new a.OverscaledTileID(ie.overscaledZ,ie.wrap,ie.canonical.z,ie.canonical.x,ie.canonical.y===(1<<ie.canonical.z)-1?0:ie.canonical.y+1)],D=ie=>{const ye=s.getSource().minzoom,ke=Ve=>{const We=s.getTileByID(Ve);if(We&&We.hasData())return We.getBucket(T)},ze=[0,-1,1];for(const Ve of ze){if(ie.overscaledZ+Ve<ye)continue;const We=ke(ie.calculateScaledKey(ie.overscaledZ+Ve));if(We)return We}},j=[0,0,0],W=(ie,ye)=>(j[0]=Math.min(ie.min.y,ye.min.y),j[1]=Math.max(ie.max.y,ye.max.y),j[2]=a.EXTENT-ye.min.x>ie.max.x?ye.min.x-a.EXTENT:ie.max.x,j),H=(ie,ye)=>(j[0]=Math.min(ie.min.x,ye.min.x),j[1]=Math.max(ie.max.x,ye.max.x),j[2]=a.EXTENT-ye.min.y>ie.max.y?ye.min.y-a.EXTENT:ie.max.y,j),ne=[(ie,ye)=>W(ie,ye),(ie,ye)=>W(ye,ie),(ie,ye)=>H(ie,ye),(ie,ye)=>H(ye,ie)],he=new a.Point(0,0);let ve,we,xe;const Ee=(ie,ye,ke,ze,Ve)=>{const We=[[ze?ke:ie,ze?ie:ke,0],[ze?ke:ye,ze?ye:ke,0]],He=Ve<0?a.EXTENT+Ve:Ve,Je=[ze?He:(ie+ye)/2,ze?(ie+ye)/2:He,0];return ke===0&&Ve<0||ke!==0&&Ve>0?M.getForTilePoints(xe,[Je],!0,we):We.push(Je),M.getForTilePoints(d,We,!0,ve),Math.max(We[0][2],We[1][2],Je[2])/M.exaggeration()};for(let ie=0;ie<4;ie++){const ye=(ie<2?1:5)-ie,ke=x.borders[ie];if(ke.length===0)continue;const ze=xe=z[ie](d),Ve=D(ze);if(!(Ve&&Ve instanceof a.FillExtrusionBucket&&Ve.enableTerrain)||x.borderDoneWithNeighborZ[ie]===Ve.canonical.z&&Ve.borderDoneWithNeighborZ[ye]===x.canonical.z||(we=M.findDEMTileFor(ze),!we||!we.dem))continue;if(!ve){const Ke=M.findDEMTileFor(d);if(!Ke||!Ke.dem)return;ve=Ke}const We=Ve.borders[ye];let He=0;const Je=Ve.borderDoneWithNeighborZ[ye]!==x.canonical.z;if(x.canonical.z===Ve.canonical.z){for(let Ke=0;Ke<ke.length;Ke++){const ct=x.featuresOnBorder[ke[Ke]],$t=ct.borders[ie];let rt;for(;He<We.length&&(rt=Ve.featuresOnBorder[We[He]],!(rt.borders[ye][1]>$t[0]+3));)Je&&Ve.encodeCentroid(void 0,rt,!1),He++;if(rt&&He<We.length){const vt=He;let lt=0;for(;!(rt.borders[ye][0]>$t[1]-3)&&(lt++,++He!==We.length);)rt=Ve.featuresOnBorder[We[He]];if(rt=Ve.featuresOnBorder[We[vt]],ct.intersectsCount()>1||rt.intersectsCount()>1||lt!==1){lt!==1&&(He=vt),x.encodeCentroid(void 0,ct,!1),Je&&Ve.encodeCentroid(void 0,rt,!1);continue}const Ft=ne[ie](ct,rt),ot=ie%2?a.EXTENT-1:0;he.x=Ee(Ft[0],Math.min(a.EXTENT-1,Ft[1]),ot,ie<2,Ft[2]),he.y=0,x.encodeCentroid(he,ct,!1),Je&&Ve.encodeCentroid(he,rt,!1)}else x.encodeCentroid(void 0,ct,!1)}x.borderDoneWithNeighborZ[ie]=Ve.canonical.z,x.needsCentroidUpdate=!0,Je&&(Ve.borderDoneWithNeighborZ[ye]=x.canonical.z,Ve.needsCentroidUpdate=!0)}else{for(const Ke of ke)x.encodeCentroid(void 0,x.featuresOnBorder[Ke],!1);if(Je){for(const Ke of We)Ve.encodeCentroid(void 0,Ve.featuresOnBorder[Ke],!1);Ve.borderDoneWithNeighborZ[ye]=x.canonical.z,Ve.needsCentroidUpdate=!0}x.borderDoneWithNeighborZ[ie]=Ve.canonical.z,x.needsCentroidUpdate=!0}}(x.needsCentroidUpdate||!x.centroidVertexBuffer&&x.centroidVertexArray.length!==0)&&x.uploadCentroid(_)}const Lo=new a.Color(1,0,0,1),mu=new a.Color(0,1,0,1),wp=new a.Color(0,0,1,1),Km=new a.Color(1,0,1,1),gc=new a.Color(0,1,1,1);function Qm(_,s,d){const x=_.context,T=_.transform,M=x.gl,z=T.projection.name==="globe",D=z?["PROJECTION_GLOBE_VIEW"]:null;let j=d.projMatrix;if(z&&a.globeToMercatorTransition(T.zoom)>0){const ct=a.transitionTileAABBinECEF(d.canonical,T),$t=a.globeDenormalizeECEF(ct);j=a.multiply(new Float32Array(16),T.globeMatrix,$t),a.multiply(j,T.projMatrix,j)}const W=_.useProgram("debug",null,D),H=s.getTileByID(d.key);_.terrain&&_.terrain.setupElevationDraw(H,W);const ne=a.DepthMode.disabled,he=a.StencilMode.disabled,ve=_.colorModeForRenderPass(),we="$debug";x.activeTexture.set(M.TEXTURE0),_.emptyTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),z?H._makeGlobeTileDebugBuffers(_.context,T):H._makeDebugTileBoundsBuffers(_.context,T.projection);const xe=H._tileDebugBuffer||_.debugBuffer,Ee=H._tileDebugIndexBuffer||_.debugIndexBuffer,ie=H._tileDebugSegments||_.debugSegments;W.draw(x,M.LINE_STRIP,ne,he,ve,a.CullFaceMode.disabled,gl(j,a.Color.red),we,xe,Ee,ie,null,null,null,[H._globeTileDebugBorderBuffer]);const ye=H.latestRawTileData,ke=Math.floor((ye&&ye.byteLength||0)/1024),ze=s.getTile(d).tileSize,Ve=512/Math.min(ze,512)*(d.overscaledZ/T.zoom)*.5;let We=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(We+=` => ${d.overscaledZ}`),We+=` ${ke}kb`,(function(ct,$t){ct.initDebugOverlayCanvas();const rt=ct.debugOverlayCanvas,vt=ct.context.gl,lt=ct.debugOverlayCanvas.getContext("2d");lt.clearRect(0,0,rt.width,rt.height),lt.shadowColor="white",lt.shadowBlur=2,lt.lineWidth=1.5,lt.strokeStyle="white",lt.textBaseline="top",lt.font="bold 36px Open Sans, sans-serif",lt.fillText($t,5,5),lt.strokeText($t,5,5),ct.debugOverlayTexture.update(rt),ct.debugOverlayTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)})(_,We);const He=H._tileDebugTextBuffer||_.debugBuffer,Je=H._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,Ke=H._tileDebugTextSegments||_.debugSegments;W.draw(x,M.TRIANGLES,ne,he,a.ColorMode.alphaBlended,a.CullFaceMode.disabled,gl(j,a.Color.transparent,Ve),we,He,Je,Ke,null,null,null,[H._globeTileDebugTextBuffer])}function Sp(_,s,d,x){gu(_,0,s+d/2,_.transform.width,d,x)}function Lf(_,s,d,x){gu(_,s-d/2,0,d,_.transform.height,x)}function gu(_,s,d,x,T,M){const z=_.context,D=z.gl;D.enable(D.SCISSOR_TEST),D.scissor(s*a.exported.devicePixelRatio,d*a.exported.devicePixelRatio,x*a.exported.devicePixelRatio,T*a.exported.devicePixelRatio),z.clear({color:M}),D.disable(D.SCISSOR_TEST)}const Jm=a.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:eg}=Jm;function xs(_,s,d,x){_.emplaceBack(s,d,x)}class Pf{constructor(s){this.vertexArray=new a.StructArrayLayout3f12,this.indices=new a.StructArrayLayout3ui6,xs(this.vertexArray,-1,-1,1),xs(this.vertexArray,1,-1,1),xs(this.vertexArray,-1,1,1),xs(this.vertexArray,1,1,1),xs(this.vertexArray,-1,-1,-1),xs(this.vertexArray,1,-1,-1),xs(this.vertexArray,-1,1,-1),xs(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,eg),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=a.SegmentVector.simpleSegment(0,0,36,12)}}function lo(_,s,d,x,T,M){const z=_.gl,D=s.paint.get("sky-atmosphere-color"),j=s.paint.get("sky-atmosphere-halo-color"),W=s.paint.get("sky-atmosphere-sun-intensity"),H=((ne,he,ve,we,xe)=>({u_matrix_3f:ne,u_sun_direction:he,u_sun_intensity:ve,u_color_tint_r:[we.r,we.g,we.b,we.a],u_color_tint_m:[xe.r,xe.g,xe.b,xe.a],u_luminance:5e-5}))(a.fromMat4(a.create$1(),x),T,W,D,j);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+M,s.skyboxTexture,0),d.draw(_,z.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.frontCW,H,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const Ka=a.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Df{constructor(s){const d=new a.StructArrayLayout5f20;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const x=new a.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(d,Ka.members),this.indexBuffer=s.createIndexBuffer(x),this.segments=a.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ba={symbol:function(_,s,d,x,T){if(_.renderPass!=="translucent")return;const M=a.StencilMode.disabled,z=_.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&(function(D,j,W,H,ne,he,ve){const we=j.transform,xe=ne==="map",Ee=he==="map";for(const ie of D){const ye=H.getTile(ie),ke=ye.getBucket(W);if(!ke||!ke.text||!ke.text.segments.get().length)continue;const ze=a.evaluateSizeForZoom(ke.textSizeData,we.zoom),Ve=Ai(ie,ke.getProjection(),we),We=we.calculatePixelsToTileUnitsMatrix(ye),He=_t(Ve,ye.tileID.canonical,Ee,xe,we,ke.getProjection(),We),Je=W.layout.get("icon-text-fit")!=="none"&&ke.hasIconData();if(ze){const Ke=Math.pow(2,we.zoom-ye.tileID.overscaledZ);vp(ke,xe,Ee,ve,a.symbolSize,we,He,ie,Ke,ze,Je)}}})(x,_,d,s,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),T),d.paint.get("icon-opacity").constantOr(1)!==0&&pc(_,s,d,x,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),M,z),d.paint.get("text-opacity").constantOr(1)!==0&&pc(_,s,d,x,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),M,z),s.map.showCollisionBoxes&&(hu(_,s,d,x,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),hu(_,s,d,x,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(_,s,d,x){if(_.renderPass!=="translucent")return;const T=d.paint.get("circle-opacity"),M=d.paint.get("circle-stroke-width"),z=d.paint.get("circle-stroke-opacity"),D=d.layout.get("circle-sort-key").constantOr(1)!==void 0;if(T.constantOr(1)===0&&(M.constantOr(1)===0||z.constantOr(1)===0))return;const j=_.context,W=j.gl,H=_.transform,ne=_.depthModeForSublayer(0,a.DepthMode.ReadOnly),he=a.StencilMode.disabled,ve=_.colorModeForRenderPass(),we=H.projection.name==="globe",xe=[a.mercatorXfromLng(H.center.lng),a.mercatorYfromLat(H.center.lat)],Ee=[];for(let ye=0;ye<x.length;ye++){const ke=x[ye],ze=s.getTile(ke),Ve=ze.getBucket(d);if(!Ve||Ve.projection.name!==H.projection.name)continue;const We=Ve.programConfigurations.get(d.id),He=Hh(d);we&&He.push("PROJECTION_GLOBE_VIEW");const Je=_.useProgram("circle",We,He),Ke=Ve.layoutVertexBuffer,ct=Ve.globeExtVertexBuffer,$t=Ve.indexBuffer,rt=H.projection.createInversionMatrix(H,ke.canonical),vt={programConfiguration:We,program:Je,layoutVertexBuffer:Ke,globeExtVertexBuffer:ct,indexBuffer:$t,uniformValues:Gh(_,ke,ze,rt,xe,d),tile:ze};if(D){const lt=Ve.segments.get();for(const Ft of lt)Ee.push({segments:new a.SegmentVector([Ft]),sortKey:Ft.sortKey,state:vt})}else Ee.push({segments:Ve.segments,sortKey:0,state:vt})}D&&Ee.sort(((ye,ke)=>ye.sortKey-ke.sortKey));const ie={useDepthForOcclusion:!we};for(const ye of Ee){const{programConfiguration:ke,program:ze,layoutVertexBuffer:Ve,globeExtVertexBuffer:We,indexBuffer:He,uniformValues:Je,tile:Ke}=ye.state,ct=ye.segments;_.terrain&&_.terrain.setupElevationDraw(Ke,ze,ie),_.prepareDrawProgram(j,ze,Ke.tileID.toUnwrapped()),ze.draw(j,W.TRIANGLES,ne,he,ve,a.CullFaceMode.disabled,Je,d.id,Ve,He,ct,d.paint,H.zoom,ke,[We])}},heatmap:function(_,s,d,x){if(d.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const T=_.context,M=T.gl,z=a.StencilMode.disabled,D=new a.ColorMode([M.ONE,M.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ve,we,xe,Ee){const ie=ve.gl,ye=we.width*Ee,ke=we.height*Ee;ve.activeTexture.set(ie.TEXTURE1),ve.viewport.set([0,0,ye,ke]);let ze=xe.heatmapFbo;if(!ze||ze&&(ze.width!==ye||ze.height!==ke)){ze&&ze.destroy();const Ve=ie.createTexture();ie.bindTexture(ie.TEXTURE_2D,Ve),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,ie.LINEAR),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,ie.LINEAR),ze=xe.heatmapFbo=ve.createFramebuffer(ye,ke,!1),(function(We,He,Je,Ke,ct,$t){const rt=We.gl;rt.texImage2D(rt.TEXTURE_2D,0,We.isWebGL2&&We.extRenderToTextureHalfFloat?rt.RGBA16F:rt.RGBA,ct,$t,0,rt.RGBA,We.extRenderToTextureHalfFloat?We.isWebGL2?rt.HALF_FLOAT:We.extTextureHalfFloat.HALF_FLOAT_OES:rt.UNSIGNED_BYTE,null),Ke.colorAttachment.set(Je)})(ve,0,Ve,ze,ye,ke)}else ie.bindTexture(ie.TEXTURE_2D,ze.colorAttachment.get()),ve.bindFramebuffer.set(ze.framebuffer)})(T,_,d,_.transform.projection.name==="globe"?.5:.25),T.clear({color:a.Color.transparent});const j=_.transform,W=j.projection.name==="globe",H=W?["PROJECTION_GLOBE_VIEW"]:null,ne=W?a.CullFaceMode.frontCCW:a.CullFaceMode.disabled,he=[a.mercatorXfromLng(j.center.lng),a.mercatorYfromLat(j.center.lat)];for(let ve=0;ve<x.length;ve++){const we=x[ve];if(s.hasRenderableParent(we))continue;const xe=s.getTile(we),Ee=xe.getBucket(d);if(!Ee||Ee.projection.name!==j.projection.name)continue;const ie=Ee.programConfigurations.get(d.id),ye=_.useProgram("heatmap",ie,H),{zoom:ke}=_.transform;_.terrain&&_.terrain.setupElevationDraw(xe,ye),_.prepareDrawProgram(T,ye,we.toUnwrapped());const ze=j.projection.createInversionMatrix(j,we.canonical);ye.draw(T,M.TRIANGLES,a.DepthMode.disabled,z,D,ne,kf(_,we,xe,ze,he,ke,d.paint.get("heatmap-intensity")),d.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,d.paint,_.transform.zoom,ie,W?[Ee.globeExtVertexBuffer]:null)}T.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),(function(T,M){const z=T.context,D=z.gl,j=M.heatmapFbo;if(!j)return;z.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,j.colorAttachment.get()),z.activeTexture.set(D.TEXTURE1);let W=M.colorRampTexture;W||(W=M.colorRampTexture=new a.Texture(z,M.colorRamp,D.RGBA)),W.bind(D.LINEAR,D.CLAMP_TO_EDGE),T.useProgram("heatmapTexture").draw(z,D.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,T.colorModeForRenderPass(),a.CullFaceMode.disabled,((H,ne,he,ve)=>({u_image:0,u_color_ramp:1,u_opacity:ne.paint.get("heatmap-opacity")}))(0,M),M.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,M.paint,T.transform.zoom)})(_,d))},line:function(_,s,d,x){if(_.renderPass!=="translucent")return;const T=d.paint.get("line-opacity"),M=d.paint.get("line-width");if(T.constantOr(1)===0||M.constantOr(1)===0)return;const z=_.depthModeForSublayer(0,a.DepthMode.ReadOnly),D=_.colorModeForRenderPass(),j=_.terrain&&_.terrain.renderingToTexture?1:a.exported.devicePixelRatio,W=d.paint.get("line-dasharray"),H=W.constantOr(1),ne=d.layout.get("line-cap"),he=d.paint.get("line-pattern"),ve=he.constantOr(1),we=d.paint.get("line-gradient"),xe=ve?"linePattern":"line",Ee=_.context,ie=Ee.gl,ye=(ze=>{const Ve=[];fu(ze)&&Ve.push("RENDER_LINE_DASH"),ze.paint.get("line-gradient")&&Ve.push("RENDER_LINE_GRADIENT");const We=ze.paint.get("line-trim-offset");We[0]===0&&We[1]===0||Ve.push("RENDER_LINE_TRIM_OFFSET");const He=ze.paint.get("line-pattern").constantOr(1),Je=ze.paint.get("line-opacity").constantOr(1)!==1;return!He&&Je&&Ve.push("RENDER_LINE_ALPHA_DISCARD"),Ve})(d);let ke=ye.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(ke=!1);for(const ze of x){const Ve=s.getTile(ze);if(ve&&!Ve.patternsLoaded())continue;const We=Ve.getBucket(d);if(!We)continue;_.prepareDrawTile();const He=We.programConfigurations.get(d.id),Je=_.useProgram(xe,He,ye),Ke=he.constantOr(null);if(Ke&&Ve.imageAtlas){const St=Ve.imageAtlas.patternPositions[Ke.toString()];St&&He.setConstantPatternPositions(St)}const ct=W.constantOr(null),$t=ne.constantOr(null);if(!ve&&ct&&$t&&Ve.lineAtlas){const St=Ve.lineAtlas.getDash(ct,$t);St&&He.setConstantPatternPositions(St)}let[rt,vt]=d.paint.get("line-trim-offset");($t==="round"||$t==="square")&&rt!==vt&&(rt===0&&(rt-=1),vt===1&&(vt+=1));const lt=_.terrain?ze.projMatrix:null,Ft=ve?uu(_,Ve,d,lt,j):Xm(_,Ve,d,lt,We.lineClipsArray.length,j,[rt,vt]);if(we){const St=We.gradients[d.id];let jt=St.texture;if(d.gradientVersion!==St.version){let Et=256;if(d.stepInterpolant){const At=s.getSource().maxzoom,vn=ze.canonical.z===At?Math.ceil(1<<_.transform.maxZoom-ze.canonical.z):1;Et=a.clamp(a.nextPowerOfTwo(We.maxLineLength/a.EXTENT*1024*vn),256,Ee.maxTextureSize)}St.gradient=a.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Et,image:St.gradient||void 0,clips:We.lineClipsArray}),St.texture?St.texture.update(St.gradient):St.texture=new a.Texture(Ee,St.gradient,ie.RGBA),St.version=d.gradientVersion,jt=St.texture}Ee.activeTexture.set(ie.TEXTURE1),jt.bind(d.stepInterpolant?ie.NEAREST:ie.LINEAR,ie.CLAMP_TO_EDGE)}H&&(Ee.activeTexture.set(ie.TEXTURE0),Ve.lineAtlasTexture.bind(ie.LINEAR,ie.REPEAT),He.updatePaintBuffers()),ve&&(Ee.activeTexture.set(ie.TEXTURE0),Ve.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),He.updatePaintBuffers()),_.prepareDrawProgram(Ee,Je,ze.toUnwrapped());const ot=St=>{Je.draw(Ee,ie.TRIANGLES,z,St,D,a.CullFaceMode.disabled,Ft,d.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,d.paint,_.transform.zoom,He,[We.layoutVertexBuffer2])};if(ke){const St=_.stencilModeForClipping(ze).ref;St===0&&_.terrain&&Ee.clear({stencil:0});const jt={func:ie.EQUAL,mask:255};Ft.u_alpha_discard_threshold=.8,ot(new a.StencilMode(jt,St,255,ie.KEEP,ie.KEEP,ie.INVERT)),Ft.u_alpha_discard_threshold=0,ot(new a.StencilMode(jt,St,255,ie.KEEP,ie.KEEP,ie.KEEP))}else ot(_.stencilModeForClipping(ze))}ke&&(_.resetStencilClippingMasks(),_.terrain&&Ee.clear({stencil:0}))},fill:function(_,s,d,x){const T=d.paint.get("fill-color"),M=d.paint.get("fill-opacity");if(M.constantOr(1)===0)return;const z=_.colorModeForRenderPass(),D=d.paint.get("fill-pattern"),j=_.opaquePassEnabledForLayer()&&!D.constantOr(1)&&T.constantOr(a.Color.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===j){const W=_.depthModeForSublayer(1,_.renderPass==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly);du(_,s,d,x,W,z,!1)}if(_.renderPass==="translucent"&&d.paint.get("fill-antialias")){const W=_.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,a.DepthMode.ReadOnly);du(_,s,d,x,W,z,!0)}},"fill-extrusion":function(_,s,d,x){const T=d.paint.get("fill-extrusion-opacity");if(T!==0&&_.renderPass==="translucent"){const M=new a.DepthMode(_.context.gl.LEQUAL,a.DepthMode.ReadWrite,_.depthRangeFor3D);if(T!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))pu(_,s,d,x,M,a.StencilMode.disabled,a.ColorMode.disabled),pu(_,s,d,x,M,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const z=_.colorModeForRenderPass();pu(_,s,d,x,M,a.StencilMode.disabled,z)}}},hillshade:function(_,s,d,x){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const T=_.context,M=_.depthModeForSublayer(0,a.DepthMode.ReadOnly),z=_.colorModeForRenderPass(),D=_.terrain&&_.terrain.renderingToTexture,[j,W]=_.renderPass!=="translucent"||D?[{},x]:_.stencilConfigForOverlap(x);for(const H of W){const ne=s.getTile(H);if(ne.needsHillshadePrepare&&_.renderPass==="offscreen")Hm(_,ne,d,M,a.StencilMode.disabled,z);else if(_.renderPass==="translucent"){const he=D&&_.terrain?_.terrain.stencilModeForRTTOverlap(H):j[H.overscaledZ];Gm(_,H,ne,d,M,he,z)}}T.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,s,d,x,T,M){if(_.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!x.length)return;const z=_.context,D=z.gl,j=s.getSource(),W=_.useProgram("raster"),H=_.colorModeForRenderPass(),ne=_.terrain&&_.terrain.renderingToTexture,[he,ve]=j instanceof bn||ne?[{},x]:_.stencilConfigForOverlap(x),we=ve[ve.length-1].overscaledZ,xe=!_.options.moving;for(const Ee of ve){const ie=ne?a.DepthMode.disabled:_.depthModeForSublayer(Ee.overscaledZ-we,d.paint.get("raster-opacity")===1?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly,D.LESS),ye=Ee.toUnwrapped(),ke=s.getTile(Ee);if(ne&&(!ke||!ke.hasData()))continue;const ze=ne?Ee.projMatrix:_.transform.calculateProjMatrix(ye,xe),Ve=_.terrain&&ne?_.terrain.stencilModeForRTTOverlap(Ee):he[Ee.overscaledZ],We=M?0:d.paint.get("raster-fade-duration");ke.registerFadeDuration(We);const He=s.findLoadedParent(Ee,0),Je=hp(ke,He,s,_.transform,We);let Ke,ct;_.terrain&&_.terrain.prepareDrawTile();const $t=d.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;z.activeTexture.set(D.TEXTURE0),ke.texture.bind($t,D.CLAMP_TO_EDGE),z.activeTexture.set(D.TEXTURE1),He?(He.texture.bind($t,D.CLAMP_TO_EDGE),Ke=Math.pow(2,He.tileID.overscaledZ-ke.tileID.overscaledZ),ct=[ke.tileID.canonical.x*Ke%1,ke.tileID.canonical.y*Ke%1]):ke.texture.bind($t,D.CLAMP_TO_EDGE),ke.texture.useMipmap&&z.extTextureFilterAnisotropic&&_.transform.pitch>20&&D.texParameterf(D.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const rt=Wh(ze,ct||[0,0],Ke||1,Je,d,j instanceof bn?j.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(z,W,ye),j instanceof bn)j.boundsBuffer&&j.boundsSegments&&W.draw(z,D.TRIANGLES,ie,a.StencilMode.disabled,H,a.CullFaceMode.disabled,rt,d.id,j.boundsBuffer,_.quadTriangleIndexBuffer,j.boundsSegments);else{const{tileBoundsBuffer:vt,tileBoundsIndexBuffer:lt,tileBoundsSegments:Ft}=_.getTileBoundsBuffers(ke);W.draw(z,D.TRIANGLES,ie,Ve,H,a.CullFaceMode.disabled,rt,d.id,vt,lt,Ft)}}_.resetStencilClippingMasks()},background:function(_,s,d,x){const T=d.paint.get("background-color"),M=d.paint.get("background-opacity");if(M===0)return;const z=_.context,D=z.gl,j=_.transform,W=j.tileSize,H=d.paint.get("background-pattern");if(_.isPatternMissing(H))return;const ne=!H&&T.a===1&&M===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ne)return;const he=a.StencilMode.disabled,ve=_.depthModeForSublayer(0,ne==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly),we=_.colorModeForRenderPass(),xe=_.useProgram(H?"backgroundPattern":"background");let Ee,ie=x;ie||(Ee=_.getBackgroundTiles(),ie=Object.values(Ee).map((ye=>ye.tileID))),H&&(z.activeTexture.set(D.TEXTURE0),_.imageManager.bind(_.context));for(const ye of ie){const ke=ye.toUnwrapped(),ze=x?ye.projMatrix:_.transform.calculateProjMatrix(ke);_.prepareDrawTile();const Ve=s?s.getTile(ye):Ee?Ee[ye.key]:new a.Tile(ye,W,j.zoom,_),We=H?xo(ze,M,_,H,{tileID:ye,tileSize:W}):yp(ze,M,T);_.prepareDrawProgram(z,xe,ke);const{tileBoundsBuffer:He,tileBoundsIndexBuffer:Je,tileBoundsSegments:Ke}=_.getTileBoundsBuffers(Ve);xe.draw(z,D.TRIANGLES,ve,he,we,a.CullFaceMode.disabled,We,d.id,He,Je,Ke)}},sky:function(_,s,d){const x=_.transform,T=x.projection.name==="mercator"||x.projection.name==="globe"?1:a.smoothstep(7,8,x.zoom),M=d.paint.get("sky-opacity")*T;if(M===0)return;const z=_.context,D=d.paint.get("sky-type"),j=new a.DepthMode(z.gl.LEQUAL,a.DepthMode.ReadOnly,[0,1]),W=_.frameCounter/1e3%1;D==="atmosphere"?_.renderPass==="offscreen"?d.needsSkyboxCapture(_)&&((function(H,ne,he,ve){const we=H.context,xe=we.gl;let Ee=ne.skyboxFbo;if(!Ee){Ee=ne.skyboxFbo=we.createFramebuffer(32,32,!1),ne.skyboxGeometry=new Pf(we),ne.skyboxTexture=we.gl.createTexture(),xe.bindTexture(xe.TEXTURE_CUBE_MAP,ne.skyboxTexture),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_WRAP_S,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_WRAP_T,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_MIN_FILTER,xe.LINEAR),xe.texParameteri(xe.TEXTURE_CUBE_MAP,xe.TEXTURE_MAG_FILTER,xe.LINEAR);for(let ze=0;ze<6;++ze)xe.texImage2D(xe.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,xe.RGBA,32,32,0,xe.RGBA,xe.UNSIGNED_BYTE,null)}we.bindFramebuffer.set(Ee.framebuffer),we.viewport.set([0,0,32,32]);const ie=ne.getCenter(H,!0),ye=H.useProgram("skyboxCapture"),ke=new Float64Array(16);a.identity(ke),a.rotateY(ke,ke,.5*-Math.PI),lo(we,ne,ye,ke,ie,0),a.identity(ke),a.rotateY(ke,ke,.5*Math.PI),lo(we,ne,ye,ke,ie,1),a.identity(ke),a.rotateX(ke,ke,.5*-Math.PI),lo(we,ne,ye,ke,ie,2),a.identity(ke),a.rotateX(ke,ke,.5*Math.PI),lo(we,ne,ye,ke,ie,3),a.identity(ke),lo(we,ne,ye,ke,ie,4),a.identity(ke),a.rotateY(ke,ke,Math.PI),lo(we,ne,ye,ke,ie,5),we.viewport.set([0,0,H.width,H.height])})(_,d),d.markSkyboxValid(_)):_.renderPass==="sky"&&(function(H,ne,he,ve,we){const xe=H.context,Ee=xe.gl,ie=H.transform,ye=H.useProgram("skybox");xe.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_CUBE_MAP,ne.skyboxTexture);const ke=((ze,Ve,We,He,Je)=>({u_matrix:ze,u_sun_direction:Ve,u_cubemap:0,u_opacity:He,u_temporal_offset:Je}))(ie.skyboxMatrix,ne.getCenter(H,!1),0,ve,we);H.prepareDrawProgram(xe,ye),ye.draw(xe,Ee.TRIANGLES,he,a.StencilMode.disabled,H.colorModeForRenderPass(),a.CullFaceMode.backCW,ke,"skybox",ne.skyboxGeometry.vertexBuffer,ne.skyboxGeometry.indexBuffer,ne.skyboxGeometry.segment)})(_,d,j,M,W):D==="gradient"&&_.renderPass==="sky"&&(function(H,ne,he,ve,we){const xe=H.context,Ee=xe.gl,ie=H.transform,ye=H.useProgram("skyboxGradient");ne.skyboxGeometry||(ne.skyboxGeometry=new Pf(xe)),xe.activeTexture.set(Ee.TEXTURE0);let ke=ne.colorRampTexture;ke||(ke=ne.colorRampTexture=new a.Texture(xe,ne.colorRamp,Ee.RGBA)),ke.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE);const ze=((Ve,We,He,Je,Ke)=>({u_matrix:Ve,u_color_ramp:0,u_center_direction:We,u_radius:a.degToRad(He),u_opacity:Je,u_temporal_offset:Ke}))(ie.skyboxMatrix,ne.getCenter(H,!1),ne.paint.get("sky-gradient-radius"),ve,we);H.prepareDrawProgram(xe,ye),ye.draw(xe,Ee.TRIANGLES,he,a.StencilMode.disabled,H.colorModeForRenderPass(),a.CullFaceMode.backCW,ze,"skyboxGradient",ne.skyboxGeometry.vertexBuffer,ne.skyboxGeometry.indexBuffer,ne.skyboxGeometry.segment)})(_,d,j,M,W)},debug:function(_,s,d){for(let x=0;x<d.length;x++)Qm(_,s,d[x])},custom:function(_,s,d,x){const T=_.context,M=d.implementation;if(!_.transform.projection.unsupportedLayers||!_.transform.projection.unsupportedLayers.includes("custom")||_.terrain&&(_.terrain.renderingToTexture||_.renderPass==="offscreen")&&d.isLayerDraped()){if(_.renderPass==="offscreen"){const z=M.prerender;if(z){if(_.setCustomLayerDefaults(),T.setColorMode(_.colorModeForRenderPass()),_.transform.projection.name==="globe"){const D=_.transform.pointMerc;z.call(M,T.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(_.transform.zoom),[D.x,D.y],_.transform.pixelsPerMeterRatio)}else z.call(M,T.gl,_.transform.customLayerMatrix());T.setDirty(),_.setBaseState()}}else if(_.renderPass==="translucent"){if(_.terrain&&_.terrain.renderingToTexture){const D=M.renderToTile;if(D){const j=x[0].canonical,W=new a.MercatorCoordinate(j.x+x[0].wrap*(1<<j.z),j.y,j.z);T.setDepthMode(a.DepthMode.disabled),T.setStencilMode(a.StencilMode.disabled),T.setColorMode(_.colorModeForRenderPass()),_.setCustomLayerDefaults(),D.call(M,T.gl,W),T.setDirty(),_.setBaseState()}return}_.setCustomLayerDefaults(),T.setColorMode(_.colorModeForRenderPass()),T.setStencilMode(a.StencilMode.disabled);const z=M.renderingMode==="3d"?new a.DepthMode(_.context.gl.LEQUAL,a.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,a.DepthMode.ReadOnly);if(T.setDepthMode(z),_.transform.projection.name==="globe"){const D=_.transform.pointMerc;M.render(T.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(_.transform.zoom),[D.x,D.y],_.transform.pixelsPerMeterRatio)}else M.render(T.gl,_.transform.customLayerMatrix());T.setDirty(),_.setBaseState(),T.bindFramebuffer.set(null)}}else a.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ns{constructor(s,d,x=!1){this.context=new Tt(s,x),this.transform=d,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=a.SourceCache.maxUnderzooming+a.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(s,d){const x=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(x||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new fc(this,s));const T=this._terrain;this.transform.elevation=x?T:null,T.update(s,this.transform,d)}_updateFog(s){const d=s.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[x,T]=d.getFovAdjustedRange(this.transform._fov);if(x>T)return void(this.transform.fogCullDistSq=null);const M=x+.78*(T-x);this.transform.fogCullDistSq=M*M}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(s,d){if(this.width=s*a.exported.devicePixelRatio,this.height=d*a.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style.order)this.style._layers[x].resize()}setup(){const s=this.context,d=new a.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(a.EXTENT,0),d.emplaceBack(0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(d,a.posAttributes.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const x=new a.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(a.EXTENT,0),x.emplaceBack(0,a.EXTENT),x.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=s.createVertexBuffer(x,a.posAttributes.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const T=new a.StructArrayLayout2i4;T.emplaceBack(-1,-1),T.emplaceBack(1,-1),T.emplaceBack(-1,1),T.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(T,a.posAttributes.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const M=new a.StructArrayLayout4i8;M.emplaceBack(0,0,0,0),M.emplaceBack(a.EXTENT,0,a.EXTENT,0),M.emplaceBack(0,a.EXTENT,0,a.EXTENT),M.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.mercatorBoundsBuffer=s.createVertexBuffer(M,a.boundsAttributes.members),this.mercatorBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const z=new a.StructArrayLayout3ui6;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(z);const D=new a.StructArrayLayout1ui2;for(const W of[0,1,3,2,0])D.emplaceBack(W);this.debugIndexBuffer=s.createIndexBuffer(D),this.emptyTexture=new a.Texture(s,new a.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA),this.identityMat=a.create();const j=this.context.gl;this.stencilClearMode=new a.StencilMode({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.loadTimeStamps.push(a.window.performance.now()),this.atmosphereBuffer=new Df(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(s,d.TRIANGLES,a.DepthMode.disabled,this.stencilClearMode,a.ColorMode.disabled,a.CullFaceMode.disabled,Rf(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,d,x){if(!d||this.currentStencilSource===d.id||!s.isTileClipped()||!x||x.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let D=!1;for(const j of x)if(this._tileClippingMaskIDs[j.key]===void 0){D=!0;break}if(!D)return}this.currentStencilSource=d.id;const T=this.context,M=T.gl;this.nextStencilID+x.length>256&&this.clearStencil(),T.setColorMode(a.ColorMode.disabled),T.setDepthMode(a.DepthMode.disabled);const z=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of x){const j=d.getTile(D),W=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,{tileBoundsBuffer:H,tileBoundsIndexBuffer:ne,tileBoundsSegments:he}=this.getTileBoundsBuffers(j);z.draw(T,M.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:M.ALWAYS,mask:0},W,255,M.KEEP,M.KEEP,M.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,Rf(D.projMatrix),"$clipping",H,ne,he)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new a.StencilMode({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const d=this.context.gl;return new a.StencilMode({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){const d=this.context.gl,x=s.sort(((z,D)=>D.overscaledZ-z.overscaledZ)),T=x[x.length-1].overscaledZ,M=x[0].overscaledZ-T+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const z={};for(let D=0;D<M;D++)z[D+T]=new a.StencilMode({func:d.GEQUAL,mask:255},D+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=M,[z,x]}return[{[T]:a.StencilMode.disabled},x]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new a.ColorMode([s.CONSTANT_COLOR,s.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?a.ColorMode.unblended:a.ColorMode.alphaBlended}depthModeForSublayer(s,d,x){if(!this.opaquePassEnabledForLayer())return a.DepthMode.disabled;const T=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new a.DepthMode(x||this.context.gl.LEQUAL,d,[T,T])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const x=this.style.order,T=this.style._sourceCaches;for(const W in T){const H=T[W];H.used&&H.prepare(this.context)}const M={},z={},D={};for(const W in T){const H=T[W];M[W]=H.getVisibleCoordinates(),z[W]=M[W].slice().reverse(),D[W]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<x.length;W++)if(this.style._layers[x[W]].is3D()){this.opaquePassCutoff=W;break}if(this.terrain&&(this.terrain.updateTileBinding(D),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.GlobeSharedBuffers(this.context)),!a.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const W of x){const H=this.style._layers[W],ne=s._getLayerSourceCache(H);if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const he=ne?z[ne.id]:void 0;(H.type==="custom"||H.isSky()||he&&he.length)&&this.renderLayer(this,ne,H,he)}this.depthRangeFor3D=[0,1-(s.order.length+2)*this.numSublayers*this.depthEpsilon];const j=this.terrain;if(j&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&j.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:d.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[x[this.currentLayer]],H=s._getLayerSourceCache(W);if(W.isSky())continue;const ne=H?z[H.id]:void 0;this._renderTileClippingMasks(W,H,ne),this.renderLayer(this,H,W,ne)}if(this.style.fog&&this.transform.projection.supportsFog&&(function(W,H){const ne=W.context,he=ne.gl,ve=W.transform,we=new a.DepthMode(he.LEQUAL,a.DepthMode.ReadOnly,[0,1]),xe=W.useProgram("globeAtmosphere",null,ve.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Ee=a.globeToMercatorTransition(ve.zoom),ie=H.properties.get("color").toArray01(),ye=H.properties.get("high-color").toArray01(),ke=H.properties.get("space-color").toArray01PremultipliedAlpha(),ze=a.identity$1([]);a.rotateY$1(ze,ze,-a.degToRad(ve._center.lng)),a.rotateX$1(ze,ze,a.degToRad(ve._center.lat)),a.rotateZ$1(ze,ze,ve.angle),a.rotateX$1(ze,ze,-ve._pitch);const Ve=a.fromQuat(new Float32Array(16),ze),We=a.mapValue(H.properties.get("star-intensity"),0,1,0,.25),He=5e-4,Je=a.mapValue(H.properties.get("horizon-blend"),0,1,He,.25),Ke=a.globeUseCustomAntiAliasing(W,ne,ve)&&Je===He?ve.worldSize/(2*Math.PI*1.025)-1:ve.globeRadius,ct=W.frameCounter/1e3%1,$t=a.length(ve.globeCenterInViewSpace),rt=Math.sqrt(Math.pow($t,2)-Math.pow(Ke,2)),vt=Math.acos(rt/$t),lt=((ot,St,jt,Et,At,vn,Pn,Nt,rn,kn,Yn,pn,_r,$r)=>({u_frustum_tl:ot,u_frustum_tr:St,u_frustum_br:jt,u_frustum_bl:Et,u_horizon:At,u_transition:vn,u_fadeout_range:Pn,u_color:Nt,u_high_color:rn,u_space_color:kn,u_star_intensity:Yn,u_star_size:5*a.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:pn,u_horizon_angle:_r,u_rotation_matrix:$r}))(ve.frustumCorners.TL,ve.frustumCorners.TR,ve.frustumCorners.BR,ve.frustumCorners.BL,ve.frustumCorners.horizon,Ee,Je,ie,ye,ke,We,ct,vt,Ve);W.prepareDrawProgram(ne,xe);const Ft=W.atmosphereBuffer;Ft&&xe.draw(ne,he.TRIANGLES,we,a.StencilMode.disabled,a.ColorMode.alphaBlended,a.CullFaceMode.backCW,lt,"skybox",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments)})(this,this.style.fog),this.renderPass="sky",(a.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const W=this.style._layers[x[this.currentLayer]],H=s._getLayerSourceCache(W);W.isSky()&&this.renderLayer(this,H,W,H?z[H.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<x.length;){const W=this.style._layers[x[this.currentLayer]],H=s._getLayerSourceCache(W);if(W.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(W)){if(W.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ne=H?(W.type==="symbol"?D:z)[H.id]:void 0;this._renderTileClippingMasks(W,H,H?M[H.id]:void 0),this.renderLayer(this,H,W,ne),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let W=null;a.values(this.style._layers).forEach((H=>{const ne=s._getLayerSourceCache(H);ne&&!H.isHidden(this.transform.zoom)&&(!W||W.getSource().maxzoom<ne.getSource().maxzoom)&&(W=ne)})),W&&this.options.showTileBoundaries&&ba.debug(this,W,W.getVisibleCoordinates())}this.options.showPadding&&(function(W){const H=W.transform.padding;Sp(W,W.transform.height-(H.top||0),3,Lo),Sp(W,H.bottom||0,3,mu),Lf(W,H.left||0,3,wp),Lf(W,W.transform.width-(H.right||0),3,Km);const ne=W.transform.centerPoint;(function(he,ve,we,xe){gu(he,ve-1,we-10,2,20,xe),gu(he,ve-10,we-1,20,2,xe)})(W,ne.x,W.transform.height-ne.y,gc)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(a.window.performance.now()),this.saveCanvasCopy())}renderLayer(s,d,x,T){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="sky"||x.type==="custom"||T&&T.length)&&(this.id=x.id,this.gpuTimingStart(x),(!s.transform.projection.unsupportedLayers||!s.transform.projection.unsupportedLayers.includes(x.type)||s.terrain&&x.type==="custom")&&ba[x.type](s,d,x,T,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let x=this.gpuTimers[s.id];x||(x=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),x.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,x.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,d=s.createQueryEXT();this.deferredRenderGpuTimeQueries.push(d),s.beginQueryEXT(s.TIME_ELAPSED_EXT,d)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const d={};for(const x in s){const T=s[x],M=this.context.extTimerQuery,z=M.getQueryObjectEXT(T.query,M.QUERY_RESULT_EXT)/1e6;M.deleteQueryEXT(T.query),d[x]=z}return d}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery;let x=0;for(const T of s)x+=d.getQueryObjectEXT(T,d.QUERY_RESULT_EXT)/1e6,d.deleteQueryEXT(T);return x}translatePosMatrix(s,d,x,T,M){if(!x[0]&&!x[1])return s;const z=M?T==="map"?this.transform.angle:0:T==="viewport"?-this.transform.angle:0;if(z){const W=Math.sin(z),H=Math.cos(z);x=[x[0]*H-x[1]*W,x[0]*W+x[1]*H]}const D=[M?x[0]:Ge(d,x[0],this.transform.zoom),M?x[1]:Ge(d,x[1],this.transform.zoom),0],j=new Float32Array(16);return a.translate(j,s,D),j}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){return s===null||s!==void 0&&!this.imageManager.getPattern(s.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const s=this.terrain&&this.terrain.renderingToTexture,d=this.terrain&&this.terrain.exaggeration()===0,x=this.style&&this.style.fog,T=[];return this.terrainRenderModeElevated()&&T.push("TERRAIN"),this.transform.projection.name==="globe"&&T.push("GLOBE"),d&&T.push("ZERO_EXAGGERATION"),x&&!s&&x.getOpacity(this.transform.pitch)!==0&&T.push("FOG"),s&&T.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&T.push("OVERDRAW_INSPECTOR"),T}useProgram(s,d,x){this.cache=this.cache||{};const T=x||[],M=this.currentGlobalDefines().concat(T),z=Cr.cacheKey(cp[s],s,M,d);return this.cache[z]||(this.cache[z]=new Cr(this.context,s,cp[s],d,dc[s],M)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(s,d,x){if(this.terrain&&this.terrain.renderingToTexture)return;const T=this.style.fog;if(T){const M=T.getOpacity(this.transform.pitch),z=((D,j,W,H,ne,he,ve,we,xe,Ee,ie)=>{const ye=D.transform,ke=j.properties.get("color").toArray01();ke[3]=H;const ze=D.frameCounter/1e3%1;return{u_fog_matrix:W?ye.calculateFogTileMatrix(W):D.identityMat,u_fog_range:j.getFovAdjustedRange(ye._fov),u_fog_color:ke,u_fog_horizon_blend:j.properties.get("horizon-blend"),u_fog_temporal_offset:ze,u_frustum_tl:ne,u_frustum_tr:he,u_frustum_br:ve,u_frustum_bl:we,u_globe_pos:xe,u_globe_radius:Ee,u_viewport:ie,u_globe_transition:a.globeToMercatorTransition(ye.zoom),u_is_globe:+(ye.projection.name==="globe")}})(this,T,x,M,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.exported.devicePixelRatio,this.transform.height*a.exported.devicePixelRatio]);d.setFogUniformValues(s,z)}}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){const s=this.canvasCopy();s&&(this.frameCopies.push(s),this.tileLoaded=!1)}canvasCopy(){const s=this.context.gl,d=s.createTexture();return s.bindTexture(s.TEXTURE_2D,d),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,d=this._backgroundTiles={},x=this.transform.coveringTiles({tileSize:512});for(const T of x)d[T.key]=s[T.key]||new a.Tile(T,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}}class yu{constructor(s=0,d=0,x=0,T=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(x)||x<0||isNaN(T)||T<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=x,this.right=T}interpolate(s,d,x){return d.top!=null&&s.top!=null&&(this.top=a.number(s.top,d.top,x)),d.bottom!=null&&s.bottom!=null&&(this.bottom=a.number(s.bottom,d.bottom,x)),d.left!=null&&s.left!=null&&(this.left=a.number(s.left,d.left,x)),d.right!=null&&s.right!=null&&(this.right=a.number(s.right,d.right,x)),this}getCenter(s,d){const x=a.clamp((this.left+s-this.right)/2,0,s),T=a.clamp((this.top+d-this.bottom)/2,0,d);return new a.Point(x,T)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new yu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function yc(_,s){const d=a.getColumn(_,3);a.fromQuat(_,s),a.setColumn(_,3,d)}function yr(_,s){const d=a.identity$1([]);return a.rotateZ$1(d,d,-s),a.rotateX$1(d,d,-_),d}function _c(_,s){const d=[_[0],_[1],0],x=[s[0],s[1],0];if(a.length(d)>=1e-15){const z=a.normalize([],d);a.scale$2(x,z,a.dot(x,z)),s[0]=x[0],s[1]=x[1]}const T=a.cross([],s,_);if(a.len(T)<1e-15)return null;const M=Math.atan2(-T[1],T[0]);return yr(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),M)}class _l{constructor(s,d){this.position=s,this.orientation=d}get position(){return this._position}set position(s){if(s){const d=s instanceof a.MercatorCoordinate?s:new a.MercatorCoordinate(s[0],s[1],s[2]);this._renderWorldCopies&&(d.x=a.wrap(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(s,d){if(this.orientation=null,!this.position)return;const x=this.position,T=this._elevation?this._elevation.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(s)):0,M=a.MercatorCoordinate.fromLngLat(s,T),z=[M.x-x.x,M.y-x.y,M.z-x.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=_c(z,d)}setPitchBearing(s,d){this.orientation=yr(a.degToRad(s),a.degToRad(-d))}}class Of{constructor(s,d){this._transform=a.identity([]),this.orientation=d,this.position=s}get mercatorPosition(){const s=this.position;return new a.MercatorCoordinate(s[0],s[1],s[2])}get position(){const s=a.getColumn(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var d;s&&a.setColumn(this._transform,3,[(d=s)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||a.identity$1([]),s&&yc(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,d){this._orientation=yr(s,d),yc(this._transform,this._orientation)}forward(){const s=a.getColumn(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=a.getColumn(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=a.getColumn(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,d){const x=new Float64Array(16);return a.invert(x,this.getWorldToCamera(s,d)),x}getWorldToCameraPosition(s,d,x){const T=this.position;a.scale$2(T,T,-s);const M=new Float64Array(16);return a.fromScaling(M,[x,x,x]),a.translate(M,M,T),M[10]*=d,M}getWorldToCamera(s,d){const x=new Float64Array(16),T=new Float64Array(4),M=this.position;return a.conjugate(T,this._orientation),a.scale$2(M,M,-s),a.fromQuat(x,T),a.translate(x,x,M),x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,x[8]*=d,x[9]*=d,x[10]*=d,x[11]*=d,x}getCameraToClipPerspective(s,d,x,T){const M=new Float64Array(16);return a.perspective(M,s,d,x,T),M}getDistanceToElevation(s,d=!1){const x=s===0?0:a.mercatorZfromAltitude(s,d?a.latFromMercatorY(this.position[1]):this.position[1]),T=this.forward();return(x-this.position[2])/T[2]}clone(){return new Of([...this.position],[...this.orientation])}}function qs(_,s){const d=Kh(_.projection,_.zoom,_.width,_.height),x=(function(M,z,D,j,W){const H=new a.LngLat(D.lng-180*ta,D.lat),ne=new a.LngLat(D.lng+180*ta,D.lat),he=M.project(H.lng,H.lat),ve=M.project(ne.lng,ne.lat),we=-Math.atan2(ve.y-he.y,ve.x-he.x),xe=a.MercatorCoordinate.fromLngLat(D);xe.y=a.clamp(xe.y,-1+ta,1-ta);const Ee=xe.toLngLat(),ie=M.project(Ee.lng,Ee.lat),ye=a.MercatorCoordinate.fromLngLat(Ee);ye.x+=ta;const ke=ye.toLngLat(),ze=M.project(ke.lng,ke.lat),Ve=Po(ze.x-ie.x,ze.y-ie.y,we),We=a.MercatorCoordinate.fromLngLat(Ee);We.y+=ta;const He=We.toLngLat(),Je=M.project(He.lng,He.lat),Ke=Po(Je.x-ie.x,Je.y-ie.y,we),ct=Math.abs(Ve.x)/Math.abs(Ke.y),$t=a.identity([]);a.rotateZ($t,$t,-we*(1-(W?0:j)));const rt=a.identity([]);return a.scale(rt,rt,[1,1-(1-ct)*j,1]),rt[4]=-Ke.x/Ke.y*j,a.rotateZ(rt,rt,we),a.multiply(rt,$t,rt),rt})(_.projection,0,_.center,d,s),T=vc(_);return a.scale(x,x,[T,T,1]),x}function vc(_){const s=_.projection,d=Kh(_.projection,_.zoom,_.width,_.height),x=Qh(s,_.center),T=Qh(s,a.LngLat.convert(s.center));return Math.pow(2,x*d+(1-d)*T)}function Kh(_,s,d,x,T=1/0){const M=_.range;if(!M)return 0;const z=Math.min(T,Math.max(d,x)),D=Math.log(z/1024)/Math.LN2;return a.smoothstep(M[0]+D,M[1]+D,s)}const ta=1/4e4;function Qh(_,s){const d=a.clamp(s.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),x=new a.LngLat(s.lng-180*ta,d),T=new a.LngLat(s.lng+180*ta,d),M=_.project(x.lng,d),z=_.project(T.lng,d),D=a.MercatorCoordinate.fromLngLat(x),j=a.MercatorCoordinate.fromLngLat(T),W=z.x-M.x,H=z.y-M.y,ne=j.x-D.x,he=j.y-D.y,ve=Math.sqrt((ne*ne+he*he)/(W*W+H*H));return Math.log(ve)/Math.LN2}function Po(_,s,d){const x=Math.cos(d),T=Math.sin(d);return{x:_*x-s*T,y:_*T+s*x}}class xc{constructor(s,d,x,T,M,z,D){this.tileSize=512,this._renderWorldCopies=M===void 0||M,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=x??0,this._maxPitch=T??60,this.setProjection(z),this.setMaxBounds(D),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new yu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Of,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const s=new xc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(s,d=!1){const x=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||x)&&this._updateCameraOnTerrain(),(s||x)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return a.pick(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=a.getProjection(this.projectionOptions);const x=!E(d,this.getProjection());return x&&this._calcMatrices(),this.mercatorFromTransition=!1,x}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.getProjection({name:"mercator"});const d=s!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.Point(this.width,this.height)}get bearing(){return a.wrap(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const d=-s*Math.PI/180;var x;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(x=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x),(function(T,M,z){var D=M[0],j=M[1],W=M[2],H=M[3],ne=Math.sin(z),he=Math.cos(z);T[0]=D*he+W*ne,T[1]=j*he+H*ne,T[2]=D*-ne+W*he,T[3]=j*-ne+H*he})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const d=a.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=a.degToRad(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const s=this._elevation;this._centerAltitude=s.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=s.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],x=this.horizonLineFromTop();let T=0,M=0;for(let z=0;z<d.length;z++){const D=new a.Point(d[z][0]*this.width,x+d[z][1]*(this.height-x)),j=s.pointCoordinate(D);if(!j)continue;const W=1/Math.hypot(j[0]-this._camera.position[0],j[1]-this._camera.position[1]);T+=j[3]*W,M+=W}return M===0?NaN:T/M}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),x=this.pixelsPerMeter/this.worldSize*d,T=this._mercatorZfromZoom(s),M=this._mercatorZfromZoom(this._maxZoom),z=Math.max(T-x,M);this._setZoom(this._zoomFromMercatorZ(z))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let x;x=s.z<this._camera.position[2]?[d.x,d.y,d.z]:[s.x,s.y,s.z];const T=a.length(a.sub([],this._camera.position,x));return a.clamp(this._zoomFromMercatorZ(T),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let d=!1;if(s.orientation&&!a.exactEquals(s.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(s.orientation)),s.position){const x=[s.position.x,s.position.y,s.position.z];a.exactEquals$1(x,this._camera.position)||(this._setCameraPosition(x),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,d=new _l;return d.position=new a.MercatorCoordinate(s[0],s[1],s[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(s){if(!a.length$1(s))return!1;a.normalize$1(s,s);const d=a.transformQuat([],[0,0,-1],s),x=a.transformQuat([],[0,-1,0],s);if(x[2]<0)return!1;const T=_c(d,x);return!!T&&(this._camera.orientation=T,!0)}_setCameraPosition(s){const d=this.zoomScale(this.minZoom)*this.tileSize,x=this.zoomScale(this.maxZoom)*this.tileSize,T=this.cameraToCenterDistance;s[2]=a.clamp(s[2],T/x,T/d),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,x){this._unmodified=!1,this._edgeInsets.interpolate(s,d,x),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){const d=[new a.UnwrappedTileID(0,s)];if(this.renderWorldCopies){const x=this.pointCoordinate(new a.Point(0,0)),T=this.pointCoordinate(new a.Point(this.width,0)),M=this.pointCoordinate(new a.Point(this.width,this.height)),z=this.pointCoordinate(new a.Point(0,this.height)),D=Math.floor(Math.min(x.x,T.x,M.x,z.x)),j=Math.floor(Math.max(x.x,T.x,M.x,z.x)),W=1;for(let H=D-W;H<=j+W;H++)H!==0&&d.push(new a.UnwrappedTileID(H,s))}return d}coveringTiles(s){let d=this.coveringZoomLevel(s);const x=d,T=this.elevation&&!s.isTerrainDEM,M=this.projection.name==="mercator";if(s.minzoom!==void 0&&d<s.minzoom)return[];s.maxzoom!==void 0&&d>s.maxzoom&&(d=s.maxzoom);const z=this.locationCoordinate(this.center),D=this.center.lat,j=1<<d,W=[j*z.x,j*z.y,0],H=this.projection.name==="globe",ne=!H,he=a.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,ne),ve=H?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),we=j*a.mercatorZfromAltitude(1,this.center.lat),xe=this._camera.position[2]/a.mercatorZfromAltitude(1,this.center.lat),Ee=[j*ve.x,j*ve.y,xe*(ne?1:we)],ie=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),ye=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?d:0,ke=s.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ze=s.isTerrainDEM?-ke:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ve=this.projection.isReprojectedInTileSpace?vc(this):1,We=ot=>{const jt=new a.MercatorCoordinate(ot.x+25e-6,ot.y,ot.z),Et=new a.MercatorCoordinate(ot.x,ot.y+25e-6,ot.z),At=ot.toLngLat(),vn=jt.toLngLat(),Pn=Et.toLngLat(),Nt=this.locationCoordinate(At),rn=this.locationCoordinate(vn),kn=this.locationCoordinate(Pn),Yn=Math.hypot(rn.x-Nt.x,rn.y-Nt.y),pn=Math.hypot(kn.x-Nt.x,kn.y-Nt.y);return Math.sqrt(Yn*pn)*Ve/25e-6},He=ot=>{const St=ke,jt=ze;return{aabb:a.tileAABB(this,j,0,0,0,ot,jt,St,this.projection),zoom:0,x:0,y:0,minZ:jt,maxZ:St,wrap:ot,fullyVisible:!1}},Je=[];let Ke=[];const ct=d,$t=s.reparseOverscaled?x:d,rt=ot=>ot*ot,vt=rt((xe-this._centerAltitude)*we),lt=ot=>{if(!this._elevation||!ot.tileID||!M)return;const St=this._elevation.getMinMaxForTile(ot.tileID),jt=ot.aabb;St?(jt.min[2]=St.min,jt.max[2]=St.max,jt.center[2]=(jt.min[2]+jt.max[2])/2):(ot.shouldSplit=Ft(ot),ot.shouldSplit||(jt.min[2]=jt.max[2]=jt.center[2]=this._centerAltitude))},Ft=ot=>{if(ot.zoom<ye)return!0;if(ot.zoom===ct)return!1;if(ot.shouldSplit!=null)return ot.shouldSplit;const St=ot.aabb.distanceX(Ee),jt=ot.aabb.distanceY(Ee);let Et=vt,At=1;if(H){Et=rt(ot.aabb.distanceZ(Ee));const Nt=Math.pow(2,ot.zoom),rn=a.latFromMercatorY((ot.y+1)/Nt),kn=a.latFromMercatorY(ot.y/Nt),Yn=Math.min(Math.max(D,rn),kn),pn=a.circumferenceAtLatitude(Yn)/a.circumferenceAtLatitude(D);if(At=Yn===D?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,pn/this._mercatorScaleRatio),this.zoom<=a.GLOBE_ZOOM_THRESHOLD_MIN&&ot.zoom===ct-1&&pn>=.9)return!0}else if(T&&(Et=rt(ot.aabb.distanceZ(Ee)*we)),this.projection.isReprojectedInTileSpace&&x<=5){const Nt=Math.pow(2,ot.zoom),rn=We(new a.MercatorCoordinate((ot.x+.5)/Nt,(ot.y+.5)/Nt));At=rn>.85?1:rn}const vn=St*St+jt*jt+Et,Pn=rt((1<<ct-ot.zoom)*ie*At*((Nt,rn)=>{if(rn*rt(.707)<Nt)return 1;const kn=Math.sqrt(rn/Nt);return kn/(1.4144271570014144+(Math.pow(1.1,kn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Et,vt),vn));return vn<Pn};if(this.renderWorldCopies)for(let ot=1;ot<=3;ot++)Je.push(He(-ot)),Je.push(He(ot));for(Je.push(He(0));Je.length>0;){const ot=Je.pop(),St=ot.x,jt=ot.y;let Et=ot.fullyVisible;if(!Et){const At=ot.aabb.intersects(he);if(At===0)continue;Et=At===2}if(ot.zoom!==ct&&Ft(ot))for(let At=0;At<4;At++){const vn=(St<<1)+At%2,Pn=(jt<<1)+(At>>1),Nt={aabb:M?ot.aabb.quadrant(At):a.tileAABB(this,j,ot.zoom+1,vn,Pn,ot.wrap,ot.minZ,ot.maxZ,this.projection),zoom:ot.zoom+1,x:vn,y:Pn,wrap:ot.wrap,fullyVisible:Et,tileID:void 0,shouldSplit:void 0,minZ:ot.minZ,maxZ:ot.maxZ};T&&!H&&(Nt.tileID=new a.OverscaledTileID(ot.zoom+1===ct?$t:ot.zoom+1,ot.wrap,ot.zoom+1,vn,Pn),lt(Nt)),Je.push(Nt)}else{const At=ot.zoom===ct?$t:ot.zoom;if(s.minzoom&&s.minzoom>At)continue;const vn=W[0]-(.5+St+(ot.wrap<<ot.zoom))*(1<<d-ot.zoom),Pn=W[1]-.5-jt,Nt=ot.tileID?ot.tileID:new a.OverscaledTileID(At,ot.wrap,ot.zoom,St,jt);Ke.push({tileID:Nt,distanceSq:vn*vn+Pn*Pn})}}if(this.fogCullDistSq){const ot=this.fogCullDistSq,St=this.horizonLineFromTop();Ke=Ke.filter((jt=>{const Et=[0,0,0,1],At=[a.EXTENT,a.EXTENT,0,1],vn=this.calculateFogTileMatrix(jt.tileID.toUnwrapped());a.transformMat4$1(Et,Et,vn),a.transformMat4$1(At,At,vn);const Pn=a.getAABBPointSquareDist(Et,At);if(Pn===0)return!0;let Nt=!1;const rn=this._elevation;if(rn&&Pn>ot&&St!==0){const kn=this.calculateProjMatrix(jt.tileID.toUnwrapped());let Yn;s.isTerrainDEM||(Yn=rn.getMinMaxForTile(jt.tileID)),Yn||(Yn={min:ze,max:ke});const pn=a.furthestTileCorner(this.rotation),_r=[pn[0]*a.EXTENT,pn[1]*a.EXTENT,Yn.max];a.transformMat4(_r,_r,kn),Nt=(1-_r[1])*this.height*.5<St}return Pn<ot||Nt}))}return Ke.sort(((ot,St)=>ot.distanceSq-St.distanceSq)).map((ot=>ot.tileID))}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const d=a.clamp(s.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),x=this.projection.project(s.lng,d);return new a.Point(x.x*this.worldSize,x.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(s,d){let x,T;const M=this.centerPoint;if(this.projection.name==="globe"){const D=this.worldSize;x=(d.x-M.x)/D,T=(d.y-M.y)/D}else{const D=this.pointCoordinate(d),j=this.pointCoordinate(M);x=D.x-j.x,T=D.y-j.y}const z=this.locationCoordinate(s);this.setLocation(new a.MercatorCoordinate(z.x-x,z.y-T))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,d){const x=d?a.mercatorZfromAltitude(d,s.lat):void 0,T=this.projection.project(s.lng,s.lat);return new a.MercatorCoordinate(T.x,T.y,x)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,d){const x=d??this._centerAltitude,T=[s.x,s.y,0,1],M=[s.x,s.y,1,1];a.transformMat4$1(T,T,this.pixelMatrixInverse),a.transformMat4$1(M,M,this.pixelMatrixInverse);const z=M[3];a.scale$1(T,T,1/T[3]),a.scale$1(M,M,1/z);const D=T[2],j=M[2];return{p0:T,p1:M,t:D===j?0:(x-D)/(j-D)}}screenPointToMercatorRay(s){const d=[s.x,s.y,0,1],x=[s.x,s.y,1,1];return a.transformMat4$1(d,d,this.pixelMatrixInverse),a.transformMat4$1(x,x,this.pixelMatrixInverse),a.scale$1(d,d,1/d[3]),a.scale$1(x,x,1/x[3]),d[2]=a.mercatorZfromAltitude(d[2],this._center.lat)*this.worldSize,x[2]=a.mercatorZfromAltitude(x[2],this._center.lat)*this.worldSize,a.scale$1(d,d,1/this.worldSize),a.scale$1(x,x,1/this.worldSize),new a.Ray([d[0],d[1],d[2]],a.normalize([],a.sub([],x,d)))}rayIntersectionCoordinate(s){const{p0:d,p1:x,t:T}=s,M=a.mercatorZfromAltitude(d[2],this._center.lat),z=a.mercatorZfromAltitude(x[2],this._center.lat);return new a.MercatorCoordinate(a.number(d[0],x[0],T)/this.worldSize,a.number(d[1],x[1],T)/this.worldSize,a.number(M,z,T))}pointCoordinate(s,d=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,d)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let d=this.projection.pointCoordinate3D(this,s.x,s.y);if(d)return new a.MercatorCoordinate(d[0],d[1],d[2]);let x=0,T=this.horizonLineFromTop();if(s.y>T)return this.pointCoordinate(s);const M=.02*T,z=s.clone();for(let D=0;D<10&&T-x>M;D++){z.y=a.number(x,T,.66);const j=this.projection.pointCoordinate3D(this,z.x,z.y);j?(T=z.y,d=j):x=z.y}return d?new a.MercatorCoordinate(d[0],d[1],d[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}isPointOnSurface(s){if(s.y<0||s.y>this.height||s.x<0||s.x>this.width)return!1;if(this.elevation||this.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(s);const d=this.pointCoordinate(s);return d.y>=0&&d.y<=1}_coordinatePoint(s,d){const x=d&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,T=[s.x*this.worldSize,s.y*this.worldSize,x+s.toAltitude(),1];return a.transformMat4$1(T,T,this.pixelMatrix),T[3]>0?new a.Point(T[0]/T[3],T[1]/T[3]):new a.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:s,left:d}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,M=this.pointLocation3D(new a.Point(d,s)),z=this.pointLocation3D(new a.Point(T,s)),D=this.pointLocation3D(new a.Point(T,x)),j=this.pointLocation3D(new a.Point(d,x));let W=Math.min(M.lng,z.lng,D.lng,j.lng),H=Math.max(M.lng,z.lng,D.lng,j.lng),ne=Math.min(M.lat,z.lat,D.lat,j.lat),he=Math.max(M.lat,z.lat,D.lat,j.lat);const ve=Math.pow(2,-this.zoom)/16*270,we=this.projection.name==="globe"?1:4,xe=(Ee,ie,ye,ke,ze)=>{const Ve=(Ee+ye)/2,We=(ie+ke)/2,He=new a.Point(Ve,We),{lng:Je,lat:Ke}=this.pointLocation3D(He),ct=Math.max(0,W-Je,ne-Ke,Je-H,Ke-he);W=Math.min(W,Je),H=Math.max(H,Je),ne=Math.min(ne,Ke),he=Math.max(he,Ke),(ze<we||ct>ve)&&(xe(Ee,ie,Ve,We,ze+1),xe(Ve,We,ye,ke,ze+1))};if(xe(d,s,T,s,1),xe(T,s,T,x,1),xe(T,x,d,x,1),xe(d,x,d,s,1),this.projection.name==="globe"){const[Ee,ie]=a.polesInViewport(this);Ee?(he=90,H=180,W=-180):ie&&(ne=-90,H=180,W=-180)}return new a.LngLatBounds(new a.LngLat(W,ne),new a.LngLat(H,he))}_getBoundsRectangular(s,d){const{top:x,left:T}=this._edgeInsets,M=this.height-this._edgeInsets.bottom,z=this.width-this._edgeInsets.right,D=new a.Point(T,x),j=new a.Point(z,x),W=new a.Point(z,M),H=new a.Point(T,M);let ne=this.pointCoordinate(D,s),he=this.pointCoordinate(j,s);const ve=this.pointCoordinate(W,d),we=this.pointCoordinate(H,d),xe=(Ee,ie)=>(ie.y-Ee.y)/(ie.x-Ee.x);return ne.y>1&&he.y>=0?ne=new a.MercatorCoordinate((1-we.y)/xe(we,ne)+we.x,1):ne.y<0&&he.y<=1&&(ne=new a.MercatorCoordinate(-we.y/xe(we,ne)+we.x,0)),he.y>1&&ne.y>=0?he=new a.MercatorCoordinate((1-ve.y)/xe(ve,he)+ve.x,1):he.y<0&&ne.y<=1&&(he=new a.MercatorCoordinate(-ve.y/xe(ve,he)+ve.x,0)),new a.LngLatBounds().extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(we)).extend(this.coordinateLocation(ve))}_getBoundsRectangularTerrain(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=s.visibleDemTiles.reduce(((x,T)=>{if(T.dem){const M=T.dem.tree;x.min=Math.min(x.min,M.minimums[0]),x.max=Math.max(x.max,M.maximums[0])}return x}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*s.exaggeration(),d.max*s.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(s=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,x=this.height/2-d*(1-this._horizonShift);return s?Math.max(0,x):x}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-a.MAX_MERCATOR_LATITUDE,this.maxLat=a.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=a.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=a.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=a.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,d){return this.projection.createTileMatrix(this,d,s)}calculateDistanceTileData(s){const d=s.key,x=this._distanceTileDataCache;if(x[d])return x[d];const T=s.canonical,M=1/this.height,z=this.cameraWorldSize,D=z/this.zoomScale(T.z),j=(T.x+Math.pow(2,T.z)*s.wrap)*D,W=T.y*D,H=this.point;H.x*=z/this.worldSize,H.y*=z/this.worldSize;const ne=this.angle,he=Math.sin(-ne),ve=-Math.cos(-ne);return x[d]={bearing:[he,ve],center:[(H.x-j)*M,(H.y-W)*M],scale:D/a.EXTENT*M},x[d]}calculateFogTileMatrix(s){const d=s.key,x=this._fogTileMatrixCache;if(x[d])return x[d];const T=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return a.multiply(T,this.worldToFogMatrix,T),x[d]=new Float32Array(T),x[d]}calculateProjMatrix(s,d=!1){const x=s.key,T=d?this._alignedProjMatrixCache:this._projMatrixCache;if(T[x])return T[x];const M=this.calculatePosMatrix(s,this.worldSize);return a.multiply(M,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:d?this.alignedProjMatrix:this.projMatrix,M),T[x]=new Float32Array(M),T[x]}calculatePixelsToTileUnitsMatrix(s){const d=s.tileID.key,x=this._pixelsToTileUnitsCache;if(x[d])return x[d];const T=(function(M,z){const{scale:D}=M.tileTransform,j=D*a.EXTENT/(M.tileSize*Math.pow(2,z.zoom-M.tileID.overscaledZ+M.tileID.canonical.z));return W=new Float32Array(4),he=(H=z.inverseAdjustmentMatrix)[1],ve=H[2],we=H[3],Ee=(ne=[j,j])[1],W[0]=H[0]*(xe=ne[0]),W[1]=he*xe,W[2]=ve*Ee,W[3]=we*Ee,W;var W,H,ne,he,ve,we,xe,Ee})(s,this);return x[d]=T,x[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const s=1/this.worldSize,d=a.fromScaling([],[s,s,s]);return a.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const d=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(d),T=this._camera.forward(),M=a.mercatorZfromAltitude(1,this._center.lat);x[2]/=M,T[2]/=M,a.normalize(T,T);const z=s.raycast(x,T,s.exaggeration());if(z){const D=a.scaleAndAdd([],x,T,z),j=new a.MercatorCoordinate(D[0],D[1],a.mercatorZfromAltitude(D[2],a.latFromMercatorY(D[1]))),W=(j.z+a.length([j.x-x[0],j.y-x[1],j.z-x[2]*M]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(W),this._centerAltitude=j.toAltitude(),this._center=this.coordinateLocation(j),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const d=this._elevation,x=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(x),M=d.getAtPointOrZero(new a.MercatorCoordinate(...T)),z=this.pixelsPerMeter/this.worldSize*M,D=this._minimumHeightOverTerrain(),j=T[2]-z;if(j<=D)if(j<0||s){const W=this.locationCoordinate(this._center,this._centerAltitude),H=[T[0],T[1],W.z-T[2]],ne=a.length(H);H[2]-=(D-j)/this._pixelsPerMercatorPixel;const he=a.length(H);if(he===0)return;a.scale$2(H,H,ne/he*this._pixelsPerMercatorPixel),this._camera.position=[T[0],T[1],W.z*this._pixelsPerMercatorPixel-H[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const he=this.center;return he.lat=a.clamp(he.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(he.lng=a.clamp(he.lng,this.minLng,this.maxLng)),this.center=he,void(this._constraining=!1)}const d=this._unmodified,{x,y:T}=this.point;let M=0,z=x,D=T;const j=this.width/2,W=this.height/2,H=this.worldMinY*this.scale,ne=this.worldMaxY*this.scale;if(T-W<H&&(D=H+W),T+W>ne&&(D=ne-W),ne-H<this.height&&(M=Math.max(M,this.height/(ne-H)),D=(ne+H)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const he=this.worldMinX*this.scale,ve=this.worldMaxX*this.scale,we=this.worldSize/2-(he+ve)/2;z=(x+we+this.worldSize)%this.worldSize-we,z-j<he&&(z=he+j),z+j>ve&&(z=ve-j),ve-he<this.width&&(M=Math.max(M,this.width/(ve-he)),z=(ve+he)/2)}z===x&&D===T||(this.center=this.unproject(new a.Point(z,D))),M&&(this.zoom+=this.scaleZoom(M)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,d=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.mercatorZfromAltitude(1,this.center.lat)/a.mercatorZfromAltitude(1,a.GLOBE_SCALE_MATCH_LATITUDE));const x=Kh(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,x),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const T=this.projection.zAxisUnit==="meters"?d:1,M=this._camera.getWorldToCamera(this.worldSize,T),z=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);z[8]=2*-s.x/this.width,z[9]=2*s.y/this.height;let D=a.mul([],z,M);if(this.projection.isReprojectedInTileSpace){const We=this.locationCoordinate(this.center),He=a.identity([]);a.translate(He,He,[We.x*this.worldSize,We.y*this.worldSize,0]),a.multiply(He,He,qs(this)),a.translate(He,He,[-We.x*this.worldSize,-We.y*this.worldSize,0]),a.multiply(D,D,He),this.inverseAdjustmentMatrix=(function(Je){const Ke=qs(Je,!0);return ue([],[Ke[0],Ke[1],Ke[4],Ke[5]])})(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=a.scale([],D,[this.worldSize,this.worldSize,this.worldSize/T,1]),this.projMatrix=D,this.invProjMatrix=a.invert(new Float64Array(16),this.projMatrix);const j=a.invert([],z);this.frustumCorners=a.FrustumCorners.fromInvProjectionMatrix(j,this.horizonLineFromTop(),this.height);const W=new Float32Array(16);a.identity(W),a.scale(W,W,[1,-1,1]),a.rotateX(W,W,this._pitch),a.rotateZ(W,W,this.angle);const H=a.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ne=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;H[8]=2*-s.x/this.width,H[9]=2*(s.y+ne)/this.height,this.skyboxMatrix=a.multiply(W,H,W);const he=this.point,ve=he.x,we=he.y,xe=this.width%2/2,Ee=this.height%2/2,ie=Math.cos(this.angle),ye=Math.sin(this.angle),ke=ve-Math.round(ve)+ie*xe+ye*Ee,ze=we-Math.round(we)+ie*Ee+ye*xe,Ve=new Float64Array(D);if(a.translate(Ve,Ve,[ke>.5?ke-1:ke,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=Ve,D=a.create(),a.scale(D,D,[this.width/2,-this.height/2,1]),a.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=a.create(),a.scale(D,D,[1,-1,1]),a.translate(D,D,[-1,-1,0]),a.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},D=a.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=D,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.calculateGlobeMatrix(this);const We=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.transformMat4(We,We,M),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=D;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,x=this._camera.position,T=1/this.height/this._pixelsPerMercatorPixel,M=[s,s,d];a.scale$2(M,M,T),a.scale$2(x,x,-1),a.multiply$2(x,x,M);const z=a.create();a.translate(z,z,x),a.scale(z,z,M),this.mercatorFogMatrix=z,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,d,T)}_computeCameraPosition(s){const d=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,x=this._camera.forward(),T=this.point,M=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-s/this.worldSize*this._centerAltitude;return[T.x/this.worldSize-x[0]*M,T.y/this.worldSize-x[1]*M,s/this.worldSize*this._centerAltitude-x[2]*M]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),x=this._camera.position[2],T=s[2];let M=1;this.projection.wrap&&(this.center=this.center.wrap()),T>0&&(M=Math.min((d-x)/T,1)),this._camera.position=a.scaleAndAdd([],this._camera.position,s,M),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,d=this._camera.forward(),{pitch:x,bearing:T}=this._camera.getPitchBearing(),M=a.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,z=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.degToRad(this._maxPitch)),D=Math.max((s[2]-M)/Math.cos(x),z),j=this._zoomFromMercatorZ(D);a.scaleAndAdd(s,s,d,D),this._pitch=a.clamp(x,a.degToRad(this.minPitch),a.degToRad(this.maxPitch)),this.angle=a.wrap(T,-Math.PI,Math.PI),this._setZoom(a.clamp(j,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.MercatorCoordinate(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){let d=0,x=a.GLOBE_ZOOM_THRESHOLD_MAX,T=0,M=1/0;for(;x-d>1e-6&&x>d;){const z=d+.5*(x-d),D=this.tileSize*Math.pow(2,z),j=this.getCameraToCenterDistance(this.projection,z,D),W=this.scaleZoom(j/(s*this.tileSize)),H=Math.abs(z-W);H<M&&(M=H,T=z),z<W?d=z:x=z}return T}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,d){const x=Math.min(s.x,d.x),T=Math.max(s.x,d.x),M=Math.min(s.y,d.y),z=Math.max(s.y,d.y);if(M<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const D=[new a.Point(x,M),new a.Point(T,z),new a.Point(x,z),new a.Point(T,M)],j=this.renderWorldCopies?-3:0,W=this.renderWorldCopies?4:1;for(const H of D){const ne=this.pointRayIntersection(H);if(ne.t<0)return!0;const he=this.rayIntersectionCoordinate(ne);if(he.x<j||he.y<0||he.x>W||he.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.Point(0,0),new a.Point(this.width,this.height))}zoomDeltaToMovement(s,d){const x=a.length(a.sub([],this._camera.position,s)),T=this._zoomFromMercatorZ(x)+d;return x-this._mercatorZfromZoom(T)}getCameraPoint(){if(this.projection.name==="globe"){const s=(function([d,x,T],M){const z=[d,x,T,1];a.transformMat4$1(z,z,M);const D=z[3]=Math.max(z[3],1e-6);return z[0]/=D,z[1]/=D,z[2]/=D,z})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.Point(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,s))}}getCameraToCenterDistance(s,d=this.zoom,x=this.worldSize){const T=Kh(s,d,this.width,this.height,1024),M=s.pixelSpaceConversion(this.center.lat,x,T);return .5/Math.tan(.5*this._fov)*this.height*M}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.multiply(s,s,this.globeMatrix),s}}function Vs(_,s){let d=!1,x=null;const T=()=>{x=null,d&&(_(),x=setTimeout(T,s),d=!1)};return()=>(d=!0,x||T(),x)}class Gs{constructor(s){this._hashName=s&&encodeURIComponent(s),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Vs(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,a.window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),a.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const d=bc(s);if(this._hashName){const x=this._hashName;let T=!1;const M=a.window.location.hash.slice(1).split("&").map((z=>{const D=z.split("=")[0];return D===x?(T=!0,`${D}=${d}`):z})).filter((z=>z));return T||M.push(`${x}=${d}`),`#${M.join("&")}`}return`#${d}`}_getCurrentHash(){const s=a.window.location.hash.replace("#","");if(this._hashName){let d;return s.split("&").map((x=>x.split("="))).forEach((x=>{x[0]===this._hashName&&(d=x)})),(d&&d[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some((x=>isNaN(x)))){const x=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(d[3]||0):s.getBearing();return s.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:x,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=a.window.location.href.replace(/(#.+)?$/,this.getHashString());a.window.history.replaceState(a.window.history.state,null,s)}}function bc(_,s){const d=_.getCenter(),x=Math.round(100*_.getZoom())/100,T=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,T),z=Math.round(d.lng*M)/M,D=Math.round(d.lat*M)/M,j=_.getBearing(),W=_.getPitch();let H=s?`/${z}/${D}/${x}`:`${x}/${D}/${z}`;return(j||W)&&(H+="/"+Math.round(10*j)/10),W&&(H+=`/${Math.round(W)}`),H}const _u={linearity:.3,easing:a.bezier(0,0,.3,1)},vu=a.extend({deceleration:2500,maxSpeed:1400},_u),Bf=a.extend({deceleration:20,maxSpeed:1400},_u),Qt=a.extend({deceleration:1e3,maxSpeed:360},_u),Oa=a.extend({deceleration:1e3,maxSpeed:90},_u);class wc{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=a.exported.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)d.zoom+=M.zoomDelta||0,d.bearing+=M.bearingDelta||0,d.pitch+=M.pitchDelta||0,M.panDelta&&d.pan._add(M.panDelta),M.around&&(d.around=M.around),M.pinchAround&&(d.pinchAround=M.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,T={};if(d.pan.mag()){const M=Hs(d.pan.mag(),x,a.extend({},vu,s||{}));T.offset=d.pan.mult(M.amount/d.pan.mag()),T.center=this._map.transform.center,vl(T,M)}if(d.zoom){const M=Hs(d.zoom,x,Bf);T.zoom=this._map.transform.zoom+M.amount,vl(T,M)}if(d.bearing){const M=Hs(d.bearing,x,Qt);T.bearing=this._map.transform.bearing+a.clamp(M.amount,-179,179),vl(T,M)}if(d.pitch){const M=Hs(d.pitch,x,Oa);T.pitch=this._map.transform.pitch+M.amount,vl(T,M)}if(T.zoom||T.bearing){const M=d.pinchAround===void 0?d.around:d.pinchAround;T.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),T.noMoveStart=!0,T}}function vl(_,s){(!_.duration||_.duration<s.duration)&&(_.duration=s.duration,_.easing=s.easing)}function Hs(_,s,d){const{maxSpeed:x,linearity:T,deceleration:M}=d,z=a.clamp(_*T/(s/1e3),-x,x),D=Math.abs(z)/(M*T);return{easing:d.easing,duration:1e3*D,amount:z*(D/2)}}class ti extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,x,T={}){const M=ae(d.getCanvasContainer(),x),z=d.unproject(M);super(s,a.extend({point:M,lngLat:z,originalEvent:x},T)),this._defaultPrevented=!1,this.target=d}}class Ba extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,x){const T=s==="touchend"?x.changedTouches:x.touches,M=fe(d.getCanvasContainer(),T),z=M.map((j=>d.unproject(j))),D=M.reduce(((j,W,H,ne)=>j.add(W.div(ne.length))),new a.Point(0,0));super(s,{points:M,point:D,lngLats:z,lngLat:d.unproject(D),originalEvent:x}),this._defaultPrevented=!1}}class rs extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,x){super(s,{originalEvent:x}),this._defaultPrevented=!1}}class Do{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new rs(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new ti(s.type,this._map,s))}mouseup(s){this._map.fire(new ti(s.type,this._map,s))}preclick(s){const d=a.extend({},s);d.type="preclick",this._map.fire(new ti(d.type,this._map,d))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(s),this._map.fire(new ti(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new ti(s.type,this._map,s))}mouseover(s){this._map.fire(new ti(s.type,this._map,s))}mouseout(s){this._map.fire(new ti(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Ba(s.type,this._map,s))}touchmove(s){this._map.fire(new Ba(s.type,this._map,s))}touchend(s){this._map.fire(new Ba(s.type,this._map,s))}touchcancel(s){this._map.fire(new Ba(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bo{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new ti(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new ti(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bs{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(Q(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const x=d,T=this._startPos,M=this._lastPos;if(!T||!M||M.equals(x)||!this._box&&x.dist(T)<this._clickTolerance)return;this._lastPos=x,this._box||(this._box=F("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const z=Math.min(T.x,x.x),D=Math.max(T.x,x.x),j=Math.min(T.y,x.y),W=Math.max(T.y,x.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${z}px,${j}px)`,this._box.style.width=D-z+"px",this._box.style.height=W-j+"px")}))}mouseupWindow(s,d){if(!this._active)return;const x=this._startPos,T=d;if(x&&s.button===0){if(this.reset(),re(),x.x!==T.x||x.y!==T.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:M=>M.fitScreenCoordinates(x,T,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Y(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new a.Event(s,{originalEvent:d}))}}function Ff(_,s){const d={};for(let x=0;x<_.length;x++)d[_[x].identifier]=s[x];return d}class xl{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,d,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),x.length===this.numTouches&&(this.centroid=(function(T){const M=new a.Point(0,0);for(const z of T)M._add(z);return M.div(T.length)})(d),this.touches=Ff(x,d)))}touchmove(s,d,x){if(this.aborted||!this.centroid)return;const T=Ff(x,d);for(const M in this.touches){const z=T[M];(!z||z.dist(this.touches[M])>30)&&(this.aborted=!0)}}touchend(s,d,x){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const T=!this.aborted&&this.centroid;if(this.reset(),T)return T}}}class jf{constructor(s){this.singleTap=new xl(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,d,x){this.singleTap.touchstart(s,d,x)}touchmove(s,d,x){this.singleTap.touchmove(s,d,x)}touchend(s,d,x){const T=this.singleTap.touchend(s,d,x);if(T){const M=s.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(T)<30;if(M&&z||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=T,this.count===this.numTaps)return this.reset(),T}}}class tg{constructor(){this._zoomIn=new jf({numTouches:1,numTaps:2}),this._zoomOut=new jf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,x){this._zoomIn.touchstart(s,d,x),this._zoomOut.touchstart(s,d,x)}touchmove(s,d,x){this._zoomIn.touchmove(s,d,x),this._zoomOut.touchmove(s,d,x)}touchend(s,d,x){const T=this._zoomIn.touchend(s,d,x),M=this._zoomOut.touchend(s,d,x);return T?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:z.getZoom()+1,around:z.unproject(T)},{originalEvent:s})}):M?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:z.getZoom()-1,around:z.unproject(M)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wa={0:1,2:2};class Jr{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,d){return!1}_move(s,d){return{}}mousedown(s,d){if(this._lastPoint)return;const x=Se(s);this._correctButton(s,x)&&(this._lastPoint=d,this._eventButton=x)}mousemoveWindow(s,d){const x=this._lastPoint;if(x){if(s.preventDefault(),this._eventButton!=null&&(function(T,M){const z=wa[M];return T.buttons===void 0||(T.buttons&z)!==z})(s,this._eventButton))this.reset();else if(this._moved||!(d.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(x,d)}}mouseupWindow(s){this._lastPoint&&Se(s)===this._eventButton&&(this._moved&&re(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mr extends Jr{mousedown(s,d){super.mousedown(s,d),this._lastPoint&&(this._active=!0)}_correctButton(s,d){return d===0&&!s.ctrlKey}_move(s,d){return{around:d,panDelta:d.sub(s)}}}class ws extends Jr{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const x=.8*(d.x-s.x);if(x)return this._active=!0,{bearingDelta:x}}contextmenu(s){s.preventDefault()}}class co extends Jr{_correctButton(s,d){return d===0&&s.ctrlKey||d===2}_move(s,d){const x=-.5*(d.y-s.y);if(x)return this._active=!0,{pitchDelta:x}}contextmenu(s){s.preventDefault()}}class xu{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),a.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)}touchstart(s,d,x){return this._calculateTransform(s,d,x)}touchmove(s,d,x){if(this._active&&!(x.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(x.length===1&&!a.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,d,x)}}touchend(s,d,x){this._calculateTransform(s,d,x),this._active&&x.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,x){x.length>0&&(this._active=!0);const T=Ff(x,d),M=new a.Point(0,0),z=new a.Point(0,0);let D=0;for(const W in T){const H=T[W],ne=this._touches[W];ne&&(M._add(H),z._add(H.sub(ne)),D++,T[W]=H)}if(this._touches=T,D<this._minTouches||!z.mag())return;const j=z.div(D);return this._sum._add(j),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(D),panDelta:j}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Oo{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,d,x){return{}}touchstart(s,d,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,x){const T=this._firstTwoTouches;if(!T)return;s.preventDefault();const[M,z]=T,D=bu(x,d,M),j=bu(x,d,z);if(!D||!j)return;const W=this._aroundCenter?null:D.add(j).div(2);return this._move([D,j],W,s)}touchend(s,d,x){if(!this._firstTwoTouches)return;const[T,M]=this._firstTwoTouches,z=bu(x,d,T),D=bu(x,d,M);z&&D||(this._active&&re(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function bu(_,s,d){for(let x=0;x<_.length;x++)if(_[x].identifier===d)return s[x]}function Jh(_,s){return Math.log(_/s)/Math.LN2}class Sc extends Oo{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const x=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Jh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Jh(this._distance,x),pinchAround:d}}}function Ws(_,s){return 180*_.angleWith(s)/Math.PI}class ed extends Oo{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d){const x=this._vector;if(this._vector=s[0].sub(s[1]),x&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ws(this._vector,x),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,x=this._startVector;if(!x)return!1;const T=Ws(s,x);return Math.abs(T)<d}}function Bo(_){return Math.abs(_.y)>Math.abs(_.x)}class td extends Oo{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,Bo(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,x){const T=this._lastPoints;if(!T)return;const M=s[0].sub(T[0]),z=s[1].sub(T[1]);return this._map._cooperativeGestures&&!a.isFullscreen()&&x.touches.length<3||(this._valid=this.gestureBeginsVertically(M,z,x.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(M.y+z.y)/2*-.5})}gestureBeginsVertically(s,d,x){if(this._valid!==void 0)return this._valid;const T=s.mag()>=2,M=d.mag()>=2;if(!T&&!M)return;if(!T||!M)return this._firstMove==null&&(this._firstMove=x),x-this._firstMove<100&&void 0;const z=s.y>0==d.y>0;return Bo(s)&&Bo(d)&&z}}const bl={panStep:100,bearingStep:15,pitchStep:10};class Zs{constructor(){const s=bl;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,x=0,T=0,M=0,z=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?x=-1:(s.preventDefault(),M=-1);break;case 39:s.shiftKey?x=1:(s.preventDefault(),M=1);break;case 38:s.shiftKey?T=1:(s.preventDefault(),z=-1);break;case 40:s.shiftKey?T=-1:(s.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(x=0,T=0),{cameraAnimation:D=>{const j=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:Xs,zoom:d?Math.round(j)+d*(s.shiftKey?2:1):j,bearing:D.getBearing()+x*this._bearingStep,pitch:D.getPitch()+T*this._pitchStep,offset:[-M*this._panStep,-z*this._panStep],center:D.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xs(_){return _*(2-_)}const is=4.000244140625;class nd{constructor(s,d){this._map=s,this._el=s.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||a.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=s.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const x=a.exported.now(),T=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,d!==0&&d%is==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":T>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(T*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ae(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>is?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&W!==0&&(W=1/W);const H=d(),ne=Math.pow(2,H),he=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):ne;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(he*W))),this._type==="wheel"&&(this._startZoom=H,this._easing=this._smoothOutEasing(200)),this._delta=0}const x=typeof this._targetZoom=="number"?this._targetZoom:d(),T=this._startZoom,M=this._easing;let z,D=!1;if(this._type==="wheel"&&T&&M){const j=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),W=M(j);z=a.number(T,x,W),j<1?this._frameId||(this._frameId=!0):D=!0}else z=x,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:z-d(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=a.ease;if(this._prevEase){const x=this._prevEase,T=(a.exported.now()-x.start)/x.duration,M=x.easing(T+.01)-x.easing(T),z=.27/Math.sqrt(M*M+1e-4)*.01,D=Math.sqrt(.0729-z*z);d=a.bezier(z,D,.25,1)}return this._prevEase={start:a.exported.now(),duration:s,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(a.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class rd{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class na{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,d){return s.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:x.getZoom()+(s.shiftKey?-1:1),around:x.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class id{constructor(){this._tap=new jf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,d,x){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=d[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(s,d,x))}touchmove(s,d,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const T=d[0],M=T.y-this._swipePoint.y;return this._swipePoint=T,s.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(s,d,x)}touchend(s,d,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(s,d,x)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wl{constructor(s,d,x){this._el=s,this._mousePan=d,this._touchPan=x}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ka{constructor(s,d,x){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ad{constructor(s,d,x,T){this._el=s,this._touchZoom=d,this._touchRotate=x,this._tapDragZoom=T,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const wo=_=>_.zoom||_.drag||_.pitch||_.rotate;class ng extends a.Event{}class Ky{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,d){const x=a.sub([],d,s);this.radius=a.length(x[2]<0?a.div([],x,this.constants):[x[0],x[1],0])}projectRay(s){a.div(s,s,this.constants),a.normalize(s,s),a.mul$1(s,s,this.constants);const d=a.scale$2([],s,this.radius);if(d[2]>0){const x=a.scale$2([],[0,0,1],a.dot(d,[0,0,1])),T=a.scale$2([],a.normalize([],[d[0],d[1],0]),this.radius),M=a.add([],d,a.scale$2([],a.sub([],a.add([],T,x),d),2));d[0]=M[0],d[1]=M[1]}return d}}function as(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class ni{constructor(s,d){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wc(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ky,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),a.bindAll(["handleEvent","handleWindowEvent"],this);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[a.window,"blur",void 0]];for(const[T,M,z]of this._listeners)T.addEventListener(M,T===a.window.document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[s,d,x]of this._listeners)s.removeEventListener(d,s===a.window.document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(s){const d=this._map,x=d.getCanvasContainer();this._add("mapEvent",new Do(d,s));const T=d.boxZoom=new bs(d,s);this._add("boxZoom",T);const M=new tg,z=new na;d.doubleClickZoom=new rd(z,M),this._add("tapZoom",M),this._add("clickZoom",z);const D=new id;this._add("tapDragZoom",D);const j=d.touchPitch=new td(d);this._add("touchPitch",j);const W=new ws(s),H=new co(s);d.dragRotate=new ka(s,W,H),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]);const ne=new Mr(s),he=new xu(d,s);d.dragPan=new wl(x,ne,he),this._add("mousePan",ne),this._add("touchPan",he,["touchZoom","touchRotate"]);const ve=new ed,we=new Sc;d.touchZoomRotate=new ad(x,we,ve,D),this._add("touchRotate",ve,["touchPan","touchZoom"]),this._add("touchZoom",we,["touchPan","touchRotate"]),this._add("blockableMapEvent",new bo(d));const xe=d.scrollZoom=new nd(d,this);this._add("scrollZoom",xe,["mousePan"]);const Ee=d.keyboard=new Zs;this._add("keyboard",Ee);for(const ie of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[ie]&&d[ie].enable(s[ie])}_add(s,d,x){this._handlers.push({handlerName:s,handler:d,allowed:x}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!wo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,d,x){for(const T in s)if(T!==x&&(!d||d.indexOf(T)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const d=[];for(const x of s)this._el.contains(x.target)&&d.push(x);return d}handleEvent(s,d){this._updatingCamera=!0;const x=s.type==="renderFrame",T=x?void 0:s,M={needsRenderFrame:!1},z={},D={},j=s.touches?this._getMapTouches(s.touches):void 0,W=j?fe(this._el,j):x?void 0:ae(this._el,s);for(const{handlerName:he,handler:ve,allowed:we}of this._handlers){if(!ve.isEnabled())continue;let xe;this._blockedByActive(D,we,he)?ve.reset():ve[d||s.type]&&(xe=ve[d||s.type](s,W,j),this.mergeHandlerResult(M,z,xe,he,T),xe&&xe.needsRenderFrame&&this._triggerRenderFrame()),(xe||ve.isActive())&&(D[he]=ve)}const H={};for(const he in this._previousActiveHandlers)D[he]||(H[he]=T);this._previousActiveHandlers=D,(Object.keys(H).length||as(M))&&(this._changes.push([M,z,H]),this._triggerRenderFrame()),(Object.keys(D).length||as(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=M;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))}mergeHandlerResult(s,d,x,T,M){if(!x)return;a.extend(s,x);const z={handlerName:T,originalEvent:x.originalEvent||M};x.zoomDelta!==void 0&&(d.zoom=z),x.panDelta!==void 0&&(d.drag=z),x.pitchDelta!==void 0&&(d.pitch=z),x.bearingDelta!==void 0&&(d.rotate=z)}_applyChanges(){const s={},d={},x={};for(const[T,M,z]of this._changes)T.panDelta&&(s.panDelta=(s.panDelta||new a.Point(0,0))._add(T.panDelta)),T.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+T.zoomDelta),T.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+T.bearingDelta),T.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+T.pitchDelta),T.around!==void 0&&(s.around=T.around),T.aroundCoord!==void 0&&(s.aroundCoord=T.aroundCoord),T.pinchAround!==void 0&&(s.pinchAround=T.pinchAround),T.noInertia&&(s.noInertia=T.noInertia),a.extend(d,M),a.extend(x,z);this._updateMapTransform(s,d,x),this._changes=[]}_updateMapTransform(s,d,x){const T=this._map,M=T.transform,z=ye=>[ye.x,ye.y,ye.z];if((ye=>{const ke=this._eventsInProgress.drag;return ke&&!this._handlersById[ke.handlerName].isActive()})()&&!as(s)){const ye=M.zoom;M.cameraElevationReference="sea",M.recenterOnTerrain(),M.cameraElevationReference="ground",ye!==M.zoom&&this._map._update(!0)}if(M._isCameraConstrained&&T._stop(!0),!as(s))return void this._fireEvents(d,x,!0);let{panDelta:D,zoomDelta:j,bearingDelta:W,pitchDelta:H,around:ne,aroundCoord:he,pinchAround:ve}=s;M._isCameraConstrained&&(j>0&&(j=0),M._isCameraConstrained=!1),ve!==void 0&&(ne=ve),(j||(ye=>d[ye]&&!this._eventsInProgress[ye])("drag"))&&ne&&(this._dragOrigin=z(M.pointCoordinate3D(ne)),this._trackingEllipsoid.setup(M._camera.position,this._dragOrigin)),M.cameraElevationReference="sea",T._stop(!0),ne=ne||T.transform.centerPoint,W&&(M.bearing+=W),H&&(M.pitch+=H),M._updateCameraState();const we=[0,0,0];if(D)if(M.projection.name==="mercator"){const ye=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(ne).dir),ke=this._trackingEllipsoid.projectRay(M.screenPointToMercatorRay(ne.sub(D)).dir);we[0]=ke[0]-ye[0],we[1]=ke[1]-ye[1]}else{const ye=M.pointCoordinate(ne);if(M.projection.name==="globe"){D=D.rotate(-M.angle);const ke=M._pixelsPerMercatorPixel/M.worldSize;we[0]=-D.x*a.mercatorScale(a.latFromMercatorY(ye.y))*ke,we[1]=-D.y*a.mercatorScale(M.center.lat)*ke}else{const ke=M.pointCoordinate(ne.sub(D));ye&&ke&&(we[0]=ke.x-ye.x,we[1]=ke.y-ye.y)}}const xe=M.zoom,Ee=[0,0,0];if(j){const ye=z(he||M.pointCoordinate3D(ne)),ke={dir:a.normalize([],a.sub([],ye,M._camera.position))};if(ke.dir[2]<0){const ze=M.zoomDeltaToMovement(ye,j);a.scale$2(Ee,ke.dir,ze)}}const ie=a.add(we,we,Ee);M._translateCameraConstrained(ie),j&&Math.abs(M.zoom-xe)>1e-4&&M.recenterOnTerrain(),M.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,x,!0)}_fireEvents(s,d,x){const T=wo(this._eventsInProgress),M=wo(s),z={};for(const H in s){const{originalEvent:ne}=s[H];this._eventsInProgress[H]||(z[`${H}start`]=ne),this._eventsInProgress[H]=s[H]}!T&&M&&this._fireEvent("movestart",M.originalEvent);for(const H in z)this._fireEvent(H,z[H]);M&&this._fireEvent("move",M.originalEvent);for(const H in s){const{originalEvent:ne}=s[H];this._fireEvent(H,ne)}const D={};let j;for(const H in this._eventsInProgress){const{handlerName:ne,originalEvent:he}=this._eventsInProgress[H];this._handlersById[ne].isActive()||(delete this._eventsInProgress[H],j=d[ne]||he,D[`${H}end`]=j)}for(const H in D)this._fireEvent(H,D[H]);const W=wo(this._eventsInProgress);if(x&&(T||M)&&!W){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;H?(ne(H.bearing||this._map.getBearing())&&(H.bearing=0),this._map.easeTo(H,{originalEvent:j})):(this._map.fire(new a.Event("moveend",{originalEvent:j})),ne(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new a.Event(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((s=>{this._frameId=void 0,this.handleEvent(new ng("renderFrame",{timeStamp:s})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ys="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Sl extends a.Evented{constructor(s,d){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,x){return s=a.Point.convert(s).mult(-1),this.panTo(this.transform.center,a.extend({offset:s},d),x)}panTo(s,d,x){return this.easeTo(a.extend({center:s},d),x)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,x){return this.easeTo(a.extend({zoom:s},d),x)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,x){return this.easeTo(a.extend({bearing:s},d),x)}resetNorth(s,d){return this.rotateTo(0,a.extend({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=a.LngLatBounds.convert(s);const x=d&&d.bearing||0,T=d&&d.pitch||0,M=s.getNorthWest(),z=s.getSouthEast();return this._cameraForBounds(this.transform,M,z,x,T,d)}_extendCameraOptions(s){const d={top:0,bottom:0,right:0,left:0};if(typeof(s=a.extend({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=="number"){const x=s.padding;s.padding={top:x,bottom:x,right:x,left:x}}return s.padding=a.extend(d,s.padding),s}_minimumAABBFrustumDistance(s,d){const x=d.max[0]-d.min[0],T=d.max[1]-d.min[1];return x/T>s.aspect?x/(2*Math.tan(.5*s.fovX)*s.aspect):T/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,d,x,T,M,z){const D=s.clone(),j=this._extendCameraOptions(z);D.bearing=T,D.pitch=M;const W=a.LngLat.convert(d),H=a.LngLat.convert(x),ne=.5*(W.lat+H.lat),he=.5*(W.lng+H.lng),ve=a.latLngToECEF(ne,he),we=a.normalize([],ve),xe=a.normalize([],a.cross([],we,[0,1,0])),Ee=a.cross([],xe,we),ie=[xe[0],xe[1],xe[2],0,Ee[0],Ee[1],Ee[2],0,we[0],we[1],we[2],0,0,0,0,1],ye=[ve,a.latLngToECEF(W.lat,W.lng),a.latLngToECEF(H.lat,W.lng),a.latLngToECEF(H.lat,H.lng),a.latLngToECEF(W.lat,H.lng),a.latLngToECEF(ne,W.lng),a.latLngToECEF(ne,H.lng),a.latLngToECEF(W.lat,he),a.latLngToECEF(H.lat,he)];let ke=a.Aabb.fromPoints(ye.map((Et=>[a.dot(xe,Et),a.dot(Ee,Et),a.dot(we,Et)])));const ze=a.transformMat4([],ke.center,ie);a.squaredLength(ze)===0&&a.set(ze,0,0,1),a.normalize(ze,ze),a.scale$2(ze,ze,a.GLOBE_RADIUS),D.center=a.ecefToLatLng(ze);const Ve=D.getWorldToCameraMatrix(),We=a.invert(new Float64Array(16),Ve);ke=a.Aabb.applyTransform(ke,a.multiply([],Ve,ie)),a.transformMat4(ze,ze,Ve);const He=.5*(ke.max[2]-ke.min[2]),Je=this._minimumAABBFrustumDistance(D,ke),Ke=a.scale$2([],[0,0,1],He),ct=a.add(Ke,ze,Ke),$t=Je+(D.pitch===0?0:a.distance(ze,ct)),rt=D.globeCenterInViewSpace,vt=a.sub([],ze,[rt[0],rt[1],rt[2]]);a.normalize(vt,vt),a.scale$2(vt,vt,$t);const lt=a.add([],ze,vt);a.transformMat4(lt,lt,We);const Ft=a.earthRadius/a.GLOBE_RADIUS,ot=a.length(lt),St=a.mercatorZfromAltitude(Math.max(ot*Ft-a.earthRadius,Number.EPSILON),0),jt=Math.min(D.zoomFromMercatorZAdjusted(St),j.maxZoom);return jt>.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"mercator"}),D.zoom=jt,this._cameraForBounds(D,d,x,T,M,z)):{center:D.center,zoom:jt,bearing:T,pitch:M}}queryTerrainElevation(s,d){const x=this.transform.elevation;return x?(d=a.extend({},{exaggerated:!0},d),x.getAtPoint(a.MercatorCoordinate.fromLngLat(s),null,d.exaggerated)):null}_cameraForBounds(s,d,x,T,M,z){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,d,x,T,M,z);const D=s.clone(),j=this._extendCameraOptions(z),W=D.padding;D.bearing=T,D.pitch=M;const H=a.LngLat.convert(d),ne=a.LngLat.convert(x),he=new a.LngLat(H.lng,ne.lat),ve=new a.LngLat(ne.lng,H.lat),we=D.project(H),xe=D.project(ne),Ee=this.queryTerrainElevation(H),ie=this.queryTerrainElevation(ne),ye=this.queryTerrainElevation(he),ke=this.queryTerrainElevation(ve),ze=[[we.x,we.y,Math.min(Ee||0,ie||0,ye||0,ke||0)],[xe.x,xe.y,Math.max(Ee||0,ie||0,ye||0,ke||0)]];let Ve=a.Aabb.fromPoints(ze);const We=D.getWorldToCameraMatrix(),He=a.invert(new Float64Array(16),We);Ve=a.Aabb.applyTransform(Ve,We);const Je=a.sub([],Ve.max,Ve.min),Ke=W.left||0,ct=W.right||0,$t=W.bottom||0,rt=W.top||0,{left:vt,right:lt,top:Ft,bottom:ot}=j.padding,St=.5*(Ke+ct),jt=.5*(rt+$t),Et=Math.min(D.scaleZoom(D.scale*Math.min((D.width-(Ke+ct+vt+lt))/Je[0],(D.height-($t+rt+ot+Ft))/Je[1])),j.maxZoom),At=D.scale/D.zoomScale(Et);Ve=new a.Aabb([Ve.min[0]-(vt+St)*At,Ve.min[1]-(ot+jt)*At,Ve.min[2]],[Ve.max[0]+(lt+St)*At,Ve.max[1]+(Ft+jt)*At,Ve.max[2]]);const vn=.5*Je[2],Pn=this._minimumAABBFrustumDistance(D,Ve),Nt=[0,0,1,0];a.transformMat4$1(Nt,Nt,We),a.normalize$2(Nt,Nt);const rn=a.scale$2([],Nt,Pn+vn),kn=a.add([],Ve.center,rn),Yn=(typeof j.offset.x=="number"&&typeof j.offset.y=="number"?new a.Point(j.offset.x,j.offset.y):a.Point.convert(j.offset)).rotate(-a.degToRad(T));Ve.center[0]-=Yn.x*At,Ve.center[1]+=Yn.y*At,a.transformMat4(Ve.center,Ve.center,He),a.transformMat4(kn,kn,He);const pn=[Ve.center[0],Ve.center[1],kn[2]*D.pixelsPerMeter];a.scale$2(pn,pn,1/D.worldSize);const _r=a.lngFromMercatorX(pn[0]),$r=a.latFromMercatorY(pn[1]),Br=Math.min(D._zoomFromMercatorZ(pn[2]),j.maxZoom),Lr=new a.LngLat(_r,$r);return D.mercatorFromTransition&&Br<.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"globe"}),D.zoom=Br,this._cameraForBounds(D,d,x,T,M,z)):{center:Lr,zoom:Br,bearing:T,pitch:M}}fitBounds(s,d,x){const T=this.cameraForBounds(s,d);return this._fitInternal(T,d,x)}fitScreenCoordinates(s,d,x,T,M){const z=a.Point.convert(s),D=a.Point.convert(d),j=new a.Point(Math.min(z.x,D.x),Math.min(z.y,D.y)),W=new a.Point(Math.max(z.x,D.x),Math.max(z.y,D.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(z,D))return this;const H=this.transform.pointLocation3D(j),ne=this.transform.pointLocation3D(W),he=this.transform.pointLocation3D(new a.Point(j.x,W.y)),ve=this.transform.pointLocation3D(new a.Point(W.x,j.y)),we=[Math.min(H.lng,ne.lng,he.lng,ve.lng),Math.min(H.lat,ne.lat,he.lat,ve.lat)],xe=[Math.max(H.lng,ne.lng,he.lng,ve.lng),Math.max(H.lat,ne.lat,he.lat,ve.lat)],Ee=T&&T.pitch?T.pitch:this.getPitch(),ie=this._cameraForBounds(this.transform,we,xe,x,Ee,T);return this._fitInternal(ie,T,M)}_fitInternal(s,d,x){return s?(delete(d=a.extend(s,d)).padding,d.linear?this.easeTo(d,x):this.flyTo(d,x)):this}jumpTo(s,d){this.stop();const x=s.preloadOnly?this.transform.clone():this.transform;let T=!1,M=!1,z=!1;return"zoom"in s&&x.zoom!==+s.zoom&&(T=!0,x.zoom=+s.zoom),s.center!==void 0&&(x.center=a.LngLat.convert(s.center)),"bearing"in s&&x.bearing!==+s.bearing&&(M=!0,x.bearing=+s.bearing),"pitch"in s&&x.pitch!==+s.pitch&&(z=!0,x.pitch=+s.pitch),s.padding==null||x.isPaddingEqual(s.padding)||(x.padding=s.padding),s.preloadOnly?(this._preloadTiles(x),this):(this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),T&&this.fire(new a.Event("zoomstart",d)).fire(new a.Event("zoom",d)).fire(new a.Event("zoomend",d)),M&&this.fire(new a.Event("rotatestart",d)).fire(new a.Event("rotate",d)).fire(new a.Event("rotateend",d)),z&&this.fire(new a.Event("pitchstart",d)).fire(new a.Event("pitch",d)).fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.warnOnce(Ys),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,d){const x=this.transform;if(!x.projection.supportsFreeCamera)return a.warnOnce(Ys),this;this.stop();const T=x.zoom,M=x.pitch,z=x.bearing;x.setFreeCameraOptions(s);const D=T!==x.zoom,j=M!==x.pitch,W=z!==x.bearing;return this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),D&&this.fire(new a.Event("zoomstart",d)).fire(new a.Event("zoom",d)).fire(new a.Event("zoomend",d)),W&&this.fire(new a.Event("rotatestart",d)).fire(new a.Event("rotate",d)).fire(new a.Event("rotateend",d)),j&&this.fire(new a.Event("pitchstart",d)).fire(new a.Event("pitch",d)).fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d)),this}easeTo(s,d){this._stop(!1,s.easeId),((s=a.extend({offset:[0,0],duration:500,easing:a.ease},s)).animate===!1||this._prefersReducedMotion(s))&&(s.duration=0);const x=this.transform,T=this.getZoom(),M=this.getBearing(),z=this.getPitch(),D=this.getPadding(),j="zoom"in s?+s.zoom:T,W="bearing"in s?this._normalizeBearing(s.bearing,M):M,H="pitch"in s?+s.pitch:z,ne="padding"in s?s.padding:x.padding,he=a.Point.convert(s.offset);let ve,we,xe;if(x.projection.name==="globe"){const Ke=a.MercatorCoordinate.fromLngLat(x.center),ct=he.rotate(-x.angle);Ke.x+=ct.x/x.worldSize,Ke.y+=ct.y/x.worldSize;const $t=Ke.toLngLat(),rt=a.LngLat.convert(s.center||$t);this._normalizeCenter(rt),ve=x.centerPoint.add(ct),we=new a.Point(Ke.x,Ke.y).mult(x.worldSize),xe=new a.Point(a.mercatorXfromLng(rt.lng),a.mercatorYfromLat(rt.lat)).mult(x.worldSize).sub(we)}else{ve=x.centerPoint.add(he);const Ke=x.pointLocation(ve),ct=a.LngLat.convert(s.center||Ke);this._normalizeCenter(ct),we=x.project(Ke),xe=x.project(ct).sub(we)}const Ee=x.zoomScale(j-T);let ie,ye;s.around&&(ie=a.LngLat.convert(s.around),ye=x.locationPoint(ie));const ke=this._zooming||j!==T,ze=this._rotating||M!==W,Ve=this._pitching||H!==z,We=!x.isPaddingEqual(ne),He=Ke=>ct=>{if(ke&&(Ke.zoom=a.number(T,j,ct)),ze&&(Ke.bearing=a.number(M,W,ct)),Ve&&(Ke.pitch=a.number(z,H,ct)),We&&(Ke.interpolatePadding(D,ne,ct),ve=Ke.centerPoint.add(he)),ie)Ke.setLocationAtPoint(ie,ye);else{const $t=Ke.zoomScale(Ke.zoom-T),rt=j>T?Math.min(2,Ee):Math.max(.5,Ee),vt=Math.pow(rt,1-ct),lt=Ke.unproject(we.add(xe.mult(ct*vt)).mult($t));Ke.setLocationAtPoint(Ke.renderWorldCopies?lt.wrap():lt,ve)}return s.preloadOnly||this._fireMoveEvents(d),Ke};if(s.preloadOnly){const Ke=this._emulate(He,s.duration,x);return this._preloadTiles(Ke),this}const Je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ke,this._rotating=ze,this._pitching=Ve,this._padding=We,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Je),this._ease(He(x),(Ke=>{x.recenterOnTerrain(),this._afterEase(d,Ke)}),s),this}_prepareEase(s,d,x={}){this._moving=!0,this.transform.cameraElevationReference="sea",d||x.moving||this.fire(new a.Event("movestart",s)),this._zooming&&!x.zooming&&this.fire(new a.Event("zoomstart",s)),this._rotating&&!x.rotating&&this.fire(new a.Event("rotatestart",s)),this._pitching&&!x.pitching&&this.fire(new a.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new a.Event("move",s)),this._zooming&&this.fire(new a.Event("zoom",s)),this._rotating&&this.fire(new a.Event("rotate",s)),this._pitching&&this.fire(new a.Event("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const x=this._zooming,T=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new a.Event("zoomend",s)),T&&this.fire(new a.Event("rotateend",s)),M&&this.fire(new a.Event("pitchend",s)),this.fire(new a.Event("moveend",s))}flyTo(s,d){if(this._prefersReducedMotion(s)){const Et=a.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Et,d)}this.stop(),s=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},s);const x=this.transform,T=this.getZoom(),M=this.getBearing(),z=this.getPitch(),D=this.getPadding(),j="zoom"in s?a.clamp(+s.zoom,x.minZoom,x.maxZoom):T,W="bearing"in s?this._normalizeBearing(s.bearing,M):M,H="pitch"in s?+s.pitch:z,ne="padding"in s?s.padding:x.padding,he=x.zoomScale(j-T),ve=a.Point.convert(s.offset);let we=x.centerPoint.add(ve);const xe=x.pointLocation(we),Ee=a.LngLat.convert(s.center||xe);this._normalizeCenter(Ee);const ie=x.project(xe),ye=x.project(Ee).sub(ie);let ke=s.curve;const ze=Math.max(x.width,x.height),Ve=ze/he,We=ye.mag();if("minZoom"in s){const Et=a.clamp(Math.min(s.minZoom,T,j),x.minZoom,x.maxZoom),At=ze/x.zoomScale(Et-T);ke=Math.sqrt(At/We*2)}const He=ke*ke;function Je(Et){const At=(Ve*Ve-ze*ze+(Et?-1:1)*He*He*We*We)/(2*(Et?Ve:ze)*He*We);return Math.log(Math.sqrt(At*At+1)-At)}function Ke(Et){return(Math.exp(Et)-Math.exp(-Et))/2}function ct(Et){return(Math.exp(Et)+Math.exp(-Et))/2}const $t=Je(0);let rt=function(Et){return ct($t)/ct($t+ke*Et)},vt=function(Et){return ze*((ct($t)*(Ke(At=$t+ke*Et)/ct(At))-Ke($t))/He)/We;var At},lt=(Je(1)-$t)/ke;if(Math.abs(We)<1e-6||!isFinite(lt)){if(Math.abs(ze-Ve)<1e-6)return this.easeTo(s,d);const Et=Ve<ze?-1:1;lt=Math.abs(Math.log(Ve/ze))/ke,vt=function(){return 0},rt=function(At){return Math.exp(Et*ke*At)}}s.duration="duration"in s?+s.duration:1e3*lt/("screenSpeed"in s?+s.screenSpeed/ke:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const Ft=M!==W,ot=H!==z,St=!x.isPaddingEqual(ne),jt=Et=>At=>{const vn=At*lt,Pn=1/rt(vn);Et.zoom=At===1?j:T+Et.scaleZoom(Pn),Ft&&(Et.bearing=a.number(M,W,At)),ot&&(Et.pitch=a.number(z,H,At)),St&&(Et.interpolatePadding(D,ne,At),we=Et.centerPoint.add(ve));const Nt=At===1?Ee:Et.unproject(ie.add(ye.mult(vt(vn))).mult(Pn));return Et.setLocationAtPoint(Et.renderWorldCopies?Nt.wrap():Nt,we),Et._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(d),Et};if(s.preloadOnly){const Et=this._emulate(jt,s.duration,x);return this._preloadTiles(Et),this}return this._zooming=!0,this._rotating=Ft,this._pitching=ot,this._padding=St,this._prepareEase(d,!1),this._ease(jt(x),(()=>this._afterEase(d)),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const x=this._onEaseEnd;this._onEaseEnd=void 0,x.call(this,d)}if(!s){const x=this.handlers;x&&x.stop(!1)}return this}_ease(s,d,x){x.animate===!1||x.duration===0?(s(1),d()):(this._easeStart=a.exported.now(),this._easeOptions=x,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,d){s=a.wrap(s,-180,180);const x=Math.abs(s-d);return Math.abs(s-360-d)<x&&(s-=360),Math.abs(s+360-d)<x&&(s+=360),s}_normalizeCenter(s){const d=this.transform;if(!d.renderWorldCopies||d.maxBounds)return;const x=s.lng-d.center.lng;s.lng+=x>180?-360:x<-180?360:0}_prefersReducedMotion(s){return this._respectPrefersReducedMotion&&a.exported.prefersReducedMotion&&!(s&&s.essential)}_emulate(s,d,x){const T=Math.ceil(15*d/1e3),M=[],z=s(x.clone());for(let D=0;D<=T;D++){const j=z(D/T);M.push(j.clone())}return M}}class ln{constructor(s={}){this.options=s,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const d=this.options&&this.options.compact;return this._map=s,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F("button","mapboxgl-ctrl-attrib-button",this._container),F("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const x=this._map._getUIString(`AttributionControl.${d}`);s.setAttribute("aria-label",x),s.removeAttribute("title"),s.firstElementChild&&s.firstElementChild.setAttribute("title",x)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(s){const x=d.reduce(((T,M,z)=>(M.value&&(T+=`${M.key}=${M.value}${z<d.length-1?"&":""}`),T)),"?");s.href=`${a.config.FEEDBACK_URL}/${x}#${bc(this._map,!0)}`,s.rel="noopener nofollow",this._setElementTitle(s,"MapFeedback")}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}const d=this._map.style._sourceCaches;for(const T in d){const M=d[T];if(M.used){const z=M.getSource();z.attribution&&s.indexOf(z.attribution)<0&&s.push(z.attribution)}}s.sort(((T,M)=>T.length-M.length)),s=s.filter(((T,M)=>{for(let z=M+1;z<s.length;z++)if(s[z].indexOf(T)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const x=s.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,s.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Nf{constructor(){a.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=F("div","mapboxgl-ctrl");const d=F("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const d in s){const x=s[d].getSource();if(x.hasOwnProperty("mapbox_logo")&&!x.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const d=s[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Tl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,x=d?this._queue.concat(d):this._queue;for(const T of x)if(T.id===s)return void(T.cancelled=!0)}run(s=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const x of d)if(!x.cancelled&&(x.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function os(_,s,d){if(_=new a.LngLat(_.lng,_.lat),s){const x=new a.LngLat(_.lng-360,_.lat),T=new a.LngLat(_.lng+360,_.lat),M=360*Math.ceil(Math.abs(_.lng-d.center.lng)/360),z=d.locationPoint(_).distSqr(s),D=s.x<0||s.y<0||s.x>d.width||s.y>d.height;d.locationPoint(x).distSqr(s)<z&&(D||Math.abs(x.lng-d.center.lng)<M)?_=x:d.locationPoint(T).distSqr(s)<z&&(D||Math.abs(T.lng-d.center.lng)<M)&&(_=T)}for(;Math.abs(_.lng-d.center.lng)>180;){const x=d.locationPoint(_);if(x.x>=0&&x.y>=0&&x.x<=d.width&&x.y<=d.height)break;_.lng>d.center.lng?_.lng-=360:_.lng+=360}return _}const Tc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class nn extends a.Evented{constructor(s,d){if(super(),(s instanceof a.window.HTMLElement||d)&&(s=a.extend({element:s},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=a.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=F("div");const T=41,M=27,z=U("svg",{display:"block",height:T*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${T}`},this._element),D=U("radialGradient",{id:"shadowGradient"},U("defs",{},z));U("stop",{offset:"10%","stop-opacity":.4},D),U("stop",{offset:"100%","stop-opacity":.05},D),U("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},z),U("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},z),U("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},z),U("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},z),this._offset=a.Point.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(T=>{T.preventDefault()})),this._element.addEventListener("mousedown",(T=>{T.preventDefault()}));const x=this._element.classList;for(const T in Tc)x.remove(`mapboxgl-marker-anchor-${T}`);x.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const T=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[T,-1*(38.1-13.5+T)],"bottom-right":[-T,-1*(38.1-13.5+T)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const d=s.code,x=s.charCode||s.keyCode;d!=="Space"&&d!=="Enter"&&x!==32&&x!==13||this.togglePopup()}_onMapClick(s){const d=s.originalEvent.target,x=this._element;this._popup&&(d===x||x.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,d=this._pos;if(!s||!d)return!1;const x=s.unproject(d),T=s.getFreeCameraOptions();if(!T.position)return!1;const M=T.position.toLngLat();return M.distanceTo(x)<.9*M.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const d=this._pos;if(!d||d.x<0||d.x>s.transform.width||d.y<0||d.y>s.transform.height)return void this._clearFadeTimer();const x=s.unproject(d);let T;s._showingGlobe()&&a.isLngLatBehindGlobe(s.transform,this._lngLat)?T=0:(T=1-s._queryFogOpacity(x),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(T*=this._occludedOpacity)),this._element.style.opacity=`${T}`,this._element.style.pointerEvents=T>0?"auto":"none",this._popup&&this._popup._setOpacity(T),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${Tc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const s=this._pos,d=this._map,x=this.getPitchAlignment();if(!d||!s||x!=="map")return"";if(!d._showingGlobe()){const j=d.getPitch();return j?`rotateX(${j}deg)`:""}const T=a.radToDeg(a.globeTiltAtLngLat(d.transform,this._lngLat)),M=s.sub(a.globeCenterToScreenPoint(d.transform)),z=Math.abs(M.x)+Math.abs(M.y);if(z===0)return"";const D=T/z;return`rotateX(${-M.y*D}deg) rotateY(${M.x*D}deg)`}_calculateZTransform(){const s=this._pos,d=this._map;if(!d||!s)return"";let x=0;const T=this.getRotationAlignment();if(T==="map")if(d._showingGlobe()){const M=d.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),z=d.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(M);x=a.radToDeg(Math.atan2(z.y,z.x))-90}else x=-d.getBearing();else if(T==="horizon"){const M=a.smoothstep(4,6,d.getZoom()),z=a.globeCenterToScreenPoint(d.transform);z.y+=M*d.transform.height;const D=s.sub(z),j=a.radToDeg(Math.atan2(D.y,D.x));x=(j>90?j-270:j+90)*(1-M)}return x+=this._rotation,x?`rotateZ(${x}deg)`:""}_update(s){a.window.cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=os(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),s===!0?this._updateFrameId=a.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),d._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(s){return this._offset=a.Point.convert(s),this._update(),this}_onMove(s){const d=this._map;if(!d)return;const x=this._pointerdownPos,T=this._positionDelta;if(x&&T){if(!this._isDragging){const M=this._clickTolerance||d._clickTolerance;if(s.point.dist(x)<M)return;this._isDragging=!0}this._pos=s.point.sub(T),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(s){const d=this._map,x=this._pos;d&&x&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(x),this._pointerdownPos=s.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const d=this._map;return d&&(s?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Tp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function El(_=new a.Point(0,0),s="bottom"){if(typeof _=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(s){case"top":return new a.Point(0,_);case"top-left":return new a.Point(d,d);case"top-right":return new a.Point(-d,d);case"bottom":return new a.Point(0,-_);case"bottom-left":return new a.Point(d,-d);case"bottom-right":return new a.Point(-d,-d);case"left":return new a.Point(_,0);case"right":return new a.Point(-_,0)}return new a.Point(0,0)}return _ instanceof a.Point||Array.isArray(_)?a.Point.convert(_):a.Point.convert(_[s]||[0,0])}class Uf{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const d=a.easeCubicInOut((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,d,x){this._start=this.getValue(d),this._end=s,this._startTime=d,this._endTime=d+x}}const $f={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ep={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},wu={showCompass:!0,showZoom:!0,visualizePitch:!1};class Cp{constructor(s,d,x=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new ws({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,x&&(this.mousePitch=new co({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(s,d){this.mouseRotate.mousedown(s,d),this.mousePitch&&this.mousePitch.mousedown(s,d),Q()}move(s,d){const x=this.map,T=this.mouseRotate.mousemoveWindow(s,d),M=T&&T.bearingDelta;if(M&&x.setBearing(x.getBearing()+M),this.mousePitch){const z=this.mousePitch.mousemoveWindow(s,d),D=z&&z.pitchDelta;D&&x.setPitch(x.getPitch()+D)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Y(),a.window.removeEventListener("mousemove",this.mousemove),a.window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(a.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),ae(this.element,s)),a.window.addEventListener("mousemove",this.mousemove),a.window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,ae(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=fe(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=fe(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Su={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Tu={maxWidth:100,unit:"metric"},od={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ec={version:a.version,supported:R,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Sl{constructor(_){if(a.LivePerformanceUtils.mark(a.PerformanceMarkers.create),(_=a.extend({},Ep,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&a.isSafariWithAntialiasingBug(a.window)&&(_.antialias=!1,a.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new xc(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._useWebGL2=_.useWebGL2,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=this._parseLanguage(_.language),this._worldview=_.worldview,this._renderTaskQueue=new Tl,this._domRenderTaskQueue=new Tl,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.uniqueId(),this._locale=a.extend({},$f,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._performanceMetricsCollection=_.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Uf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=a.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof a.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&a.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1),a.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ni(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new Gs(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,a.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new ln({customAttribution:_.customAttribution})),this._logoControl=new Nf,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(s=>{this._update(s.dataType==="style"),this.fire(new a.Event(`${s.dataType}data`,s))})),this.on("dataloading",(s=>{this.fire(new a.Event(`${s.dataType}dataloading`,s))}))}_getMapId(){return this._mapId}addControl(_,s){if(s===void 0&&(s=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=_.onAdd(this);this._controls.push(_);const x=this._controlPositions[s];return s.indexOf("bottom")!==-1?x.insertBefore(d,x.firstChild):x.appendChild(d),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(_);return s>-1&&this._controls.splice(s,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new a.Event("movestart",_)).fire(new a.Event("move",_)),this.fire(new a.Event("resize",_)),s&&this.fire(new a.Event("moveend",_)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(a.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(_){return _==="auto"?a.window.navigator.language:Array.isArray(_)?_.length===0?void 0:_.map((s=>s==="auto"?a.window.navigator.language:s)):_}setLanguage(_){const s=this._parseLanguage(_);if(!this.style||s===this._language)return this;this._language=s,this.style._reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){return this.style&&_!==this._worldview?(this._worldview=_,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,s=_.projection.name;let d;s==="globe"&&_.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?(_.setMercatorFromTransition(),d=!0):s==="mercator"&&_.zoom<a.GLOBE_ZOOM_THRESHOLD_MAX&&(_.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_,s){return this._updateProjection(_||s||{name:"mercator"})}_updateProjection(_){let s;if(s=_.name==="globe"&&this.transform.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate(),s){this.painter.clearBackgroundTiles();for(const d in this.style._sourceCaches)this.style._sourceCaches[d].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(_){return this.transform.locationPoint3D(a.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(a.Point.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(_,s,d){if(_==="mouseenter"||_==="mouseover"){let x=!1;const T=z=>{const D=s.filter((W=>this.getLayer(W))),j=D.length?this.queryRenderedFeatures(z.point,{layers:D}):[];j.length?x||(x=!0,d.call(this,new ti(_,this,z.originalEvent,{features:j}))):x=!1},M=()=>{x=!1};return{layers:new Set(s),listener:d,delegates:{mousemove:T,mouseout:M}}}if(_==="mouseleave"||_==="mouseout"){let x=!1;const T=z=>{const D=s.filter((j=>this.getLayer(j)));(D.length?this.queryRenderedFeatures(z.point,{layers:D}):[]).length?x=!0:x&&(x=!1,d.call(this,new ti(_,this,z.originalEvent)))},M=z=>{x&&(x=!1,d.call(this,new ti(_,this,z.originalEvent)))};return{layers:new Set(s),listener:d,delegates:{mousemove:T,mouseout:M}}}{const x=T=>{const M=s.filter((D=>this.getLayer(D))),z=M.length?this.queryRenderedFeatures(T.point,{layers:M}):[];z.length&&(T.features=z,d.call(this,T),delete T.features)};return{layers:new Set(s),listener:d,delegates:{[_]:x}}}}on(_,s,d){if(d===void 0)return super.on(_,s);Array.isArray(s)||(s=[s]);const x=this._createDelegatedListener(_,s,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(x);for(const T in x.delegates)this.on(T,x.delegates[T]);return this}once(_,s,d){if(d===void 0)return super.once(_,s);Array.isArray(s)||(s=[s]);const x=this._createDelegatedListener(_,s,d);for(const T in x.delegates)this.once(T,x.delegates[T]);return this}off(_,s,d){if(d===void 0)return super.off(_,s);s=new Set(Array.isArray(s)?s:[s]);const x=(M,z)=>{if(M.size!==z.size)return!1;for(const D of M)if(!z.has(D))return!1;return!0},T=this._delegatedListeners?this._delegatedListeners[_]:void 0;return T&&(M=>{for(let z=0;z<M.length;z++){const D=M[z];if(D.listener===d&&x(D.layers,s)){for(const j in D.delegates)this.off(j,D.delegates[j]);return M.splice(z,1),this}}})(T),this}queryRenderedFeatures(_,s){return this.style?(s!==void 0||_===void 0||_ instanceof a.Point||Array.isArray(_)||(s=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],s=s||{},this.transform)):[]}querySourceFeatures(_,s){return this.style.querySourceFeatures(_,s)}isPointOnSurface(_){const{name:s}=this.transform.projection;return s!=="globe"&&s!=="mercator"&&a.warnOnce(`${s} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.Point.convert(_))}setStyle(_,s){return(s=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&s.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(_,s))}_getUIString(_){const s=this._locale[_];if(s==null)throw new Error(`Missing UI string '${_}'`);return s}_updateStyle(_,s){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new zo(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new zo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,s){if(typeof _=="string"){const d=this._requestManager.normalizeStyleURL(_),x=this._requestManager.transformRequest(d,a.ResourceType.Style);a.getJSON(x,((T,M)=>{T?this.fire(new a.ErrorEvent(T)):M&&this._updateDiff(M,s)}))}else typeof _=="object"&&this._updateDiff(_,s)}_updateDiff(_,s){try{this.style.setState(_)&&this._update(!0)}catch(d){a.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(_,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.warnOnce("There is no style added to the map."),!1)}addSource(_,s){return this._lazyInitEmptyStyle(),this.style.addSource(_,s),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const s in _){const d=_[s]._tiles;for(const x in d){const T=d[x];if(T.state!=="loaded"&&T.state!=="errored")return!1}}return!0}addSourceType(_,s,d){this._lazyInitEmptyStyle(),this.style.addSourceType(_,s,d)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,s,{pixelRatio:d=1,sdf:x=!1,stretchX:T,stretchY:M,content:z}={}){if(this._lazyInitEmptyStyle(),s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap){const{width:D,height:j,data:W}=a.exported.getImageData(s);this.style.addImage(_,{data:new a.RGBAImage({width:D,height:j},W),pixelRatio:d,stretchX:T,stretchY:M,content:z,sdf:x,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:D,height:j}=s,W=s;this.style.addImage(_,{data:new a.RGBAImage({width:D,height:j},new Uint8Array(W.data)),pixelRatio:d,stretchX:T,stretchY:M,content:z,sdf:x,version:0,userImage:W}),W.onAdd&&W.onAdd(this,_)}}updateImage(_,s){const d=this.style.getImage(_);if(!d)return void this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap?a.exported.getImageData(s):s,{width:T,height:M}=x;T!==void 0&&M!==void 0?T===d.data.width&&M===d.data.height?(d.data.replace(x.data,!(s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap)),this.style.updateImage(_,d)):this.fire(new a.ErrorEvent(new Error(`The width and height of the updated image (${T}, ${M})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`))):this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,s){a.getImage(this._requestManager.transformRequest(_,a.ResourceType.Image),((d,x)=>{s(d,x instanceof a.window.HTMLImageElement?a.exported.getImageData(x):x)}))}listImages(){return this.style.listImages()}addLayer(_,s){return this._lazyInitEmptyStyle(),this.style.addLayer(_,s),this._update(!0)}moveLayer(_,s){return this.style.moveLayer(_,s),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,s,d){return this.style.setLayerZoomRange(_,s,d),this._update(!0)}setFilter(_,s,d={}){return this.style.setFilter(_,s,d),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,s,d,x={}){return this.style.setPaintProperty(_,s,d,x),this._update(!0)}getPaintProperty(_,s){return this.style.getPaintProperty(_,s)}setLayoutProperty(_,s,d,x={}){return this.style.setLayoutProperty(_,s,d,x),this._update(!0)}getLayoutProperty(_,s){return this.style.getLayoutProperty(_,s)}setLight(_,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,s),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.LngLat.convert(_),this.transform):0}setFeatureState(_,s){return this.style.setFeatureState(_,s),this._update()}removeFeatureState(_,s){return this.style.removeFeatureState(_,s),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let d,x,T,M=this._container;for(;M&&(!x||!T);){const z=a.window.getComputedStyle(M).transform;z&&z!=="none"&&(d=z.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(x=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(T=d[3])),M=M.parentElement}this._containerWidth=x?Math.abs(_/x):_,this._containerHeight=T?Math.abs(s/T):s}_detectMissingCSS(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=F("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=F("div","mapboxgl-canvas-container",_);this._interactive&&s.classList.add("mapboxgl-interactive"),this._canvas=F("canvas","mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=F("div","mapboxgl-control-container",_),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((T=>{x[T]=F("div",`mapboxgl-ctrl-${T}`,d)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,s){const d=a.exported.devicePixelRatio||1;this._canvas.width=d*Math.ceil(_),this._canvas.height=d*Math.ceil(s),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${s}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const s=this._markers.indexOf(_);s!==-1&&this._markers.splice(s,1)}_addPopup(_){this._popups.push(_)}_removePopup(_){const s=this._popups.indexOf(_);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const _=a.extend({},R.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._useWebGL2&&this._canvas.getContext("webgl2",_),d=s||this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);d?(this._useWebGL2&&!s&&a.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),a.storeAuthState(d,!0),this.painter=new ns(d,this.transform,!!s),this.on("data",(x=>{x.dataType==="source"&&this.painter.setTileLoadedFlag(!0)})),a.exported$1.testSupport(d)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let s;const d=this.painter.context.extTimerQuery,x=a.exported.now();if(this.listens("gpu-timing-frame")&&(s=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],a.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],a.window.performance.now())),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();const T=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const D=this.transform.zoom,j=this.transform.pitch,W=a.exported.now(),H=new a.EvaluationParameters(D,{now:W,fadeDuration:T,pitch:j,transition:this.style.getTransition()});this.style.update(H)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let M=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),M=this._updateAverageElevation(x),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):M=this._updateAverageElevation(x),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,T,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const D=a.exported.now()-x;d.endQueryEXT(d.TIME_ELAPSED_EXT,s),setTimeout((()=>{const j=d.getQueryObjectEXT(s,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(s),this.fire(new a.Event("gpu-timing-frame",{cpuTime:D,gpuTime:j})),a.window.performance.mark("frame-gpu",{startTime:x,detail:{gpuTime:j}})}),50)}if(this.listens("gpu-timing-layer")){const D=this.painter.collectGpuTimers();setTimeout((()=>{const j=this.painter.queryGpuTimers(D);this.fire(new a.Event("gpu-timing-layer",{layerTimes:j}))}),50)}if(this.listens("gpu-timing-deferred-render")){const D=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const j=this.painter.queryGpuTimeDeferredRender(D);this.fire(new a.Event("gpu-timing-deferred-render",{gpuTime:j}))}),50)}const z=this._sourcesDirty||this._styleDirty||this._placementDirty||M;if(z||this._repaint)this.triggerRepaint();else{const D=!this.isMoving()&&this.loaded();if(D&&(M=this._updateAverageElevation(x,!0)),M)this.triggerRepaint();else if(this._triggerFrame(!1),D&&(this.fire(new a.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const j=this._calculateSpeedIndex();this.fire(new a.Event("speedindexcompleted",{speedIndex:j})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||z||(this._fullyLoaded=!0,a.LivePerformanceUtils.mark(a.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&a.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(_){for(const s of this._markers)_&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!_||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(_,s=!1){const d=x=>(this.transform.averageElevation=x,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);if((s||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const x=this.transform.averageElevation;let T=this.transform.sampleAverageElevation(),M=!1;this.transform.elevation&&(M=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(T)?T=0:this._averageElevationLastSampledAt=_;const z=Math.abs(x-T);if(z>1){if(this._isInitialLoad||M)return this._averageElevation.jumpTo(T),d(T);this._averageElevation.easeTo(T,_,300)}else if(z>1e-4)return this._averageElevation.jumpTo(T),d(T)}return!!this._averageElevation.isEasing(_)&&d(this._averageElevation.getValue(_))}_authenticate(){a.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(_=>{if(_&&(_.message===a.AUTH_ERR_MSG||_.status===401)){const s=this.painter.context.gl;a.storeAuthState(s,!1),this._logoControl instanceof Nf&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),a.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const _=this._isDragging();this.painter.updateTerrain(this.style,_)}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const d=this.painter.context.gl,x=d.createFramebuffer();function T(M){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,M,0);const z=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,z),z}return d.bindFramebuffer(d.FRAMEBUFFER,x),this._canvasPixelComparison(T(_),s.canvasCopies.map(T),s.timeStamps)}_canvasPixelComparison(_,s,d){let x=d[1]-d[0];const T=_.length/4;for(let M=0;M<s.length;M++){const z=s[M];let D=0;for(let j=0;j<z.length;j+=4)z[j]===_[j]&&z[j+1]===_[j+1]&&z[j+2]===_[j+2]&&z[j+3]===_[j+3]&&(D+=1);x+=(d[M+2]-d[M+1])*(1-D/T)}return x}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1),a.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=a.exported.frame((s=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(s)})))}_preloadTiles(_){const s=this.style?Object.values(this.style._sourceCaches):[];return a.asyncAll(s,((d,x)=>d._preloadTiles(_,x)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}_onVisibilityChange(){a.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(_){this._showTileAABBs!==_&&(this._showTileAABBs=_,_&&this._update())}_setCacheLimits(_,s){a.setCacheLimits(_,s)}get version(){return a.version}},NavigationControl:class{constructor(_){this.options=a.extend({},wu,_),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(s=>{this._map&&this._map.zoomIn({},{originalEvent:s})})),F("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(s=>{this._map&&this._map.zoomOut({},{originalEvent:s})})),F("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(s=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:s}):d.resetNorth({},{originalEvent:s}))})),this._compassIcon=F("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const s=_.getZoom(),d=s===_.getMaxZoom(),x=s===_.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=s)}))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cp(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,s){const d=F("button",_,this._container);return d.type="button",d.addEventListener("click",s),d}_setButtonTitle(_,s){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${s}`);_.setAttribute("aria-label",d),_.firstElementChild&&_.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends a.Evented{constructor(_){super(),this.options=a.extend({geolocation:a.window.navigator.geolocation},Su,_),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Vs(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){const s=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,_(d)};this._supportsGeolocation!==void 0?_(this._supportsGeolocation):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then((d=>s(d.state!=="denied"))).catch((()=>s())):s()}_isOutOfMapMaxBounds(_){const s=this._map.getMaxBounds(),d=_.coords;return!!s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",_)),this._finish()}}_updateCamera(_){const s=new a.LngLat(_.coords.longitude,_.coords.latitude),d=_.coords.accuracy,x=this._map.getBearing(),T=a.extend({bearing:x},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(d),T,{geolocateSource:!0})}_updateMarker(_){if(_){const s=new a.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,s=a.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,d=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this._geolocateButton=F("button","mapboxgl-ctrl-geolocate",this._container),F("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F("div","mapboxgl-user-location"),this._dotElement.appendChild(F("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(F("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new nn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=F("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new nn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))}))}}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{a.window.addEventListener("ondeviceorientationabsolute"in a.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};a.window.DeviceMotionEvent!==void 0&&typeof a.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then((s=>{s==="granted"&&_()})).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),a.window.removeEventListener("deviceorientation",this._onDeviceOrientation),a.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ln,ScaleControl:class{constructor(_){this.options=a.extend({},Tu,_),this._isNumberFormatSupported=(function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}})(),a.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,s=this._map,d=s._containerHeight/2,x=s._containerWidth/2-_/2,T=s.unproject([x,d]),M=s.unproject([x+_,d]),z=T.distanceTo(M);if(this.options.unit==="imperial"){const D=3.2808*z;D>5280?this._setScale(_,D/5280,"mile"):this._setScale(_,D,"foot")}else this.options.unit==="nautical"?this._setScale(_,z/1852,"nautical-mile"):z>=1e3?this._setScale(_,z/1e3,"kilometer"):this._setScale(_,z,"meter")}_setScale(_,s,d){this._map._requestDomTask((()=>{const x=(function(M){const z=Math.pow(10,`${Math.floor(M)}`.length-1);let D=M/z;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:(function(j){const W=Math.pow(10,Math.ceil(-Math.log(j)/Math.LN10));return Math.round(j*W)/W})(D),z*D})(s),T=x/s;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(x):`${x}&nbsp;${od[d]}`,this._container.style.width=_*T+"px"}))}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof a.window.HTMLElement?this._container=_.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in a.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!a.window.document.fullscreenEnabled&&!a.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=F("button","mapboxgl-ctrl-fullscreen",this._controlContainer);F("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(a.window.document.fullscreenElement||a.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.Evented{constructor(_){super(),this.options=a.extend(Object.create(Tp),_),a.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),_._addPopup(this),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),_._canvasContainer&&_._canvasContainer.classList.remove("mapboxgl-track-pointer"),_._removePopup(this),this._map=void 0),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=a.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(a.window.document.createTextNode(_))}setHTML(_){const s=a.window.document.createDocumentFragment(),d=a.window.document.createElement("body");let x;for(d.innerHTML=_;x=d.firstChild,x;)s.appendChild(x);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=F("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(_),this.options.closeButton){const d=this._closeButton=F("button","mapboxgl-popup-close-button",s);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let s;return this._classList.delete(_)?s=!1:(this._classList.add(_),s=!0),this._updateClassList(),s}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const s=this._map,d=this._container,x=this._pos;if(!s||!d||!x)return"bottom";const T=d.offsetWidth,M=d.offsetHeight,z=x.x<T/2,D=x.x>s.transform.width-T/2;if(x.y+_<M)return z?"top-left":D?"top-right":"top";if(x.y>s.transform.height-M){if(z)return"bottom-left";if(D)return"bottom-right"}return z?"left":D?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),_.className=s.join(" ")}_update(_){const s=this._map,d=this._content;if(!s||!this._lngLat&&!this._trackPointer||!d)return;let x=this._container;if(x||(x=this._container=F("div","mapboxgl-popup",s.getContainer()),this._tip=F("div","mapboxgl-popup-tip",x),x.appendChild(d)),this.options.maxWidth&&x.style.maxWidth!==this.options.maxWidth&&(x.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=os(this._lngLat,this._pos,s.transform)),!this._trackPointer||_){const T=this._pos=this._trackPointer&&_?_:s.project(this._lngLat),M=El(this.options.offset),z=this._anchor=this._getAnchor(M.y),D=El(this.options.offset,z),j=T.add(D).round();s._requestDomTask((()=>{this._container&&z&&(this._container.style.transform=`${Tc[z]} translate(${j.x}px,${j.y}px)`)}))}if(!this._marker&&s._showingGlobe()){const T=a.isLngLatBehindGlobe(s.transform,this._lngLat)?0:1;this._setOpacity(T)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(rg);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:nn,Style:zo,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,FreeCameraOptions:_l,Evented:a.Evented,config:a.config,prewarm:function(){qn().acquire(Ci)},clearPrewarmedResources:function(){const _=Xr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Ci),Xr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(_){a.config.ACCESS_TOKEN=_},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(_){a.config.API_URL=_},get workerCount(){return Kr.workerCount},set workerCount(_){Kr.workerCount=_},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){a.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){a.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:a.exported.setNow,restoreNow:a.exported.restoreNow};return Ec}));var b=p;return b}))})(Ub)),Ub.exports}var xX=vX();const pm=Ro(xX),bX=({lat:e,lng:t,zoom:r,width:c,height:h,features:p,onFeatureClick:y,clusterByProperty:b})=>{const[a,E]=V.useState(null),[R,L]=V.useState();return V.useEffect(()=>{if(!R)return;pm.accessToken="pk.eyJ1Ijoic2FtLWh1bnQiLCJhIjoiY2trczR5bm11MHhmbDJwbnhnbmU0a2t3ciJ9.maCODbXshwiacsDdDCTy2g";const P=({setMap:U,mapContainerEl:N})=>{const q=new pm.Map({container:N,style:"mapbox://styles/mapbox/dark-v10",center:[t,e],zoom:r});q.on("load",()=>{U(q),q.resize(),F(q)});const Z=new pm.NavigationControl;q.addControl(Z,"top-right")},F=U=>{if(U&&p!==null){U.addSource("points",{type:"geojson",data:p,cluster:!0,clusterMaxZoom:14,clusterRadius:50,clusterProperties:{[b]:["+",["get",b]]}});const N=p?.features.map(Q=>Q.properties[b]).reduce((Q,Y)=>Q+Y,0),q=Math.log(N)-7,Z=[10,20*q,15,50*q,25,125*q,30,250*q,35,500*q,40,750*q,45,1500*q,50];U.addLayer({id:"clusters",type:"circle",source:"points",filter:["has","point_count"],paint:{"circle-color":"#CB9EFF","circle-radius":["step",["get",b],...Z]}}),U.addLayer({id:"cluster-count",type:"symbol",source:"points",filter:["has","point_count"],layout:{"text-field":`{${b?.toString()}}`,"text-font":["Arial Unicode MS Bold"],"text-size":14}}),U.addLayer({id:"unclustered-point",type:"circle",source:"points",filter:["!",["has","point_count"]],paint:{"circle-color":"#CB9EFF","circle-radius":["step",["get",b],...Z],"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),U.addLayer({id:"unclustered-count",type:"symbol",source:"points",filter:["!",["has","point_count"]],layout:{"text-field":`{${b?.toString()}}`,"text-font":["Arial Unicode MS Bold"],"text-size":14}}),U.on("click","clusters",function(Q){const Y=U.queryRenderedFeatures(Q.point,{layers:["clusters"]}),J=Y[0].properties.cluster_id;U.getSource("points").getClusterExpansionZoom(J,function(re,ae){re||U.easeTo({center:Y[0].geometry.coordinates,zoom:ae})})}),y&&U.on("click","unclustered-point",Q=>{y(Q.features[0])}),U.on("mouseenter","clusters",()=>{U.getCanvas().style.cursor="pointer"}),U.on("mouseleave","clusters",()=>{U.getCanvas().style.cursor=""}),U.on("mouseenter","unclustered-point",()=>{U.getCanvas().style.cursor="pointer"}),U.on("mouseleave","unclustered-point",()=>{U.getCanvas().style.cursor=""})}};a&&(a.removeLayer("clusters"),a.removeLayer("cluster-count"),a.removeLayer("unclustered-point"),a.removeLayer("unclustered-count"),a.removeSource("points"),F(a)),a||P({setMap:E,mapContainerEl:R})},[a,e,t,r,p,y,b,R]),X.jsx("div",{className:"mapboxgl-container",ref:P=>L(P),style:{height:h,width:c}})},wX=Qo(X.jsx("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"})),SX=()=>{const[e,t]=V.useState("count"),{data:r,error:c,isPending:h}=FB(),[p,y]=V.useState(),b=j3(),a=P=>b(`/schools/${P.properties.schoolId}`),E=V.useMemo(()=>({type:"FeatureCollection",features:(r||[]).filter(P=>P.lat&&P.lng).map(P=>({type:"Feature",geometry:{type:"Point",coordinates:[+P.lng,+P.lat]},properties:P}))}),[r]),R=`calc(${p?.clientHeight||"85vh"} - 50px)`,L=p?.clientWidth?p?.clientWidth:"95vw";return X.jsxs(ew,{id:"home-section",component:"section",maxWidth:"xl",children:[X.jsxs(Gl,{direction:"row",alignItems:"center",my:3,gap:2,children:[X.jsx(Li,{variant:"h4",component:"h1",flexGrow:"1",children:"NZ Schools Directory"}),X.jsxs(MB,{children:[X.jsx(AB,{id:"map-grouping-select-label",children:"Cluster Metric"}),X.jsxs(tw,{labelId:"map-grouping-select-label",id:"map-grouping-select",value:e,label:"Cluster Metric",onChange:P=>t(P.target.value),sx:{width:250},size:"small",children:[X.jsx(ef,{value:"count",children:"School Locations"}),X.jsx(ef,{value:"maori",children:"Māori Enrolments"}),X.jsx(ef,{value:"pacific",children:"Pacific Enrolments"}),X.jsx(ef,{value:"european",children:"European Enrolments"}),X.jsx(ef,{value:"asian",children:"Asian Enrolments"}),X.jsx(ef,{value:"melaa",children:"MELAA Enrolments"}),X.jsx(ef,{value:"international",children:"International Enrolments"}),X.jsx(ef,{value:"other",children:"Other Enrolments"}),X.jsx(ef,{value:"total",children:"Total Enrolments"})]})]}),X.jsx(PB,{title:X.jsx(Li,{children:"Select a school or cluster for more information"}),enterDelay:0,children:X.jsx(wX,{sx:{width:"28px",height:"28px",cursor:"help"}})})]}),r&&X.jsx(By,{ref:P=>y(P),children:X.jsx(bX,{width:L,height:R,lat:-41,lng:173,zoom:5,features:E,onFeatureClick:a,clusterByProperty:e})}),h&&X.jsx(Gl,{height:"50vh",direction:"column",alignItems:"center",justifyContent:"center",children:X.jsx(H1,{})}),c&&X.jsx(Li,{color:"error",fontWeight:"bold",children:JSON.stringify(c)})]})},TX="https://catalogue.data.govt.nz/api/3/action/datastore_search_sql",EX="4b292323-9fcc-41f8-814b-3c7b19cf14b3",CX=async e=>{if(!e)return null;const t=new URL(TX),r=`
    SELECT
      "School_Id" as "schoolId",
      "Org_Name" as "orgName",
      "Org_Type" as "orgType",
      "Authority" as "authority",

      "Add1_City" as "add1City",
      "Add1_Suburb" as "add1Suburb",
      "Add1_Line1" as "add1Line1",

      "Add2_City" as "add2City",
      "Add2_Suburb" as "add2Suburb",
      "Add2_Line1" as "add2Line1",
      "Add2_Postal_Code" as "add2PostalCode",

      "Latitude" as "latitude",
      "Longitude" as "longitude",

      "Māori" as "maori",
      "Pacific" as "pacific",
      "European" as "european",
      "Asian" as "asian",
      "MELAA" as "melaa",
      "International" as "international",
      "Other" as "other",
      "Total" as "total",

      "Telephone" as "telephone",
      "Email" as "email",
      "URL" as "url",
      "Contact1_Name" as "contact1Name",

      "Education_Region" as "educationRegion",
      "General_Electorate" as "generalElectorate",
      "Māori_Electorate" as "maoriElectorate",

      "School_Donations" as "schoolDonations",
      "Isolation_Index" as "isolationIndex",
      "CoEd_Status" as "coEdStatus",
      "EQi_Index" as "eqiIndex",
      "Definition" as "definition",
      "Roll_Date" as "rollDate"
    FROM
      "${EX}"
    WHERE
      "School_Id" = '${e}'
    `.trim().replace(/\s\s+/g," ");t.search=new URLSearchParams({sql:r}).toString();const c=await fetch(t.toString()).then(h=>h.json()).catch(h=>{throw new Error(`Failed to fetch school from api. Error: ${JSON.stringify(h)}`)});if(!c.success)throw new Error(`Failed to fetch school from api. Error: ${JSON.stringify(c.error)}. For more help, visit: ${c.help}`);return c.result.records[0]},MX=e=>{const{data:t,error:r,isPending:c}=g6({queryKey:["school",e],queryFn:()=>CX(e),enabled:!!e});return c?{isPending:!0,data:void 0,error:null}:r?{isPending:!1,data:void 0,error:r}:{isPending:!1,data:t,error:null}},AX=({school:e})=>X.jsxs(J1,{sx:{p:2},children:[X.jsx(Li,{variant:"h5",component:"h2",mb:2,children:"Details"}),X.jsx(uv,{sx:{mt:1}}),X.jsx(zR,{children:X.jsx(nw,{"aria-label":"simple table",sx:{border:0},children:X.jsxs(rw,{children:[X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Organisation Type"}),X.jsx(or,{size:"small",children:e?.orgType})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Address 1"}),X.jsxs(or,{size:"small",children:[X.jsx(Li,{children:e?.add1Line1}),!!e?.add1Suburb&&X.jsx(Li,{children:e?.add1Suburb}),X.jsx(Li,{children:e?.add1City})]})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Address 2"}),X.jsxs(or,{size:"small",children:[X.jsxs(Li,{children:[e?.add2Line1,X.jsx("br",{})]}),X.jsxs(Li,{children:[e?.add2Suburb,e?.add2Suburb&&X.jsx("br",{})]}),X.jsxs(Li,{children:[e?.add2City,X.jsx("br",{})]}),X.jsx(Li,{children:e?.add2PostalCode})]})]}),X.jsxs(Ma,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Geolocation"}),X.jsxs(or,{size:"small",children:[e?.latitude,", ",e?.longitude]})]})]})})})]}),RX=({school:e})=>X.jsxs(J1,{sx:{p:2},children:[X.jsx(Li,{variant:"h5",component:"h2",mb:2,children:"Miscellaneous"}),X.jsx(uv,{sx:{mt:1}}),X.jsx(zR,{children:X.jsx(nw,{"aria-label":"simple table",children:X.jsxs(rw,{children:[X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Definition"}),X.jsx(or,{size:"small",children:e?.definition})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Roll Date"}),X.jsx(or,{size:"small",children:e?.rollDate})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Equity Index"}),X.jsx(or,{size:"small",children:e?.eqiIndex})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Isolation Index"}),X.jsx(or,{size:"small",children:e?.isolationIndex})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"CoEducation Status"}),X.jsx(or,{size:"small",children:e?.coEdStatus})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Education Region"}),X.jsx(or,{size:"small",children:e?.educationRegion})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"General Electorate"}),X.jsx(or,{size:"small",children:e?.generalElectorate})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Māori Electorate"}),X.jsx(or,{size:"small",children:e?.maoriElectorate})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"School Donations"}),X.jsx(or,{size:"small",children:e?.schoolDonations})]}),X.jsxs(Ma,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Authority"}),X.jsx(or,{size:"small",children:e?.authority})]})]})})})]}),kX=({school:e})=>X.jsxs(J1,{sx:{p:2},children:[X.jsx(Li,{variant:"h5",component:"h2",mb:2,children:"Contact"}),X.jsx(uv,{sx:{mt:1}}),X.jsx(zR,{children:X.jsx(nw,{"aria-label":"simple table",children:X.jsxs(rw,{children:[X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Name"}),X.jsx(or,{size:"small",children:e?.contact1Name})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Phone"}),X.jsx(or,{size:"small",children:X.jsx("a",{href:"tel:"+e?.telephone.replace(/[.,\s\-_()]/g,""),children:e?.telephone})})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Email"}),X.jsx(or,{size:"small",children:X.jsx("a",{href:"mailto:"+e?.email,children:e?.email})})]}),X.jsxs(Ma,{children:[X.jsx(or,{size:"small",component:"th",scope:"row",children:"Web"}),X.jsx(or,{size:"small",children:X.jsx("a",{href:e?.url,children:e?.url})})]})]})})})]});var LR=Vv(),xr=e=>qv(e,LR),PR=Vv();xr.write=e=>qv(e,PR);var iw=Vv();xr.onStart=e=>qv(e,iw);var DR=Vv();xr.onFrame=e=>qv(e,DR);var OR=Vv();xr.onFinish=e=>qv(e,OR);var py=[];xr.setTimeout=(e,t)=>{const r=xr.now()+t,c=()=>{const p=py.findIndex(y=>y.cancel==c);~p&&py.splice(p,1),Vd-=~p?1:0},h={time:r,handler:e,cancel:c};return py.splice(NB(r),0,h),Vd+=1,UB(),h};var NB=e=>~(~py.findIndex(t=>t.time>e)||~py.length);xr.cancel=e=>{iw.delete(e),DR.delete(e),OR.delete(e),LR.delete(e),PR.delete(e)};xr.sync=e=>{i3=!0,xr.batchedUpdates(e),i3=!1};xr.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function c(...h){t=h,xr.onStart(r)}return c.handler=e,c.cancel=()=>{iw.delete(r),t=null},c};var BR=typeof window<"u"?window.requestAnimationFrame:(()=>{});xr.use=e=>BR=e;xr.now=typeof performance<"u"?()=>performance.now():Date.now;xr.batchedUpdates=e=>e();xr.catch=console.error;xr.frameLoop="always";xr.advance=()=>{xr.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):qB()};var qd=-1,Vd=0,i3=!1;function qv(e,t){i3?(t.delete(e),e(0)):(t.add(e),UB())}function UB(){qd<0&&(qd=0,xr.frameLoop!=="demand"&&BR($B))}function IX(){qd=-1}function $B(){~qd&&(BR($B),xr.batchedUpdates(qB))}function qB(){const e=qd;qd=xr.now();const t=NB(qd);if(t&&(VB(py.splice(0,t),r=>r.handler()),Vd-=t),!Vd){IX();return}iw.flush(),LR.flush(e?Math.min(64,qd-e):16.667),DR.flush(),PR.flush(),OR.flush()}function Vv(){let e=new Set,t=e;return{add(r){Vd+=t==e&&!e.has(r)?1:0,e.add(r)},delete(r){return Vd-=t==e&&e.has(r)?1:0,e.delete(r)},flush(r){t.size&&(e=new Set,Vd-=t.size,VB(t,c=>c(r)&&e.add(c)),Vd+=e.size,t=e)}}}function VB(e,t){e.forEach(r=>{try{t(r)}catch(c){xr.catch(c)}})}var zX=Object.defineProperty,LX=(e,t)=>{for(var r in t)zX(e,r,{get:t[r],enumerable:!0})},Qc={};LX(Qc,{assign:()=>DX,colors:()=>Zd,createStringInterpolator:()=>jR,skipAnimation:()=>HB,to:()=>GB,willAdvance:()=>NR});function a3(){}var PX=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),en={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function bh(e,t){if(en.arr(e)){if(!en.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var dr=(e,t)=>e.forEach(t);function pf(e,t,r){if(en.arr(e)){for(let c=0;c<e.length;c++)t.call(r,e[c],`${c}`);return}for(const c in e)e.hasOwnProperty(c)&&t.call(r,e[c],c)}var ms=e=>en.und(e)?[]:en.arr(e)?e:[e];function Y0(e,t){if(e.size){const r=Array.from(e);e.clear(),dr(r,t)}}var j0=(e,...t)=>Y0(e,r=>r(...t)),FR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),jR,GB,Zd=null,HB=!1,NR=a3,DX=e=>{e.to&&(GB=e.to),e.now&&(xr.now=e.now),e.colors!==void 0&&(Zd=e.colors),e.skipAnimation!=null&&(HB=e.skipAnimation),e.createStringInterpolator&&(jR=e.createStringInterpolator),e.requestAnimationFrame&&xr.use(e.requestAnimationFrame),e.batchedUpdates&&(xr.batchedUpdates=e.batchedUpdates),e.willAdvance&&(NR=e.willAdvance),e.frameLoop&&(xr.frameLoop=e.frameLoop)},K0=new Set,ql=[],pT=[],l1=0,aw={get idle(){return!K0.size&&!ql.length},start(e){l1>e.priority?(K0.add(e),xr.onStart(OX)):(WB(e),xr(o3))},advance:o3,sort(e){if(l1)xr.onFrame(()=>aw.sort(e));else{const t=ql.indexOf(e);~t&&(ql.splice(t,1),ZB(e))}},clear(){ql=[],K0.clear()}};function OX(){K0.forEach(WB),K0.clear(),xr(o3)}function WB(e){ql.includes(e)||ZB(e)}function ZB(e){ql.splice(BX(ql,t=>t.priority>e.priority),0,e)}function o3(e){const t=pT;for(let r=0;r<ql.length;r++){const c=ql[r];l1=c.priority,c.idle||(NR(c),c.advance(e),c.idle||t.push(c))}return l1=0,pT=ql,pT.length=0,ql=t,ql.length>0}function BX(e,t){const r=e.findIndex(t);return r<0?e.length:r}var FX={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Xc="[-+]?\\d*\\.?\\d+",c1=Xc+"%";function ow(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var jX=new RegExp("rgb"+ow(Xc,Xc,Xc)),NX=new RegExp("rgba"+ow(Xc,Xc,Xc,Xc)),UX=new RegExp("hsl"+ow(Xc,c1,c1)),$X=new RegExp("hsla"+ow(Xc,c1,c1,Xc)),qX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,VX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,GX=/^#([0-9a-fA-F]{6})$/,HX=/^#([0-9a-fA-F]{8})$/;function WX(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=GX.exec(e))?parseInt(t[1]+"ff",16)>>>0:Zd&&Zd[e]!==void 0?Zd[e]:(t=jX.exec(e))?(ty(t[1])<<24|ty(t[2])<<16|ty(t[3])<<8|255)>>>0:(t=NX.exec(e))?(ty(t[1])<<24|ty(t[2])<<16|ty(t[3])<<8|EI(t[4]))>>>0:(t=qX.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=HX.exec(e))?parseInt(t[1],16)>>>0:(t=VX.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=UX.exec(e))?(SI(TI(t[1]),Tb(t[2]),Tb(t[3]))|255)>>>0:(t=$X.exec(e))?(SI(TI(t[1]),Tb(t[2]),Tb(t[3]))|EI(t[4]))>>>0:null}function mT(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function SI(e,t,r){const c=r<.5?r*(1+t):r+t-r*t,h=2*r-c,p=mT(h,c,e+1/3),y=mT(h,c,e),b=mT(h,c,e-1/3);return Math.round(p*255)<<24|Math.round(y*255)<<16|Math.round(b*255)<<8}function ty(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function TI(e){return(parseFloat(e)%360+360)%360/360}function EI(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Tb(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function CI(e){let t=WX(e);if(t===null)return e;t=t||0;const r=(t&4278190080)>>>24,c=(t&16711680)>>>16,h=(t&65280)>>>8,p=(t&255)/255;return`rgba(${r}, ${c}, ${h}, ${p})`}var fv=(e,t,r)=>{if(en.fun(e))return e;if(en.arr(e))return fv({range:e,output:t,extrapolate:r});if(en.str(e.output[0]))return jR(e);const c=e,h=c.output,p=c.range||[0,1],y=c.extrapolateLeft||c.extrapolate||"extend",b=c.extrapolateRight||c.extrapolate||"extend",a=c.easing||(E=>E);return E=>{const R=XX(E,p);return ZX(E,p[R],p[R+1],h[R],h[R+1],a,y,b,c.map)}};function ZX(e,t,r,c,h,p,y,b,a){let E=a?a(e):e;if(E<t){if(y==="identity")return E;y==="clamp"&&(E=t)}if(E>r){if(b==="identity")return E;b==="clamp"&&(E=r)}return c===h?c:t===r?e<=t?c:h:(t===-1/0?E=-E:r===1/0?E=E-t:E=(E-t)/(r-t),E=p(E),c===-1/0?E=-E:h===1/0?E=E+c:E=E*(h-c)+c,E)}function XX(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}var YX={linear:e=>e},hv=Symbol.for("FluidValue.get"),Ty=Symbol.for("FluidValue.observers"),$l=e=>!!(e&&e[hv]),Ps=e=>e&&e[hv]?e[hv]():e,MI=e=>e[Ty]||null;function KX(e,t){e.eventObserved?e.eventObserved(t):e(t)}function dv(e,t){const r=e[Ty];r&&r.forEach(c=>{KX(c,t)})}var XB=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");QX(this,e)}},QX=(e,t)=>YB(e,hv,t);function Fy(e,t){if(e[hv]){let r=e[Ty];r||YB(e,Ty,r=new Set),r.has(t)||(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function pv(e,t){const r=e[Ty];if(r&&r.has(t)){const c=r.size-1;c?r.delete(t):e[Ty]=null,e.observerRemoved&&e.observerRemoved(c,t)}}var YB=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),$b=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,JX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,AI=new RegExp(`(${$b.source})(%|[a-z]+)`,"i"),eY=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,sw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,KB=e=>{const[t,r]=tY(e);if(!t||FR())return e;const c=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(c)return c.trim();if(r&&r.startsWith("--")){const h=window.getComputedStyle(document.documentElement).getPropertyValue(r);return h||e}else{if(r&&sw.test(r))return KB(r);if(r)return r}return e},tY=e=>{const t=sw.exec(e);if(!t)return[,];const[,r,c]=t;return[r,c]},gT,nY=(e,t,r,c,h)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(c)}, ${h})`,QB=e=>{gT||(gT=Zd?new RegExp(`(${Object.keys(Zd).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(p=>Ps(p).replace(sw,KB).replace(JX,CI).replace(gT,CI)),r=t.map(p=>p.match($b).map(Number)),h=r[0].map((p,y)=>r.map(b=>{if(!(y in b))throw Error('The arity of each "output" value must be equal');return b[y]})).map(p=>fv({...e,output:p}));return p=>{const y=!AI.test(t[0])&&t.find(a=>AI.test(a))?.replace($b,"");let b=0;return t[0].replace($b,()=>`${h[b++](p)}${y||""}`).replace(eY,nY)}},UR="react-spring: ",JB=e=>{const t=e;let r=!1;if(typeof t!="function")throw new TypeError(`${UR}once requires a function parameter`);return(...c)=>{r||(t(...c),r=!0)}},rY=JB(console.warn);function iY(){rY(`${UR}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var aY=JB(console.warn);function oY(){aY(`${UR}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function lw(e){return en.str(e)&&(e[0]=="#"||/\d/.test(e)||!FR()&&sw.test(e)||e in(Zd||{}))}var mm=FR()?V.useEffect:V.useLayoutEffect,sY=()=>{const e=V.useRef(!1);return mm(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function $R(){const e=V.useState()[1],t=sY();return()=>{t.current&&e(Math.random())}}var qR=e=>V.useEffect(e,lY),lY=[];function s3(e){const t=V.useRef(void 0);return V.useEffect(()=>{t.current=e}),t.current}var mv=Symbol.for("Animated:node"),cY=e=>!!e&&e[mv]===e,tf=e=>e&&e[mv],VR=(e,t)=>PX(e,mv,t),cw=e=>e&&e[mv]&&e[mv].getPayload(),e8=class{constructor(){VR(this,this)}getPayload(){return this.payload||[]}},uw=class t8 extends e8{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,en.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new t8(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,r){return en.num(t)&&(this.lastPosition=t,r&&(t=Math.round(t/r)*r,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,en.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},u1=class n8 extends uw{constructor(t){super(0),this._string=null,this._toString=fv({output:[t,t]})}static create(t){return new n8(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(en.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=fv({output:[this.getValue(),t]})),this._value=0,super.reset()}},f1={dependencies:null},fw=class extends e8{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return pf(this.source,(r,c)=>{cY(r)?t[c]=r.getValue(e):$l(r)?t[c]=Ps(r):e||(t[c]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&dr(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return pf(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){f1.dependencies&&$l(e)&&f1.dependencies.add(e);const t=cw(e);t&&dr(t,r=>this.add(r))}},uY=class r8 extends fw{constructor(t){super(t)}static create(t){return new r8(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const r=this.getPayload();return t.length==r.length?r.map((c,h)=>c.setValue(t[h])).some(Boolean):(super.setValue(t.map(fY)),!0)}};function fY(e){return(lw(e)?u1:uw).create(e)}function l3(e){const t=tf(e);return t?t.constructor:en.arr(e)?uY:lw(e)?u1:uw}var RI=(e,t)=>{const r=!en.fun(e)||e.prototype&&e.prototype.isReactComponent;return V.forwardRef((c,h)=>{const p=V.useRef(null),y=r&&V.useCallback(U=>{p.current=pY(h,U)},[h]),[b,a]=dY(c,t),E=$R(),R=()=>{const U=p.current;if(r&&!U)return;(U?t.applyAnimatedValues(U,b.getValue(!0)):!1)===!1&&E()},L=new hY(R,a),P=V.useRef(void 0);mm(()=>(P.current=L,dr(a,U=>Fy(U,L)),()=>{P.current&&(dr(P.current.deps,U=>pv(U,P.current)),xr.cancel(P.current.update))})),V.useEffect(R,[]),qR(()=>()=>{const U=P.current;dr(U.deps,N=>pv(N,U))});const F=t.getComponentProps(b.getValue());return V.createElement(e,{...F,ref:y})})},hY=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&xr.write(this.update)}};function dY(e,t){const r=new Set;return f1.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new fw(e),f1.dependencies=null,[e,r]}function pY(e,t){return e&&(en.fun(e)?e(t):e.current=t),t}var kI=Symbol.for("AnimatedComponent"),mY=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=h=>new fw(h),getComponentProps:c=h=>h}={})=>{const h={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:c},p=y=>{const b=II(y)||"Anonymous";return en.str(y)?y=p[y]||(p[y]=RI(y,h)):y=y[kI]||(y[kI]=RI(y,h)),y.displayName=`Animated(${b})`,y};return pf(e,(y,b)=>{en.arr(e)&&(b=II(y)),p[b]=p(y)}),{animated:p}},II=e=>en.str(e)?e:e&&en.str(e.displayName)?e.displayName:en.fun(e)&&e.name||null;function Ds(e,...t){return en.fun(e)?e(...t):e}var Q0=(e,t)=>e===!0||!!(t&&e&&(en.fun(e)?e(t):ms(e).includes(t))),i8=(e,t)=>en.obj(e)?t&&e[t]:e,a8=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,gY=e=>e,hw=(e,t=gY)=>{let r=yY;e.default&&e.default!==!0&&(e=e.default,r=Object.keys(e));const c={};for(const h of r){const p=t(e[h],h);en.und(p)||(c[h]=p)}return c},yY=["config","onProps","onStart","onChange","onPause","onResume","onRest"],_Y={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function vY(e){const t={};let r=0;if(pf(e,(c,h)=>{_Y[h]||(t[h]=c,r++)}),r)return t}function GR(e){const t=vY(e);if(t){const r={to:t};return pf(e,(c,h)=>h in t||(r[h]=c)),r}return{...e}}function gv(e){return e=Ps(e),en.arr(e)?e.map(gv):lw(e)?Qc.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function o8(e){for(const t in e)return!0;return!1}function c3(e){return en.fun(e)||en.arr(e)&&en.obj(e[0])}function u3(e,t){e.ref?.delete(e),t?.delete(e)}function s8(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var l8={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},f3={...l8.default,mass:1,damping:1,easing:YX.linear,clamp:!1},xY=class{constructor(){this.velocity=0,Object.assign(this,f3)}};function bY(e,t,r){r&&(r={...r},zI(r,t),t={...r,...t}),zI(e,t),Object.assign(e,t);for(const y in f3)e[y]==null&&(e[y]=f3[y]);let{frequency:c,damping:h}=e;const{mass:p}=e;return en.und(c)||(c<.01&&(c=.01),h<0&&(h=0),e.tension=Math.pow(2*Math.PI/c,2)*p,e.friction=4*Math.PI*h*p/c),e}function zI(e,t){if(!en.und(t.decay))e.duration=void 0;else{const r=!en.und(t.tension)||!en.und(t.friction);(r||!en.und(t.frequency)||!en.und(t.damping)||!en.und(t.mass))&&(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}}var LI=[],wY=class{constructor(){this.changed=!1,this.values=LI,this.toValues=null,this.fromValues=LI,this.config=new xY,this.immediate=!1}};function c8(e,{key:t,props:r,defaultProps:c,state:h,actions:p}){return new Promise((y,b)=>{let a,E,R=Q0(r.cancel??c?.cancel,t);if(R)F();else{en.und(r.pause)||(h.paused=Q0(r.pause,t));let U=c?.pause;U!==!0&&(U=h.paused||Q0(U,t)),a=Ds(r.delay||0,t),U?(h.resumeQueue.add(P),p.pause()):(p.resume(),P())}function L(){h.resumeQueue.add(P),h.timeouts.delete(E),E.cancel(),a=E.time-xr.now()}function P(){a>0&&!Qc.skipAnimation?(h.delayed=!0,E=xr.setTimeout(F,a),h.pauseQueue.add(L),h.timeouts.add(E)):F()}function F(){h.delayed&&(h.delayed=!1),h.pauseQueue.delete(L),h.timeouts.delete(E),e<=(h.cancelId||0)&&(R=!0);try{p.start({...r,callId:e,cancel:R},y)}catch(U){b(U)}}})}var HR=(e,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?my(e.get()):t.every(r=>r.noop)?u8(e.get()):Wc(e.get(),t.every(r=>r.finished)),u8=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Wc=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),my=e=>({value:e,cancelled:!0,finished:!1});function f8(e,t,r,c){const{callId:h,parentId:p,onRest:y}=t,{asyncTo:b,promise:a}=r;return!p&&e===b&&!t.reset?a:r.promise=(async()=>{r.asyncId=h,r.asyncTo=e;const E=hw(t,(q,Z)=>Z==="onRest"?void 0:q);let R,L;const P=new Promise((q,Z)=>(R=q,L=Z)),F=q=>{const Z=h<=(r.cancelId||0)&&my(c)||h!==r.asyncId&&Wc(c,!1);if(Z)throw q.result=Z,L(q),q},U=(q,Z)=>{const Q=new PI,Y=new DI;return(async()=>{if(Qc.skipAnimation)throw yv(r),Y.result=Wc(c,!1),L(Y),Y;F(Q);const J=en.obj(q)?{...q}:{...Z,to:q};J.parentId=h,pf(E,(ae,fe)=>{en.und(J[fe])&&(J[fe]=ae)});const re=await c.start(J);return F(Q),r.paused&&await new Promise(ae=>{r.resumeQueue.add(ae)}),re})()};let N;if(Qc.skipAnimation)return yv(r),Wc(c,!1);try{let q;en.arr(e)?q=(async Z=>{for(const Q of Z)await U(Q)})(e):q=Promise.resolve(e(U,c.stop.bind(c))),await Promise.all([q.then(R),P]),N=Wc(c.get(),!0,!1)}catch(q){if(q instanceof PI)N=q.result;else if(q instanceof DI)N=q.result;else throw q}finally{h==r.asyncId&&(r.asyncId=p,r.asyncTo=p?b:void 0,r.promise=p?a:void 0)}return en.fun(y)&&xr.batchedUpdates(()=>{y(N,c,c.item)}),N})()}function yv(e,t){Y0(e.timeouts,r=>r.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var PI=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},DI=class extends Error{constructor(){super("SkipAnimationSignal")}},h3=e=>e instanceof WR,SY=1,WR=class extends XB{constructor(){super(...arguments),this.id=SY++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=tf(this);return e&&e.getValue()}to(...e){return Qc.to(this,e)}interpolate(...e){return iY(),Qc.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){dv(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||aw.sort(this),dv(this,{type:"priority",parent:this,priority:e})}},Mm=Symbol.for("SpringPhase"),h8=1,d3=2,p3=4,yT=e=>(e[Mm]&h8)>0,Ud=e=>(e[Mm]&d3)>0,M0=e=>(e[Mm]&p3)>0,OI=(e,t)=>t?e[Mm]|=d3|h8:e[Mm]&=~d3,BI=(e,t)=>t?e[Mm]|=p3:e[Mm]&=~p3,TY=class extends WR{constructor(e,t){if(super(),this.animation=new wY,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!en.und(e)||!en.und(t)){const r=en.obj(e)?{...e}:{...t,from:e};en.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Ud(this)||this._state.asyncTo)||M0(this)}get goal(){return Ps(this.animation.to)}get velocity(){const e=tf(this);return e instanceof uw?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return yT(this)}get isAnimating(){return Ud(this)}get isPaused(){return M0(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const c=this.animation;let{toValues:h}=c;const{config:p}=c,y=cw(c.to);!y&&$l(c.to)&&(h=ms(Ps(c.to))),c.values.forEach((E,R)=>{if(E.done)return;const L=E.constructor==u1?1:y?y[R].lastPosition:h[R];let P=c.immediate,F=L;if(!P){if(F=E.lastPosition,p.tension<=0){E.done=!0;return}let U=E.elapsedTime+=e;const N=c.fromValues[R],q=E.v0!=null?E.v0:E.v0=en.arr(p.velocity)?p.velocity[R]:p.velocity;let Z;const Q=p.precision||(N==L?.005:Math.min(1,Math.abs(L-N)*.001));if(en.und(p.duration))if(p.decay){const Y=p.decay===!0?.998:p.decay,J=Math.exp(-(1-Y)*U);F=N+q/(1-Y)*(1-J),P=Math.abs(E.lastPosition-F)<=Q,Z=q*J}else{Z=E.lastVelocity==null?q:E.lastVelocity;const Y=p.restVelocity||Q/10,J=p.clamp?0:p.bounce,re=!en.und(J),ae=N==L?E.v0>0:N<L;let fe,Se=!1;const Te=1,ue=Math.ceil(e/Te);for(let _e=0;_e<ue&&(fe=Math.abs(Z)>Y,!(!fe&&(P=Math.abs(L-F)<=Q,P)));++_e){re&&(Se=F==L||F>L==ae,Se&&(Z=-Z*J,F=L));const se=-p.tension*1e-6*(F-L),me=-p.friction*.001*Z,be=(se+me)/p.mass;Z=Z+be*Te,F=F+Z*Te}}else{let Y=1;p.duration>0&&(this._memoizedDuration!==p.duration&&(this._memoizedDuration=p.duration,E.durationProgress>0&&(E.elapsedTime=p.duration*E.durationProgress,U=E.elapsedTime+=e)),Y=(p.progress||0)+U/this._memoizedDuration,Y=Y>1?1:Y<0?0:Y,E.durationProgress=Y),F=N+p.easing(Y)*(L-N),Z=(F-E.lastPosition)/e,P=Y==1}E.lastVelocity=Z,Number.isNaN(F)&&(console.warn("Got NaN while animating:",this),P=!0)}y&&!y[R].done&&(P=!1),P?E.done=!0:t=!1,E.setValue(F,p.round)&&(r=!0)});const b=tf(this),a=b.getValue();if(t){const E=Ps(c.to);(a!==E||r)&&!p.decay?(b.setValue(E),this._onChange(E)):r&&p.decay&&this._onChange(a),this._stop()}else r&&this._onChange(a)}set(e){return xr.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ud(this)){const{to:e,config:t}=this.animation;xr.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return en.und(e)?(r=this.queue||[],this.queue=[]):r=[en.obj(e)?e:{...t,to:e}],Promise.all(r.map(c=>this._update(c))).then(c=>HR(this,c))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),yv(this._state,e&&this._lastCallId),xr.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:c}=e;r=en.obj(r)?r[t]:r,(r==null||c3(r))&&(r=void 0),c=en.obj(c)?c[t]:c,c==null&&(c=void 0);const h={to:r,from:c};return yT(this)||(e.reverse&&([r,c]=[c,r]),c=Ps(c),en.und(c)?tf(this)||this._set(r):this._set(c)),h}_update({...e},t){const{key:r,defaultProps:c}=this;e.default&&Object.assign(c,hw(e,(y,b)=>/^on/.test(b)?i8(y,r):y)),jI(this,e,"onProps"),R0(this,"onProps",e,this);const h=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const p=this._state;return c8(++this._lastCallId,{key:r,props:e,defaultProps:c,state:p,actions:{pause:()=>{M0(this)||(BI(this,!0),j0(p.pauseQueue),R0(this,"onPause",Wc(this,A0(this,this.animation.to)),this))},resume:()=>{M0(this)&&(BI(this,!1),Ud(this)&&this._resume(),j0(p.resumeQueue),R0(this,"onResume",Wc(this,A0(this,this.animation.to)),this))},start:this._merge.bind(this,h)}}).then(y=>{if(e.loop&&y.finished&&!(t&&y.noop)){const b=d8(e);if(b)return this._update(b,!0)}return y})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(my(this));const c=!en.und(e.to),h=!en.und(e.from);if(c||h)if(t.callId>this._lastToId)this._lastToId=t.callId;else return r(my(this));const{key:p,defaultProps:y,animation:b}=this,{to:a,from:E}=b;let{to:R=a,from:L=E}=e;h&&!c&&(!t.default||en.und(R))&&(R=L),t.reverse&&([R,L]=[L,R]);const P=!bh(L,E);P&&(b.from=L),L=Ps(L);const F=!bh(R,a);F&&this._focus(R);const U=c3(t.to),{config:N}=b,{decay:q,velocity:Z}=N;(c||h)&&(N.velocity=0),t.config&&!U&&bY(N,Ds(t.config,p),t.config!==y.config?Ds(y.config,p):void 0);let Q=tf(this);if(!Q||en.und(R))return r(Wc(this,!0));const Y=en.und(t.reset)?h&&!t.default:!en.und(L)&&Q0(t.reset,p),J=Y?L:this.get(),re=gv(R),ae=en.num(re)||en.arr(re)||lw(re),fe=!U&&(!ae||Q0(y.immediate||t.immediate,p));if(F){const _e=l3(R);if(_e!==Q.constructor)if(fe)Q=this._set(re);else throw Error(`Cannot animate between ${Q.constructor.name} and ${_e.name}, as the "to" prop suggests`)}const Se=Q.constructor;let Te=$l(R),ue=!1;if(!Te){const _e=Y||!yT(this)&&P;(F||_e)&&(ue=bh(gv(J),re),Te=!ue),(!bh(b.immediate,fe)&&!fe||!bh(N.decay,q)||!bh(N.velocity,Z))&&(Te=!0)}if(ue&&Ud(this)&&(b.changed&&!Y?Te=!0:Te||this._stop(a)),!U&&((Te||$l(a))&&(b.values=Q.getPayload(),b.toValues=$l(R)?null:Se==u1?[1]:ms(re)),b.immediate!=fe&&(b.immediate=fe,!fe&&!Y&&this._set(a)),Te)){const{onRest:_e}=b;dr(CY,me=>jI(this,t,me));const se=Wc(this,A0(this,a));j0(this._pendingCalls,se),this._pendingCalls.add(r),b.changed&&xr.batchedUpdates(()=>{b.changed=!Y,_e?.(se,this),Y?Ds(y.onRest,se):b.onStart?.(se,this)})}Y&&this._set(J),U?r(f8(t.to,t,this._state,this)):Te?this._start():Ud(this)&&!F?this._pendingCalls.add(r):r(u8(J))}_focus(e){const t=this.animation;e!==t.to&&(MI(this)&&this._detach(),t.to=e,MI(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;$l(t)&&(Fy(t,this),h3(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;$l(e)&&pv(e,this)}_set(e,t=!0){const r=Ps(e);if(!en.und(r)){const c=tf(this);if(!c||!bh(r,c.getValue())){const h=l3(r);!c||c.constructor!=h?VR(this,h.create(r)):c.setValue(r),c&&xr.batchedUpdates(()=>{this._onChange(r,t)})}}return tf(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,R0(this,"onStart",Wc(this,A0(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Ds(this.animation.onChange,e,this)),Ds(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;tf(this).reset(Ps(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ud(this)||(OI(this,!0),M0(this)||this._resume())}_resume(){Qc.skipAnimation?this.finish():aw.start(this)}_stop(e,t){if(Ud(this)){OI(this,!1);const r=this.animation;dr(r.values,h=>{h.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),dv(this,{type:"idle",parent:this});const c=t?my(this.get()):Wc(this.get(),A0(this,e??r.to));j0(this._pendingCalls,c),r.changed&&(r.changed=!1,R0(this,"onRest",c,this))}}};function A0(e,t){const r=gv(t),c=gv(e.get());return bh(c,r)}function d8(e,t=e.loop,r=e.to){const c=Ds(t);if(c){const h=c!==!0&&GR(c),p=(h||e).reverse,y=!h||h.reset;return _v({...e,loop:t,default:!1,pause:void 0,to:!p||c3(r)?r:void 0,from:y?e.from:void 0,reset:y,...h})}}function _v(e){const{to:t,from:r}=e=GR(e),c=new Set;return en.obj(t)&&FI(t,c),en.obj(r)&&FI(r,c),e.keys=c.size?Array.from(c):null,e}function EY(e){const t=_v(e);return en.und(t.default)&&(t.default=hw(t)),t}function FI(e,t){pf(e,(r,c)=>r!=null&&t.add(c))}var CY=["onStart","onRest","onChange","onPause","onResume"];function jI(e,t,r){e.animation[r]=t[r]!==a8(t,r)?i8(t[r],e.key):void 0}function R0(e,t,...r){e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var MY=["onStart","onChange","onRest"],AY=1,p8=class{constructor(e,t){this.id=AY++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(const t in e){const r=e[t];en.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(_v(e)),this}start(e){let{queue:t}=this;return e?t=ms(e).map(_v):this.queue=[],this._flush?this._flush(this,t):(v8(this,t),m3(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;dr(ms(t),c=>r[c].stop(!!e))}else yv(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(en.und(e))this.start({pause:!0});else{const t=this.springs;dr(ms(e),r=>t[r].pause())}return this}resume(e){if(en.und(e))this.start({pause:!1});else{const t=this.springs;dr(ms(e),r=>t[r].resume())}return this}each(e){pf(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,c=this._active.size>0,h=this._changed.size>0;(c&&!this._started||h&&!this._started)&&(this._started=!0,Y0(e,([b,a])=>{a.value=this.get(),b(a,this,this._item)}));const p=!c&&this._started,y=h||p&&r.size?this.get():null;h&&t.size&&Y0(t,([b,a])=>{a.value=y,b(a,this,this._item)}),p&&(this._started=!1,Y0(r,([b,a])=>{a.value=y,b(a,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;xr.onFrame(this._onFrame)}};function m3(e,t){return Promise.all(t.map(r=>m8(e,r))).then(r=>HR(e,r))}async function m8(e,t,r){const{keys:c,to:h,from:p,loop:y,onRest:b,onResolve:a}=t,E=en.obj(t.default)&&t.default;y&&(t.loop=!1),h===!1&&(t.to=null),p===!1&&(t.from=null);const R=en.arr(h)||en.fun(h)?h:void 0;R?(t.to=void 0,t.onRest=void 0,E&&(E.onRest=void 0)):dr(MY,N=>{const q=t[N];if(en.fun(q)){const Z=e._events[N];t[N]=({finished:Q,cancelled:Y})=>{const J=Z.get(q);J?(Q||(J.finished=!1),Y&&(J.cancelled=!0)):Z.set(q,{value:null,finished:Q||!1,cancelled:Y||!1})},E&&(E[N]=t[N])}});const L=e._state;t.pause===!L.paused?(L.paused=t.pause,j0(t.pause?L.pauseQueue:L.resumeQueue)):L.paused&&(t.pause=!0);const P=(c||Object.keys(e.springs)).map(N=>e.springs[N].start(t)),F=t.cancel===!0||a8(t,"cancel")===!0;(R||F&&L.asyncId)&&P.push(c8(++e._lastAsyncId,{props:t,state:L,actions:{pause:a3,resume:a3,start(N,q){F?(yv(L,e._lastAsyncId),q(my(e))):(N.onRest=b,q(f8(R,N,L,e)))}}})),L.paused&&await new Promise(N=>{L.resumeQueue.add(N)});const U=HR(e,await Promise.all(P));if(y&&U.finished&&!(r&&U.noop)){const N=d8(t,y,h);if(N)return v8(e,[N]),m8(e,N,!0)}return a&&xr.batchedUpdates(()=>a(U,e,e.item)),U}function g3(e,t){const r={...e.springs};return t&&dr(ms(t),c=>{en.und(c.keys)&&(c=_v(c)),en.obj(c.to)||(c={...c,to:void 0}),_8(r,c,h=>y8(h))}),g8(e,r),r}function g8(e,t){pf(t,(r,c)=>{e.springs[c]||(e.springs[c]=r,Fy(r,e))})}function y8(e,t){const r=new TY;return r.key=e,t&&Fy(r,t),r}function _8(e,t,r){t.keys&&dr(t.keys,c=>{(e[c]||(e[c]=r(c)))._prepareNode(t)})}function v8(e,t){dr(t,r=>{_8(e.springs,r,c=>y8(c,e))})}var x8=V.createContext({pause:!1,immediate:!1}),b8=()=>{const e=[],t=function(c){oY();const h=[];return dr(e,(p,y)=>{if(en.und(c))h.push(p.start());else{const b=r(c,p,y);b&&h.push(p.start(b))}}),h};t.current=e,t.add=function(c){e.includes(c)||e.push(c)},t.delete=function(c){const h=e.indexOf(c);~h&&e.splice(h,1)},t.pause=function(){return dr(e,c=>c.pause(...arguments)),this},t.resume=function(){return dr(e,c=>c.resume(...arguments)),this},t.set=function(c){dr(e,(h,p)=>{const y=en.fun(c)?c(p,h):c;y&&h.set(y)})},t.start=function(c){const h=[];return dr(e,(p,y)=>{if(en.und(c))h.push(p.start());else{const b=this._getProps(c,p,y);b&&h.push(p.start(b))}}),h},t.stop=function(){return dr(e,c=>c.stop(...arguments)),this},t.update=function(c){return dr(e,(h,p)=>h.update(this._getProps(c,h,p))),this};const r=function(c,h,p){return en.fun(c)?c(p,h):c};return t._getProps=r,t};function RY(e,t,r){const c=en.fun(t)&&t;c&&!r&&(r=[]);const h=V.useMemo(()=>c||arguments.length==3?b8():void 0,[]),p=V.useRef(0),y=$R(),b=V.useMemo(()=>({ctrls:[],queue:[],flush(Z,Q){const Y=g3(Z,Q);return p.current>0&&!b.queue.length&&!Object.keys(Y).some(re=>!Z.springs[re])?m3(Z,Q):new Promise(re=>{g8(Z,Y),b.queue.push(()=>{re(m3(Z,Q))}),y()})}}),[]),a=V.useRef([...b.ctrls]),E=V.useRef([]),R=s3(e)||0;V.useMemo(()=>{dr(a.current.slice(e,R),Z=>{u3(Z,h),Z.stop(!0)}),a.current.length=e,L(R,e)},[e]),V.useMemo(()=>{L(0,Math.min(R,e))},r);function L(Z,Q){for(let Y=Z;Y<Q;Y++){const J=a.current[Y]||(a.current[Y]=new p8(null,b.flush)),re=c?c(Y,J):t[Y];re&&(E.current[Y]=EY(re))}}const P=a.current.map((Z,Q)=>g3(Z,E.current[Q])),F=V.useContext(x8),U=s3(F),N=F!==U&&o8(F);mm(()=>{p.current++,b.ctrls=a.current;const{queue:Z}=b;Z.length&&(b.queue=[],dr(Z,Q=>Q())),dr(a.current,(Q,Y)=>{h?.add(Q),N&&Q.start({default:F});const J=E.current[Y];J&&(s8(Q,J.ref),Q.ref?Q.queue.push(J):Q.start(J))})}),qR(()=>()=>{dr(b.ctrls,Z=>Z.stop(!0))});const q=P.map(Z=>({...Z}));return h?[q,h]:q}function Ph(e,t){const r=en.fun(e),[[c],h]=RY(1,r?e:[e],r?[]:t);return r||arguments.length==2?[c,h]:c}function Bm(e,t,r){const c=en.fun(t)&&t,{reset:h,sort:p,trail:y=0,expires:b=!0,exitBeforeEnter:a=!1,onDestroyed:E,ref:R,config:L}=c?c():t,P=V.useMemo(()=>c||arguments.length==3?b8():void 0,[]),F=ms(e),U=[],N=V.useRef(null),q=h?null:N.current;mm(()=>{N.current=U}),qR(()=>(dr(U,be=>{P?.add(be.ctrl),be.ctrl.ref=P}),()=>{dr(N.current,be=>{be.expired&&clearTimeout(be.expirationId),u3(be.ctrl,P),be.ctrl.stop(!0)})}));const Z=IY(F,c?c():t,q),Q=h&&N.current||[];mm(()=>dr(Q,({ctrl:be,item:Ie,key:pe})=>{u3(be,P),Ds(E,Ie,pe)}));const Y=[];if(q&&dr(q,(be,Ie)=>{be.expired?(clearTimeout(be.expirationId),Q.push(be)):(Ie=Y[Ie]=Z.indexOf(be.key),~Ie&&(U[Ie]=be))}),dr(F,(be,Ie)=>{U[Ie]||(U[Ie]={key:Z[Ie],item:be,phase:"mount",ctrl:new p8},U[Ie].ctrl.item=be)}),Y.length){let be=-1;const{leave:Ie}=c?c():t;dr(Y,(pe,Pe)=>{const et=q[Pe];~pe?(be=U.indexOf(et),U[be]={...et,item:F[pe]}):Ie&&U.splice(++be,0,et)})}en.fun(p)&&U.sort((be,Ie)=>p(be.item,Ie.item));let J=-y;const re=$R(),ae=hw(t),fe=new Map,Se=V.useRef(new Map),Te=V.useRef(!1);dr(U,(be,Ie)=>{const pe=be.key,Pe=be.phase,et=c?c():t;let Be,dt;const Ce=Ds(et.delay||0,pe);if(Pe=="mount")Be=et.enter,dt="enter";else{const gt=Z.indexOf(pe)<0;if(Pe!="leave")if(gt)Be=et.leave,dt="leave";else if(Be=et.update)dt="update";else return;else if(!gt)Be=et.enter,dt="enter";else return}if(Be=Ds(Be,be.item,Ie),Be=en.obj(Be)?GR(Be):{to:Be},!Be.config){const gt=L||ae.config;Be.config=Ds(gt,be.item,Ie,dt)}J+=y;const Ge={...ae,delay:Ce+J,ref:R,immediate:et.immediate,reset:!1,...Be};if(dt=="enter"&&en.und(Ge.from)){const gt=c?c():t,Pt=en.und(gt.initial)||q?gt.from:gt.initial;Ge.from=Ds(Pt,be.item,Ie)}const{onResolve:at}=Ge;Ge.onResolve=gt=>{Ds(at,gt);const Pt=N.current,Ct=Pt.find(Yt=>Yt.key===pe);if(Ct&&!(gt.cancelled&&Ct.phase!="update")&&Ct.ctrl.idle){const Yt=Pt.every(pt=>pt.ctrl.idle);if(Ct.phase=="leave"){const pt=Ds(b,Ct.item);if(pt!==!1){const Rt=pt===!0?0:pt;if(Ct.expired=!0,!Yt&&Rt>0){Rt<=2147483647&&(Ct.expirationId=setTimeout(re,Rt));return}}}Yt&&Pt.some(pt=>pt.expired)&&(Se.current.delete(Ct),a&&(Te.current=!0),re())}};const nt=g3(be.ctrl,Ge);dt==="leave"&&a?Se.current.set(be,{phase:dt,springs:nt,payload:Ge}):fe.set(be,{phase:dt,springs:nt,payload:Ge})});const ue=V.useContext(x8),_e=s3(ue),se=ue!==_e&&o8(ue);mm(()=>{se&&dr(U,be=>{be.ctrl.start({default:ue})})},[ue]),dr(fe,(be,Ie)=>{if(Se.current.size){const pe=U.findIndex(Pe=>Pe.key===Ie.key);U.splice(pe,1)}}),mm(()=>{dr(Se.current.size?Se.current:fe,({phase:be,payload:Ie},pe)=>{const{ctrl:Pe}=pe;pe.phase=be,P?.add(Pe),se&&be=="enter"&&Pe.start({default:ue}),Ie&&(s8(Pe,Ie.ref),(Pe.ref||P)&&!Te.current?Pe.update(Ie):(Pe.start(Ie),Te.current&&(Te.current=!1)))})},h?void 0:r);const me=be=>V.createElement(V.Fragment,null,U.map((Ie,pe)=>{const{springs:Pe}=fe.get(Ie)||Ie.ctrl,et=be({...Pe},Ie.item,Ie,pe),Be=en.str(Ie.key)||en.num(Ie.key)?Ie.key:Ie.ctrl.id,dt=V.version<"19.0.0",Ce=et?.props??{},Ge=dt?et?.ref:Ce?.ref;return et&&et.type?V.createElement(et.type,{...Ce,key:Be,ref:Ge}):et}));return P?[me,P]:me}var kY=1;function IY(e,{key:t,keys:r=t},c){if(r===null){const h=new Set;return e.map(p=>{const y=c&&c.find(b=>b.item===p&&b.phase!=="leave"&&!h.has(b));return y?(h.add(y),y.key):kY++})}return en.und(r)?e:en.fun(r)?e.map(r):ms(r)}var w8=class extends WR{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=fv(...t);const r=this._get(),c=l3(r);VR(this,c.create(r))}advance(e){const t=this._get(),r=this.get();bh(t,r)||(tf(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&NI(this._active)&&_T(this)}_get(){const e=en.arr(this.source)?this.source.map(Ps):ms(Ps(this.source));return this.calc(...e)}_start(){this.idle&&!NI(this._active)&&(this.idle=!1,dr(cw(this),e=>{e.done=!1}),Qc.skipAnimation?(xr.batchedUpdates(()=>this.advance()),_T(this)):aw.start(this))}_attach(){let e=1;dr(ms(this.source),t=>{$l(t)&&Fy(t,this),h3(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){dr(ms(this.source),e=>{$l(e)&&pv(e,this)}),this._active.clear(),_T(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ms(this.source).reduce((t,r)=>Math.max(t,(h3(r)?r.priority:0)+1),0))}};function zY(e){return e.idle!==!1}function NI(e){return!e.size||Array.from(e).every(zY)}function _T(e){e.idle||(e.idle=!0,dr(cw(e),t=>{t.done=!0}),dv(e,{type:"idle",parent:e}))}var Kd=(e,...t)=>new w8(e,t);Qc.assign({createStringInterpolator:QB,to:(e,t)=>new w8(e,t)});var S8=/^--/;function LY(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!S8.test(e)&&!(J0.hasOwnProperty(e)&&J0[e])?t+"px":(""+t).trim()}var UI={};function PY(e,t){if(!e.nodeType||!e.setAttribute)return!1;const r=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:c,style:h,children:p,scrollTop:y,scrollLeft:b,viewBox:a,...E}=t,R=Object.values(E),L=Object.keys(E).map(P=>r||e.hasAttribute(P)?P:UI[P]||(UI[P]=P.replace(/([A-Z])/g,F=>"-"+F.toLowerCase())));p!==void 0&&(e.textContent=p);for(const P in h)if(h.hasOwnProperty(P)){const F=LY(P,h[P]);S8.test(P)?e.style.setProperty(P,F):e.style[P]=F}L.forEach((P,F)=>{e.setAttribute(P,R[F])}),c!==void 0&&(e.className=c),y!==void 0&&(e.scrollTop=y),b!==void 0&&(e.scrollLeft=b),a!==void 0&&e.setAttribute("viewBox",a)}var J0={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DY=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),OY=["Webkit","Ms","Moz","O"];J0=Object.keys(J0).reduce((e,t)=>(OY.forEach(r=>e[DY(r,t)]=e[t]),e),J0);var BY=/^(matrix|translate|scale|rotate|skew)/,FY=/^(translate)/,jY=/^(rotate|skew)/,vT=(e,t)=>en.num(e)&&e!==0?e+t:e,qb=(e,t)=>en.arr(e)?e.every(r=>qb(r,t)):en.num(e)?e===t:parseFloat(e)===t,NY=class extends fw{constructor({x:e,y:t,z:r,...c}){const h=[],p=[];(e||t||r)&&(h.push([e||0,t||0,r||0]),p.push(y=>[`translate3d(${y.map(b=>vT(b,"px")).join(",")})`,qb(y,0)])),pf(c,(y,b)=>{if(b==="transform")h.push([y||""]),p.push(a=>[a,a===""]);else if(BY.test(b)){if(delete c[b],en.und(y))return;const a=FY.test(b)?"px":jY.test(b)?"deg":"";h.push(ms(y)),p.push(b==="rotate3d"?([E,R,L,P])=>[`rotate3d(${E},${R},${L},${vT(P,a)})`,qb(P,0)]:E=>[`${b}(${E.map(R=>vT(R,a)).join(",")})`,qb(E,b.startsWith("scale")?1:0)])}}),h.length&&(c.transform=new UY(h,p)),super(c)}},UY=class extends XB{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return dr(this.inputs,(r,c)=>{const h=Ps(r[0]),[p,y]=this.transforms[c](en.arr(h)?h:r.map(Ps));e+=" "+p,t=t&&y}),t?"none":e}observerAdded(e){e==1&&dr(this.inputs,t=>dr(t,r=>$l(r)&&Fy(r,this)))}observerRemoved(e){e==0&&dr(this.inputs,t=>dr(t,r=>$l(r)&&pv(r,this)))}eventObserved(e){e.type=="change"&&(this._value=null),dv(this,e)}},$Y=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Qc.assign({batchedUpdates:V3.unstable_batchedUpdates,createStringInterpolator:QB,colors:FX});var qY=mY($Y,{applyAnimatedValues:PY,createAnimatedStyle:e=>new NY(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}),aa=qY.animated,xT,$I;function VY(){if($I)return xT;$I=1;function e(){this.__data__=[],this.size=0}return xT=e,xT}var bT,qI;function Gv(){if(qI)return bT;qI=1;function e(t,r){return t===r||t!==t&&r!==r}return bT=e,bT}var wT,VI;function dw(){if(VI)return wT;VI=1;var e=Gv();function t(r,c){for(var h=r.length;h--;)if(e(r[h][0],c))return h;return-1}return wT=t,wT}var ST,GI;function GY(){if(GI)return ST;GI=1;var e=dw(),t=Array.prototype,r=t.splice;function c(h){var p=this.__data__,y=e(p,h);if(y<0)return!1;var b=p.length-1;return y==b?p.pop():r.call(p,y,1),--this.size,!0}return ST=c,ST}var TT,HI;function HY(){if(HI)return TT;HI=1;var e=dw();function t(r){var c=this.__data__,h=e(c,r);return h<0?void 0:c[h][1]}return TT=t,TT}var ET,WI;function WY(){if(WI)return ET;WI=1;var e=dw();function t(r){return e(this.__data__,r)>-1}return ET=t,ET}var CT,ZI;function ZY(){if(ZI)return CT;ZI=1;var e=dw();function t(r,c){var h=this.__data__,p=e(h,r);return p<0?(++this.size,h.push([r,c])):h[p][1]=c,this}return CT=t,CT}var MT,XI;function pw(){if(XI)return MT;XI=1;var e=VY(),t=GY(),r=HY(),c=WY(),h=ZY();function p(y){var b=-1,a=y==null?0:y.length;for(this.clear();++b<a;){var E=y[b];this.set(E[0],E[1])}}return p.prototype.clear=e,p.prototype.delete=t,p.prototype.get=r,p.prototype.has=c,p.prototype.set=h,MT=p,MT}var AT,YI;function XY(){if(YI)return AT;YI=1;var e=pw();function t(){this.__data__=new e,this.size=0}return AT=t,AT}var RT,KI;function YY(){if(KI)return RT;KI=1;function e(t){var r=this.__data__,c=r.delete(t);return this.size=r.size,c}return RT=e,RT}var kT,QI;function KY(){if(QI)return kT;QI=1;function e(t){return this.__data__.get(t)}return kT=e,kT}var IT,JI;function QY(){if(JI)return IT;JI=1;function e(t){return this.__data__.has(t)}return IT=e,IT}var zT,ez;function T8(){if(ez)return zT;ez=1;var e=typeof fb=="object"&&fb&&fb.Object===Object&&fb;return zT=e,zT}var LT,tz;function vf(){if(tz)return LT;tz=1;var e=T8(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return LT=r,LT}var PT,nz;function jy(){if(nz)return PT;nz=1;var e=vf(),t=e.Symbol;return PT=t,PT}var DT,rz;function JY(){if(rz)return DT;rz=1;var e=jy(),t=Object.prototype,r=t.hasOwnProperty,c=t.toString,h=e?e.toStringTag:void 0;function p(y){var b=r.call(y,h),a=y[h];try{y[h]=void 0;var E=!0}catch{}var R=c.call(y);return E&&(b?y[h]=a:delete y[h]),R}return DT=p,DT}var OT,iz;function eK(){if(iz)return OT;iz=1;var e=Object.prototype,t=e.toString;function r(c){return t.call(c)}return OT=r,OT}var BT,az;function Dh(){if(az)return BT;az=1;var e=jy(),t=JY(),r=eK(),c="[object Null]",h="[object Undefined]",p=e?e.toStringTag:void 0;function y(b){return b==null?b===void 0?h:c:p&&p in Object(b)?t(b):r(b)}return BT=y,BT}var FT,oz;function xf(){if(oz)return FT;oz=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return FT=e,FT}var jT,sz;function mw(){if(sz)return jT;sz=1;var e=Dh(),t=xf(),r="[object AsyncFunction]",c="[object Function]",h="[object GeneratorFunction]",p="[object Proxy]";function y(b){if(!t(b))return!1;var a=e(b);return a==c||a==h||a==r||a==p}return jT=y,jT}var NT,lz;function tK(){if(lz)return NT;lz=1;var e=vf(),t=e["__core-js_shared__"];return NT=t,NT}var UT,cz;function nK(){if(cz)return UT;cz=1;var e=tK(),t=(function(){var c=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""})();function r(c){return!!t&&t in c}return UT=r,UT}var $T,uz;function E8(){if(uz)return $T;uz=1;var e=Function.prototype,t=e.toString;function r(c){if(c!=null){try{return t.call(c)}catch{}try{return c+""}catch{}}return""}return $T=r,$T}var qT,fz;function rK(){if(fz)return qT;fz=1;var e=mw(),t=nK(),r=xf(),c=E8(),h=/[\\^$.*+?()[\]{}|]/g,p=/^\[object .+?Constructor\]$/,y=Function.prototype,b=Object.prototype,a=y.toString,E=b.hasOwnProperty,R=RegExp("^"+a.call(E).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L(P){if(!r(P)||t(P))return!1;var F=e(P)?R:p;return F.test(c(P))}return qT=L,qT}var VT,hz;function iK(){if(hz)return VT;hz=1;function e(t,r){return t?.[r]}return VT=e,VT}var GT,dz;function Fm(){if(dz)return GT;dz=1;var e=rK(),t=iK();function r(c,h){var p=t(c,h);return e(p)?p:void 0}return GT=r,GT}var HT,pz;function ZR(){if(pz)return HT;pz=1;var e=Fm(),t=vf(),r=e(t,"Map");return HT=r,HT}var WT,mz;function gw(){if(mz)return WT;mz=1;var e=Fm(),t=e(Object,"create");return WT=t,WT}var ZT,gz;function aK(){if(gz)return ZT;gz=1;var e=gw();function t(){this.__data__=e?e(null):{},this.size=0}return ZT=t,ZT}var XT,yz;function oK(){if(yz)return XT;yz=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return XT=e,XT}var YT,_z;function sK(){if(_z)return YT;_z=1;var e=gw(),t="__lodash_hash_undefined__",r=Object.prototype,c=r.hasOwnProperty;function h(p){var y=this.__data__;if(e){var b=y[p];return b===t?void 0:b}return c.call(y,p)?y[p]:void 0}return YT=h,YT}var KT,vz;function lK(){if(vz)return KT;vz=1;var e=gw(),t=Object.prototype,r=t.hasOwnProperty;function c(h){var p=this.__data__;return e?p[h]!==void 0:r.call(p,h)}return KT=c,KT}var QT,xz;function cK(){if(xz)return QT;xz=1;var e=gw(),t="__lodash_hash_undefined__";function r(c,h){var p=this.__data__;return this.size+=this.has(c)?0:1,p[c]=e&&h===void 0?t:h,this}return QT=r,QT}var JT,bz;function uK(){if(bz)return JT;bz=1;var e=aK(),t=oK(),r=sK(),c=lK(),h=cK();function p(y){var b=-1,a=y==null?0:y.length;for(this.clear();++b<a;){var E=y[b];this.set(E[0],E[1])}}return p.prototype.clear=e,p.prototype.delete=t,p.prototype.get=r,p.prototype.has=c,p.prototype.set=h,JT=p,JT}var eE,wz;function fK(){if(wz)return eE;wz=1;var e=uK(),t=pw(),r=ZR();function c(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return eE=c,eE}var tE,Sz;function hK(){if(Sz)return tE;Sz=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return tE=e,tE}var nE,Tz;function yw(){if(Tz)return nE;Tz=1;var e=hK();function t(r,c){var h=r.__data__;return e(c)?h[typeof c=="string"?"string":"hash"]:h.map}return nE=t,nE}var rE,Ez;function dK(){if(Ez)return rE;Ez=1;var e=yw();function t(r){var c=e(this,r).delete(r);return this.size-=c?1:0,c}return rE=t,rE}var iE,Cz;function pK(){if(Cz)return iE;Cz=1;var e=yw();function t(r){return e(this,r).get(r)}return iE=t,iE}var aE,Mz;function mK(){if(Mz)return aE;Mz=1;var e=yw();function t(r){return e(this,r).has(r)}return aE=t,aE}var oE,Az;function gK(){if(Az)return oE;Az=1;var e=yw();function t(r,c){var h=e(this,r),p=h.size;return h.set(r,c),this.size+=h.size==p?0:1,this}return oE=t,oE}var sE,Rz;function XR(){if(Rz)return sE;Rz=1;var e=fK(),t=dK(),r=pK(),c=mK(),h=gK();function p(y){var b=-1,a=y==null?0:y.length;for(this.clear();++b<a;){var E=y[b];this.set(E[0],E[1])}}return p.prototype.clear=e,p.prototype.delete=t,p.prototype.get=r,p.prototype.has=c,p.prototype.set=h,sE=p,sE}var lE,kz;function yK(){if(kz)return lE;kz=1;var e=pw(),t=ZR(),r=XR(),c=200;function h(p,y){var b=this.__data__;if(b instanceof e){var a=b.__data__;if(!t||a.length<c-1)return a.push([p,y]),this.size=++b.size,this;b=this.__data__=new r(a)}return b.set(p,y),this.size=b.size,this}return lE=h,lE}var cE,Iz;function _w(){if(Iz)return cE;Iz=1;var e=pw(),t=XY(),r=YY(),c=KY(),h=QY(),p=yK();function y(b){var a=this.__data__=new e(b);this.size=a.size}return y.prototype.clear=t,y.prototype.delete=r,y.prototype.get=c,y.prototype.has=h,y.prototype.set=p,cE=y,cE}var uE,zz;function C8(){if(zz)return uE;zz=1;var e=Fm(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return uE=t,uE}var fE,Lz;function YR(){if(Lz)return fE;Lz=1;var e=C8();function t(r,c,h){c=="__proto__"&&e?e(r,c,{configurable:!0,enumerable:!0,value:h,writable:!0}):r[c]=h}return fE=t,fE}var hE,Pz;function M8(){if(Pz)return hE;Pz=1;var e=YR(),t=Gv();function r(c,h,p){(p!==void 0&&!t(c[h],p)||p===void 0&&!(h in c))&&e(c,h,p)}return hE=r,hE}var dE,Dz;function _K(){if(Dz)return dE;Dz=1;function e(t){return function(r,c,h){for(var p=-1,y=Object(r),b=h(r),a=b.length;a--;){var E=b[t?a:++p];if(c(y[E],E,y)===!1)break}return r}}return dE=e,dE}var pE,Oz;function A8(){if(Oz)return pE;Oz=1;var e=_K(),t=e();return pE=t,pE}var N0={exports:{}};N0.exports;var Bz;function R8(){return Bz||(Bz=1,(function(e,t){var r=vf(),c=t&&!t.nodeType&&t,h=c&&!0&&e&&!e.nodeType&&e,p=h&&h.exports===c,y=p?r.Buffer:void 0,b=y?y.allocUnsafe:void 0;function a(E,R){if(R)return E.slice();var L=E.length,P=b?b(L):new E.constructor(L);return E.copy(P),P}e.exports=a})(N0,N0.exports)),N0.exports}var mE,Fz;function k8(){if(Fz)return mE;Fz=1;var e=vf(),t=e.Uint8Array;return mE=t,mE}var gE,jz;function KR(){if(jz)return gE;jz=1;var e=k8();function t(r){var c=new r.constructor(r.byteLength);return new e(c).set(new e(r)),c}return gE=t,gE}var yE,Nz;function I8(){if(Nz)return yE;Nz=1;var e=KR();function t(r,c){var h=c?e(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.length)}return yE=t,yE}var _E,Uz;function z8(){if(Uz)return _E;Uz=1;function e(t,r){var c=-1,h=t.length;for(r||(r=Array(h));++c<h;)r[c]=t[c];return r}return _E=e,_E}var vE,$z;function vK(){if($z)return vE;$z=1;var e=xf(),t=Object.create,r=(function(){function c(){}return function(h){if(!e(h))return{};if(t)return t(h);c.prototype=h;var p=new c;return c.prototype=void 0,p}})();return vE=r,vE}var xE,qz;function L8(){if(qz)return xE;qz=1;function e(t,r){return function(c){return t(r(c))}}return xE=e,xE}var bE,Vz;function QR(){if(Vz)return bE;Vz=1;var e=L8(),t=e(Object.getPrototypeOf,Object);return bE=t,bE}var wE,Gz;function JR(){if(Gz)return wE;Gz=1;var e=Object.prototype;function t(r){var c=r&&r.constructor,h=typeof c=="function"&&c.prototype||e;return r===h}return wE=t,wE}var SE,Hz;function P8(){if(Hz)return SE;Hz=1;var e=vK(),t=QR(),r=JR();function c(h){return typeof h.constructor=="function"&&!r(h)?e(t(h)):{}}return SE=c,SE}var TE,Wz;function nc(){if(Wz)return TE;Wz=1;function e(t){return t!=null&&typeof t=="object"}return TE=e,TE}var EE,Zz;function xK(){if(Zz)return EE;Zz=1;var e=Dh(),t=nc(),r="[object Arguments]";function c(h){return t(h)&&e(h)==r}return EE=c,EE}var CE,Xz;function vw(){if(Xz)return CE;Xz=1;var e=xK(),t=nc(),r=Object.prototype,c=r.hasOwnProperty,h=r.propertyIsEnumerable,p=e((function(){return arguments})())?e:function(y){return t(y)&&c.call(y,"callee")&&!h.call(y,"callee")};return CE=p,CE}var ME,Yz;function gs(){if(Yz)return ME;Yz=1;var e=Array.isArray;return ME=e,ME}var AE,Kz;function e5(){if(Kz)return AE;Kz=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return AE=t,AE}var RE,Qz;function Ny(){if(Qz)return RE;Qz=1;var e=mw(),t=e5();function r(c){return c!=null&&t(c.length)&&!e(c)}return RE=r,RE}var kE,Jz;function D8(){if(Jz)return kE;Jz=1;var e=Ny(),t=nc();function r(c){return t(c)&&e(c)}return kE=r,kE}var U0={exports:{}},IE,eL;function bK(){if(eL)return IE;eL=1;function e(){return!1}return IE=e,IE}U0.exports;var tL;function xw(){return tL||(tL=1,(function(e,t){var r=vf(),c=bK(),h=t&&!t.nodeType&&t,p=h&&!0&&e&&!e.nodeType&&e,y=p&&p.exports===h,b=y?r.Buffer:void 0,a=b?b.isBuffer:void 0,E=a||c;e.exports=E})(U0,U0.exports)),U0.exports}var zE,nL;function t5(){if(nL)return zE;nL=1;var e=Dh(),t=QR(),r=nc(),c="[object Object]",h=Function.prototype,p=Object.prototype,y=h.toString,b=p.hasOwnProperty,a=y.call(Object);function E(R){if(!r(R)||e(R)!=c)return!1;var L=t(R);if(L===null)return!0;var P=b.call(L,"constructor")&&L.constructor;return typeof P=="function"&&P instanceof P&&y.call(P)==a}return zE=E,zE}var LE,rL;function wK(){if(rL)return LE;rL=1;var e=Dh(),t=e5(),r=nc(),c="[object Arguments]",h="[object Array]",p="[object Boolean]",y="[object Date]",b="[object Error]",a="[object Function]",E="[object Map]",R="[object Number]",L="[object Object]",P="[object RegExp]",F="[object Set]",U="[object String]",N="[object WeakMap]",q="[object ArrayBuffer]",Z="[object DataView]",Q="[object Float32Array]",Y="[object Float64Array]",J="[object Int8Array]",re="[object Int16Array]",ae="[object Int32Array]",fe="[object Uint8Array]",Se="[object Uint8ClampedArray]",Te="[object Uint16Array]",ue="[object Uint32Array]",_e={};_e[Q]=_e[Y]=_e[J]=_e[re]=_e[ae]=_e[fe]=_e[Se]=_e[Te]=_e[ue]=!0,_e[c]=_e[h]=_e[q]=_e[p]=_e[Z]=_e[y]=_e[b]=_e[a]=_e[E]=_e[R]=_e[L]=_e[P]=_e[F]=_e[U]=_e[N]=!1;function se(me){return r(me)&&t(me.length)&&!!_e[e(me)]}return LE=se,LE}var PE,iL;function Uy(){if(iL)return PE;iL=1;function e(t){return function(r){return t(r)}}return PE=e,PE}var $0={exports:{}};$0.exports;var aL;function bw(){return aL||(aL=1,(function(e,t){var r=T8(),c=t&&!t.nodeType&&t,h=c&&!0&&e&&!e.nodeType&&e,p=h&&h.exports===c,y=p&&r.process,b=(function(){try{var a=h&&h.require&&h.require("util").types;return a||y&&y.binding&&y.binding("util")}catch{}})();e.exports=b})($0,$0.exports)),$0.exports}var DE,oL;function n5(){if(oL)return DE;oL=1;var e=wK(),t=Uy(),r=bw(),c=r&&r.isTypedArray,h=c?t(c):e;return DE=h,DE}var OE,sL;function O8(){if(sL)return OE;sL=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return OE=e,OE}var BE,lL;function r5(){if(lL)return BE;lL=1;var e=YR(),t=Gv(),r=Object.prototype,c=r.hasOwnProperty;function h(p,y,b){var a=p[y];(!(c.call(p,y)&&t(a,b))||b===void 0&&!(y in p))&&e(p,y,b)}return BE=h,BE}var FE,cL;function $y(){if(cL)return FE;cL=1;var e=r5(),t=YR();function r(c,h,p,y){var b=!p;p||(p={});for(var a=-1,E=h.length;++a<E;){var R=h[a],L=y?y(p[R],c[R],R,p,c):void 0;L===void 0&&(L=c[R]),b?t(p,R,L):e(p,R,L)}return p}return FE=r,FE}var jE,uL;function SK(){if(uL)return jE;uL=1;function e(t,r){for(var c=-1,h=Array(t);++c<t;)h[c]=r(c);return h}return jE=e,jE}var NE,fL;function ww(){if(fL)return NE;fL=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(c,h){var p=typeof c;return h=h??e,!!h&&(p=="number"||p!="symbol"&&t.test(c))&&c>-1&&c%1==0&&c<h}return NE=r,NE}var UE,hL;function B8(){if(hL)return UE;hL=1;var e=SK(),t=vw(),r=gs(),c=xw(),h=ww(),p=n5(),y=Object.prototype,b=y.hasOwnProperty;function a(E,R){var L=r(E),P=!L&&t(E),F=!L&&!P&&c(E),U=!L&&!P&&!F&&p(E),N=L||P||F||U,q=N?e(E.length,String):[],Z=q.length;for(var Q in E)(R||b.call(E,Q))&&!(N&&(Q=="length"||F&&(Q=="offset"||Q=="parent")||U&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||h(Q,Z)))&&q.push(Q);return q}return UE=a,UE}var $E,dL;function TK(){if(dL)return $E;dL=1;function e(t){var r=[];if(t!=null)for(var c in Object(t))r.push(c);return r}return $E=e,$E}var qE,pL;function EK(){if(pL)return qE;pL=1;var e=xf(),t=JR(),r=TK(),c=Object.prototype,h=c.hasOwnProperty;function p(y){if(!e(y))return r(y);var b=t(y),a=[];for(var E in y)E=="constructor"&&(b||!h.call(y,E))||a.push(E);return a}return qE=p,qE}var VE,mL;function Hv(){if(mL)return VE;mL=1;var e=B8(),t=EK(),r=Ny();function c(h){return r(h)?e(h,!0):t(h)}return VE=c,VE}var GE,gL;function CK(){if(gL)return GE;gL=1;var e=$y(),t=Hv();function r(c){return e(c,t(c))}return GE=r,GE}var HE,yL;function MK(){if(yL)return HE;yL=1;var e=M8(),t=R8(),r=I8(),c=z8(),h=P8(),p=vw(),y=gs(),b=D8(),a=xw(),E=mw(),R=xf(),L=t5(),P=n5(),F=O8(),U=CK();function N(q,Z,Q,Y,J,re,ae){var fe=F(q,Q),Se=F(Z,Q),Te=ae.get(Se);if(Te){e(q,Q,Te);return}var ue=re?re(fe,Se,Q+"",q,Z,ae):void 0,_e=ue===void 0;if(_e){var se=y(Se),me=!se&&a(Se),be=!se&&!me&&P(Se);ue=Se,se||me||be?y(fe)?ue=fe:b(fe)?ue=c(fe):me?(_e=!1,ue=t(Se,!0)):be?(_e=!1,ue=r(Se,!0)):ue=[]:L(Se)||p(Se)?(ue=fe,p(fe)?ue=U(fe):(!R(fe)||E(fe))&&(ue=h(Se))):_e=!1}_e&&(ae.set(Se,ue),J(ue,Se,Y,re,ae),ae.delete(Se)),e(q,Q,ue)}return HE=N,HE}var WE,_L;function AK(){if(_L)return WE;_L=1;var e=_w(),t=M8(),r=A8(),c=MK(),h=xf(),p=Hv(),y=O8();function b(a,E,R,L,P){a!==E&&r(E,function(F,U){if(P||(P=new e),h(F))c(a,E,U,R,b,L,P);else{var N=L?L(y(a,U),F,U+"",a,E,P):void 0;N===void 0&&(N=F),t(a,U,N)}},p)}return WE=b,WE}var ZE,vL;function Sw(){if(vL)return ZE;vL=1;function e(t){return t}return ZE=e,ZE}var XE,xL;function RK(){if(xL)return XE;xL=1;function e(t,r,c){switch(c.length){case 0:return t.call(r);case 1:return t.call(r,c[0]);case 2:return t.call(r,c[0],c[1]);case 3:return t.call(r,c[0],c[1],c[2])}return t.apply(r,c)}return XE=e,XE}var YE,bL;function F8(){if(bL)return YE;bL=1;var e=RK(),t=Math.max;function r(c,h,p){return h=t(h===void 0?c.length-1:h,0),function(){for(var y=arguments,b=-1,a=t(y.length-h,0),E=Array(a);++b<a;)E[b]=y[h+b];b=-1;for(var R=Array(h+1);++b<h;)R[b]=y[b];return R[h]=p(E),e(c,this,R)}}return YE=r,YE}var KE,wL;function kK(){if(wL)return KE;wL=1;function e(t){return function(){return t}}return KE=e,KE}var QE,SL;function IK(){if(SL)return QE;SL=1;var e=kK(),t=C8(),r=Sw(),c=t?function(h,p){return t(h,"toString",{configurable:!0,enumerable:!1,value:e(p),writable:!0})}:r;return QE=c,QE}var JE,TL;function zK(){if(TL)return JE;TL=1;var e=800,t=16,r=Date.now;function c(h){var p=0,y=0;return function(){var b=r(),a=t-(b-y);if(y=b,a>0){if(++p>=e)return arguments[0]}else p=0;return h.apply(void 0,arguments)}}return JE=c,JE}var eC,EL;function j8(){if(EL)return eC;EL=1;var e=IK(),t=zK(),r=t(e);return eC=r,eC}var tC,CL;function i5(){if(CL)return tC;CL=1;var e=Sw(),t=F8(),r=j8();function c(h,p){return r(t(h,p,e),h+"")}return tC=c,tC}var nC,ML;function N8(){if(ML)return nC;ML=1;var e=Gv(),t=Ny(),r=ww(),c=xf();function h(p,y,b){if(!c(b))return!1;var a=typeof y;return(a=="number"?t(b)&&r(y,b.length):a=="string"&&y in b)?e(b[y],p):!1}return nC=h,nC}var rC,AL;function LK(){if(AL)return rC;AL=1;var e=i5(),t=N8();function r(c){return e(function(h,p){var y=-1,b=p.length,a=b>1?p[b-1]:void 0,E=b>2?p[2]:void 0;for(a=c.length>3&&typeof a=="function"?(b--,a):void 0,E&&t(p[0],p[1],E)&&(a=b<3?void 0:a,b=1),h=Object(h);++y<b;){var R=p[y];R&&c(h,R,y,a)}return h})}return rC=r,rC}var iC,RL;function PK(){if(RL)return iC;RL=1;var e=AK(),t=LK(),r=t(function(c,h,p){e(c,h,p)});return iC=r,iC}var DK=PK();const U8=Ro(DK);var aC,kL;function Tw(){if(kL)return aC;kL=1;var e=Dh(),t=nc(),r="[object Symbol]";function c(h){return typeof h=="symbol"||t(h)&&e(h)==r}return aC=c,aC}var oC,IL;function a5(){if(IL)return oC;IL=1;var e=gs(),t=Tw(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;function h(p,y){if(e(p))return!1;var b=typeof p;return b=="number"||b=="symbol"||b=="boolean"||p==null||t(p)?!0:c.test(p)||!r.test(p)||y!=null&&p in Object(y)}return oC=h,oC}var sC,zL;function OK(){if(zL)return sC;zL=1;var e=XR(),t="Expected a function";function r(c,h){if(typeof c!="function"||h!=null&&typeof h!="function")throw new TypeError(t);var p=function(){var y=arguments,b=h?h.apply(this,y):y[0],a=p.cache;if(a.has(b))return a.get(b);var E=c.apply(this,y);return p.cache=a.set(b,E)||a,E};return p.cache=new(r.Cache||e),p}return r.Cache=e,sC=r,sC}var lC,LL;function BK(){if(LL)return lC;LL=1;var e=OK(),t=500;function r(c){var h=e(c,function(y){return p.size===t&&p.clear(),y}),p=h.cache;return h}return lC=r,lC}var cC,PL;function FK(){if(PL)return cC;PL=1;var e=BK(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,c=e(function(h){var p=[];return h.charCodeAt(0)===46&&p.push(""),h.replace(t,function(y,b,a,E){p.push(a?E.replace(r,"$1"):b||y)}),p});return cC=c,cC}var uC,DL;function Ew(){if(DL)return uC;DL=1;function e(t,r){for(var c=-1,h=t==null?0:t.length,p=Array(h);++c<h;)p[c]=r(t[c],c,t);return p}return uC=e,uC}var fC,OL;function jK(){if(OL)return fC;OL=1;var e=jy(),t=Ew(),r=gs(),c=Tw(),h=e?e.prototype:void 0,p=h?h.toString:void 0;function y(b){if(typeof b=="string")return b;if(r(b))return t(b,y)+"";if(c(b))return p?p.call(b):"";var a=b+"";return a=="0"&&1/b==-1/0?"-0":a}return fC=y,fC}var hC,BL;function NK(){if(BL)return hC;BL=1;var e=jK();function t(r){return r==null?"":e(r)}return hC=t,hC}var dC,FL;function qy(){if(FL)return dC;FL=1;var e=gs(),t=a5(),r=FK(),c=NK();function h(p,y){return e(p)?p:t(p,y)?[p]:r(c(p))}return dC=h,dC}var pC,jL;function Vy(){if(jL)return pC;jL=1;var e=Tw();function t(r){if(typeof r=="string"||e(r))return r;var c=r+"";return c=="0"&&1/r==-1/0?"-0":c}return pC=t,pC}var mC,NL;function Wv(){if(NL)return mC;NL=1;var e=qy(),t=Vy();function r(c,h){h=e(h,c);for(var p=0,y=h.length;c!=null&&p<y;)c=c[t(h[p++])];return p&&p==y?c:void 0}return mC=r,mC}var gC,UL;function $8(){if(UL)return gC;UL=1;var e=Wv();function t(r,c,h){var p=r==null?void 0:e(r,c);return p===void 0?h:p}return gC=t,gC}var UK=$8();const Lh=Ro(UK);var yC,$L;function q8(){if($L)return yC;$L=1;var e=r5(),t=qy(),r=ww(),c=xf(),h=Vy();function p(y,b,a,E){if(!c(y))return y;b=t(b,y);for(var R=-1,L=b.length,P=L-1,F=y;F!=null&&++R<L;){var U=h(b[R]),N=a;if(U==="__proto__"||U==="constructor"||U==="prototype")return y;if(R!=P){var q=F[U];N=E?E(q,U,F):void 0,N===void 0&&(N=c(q)?q:r(b[R+1])?[]:{})}e(F,U,N),F=F[U]}return y}return yC=p,yC}var _C,qL;function $K(){if(qL)return _C;qL=1;var e=q8();function t(r,c,h){return r==null?r:e(r,c,h)}return _C=t,_C}var qK=$K();const q0=Ro(qK);function y3(){return y3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},y3.apply(null,arguments)}function VK(e,t){if(e==null)return{};var r={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;r[c]=e[c]}return r}var GK=["outlineWidth","outlineColor","outlineOpacity"],HK=function(e){return e.outlineWidth,e.outlineColor,e.outlineOpacity,VK(e,GK)},WK=["axis.ticks.text","axis.legend.text","legends.title.text","legends.text","legends.ticks.text","legends.title.text","labels.text","dots.text","markers.text","annotations.text"],ZK=function(e,t){return y3({},t,e)},XK=function(e,t){var r=U8({},e,t);return WK.forEach((function(c){q0(r,c,ZK(Lh(r,c),r.text))})),r},V8=function(e,t){return t?U8({},e,t):e},YK={background:"transparent",text:{fontFamily:"sans-serif",fontSize:11,fill:"#333333",outlineWidth:0,outlineColor:"#ffffff",outlineOpacity:1},axis:{domain:{line:{stroke:"transparent",strokeWidth:1}},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{}},legend:{text:{fontSize:12}}},grid:{line:{stroke:"#dddddd",strokeWidth:1}},legends:{hidden:{symbol:{fill:"#333333",opacity:.6},text:{fill:"#333333",opacity:.6}},text:{},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{fontSize:10}},title:{text:{}}},labels:{text:{}},markers:{lineColor:"#000000",lineStrokeWidth:1,text:{}},dots:{text:{}},tooltip:{container:{background:"white",color:"inherit",fontSize:"inherit",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)",padding:"5px 9px"},basic:{whiteSpace:"pre",display:"flex",alignItems:"center"},chip:{marginRight:7},table:{},tableCell:{padding:"3px 5px"},tableCellValue:{fontWeight:"bold"}},crosshair:{line:{stroke:"#000000",strokeWidth:1,strokeOpacity:.75,strokeDasharray:"6 6"}},annotations:{text:{fontSize:13,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},link:{stroke:"#000000",strokeWidth:1,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},outline:{fill:"none",stroke:"#000000",strokeWidth:2,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},symbol:{fill:"#000000",outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1}}},KK=function(e){return V.useMemo((function(){return XK(YK,e)}),[e])},QK=function(e,t){return V.useMemo((function(){return V8(e,t)}),[e,t])},G8=V.createContext(null),JK={},eQ=function(e){var t=e.theme,r=t===void 0?JK:t,c=e.children,h=KK(r);return X.jsx(G8.Provider,{value:h,children:c})},Zi=function(){var e=V.useContext(G8);if(e===null)throw new Error("Unable to find the theme, did you forget to wrap your component with ThemeProvider?");return e};function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},Am.apply(null,arguments)}var tQ=["basic","chip","container","table","tableCell","tableCellValue"],nQ={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},VL=function(e,t){return"translate("+e+"px, "+t+"px)"},H8=V.memo((function(e){var t,r=e.position,c=e.anchor,h=e.children,p=Zi(),y=js(),b=y.animate,a=y.config,E=Rre(),R=E[0],L=E[1],P=V.useRef(!1),F=void 0,U=!1,N=L.width>0&&L.height>0,q=Math.round(r[0]),Z=Math.round(r[1]);N&&(c==="top"?(q-=L.width/2,Z-=L.height+14):c==="right"?(q+=14,Z-=L.height/2):c==="bottom"?(q-=L.width/2,Z+=14):c==="left"?(q-=L.width+14,Z-=L.height/2):c==="center"&&(q-=L.width/2,Z-=L.height/2),F={transform:VL(q,Z)},P.current||(U=!0),P.current=[q,Z]);var Q=Ph({to:F,config:a,immediate:!b||U}),Y=p.tooltip;Y.basic,Y.chip,Y.container,Y.table,Y.tableCell,Y.tableCellValue;var J=(function(ae,fe){if(ae==null)return{};var Se={};for(var Te in ae)if({}.hasOwnProperty.call(ae,Te)){if(fe.indexOf(Te)!==-1)continue;Se[Te]=ae[Te]}return Se})(Y,tQ),re=Am({},nQ,J,{transform:(t=Q.transform)!=null?t:VL(q,Z),opacity:Q.transform?1:0});return X.jsx(aa.div,{ref:R,style:re,children:h})}));H8.displayName="TooltipWrapper";var rQ=V.memo((function(e){var t=e.size,r=t===void 0?12:t,c=e.color,h=e.style;return X.jsx("span",{style:Am({display:"block",width:r,height:r,background:c},h===void 0?{}:h)})})),W8=V.memo((function(e){var t,r=e.id,c=e.value,h=e.format,p=e.enableChip,y=p!==void 0&&p,b=e.color,a=e.renderContent,E=Zi(),R=pS(h);if(typeof a=="function")t=a();else{var L=c;R!==void 0&&L!==void 0&&(L=R(L)),t=X.jsxs("div",{style:E.tooltip.basic,children:[y&&X.jsx(rQ,{color:b,style:E.tooltip.chip}),L!==void 0?X.jsxs("span",{children:[r,": ",X.jsx("strong",{children:""+L})]}):r]})}return X.jsx("div",{style:E.tooltip.container,role:"tooltip",children:t})})),iQ={width:"100%",borderCollapse:"collapse"},aQ=V.memo((function(e){var t,r=e.title,c=e.rows,h=c===void 0?[]:c,p=e.renderContent,y=Zi();return h.length?(t=typeof p=="function"?p():X.jsxs("div",{children:[r&&r,X.jsx("table",{style:Am({},iQ,y.tooltip.table),children:X.jsx("tbody",{children:h.map((function(b,a){return X.jsx("tr",{children:b.map((function(E,R){return X.jsx("td",{style:y.tooltip.tableCell,children:E},R)}))},a)}))})})]}),X.jsx("div",{style:y.tooltip.container,children:t})):null}));aQ.displayName="TableTooltip";var _3=V.memo((function(e){var t=e.x0,r=e.x1,c=e.y0,h=e.y1,p=Zi(),y=js(),b=y.animate,a=y.config,E=V.useMemo((function(){return Am({},p.crosshair.line,{pointerEvents:"none"})}),[p.crosshair.line]),R=Ph({x1:t,x2:r,y1:c,y2:h,config:a,immediate:!b});return X.jsx(aa.line,Am({},R,{fill:"none",style:E}))}));_3.displayName="CrosshairLine";var oQ=V.memo((function(e){var t,r,c=e.width,h=e.height,p=e.type,y=e.x,b=e.y;return p==="cross"?(t={x0:y,x1:y,y0:0,y1:h},r={x0:0,x1:c,y0:b,y1:b}):p==="top-left"?(t={x0:y,x1:y,y0:0,y1:b},r={x0:0,x1:y,y0:b,y1:b}):p==="top"?t={x0:y,x1:y,y0:0,y1:b}:p==="top-right"?(t={x0:y,x1:y,y0:0,y1:b},r={x0:y,x1:c,y0:b,y1:b}):p==="right"?r={x0:y,x1:c,y0:b,y1:b}:p==="bottom-right"?(t={x0:y,x1:y,y0:b,y1:h},r={x0:y,x1:c,y0:b,y1:b}):p==="bottom"?t={x0:y,x1:y,y0:b,y1:h}:p==="bottom-left"?(t={x0:y,x1:y,y0:b,y1:h},r={x0:0,x1:y,y0:b,y1:b}):p==="left"?r={x0:0,x1:y,y0:b,y1:b}:p==="x"?t={x0:y,x1:y,y0:0,y1:h}:p==="y"&&(r={x0:0,x1:c,y0:b,y1:b}),X.jsxs(X.Fragment,{children:[t&&X.jsx(_3,{x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1}),r&&X.jsx(_3,{x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1})]})}));oQ.displayName="Crosshair";var Z8=V.createContext({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),v3={isVisible:!1,position:[null,null],content:null,anchor:null},X8=V.createContext(v3),sQ=function(e){var t=V.useState(v3),r=t[0],c=t[1],h=V.useCallback((function(b,a,E){var R=a[0],L=a[1];E===void 0&&(E="top"),c({isVisible:!0,position:[R,L],anchor:E,content:b})}),[c]),p=V.useCallback((function(b,a,E){E===void 0&&(E="top");var R=e.current.getBoundingClientRect(),L=e.current.offsetWidth,P=L===R.width?1:L/R.width,F="touches"in a?a.touches[0]:a,U=F.clientX,N=F.clientY,q=(U-R.left)*P,Z=(N-R.top)*P;E!=="left"&&E!=="right"||(E=q<R.width/2?"right":"left"),c({isVisible:!0,position:[q,Z],anchor:E,content:b})}),[e,c]),y=V.useCallback((function(){c(v3)}),[c]);return{actions:V.useMemo((function(){return{showTooltipAt:h,showTooltipFromEvent:p,hideTooltip:y}}),[h,p,y]),state:r}},Cw=function(){var e=V.useContext(Z8);if(e===void 0)throw new Error("useTooltip must be used within a TooltipProvider");return e},lQ=function(){var e=V.useContext(X8);if(e===void 0)throw new Error("useTooltipState must be used within a TooltipProvider");return e},cQ=function(e){return e.isVisible},uQ=function(){var e=lQ();return cQ(e)?X.jsx(H8,{position:e.position,anchor:e.anchor,children:e.content}):null},fQ=function(e){var t=e.container,r=e.children,c=sQ(t),h=c.actions,p=c.state;return X.jsx(Z8.Provider,{value:h,children:X.jsx(X8.Provider,{value:p,children:r})})},vC,GL;function hQ(){if(GL)return vC;GL=1;var e=Dh(),t=gs(),r=nc(),c="[object String]";function h(p){return typeof p=="string"||!t(p)&&r(p)&&e(p)==c}return vC=h,vC}var dQ=hQ();const pQ=Ro(dQ);let Zl;typeof window<"u"?Zl=window:typeof self<"u"?Zl=self:Zl=global;let x3=null,b3=null;const HL=20,xC=Zl.clearTimeout,WL=Zl.setTimeout,bC=Zl.cancelAnimationFrame||Zl.mozCancelAnimationFrame||Zl.webkitCancelAnimationFrame,ZL=Zl.requestAnimationFrame||Zl.mozRequestAnimationFrame||Zl.webkitRequestAnimationFrame;bC==null||ZL==null?(x3=xC,b3=function(t){return WL(t,HL)}):(x3=function([t,r]){bC(t),xC(r)},b3=function(t){const r=ZL(function(){xC(c),t()}),c=WL(function(){bC(r),t()},HL);return[r,c]});function mQ(e){let t,r,c,h,p,y,b;const a=typeof document<"u"&&document.attachEvent;if(!a){y=function(Z){const Q=Z.__resizeTriggers__,Y=Q.firstElementChild,J=Q.lastElementChild,re=Y.firstElementChild;J.scrollLeft=J.scrollWidth,J.scrollTop=J.scrollHeight,re.style.width=Y.offsetWidth+1+"px",re.style.height=Y.offsetHeight+1+"px",Y.scrollLeft=Y.scrollWidth,Y.scrollTop=Y.scrollHeight},p=function(Z){return Z.offsetWidth!==Z.__resizeLast__.width||Z.offsetHeight!==Z.__resizeLast__.height},b=function(Z){if(Z.target.className&&typeof Z.target.className.indexOf=="function"&&Z.target.className.indexOf("contract-trigger")<0&&Z.target.className.indexOf("expand-trigger")<0)return;const Q=this;y(this),this.__resizeRAF__&&x3(this.__resizeRAF__),this.__resizeRAF__=b3(function(){p(Q)&&(Q.__resizeLast__.width=Q.offsetWidth,Q.__resizeLast__.height=Q.offsetHeight,Q.__resizeListeners__.forEach(function(re){re.call(Q,Z)}))})};let P=!1,F="";c="animationstart";const U="Webkit Moz O ms".split(" ");let N="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),q="";{const Z=document.createElement("fakeelement");if(Z.style.animationName!==void 0&&(P=!0),P===!1){for(let Q=0;Q<U.length;Q++)if(Z.style[U[Q]+"AnimationName"]!==void 0){q=U[Q],F="-"+q.toLowerCase()+"-",c=N[Q],P=!0;break}}}r="resizeanim",t="@"+F+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",h=F+"animation: 1ms "+r+"; "}const E=function(P){if(!P.getElementById("detectElementResize")){const F=(t||"")+".resize-triggers { "+(h||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',U=P.head||P.getElementsByTagName("head")[0],N=P.createElement("style");N.id="detectElementResize",N.type="text/css",e!=null&&N.setAttribute("nonce",e),N.styleSheet?N.styleSheet.cssText=F:N.appendChild(P.createTextNode(F)),U.appendChild(N)}};return{addResizeListener:function(P,F){if(a)P.attachEvent("onresize",F);else{if(!P.__resizeTriggers__){const U=P.ownerDocument,N=Zl.getComputedStyle(P);N&&N.position==="static"&&(P.style.position="relative"),E(U),P.__resizeLast__={},P.__resizeListeners__=[],(P.__resizeTriggers__=U.createElement("div")).className="resize-triggers";const q=U.createElement("div");q.className="expand-trigger",q.appendChild(U.createElement("div"));const Z=U.createElement("div");Z.className="contract-trigger",P.__resizeTriggers__.appendChild(q),P.__resizeTriggers__.appendChild(Z),P.appendChild(P.__resizeTriggers__),y(P),P.addEventListener("scroll",b,!0),c&&(P.__resizeTriggers__.__animationListener__=function(Y){Y.animationName===r&&y(P)},P.__resizeTriggers__.addEventListener(c,P.__resizeTriggers__.__animationListener__))}P.__resizeListeners__.push(F)}},removeResizeListener:function(P,F){if(a)P.detachEvent("onresize",F);else if(P.__resizeListeners__.splice(P.__resizeListeners__.indexOf(F),1),!P.__resizeListeners__.length){P.removeEventListener("scroll",b,!0),P.__resizeTriggers__.__animationListener__&&(P.__resizeTriggers__.removeEventListener(c,P.__resizeTriggers__.__animationListener__),P.__resizeTriggers__.__animationListener__=null);try{P.__resizeTriggers__=!P.removeChild(P.__resizeTriggers__)}catch{}}}}}class gQ extends V.Component{constructor(...t){super(...t),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:r,disableWidth:c,onResize:h}=this.props;if(this._parentNode){const p=window.getComputedStyle(this._parentNode)||{},y=parseFloat(p.paddingLeft||"0"),b=parseFloat(p.paddingRight||"0"),a=parseFloat(p.paddingTop||"0"),E=parseFloat(p.paddingBottom||"0"),R=this._parentNode.getBoundingClientRect(),L=R.height-a-E,P=R.width-y-b;if(!r&&this.state.height!==L||!c&&this.state.width!==P){this.setState({height:L,width:P});const F=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof h=="function"&&h({height:L,width:P,get scaledHeight(){return F(),L},get scaledWidth(){return F(),P}})}}},this._setRef=r=>{this._autoSizer=r}}componentDidMount(){const{nonce:t}=this.props,r=this._autoSizer?this._autoSizer.parentNode:null;if(r!=null&&r.ownerDocument&&r.ownerDocument.defaultView&&r instanceof r.ownerDocument.defaultView.HTMLElement){this._parentNode=r;const c=r.ownerDocument.defaultView.ResizeObserver;c!=null?(this._resizeObserver=new c(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(r)):(this._detectElementResize=mQ(t),this._detectElementResize.addResizeListener(r,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:t,defaultHeight:r,defaultWidth:c,disableHeight:h=!1,disableWidth:p=!1,doNotBailOutOnEmptyChildren:y=!1,nonce:b,onResize:a,style:E={},tagName:R="div",...L}=this.props,{height:P,width:F}=this.state,U={overflow:"visible"},N={};let q=!1;return h||(P===0&&(q=!0),U.height=0,N.height=P,N.scaledHeight=P),p||(F===0&&(q=!0),U.width=0,N.width=F,N.scaledWidth=F),y&&(q=!1),V.createElement(R,{ref:this._setRef,style:{...U,...E},...L},!q&&t(N))}}function yQ(e,t,r,c){var h=this,p=V.useRef(null),y=V.useRef(0),b=V.useRef(0),a=V.useRef(null),E=V.useRef([]),R=V.useRef(),L=V.useRef(),P=V.useRef(e),F=V.useRef(!0);P.current=e;var U=typeof window<"u",N=!t&&t!==0&&U;if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0;var q=!!(r=r||{}).leading,Z=!("trailing"in r)||!!r.trailing,Q="maxWait"in r,Y="debounceOnServer"in r&&!!r.debounceOnServer,J=Q?Math.max(+r.maxWait||0,t):null;V.useEffect(function(){return F.current=!0,function(){F.current=!1}},[]);var re=V.useMemo(function(){var ae=function(me){var be=E.current,Ie=R.current;return E.current=R.current=null,y.current=me,b.current=b.current||me,L.current=P.current.apply(Ie,be)},fe=function(me,be){N&&cancelAnimationFrame(a.current),a.current=N?requestAnimationFrame(me):setTimeout(me,be)},Se=function(me){if(!F.current)return!1;var be=me-p.current;return!p.current||be>=t||be<0||Q&&me-y.current>=J},Te=function(me){return a.current=null,Z&&E.current?ae(me):(E.current=R.current=null,L.current)},ue=function me(){var be=Date.now();if(q&&b.current===y.current&&_e(),Se(be))return Te(be);if(F.current){var Ie=t-(be-p.current),pe=Q?Math.min(Ie,J-(be-y.current)):Ie;fe(me,pe)}},_e=function(){c&&c({})},se=function(){if(U||Y){var me=Date.now(),be=Se(me);if(E.current=[].slice.call(arguments),R.current=h,p.current=me,be){if(!a.current&&F.current)return y.current=p.current,fe(ue,t),q?ae(p.current):L.current;if(Q)return fe(ue,t),ae(p.current)}return a.current||fe(ue,t),L.current}};return se.cancel=function(){var me=a.current;me&&(N?cancelAnimationFrame(a.current):clearTimeout(a.current)),y.current=0,E.current=p.current=R.current=a.current=null,me&&c&&c({})},se.isPending=function(){return!!a.current},se.flush=function(){return a.current?Te(Date.now()):L.current},se},[q,Q,t,J,Z,N,U,Y,c]);return re}function _Q(e,t){return e===t}function vQ(e,t,r){var c=r&&r.equalityFn||_Q,h=V.useRef(e),p=V.useState({})[1],y=yQ(V.useCallback(function(a){h.current=a,p({})},[p]),t,r,p),b=V.useRef(e);return c(b.current,e)||(y(e),b.current=e),[h.current,y]}function Mw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function o5(e,t){var r=Object.create(e.prototype);for(var c in t)r[c]=t[c];return r}function Gy(){}var Rm=.7,Ey=1/Rm,gy="\\s*([+-]?\\d+)\\s*",vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ff="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xQ=/^#([0-9a-f]{3,8})$/,bQ=new RegExp(`^rgb\\(${gy},${gy},${gy}\\)$`),wQ=new RegExp(`^rgb\\(${ff},${ff},${ff}\\)$`),SQ=new RegExp(`^rgba\\(${gy},${gy},${gy},${vv}\\)$`),TQ=new RegExp(`^rgba\\(${ff},${ff},${ff},${vv}\\)$`),EQ=new RegExp(`^hsl\\(${vv},${ff},${ff}\\)$`),CQ=new RegExp(`^hsla\\(${vv},${ff},${ff},${vv}\\)$`),XL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mw(Gy,xv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YL,formatHex:YL,formatHex8:MQ,formatHsl:AQ,formatRgb:KL,toString:KL});function YL(){return this.rgb().formatHex()}function MQ(){return this.rgb().formatHex8()}function AQ(){return K8(this).formatHsl()}function KL(){return this.rgb().formatRgb()}function xv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=xQ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?QL(t):r===3?new Ko(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Eb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Eb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bQ.exec(e))?new Ko(t[1],t[2],t[3],1):(t=wQ.exec(e))?new Ko(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=SQ.exec(e))?Eb(t[1],t[2],t[3],t[4]):(t=TQ.exec(e))?Eb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EQ.exec(e))?tP(t[1],t[2]/100,t[3]/100,1):(t=CQ.exec(e))?tP(t[1],t[2]/100,t[3]/100,t[4]):XL.hasOwnProperty(e)?QL(XL[e]):e==="transparent"?new Ko(NaN,NaN,NaN,0):null}function QL(e){return new Ko(e>>16&255,e>>8&255,e&255,1)}function Eb(e,t,r,c){return c<=0&&(e=t=r=NaN),new Ko(e,t,r,c)}function Y8(e){return e instanceof Gy||(e=xv(e)),e?(e=e.rgb(),new Ko(e.r,e.g,e.b,e.opacity)):new Ko}function Cy(e,t,r,c){return arguments.length===1?Y8(e):new Ko(e,t,r,c??1)}function Ko(e,t,r,c){this.r=+e,this.g=+t,this.b=+r,this.opacity=+c}Mw(Ko,Cy,o5(Gy,{brighter(e){return e=e==null?Ey:Math.pow(Ey,e),new Ko(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rm:Math.pow(Rm,e),new Ko(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ko(xm(this.r),xm(this.g),xm(this.b),h1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JL,formatHex:JL,formatHex8:RQ,formatRgb:eP,toString:eP}));function JL(){return`#${gm(this.r)}${gm(this.g)}${gm(this.b)}`}function RQ(){return`#${gm(this.r)}${gm(this.g)}${gm(this.b)}${gm((isNaN(this.opacity)?1:this.opacity)*255)}`}function eP(){const e=h1(this.opacity);return`${e===1?"rgb(":"rgba("}${xm(this.r)}, ${xm(this.g)}, ${xm(this.b)}${e===1?")":`, ${e})`}`}function h1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gm(e){return e=xm(e),(e<16?"0":"")+e.toString(16)}function tP(e,t,r,c){return c<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Zc(e,t,r,c)}function K8(e){if(e instanceof Zc)return new Zc(e.h,e.s,e.l,e.opacity);if(e instanceof Gy||(e=xv(e)),!e)return new Zc;if(e instanceof Zc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,c=e.b/255,h=Math.min(t,r,c),p=Math.max(t,r,c),y=NaN,b=p-h,a=(p+h)/2;return b?(t===p?y=(r-c)/b+(r<c)*6:r===p?y=(c-t)/b+2:y=(t-r)/b+4,b/=a<.5?p+h:2-p-h,y*=60):b=a>0&&a<1?0:y,new Zc(y,b,a,e.opacity)}function kQ(e,t,r,c){return arguments.length===1?K8(e):new Zc(e,t,r,c??1)}function Zc(e,t,r,c){this.h=+e,this.s=+t,this.l=+r,this.opacity=+c}Mw(Zc,kQ,o5(Gy,{brighter(e){return e=e==null?Ey:Math.pow(Ey,e),new Zc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rm:Math.pow(Rm,e),new Zc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,c=r+(r<.5?r:1-r)*t,h=2*r-c;return new Ko(wC(e>=240?e-240:e+120,h,c),wC(e,h,c),wC(e<120?e+240:e-120,h,c),this.opacity)},clamp(){return new Zc(nP(this.h),Cb(this.s),Cb(this.l),h1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=h1(this.opacity);return`${e===1?"hsl(":"hsla("}${nP(this.h)}, ${Cb(this.s)*100}%, ${Cb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nP(e){return e=(e||0)%360,e<0?e+360:e}function Cb(e){return Math.max(0,Math.min(1,e||0))}function wC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const IQ=Math.PI/180,zQ=180/Math.PI;var Q8=-.14861,s5=1.78277,l5=-.29227,Aw=-.90649,bv=1.97294,rP=bv*Aw,iP=bv*s5,aP=s5*l5-Aw*Q8;function LQ(e){if(e instanceof bm)return new bm(e.h,e.s,e.l,e.opacity);e instanceof Ko||(e=Y8(e));var t=e.r/255,r=e.g/255,c=e.b/255,h=(aP*c+rP*t-iP*r)/(aP+rP-iP),p=c-h,y=(bv*(r-h)-l5*p)/Aw,b=Math.sqrt(y*y+p*p)/(bv*h*(1-h)),a=b?Math.atan2(y,p)*zQ-120:NaN;return new bm(a<0?a+360:a,b,h,e.opacity)}function mf(e,t,r,c){return arguments.length===1?LQ(e):new bm(e,t,r,c??1)}function bm(e,t,r,c){this.h=+e,this.s=+t,this.l=+r,this.opacity=+c}Mw(bm,mf,o5(Gy,{brighter(e){return e=e==null?Ey:Math.pow(Ey,e),new bm(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rm:Math.pow(Rm,e),new bm(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*IQ,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),c=Math.cos(e),h=Math.sin(e);return new Ko(255*(t+r*(Q8*c+s5*h)),255*(t+r*(l5*c+Aw*h)),255*(t+r*(bv*c)),this.opacity)}}));function PQ(e,t,r,c,h){var p=e*e,y=p*e;return((1-3*e+3*p-y)*t+(4-6*p+3*y)*r+(1+3*e+3*p-3*y)*c+y*h)/6}function DQ(e){var t=e.length-1;return function(r){var c=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),h=e[c],p=e[c+1],y=c>0?e[c-1]:2*h-p,b=c<t-1?e[c+2]:2*p-h;return PQ((r-c/t)*t,y,h,p,b)}}const Rw=e=>()=>e;function J8(e,t){return function(r){return e+r*t}}function OQ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(c){return Math.pow(e+c*t,r)}}function BQ(e,t){var r=t-e;return r?J8(e,r>180||r<-180?r-360*Math.round(r/360):r):Rw(isNaN(e)?t:e)}function FQ(e){return(e=+e)==1?yy:function(t,r){return r-t?OQ(t,r,e):Rw(isNaN(t)?r:t)}}function yy(e,t){var r=t-e;return r?J8(e,r):Rw(isNaN(e)?t:e)}const oP=(function e(t){var r=FQ(t);function c(h,p){var y=r((h=Cy(h)).r,(p=Cy(p)).r),b=r(h.g,p.g),a=r(h.b,p.b),E=yy(h.opacity,p.opacity);return function(R){return h.r=y(R),h.g=b(R),h.b=a(R),h.opacity=E(R),h+""}}return c.gamma=e,c})(1);function jQ(e){return function(t){var r=t.length,c=new Array(r),h=new Array(r),p=new Array(r),y,b;for(y=0;y<r;++y)b=Cy(t[y]),c[y]=b.r||0,h[y]=b.g||0,p[y]=b.b||0;return c=e(c),h=e(h),p=e(p),b.opacity=1,function(a){return b.r=c(a),b.g=h(a),b.b=p(a),b+""}}}var NQ=jQ(DQ);function UQ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,c=t.slice(),h;return function(p){for(h=0;h<r;++h)c[h]=e[h]*(1-p)+t[h]*p;return c}}function $Q(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qQ(e,t){var r=t?t.length:0,c=e?Math.min(r,e.length):0,h=new Array(c),p=new Array(r),y;for(y=0;y<c;++y)h[y]=c5(e[y],t[y]);for(;y<r;++y)p[y]=t[y];return function(b){for(y=0;y<c;++y)p[y]=h[y](b);return p}}function VQ(e,t){var r=new Date;return e=+e,t=+t,function(c){return r.setTime(e*(1-c)+t*c),r}}function wv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function GQ(e,t){var r={},c={},h;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(h in t)h in e?r[h]=c5(e[h],t[h]):c[h]=t[h];return function(p){for(h in r)c[h]=r[h](p);return c}}var w3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SC=new RegExp(w3.source,"g");function HQ(e){return function(){return e}}function WQ(e){return function(t){return e(t)+""}}function eF(e,t){var r=w3.lastIndex=SC.lastIndex=0,c,h,p,y=-1,b=[],a=[];for(e=e+"",t=t+"";(c=w3.exec(e))&&(h=SC.exec(t));)(p=h.index)>r&&(p=t.slice(r,p),b[y]?b[y]+=p:b[++y]=p),(c=c[0])===(h=h[0])?b[y]?b[y]+=h:b[++y]=h:(b[++y]=null,a.push({i:y,x:wv(c,h)})),r=SC.lastIndex;return r<t.length&&(p=t.slice(r),b[y]?b[y]+=p:b[++y]=p),b.length<2?a[0]?WQ(a[0].x):HQ(t):(t=a.length,function(E){for(var R=0,L;R<t;++R)b[(L=a[R]).i]=L.x(E);return b.join("")})}function c5(e,t){var r=typeof t,c;return t==null||r==="boolean"?Rw(t):(r==="number"?wv:r==="string"?(c=xv(t))?(t=c,oP):eF:t instanceof xv?oP:t instanceof Date?VQ:$Q(t)?UQ:Array.isArray(t)?qQ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?GQ:wv)(e,t)}function tF(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function nF(e){return(function t(r){r=+r;function c(h,p){var y=e((h=mf(h)).h,(p=mf(p)).h),b=yy(h.s,p.s),a=yy(h.l,p.l),E=yy(h.opacity,p.opacity);return function(R){return h.h=y(R),h.s=b(R),h.l=a(Math.pow(R,r)),h.opacity=E(R),h+""}}return c.gamma=t,c})(1)}nF(BQ);var u5=nF(yy),TC,sP;function ZQ(){if(sP)return TC;sP=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return TC=t,TC}var EC,lP;function XQ(){if(lP)return EC;lP=1;function e(t){return this.__data__.has(t)}return EC=e,EC}var CC,cP;function f5(){if(cP)return CC;cP=1;var e=XR(),t=ZQ(),r=XQ();function c(h){var p=-1,y=h==null?0:h.length;for(this.__data__=new e;++p<y;)this.add(h[p])}return c.prototype.add=c.prototype.push=t,c.prototype.has=r,CC=c,CC}var MC,uP;function YQ(){if(uP)return MC;uP=1;function e(t,r,c,h){for(var p=t.length,y=c+(h?1:-1);h?y--:++y<p;)if(r(t[y],y,t))return y;return-1}return MC=e,MC}var AC,fP;function KQ(){if(fP)return AC;fP=1;function e(t){return t!==t}return AC=e,AC}var RC,hP;function QQ(){if(hP)return RC;hP=1;function e(t,r,c){for(var h=c-1,p=t.length;++h<p;)if(t[h]===r)return h;return-1}return RC=e,RC}var kC,dP;function JQ(){if(dP)return kC;dP=1;var e=YQ(),t=KQ(),r=QQ();function c(h,p,y){return p===p?r(h,p,y):e(h,t,y)}return kC=c,kC}var IC,pP;function rF(){if(pP)return IC;pP=1;var e=JQ();function t(r,c){var h=r==null?0:r.length;return!!h&&e(r,c,0)>-1}return IC=t,IC}var zC,mP;function iF(){if(mP)return zC;mP=1;function e(t,r,c){for(var h=-1,p=t==null?0:t.length;++h<p;)if(c(r,t[h]))return!0;return!1}return zC=e,zC}var LC,gP;function h5(){if(gP)return LC;gP=1;function e(t,r){return t.has(r)}return LC=e,LC}var PC,yP;function eJ(){if(yP)return PC;yP=1;var e=f5(),t=rF(),r=iF(),c=Ew(),h=Uy(),p=h5(),y=200;function b(a,E,R,L){var P=-1,F=t,U=!0,N=a.length,q=[],Z=E.length;if(!N)return q;R&&(E=c(E,h(R))),L?(F=r,U=!1):E.length>=y&&(F=p,U=!1,E=new e(E));e:for(;++P<N;){var Q=a[P],Y=R==null?Q:R(Q);if(Q=L||Q!==0?Q:0,U&&Y===Y){for(var J=Z;J--;)if(E[J]===Y)continue e;q.push(Q)}else F(E,Y,L)||q.push(Q)}return q}return PC=b,PC}var DC,_P;function tJ(){if(_P)return DC;_P=1;var e=eJ(),t=i5(),r=D8(),c=t(function(h,p){return r(h)?e(h,p):[]});return DC=c,DC}var nJ=tJ();const aF=Ro(nJ);function ia(e){return function(){return e}}const vP=Math.abs,Zo=Math.atan2,om=Math.cos,rJ=Math.max,OC=Math.min,Ju=Math.sin,cy=Math.sqrt,Yo=1e-12,Sv=Math.PI,d1=Sv/2,Vb=2*Sv;function iJ(e){return e>1?0:e<-1?Sv:Math.acos(e)}function xP(e){return e>=1?d1:e<=-1?-d1:Math.asin(e)}const S3=Math.PI,T3=2*S3,um=1e-6,aJ=T3-um;function oF(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function oJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return oF;const r=10**t;return function(c){this._+=c[0];for(let h=1,p=c.length;h<p;++h)this._+=Math.round(arguments[h]*r)/r+c[h]}}class sJ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?oF:oJ(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,c,h){this._append`Q${+t},${+r},${this._x1=+c},${this._y1=+h}`}bezierCurveTo(t,r,c,h,p,y){this._append`C${+t},${+r},${+c},${+h},${this._x1=+p},${this._y1=+y}`}arcTo(t,r,c,h,p){if(t=+t,r=+r,c=+c,h=+h,p=+p,p<0)throw new Error(`negative radius: ${p}`);let y=this._x1,b=this._y1,a=c-t,E=h-r,R=y-t,L=b-r,P=R*R+L*L;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(P>um)if(!(Math.abs(L*a-E*R)>um)||!p)this._append`L${this._x1=t},${this._y1=r}`;else{let F=c-y,U=h-b,N=a*a+E*E,q=F*F+U*U,Z=Math.sqrt(N),Q=Math.sqrt(P),Y=p*Math.tan((S3-Math.acos((N+P-q)/(2*Z*Q)))/2),J=Y/Q,re=Y/Z;Math.abs(J-1)>um&&this._append`L${t+J*R},${r+J*L}`,this._append`A${p},${p},0,0,${+(L*F>R*U)},${this._x1=t+re*a},${this._y1=r+re*E}`}}arc(t,r,c,h,p,y){if(t=+t,r=+r,c=+c,y=!!y,c<0)throw new Error(`negative radius: ${c}`);let b=c*Math.cos(h),a=c*Math.sin(h),E=t+b,R=r+a,L=1^y,P=y?h-p:p-h;this._x1===null?this._append`M${E},${R}`:(Math.abs(this._x1-E)>um||Math.abs(this._y1-R)>um)&&this._append`L${E},${R}`,c&&(P<0&&(P=P%T3+T3),P>aJ?this._append`A${c},${c},0,1,${L},${t-b},${r-a}A${c},${c},0,1,${L},${this._x1=E},${this._y1=R}`:P>um&&this._append`A${c},${c},0,${+(P>=S3)},${L},${this._x1=t+c*Math.cos(p)},${this._y1=r+c*Math.sin(p)}`)}rect(t,r,c,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${c=+c}v${+h}h${-c}Z`}toString(){return this._}}function sF(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const c=Math.floor(r);if(!(c>=0))throw new RangeError(`invalid digits: ${r}`);t=c}return e},()=>new sJ(t)}function lJ(e){return e.innerRadius}function cJ(e){return e.outerRadius}function uJ(e){return e.startAngle}function fJ(e){return e.endAngle}function hJ(e){return e&&e.padAngle}function dJ(e,t,r,c,h,p,y,b){var a=r-e,E=c-t,R=y-h,L=b-p,P=L*a-R*E;if(!(P*P<Yo))return P=(R*(t-p)-L*(e-h))/P,[e+P*a,t+P*E]}function Mb(e,t,r,c,h,p,y){var b=e-r,a=t-c,E=(y?p:-p)/cy(b*b+a*a),R=E*a,L=-E*b,P=e+R,F=t+L,U=r+R,N=c+L,q=(P+U)/2,Z=(F+N)/2,Q=U-P,Y=N-F,J=Q*Q+Y*Y,re=h-p,ae=P*N-U*F,fe=(Y<0?-1:1)*cy(rJ(0,re*re*J-ae*ae)),Se=(ae*Y-Q*fe)/J,Te=(-ae*Q-Y*fe)/J,ue=(ae*Y+Q*fe)/J,_e=(-ae*Q+Y*fe)/J,se=Se-q,me=Te-Z,be=ue-q,Ie=_e-Z;return se*se+me*me>be*be+Ie*Ie&&(Se=ue,Te=_e),{cx:Se,cy:Te,x01:-R,y01:-L,x11:Se*(h/re-1),y11:Te*(h/re-1)}}function pJ(){var e=lJ,t=cJ,r=ia(0),c=null,h=uJ,p=fJ,y=hJ,b=null,a=sF(E);function E(){var R,L,P=+e.apply(this,arguments),F=+t.apply(this,arguments),U=h.apply(this,arguments)-d1,N=p.apply(this,arguments)-d1,q=vP(N-U),Z=N>U;if(b||(b=R=a()),F<P&&(L=F,F=P,P=L),!(F>Yo))b.moveTo(0,0);else if(q>Vb-Yo)b.moveTo(F*om(U),F*Ju(U)),b.arc(0,0,F,U,N,!Z),P>Yo&&(b.moveTo(P*om(N),P*Ju(N)),b.arc(0,0,P,N,U,Z));else{var Q=U,Y=N,J=U,re=N,ae=q,fe=q,Se=y.apply(this,arguments)/2,Te=Se>Yo&&(c?+c.apply(this,arguments):cy(P*P+F*F)),ue=OC(vP(F-P)/2,+r.apply(this,arguments)),_e=ue,se=ue,me,be;if(Te>Yo){var Ie=xP(Te/P*Ju(Se)),pe=xP(Te/F*Ju(Se));(ae-=Ie*2)>Yo?(Ie*=Z?1:-1,J+=Ie,re-=Ie):(ae=0,J=re=(U+N)/2),(fe-=pe*2)>Yo?(pe*=Z?1:-1,Q+=pe,Y-=pe):(fe=0,Q=Y=(U+N)/2)}var Pe=F*om(Q),et=F*Ju(Q),Be=P*om(re),dt=P*Ju(re);if(ue>Yo){var Ce=F*om(Y),Ge=F*Ju(Y),at=P*om(J),nt=P*Ju(J),gt;if(q<Sv)if(gt=dJ(Pe,et,at,nt,Ce,Ge,Be,dt)){var Pt=Pe-gt[0],Ct=et-gt[1],Yt=Ce-gt[0],pt=Ge-gt[1],Rt=1/Ju(iJ((Pt*Yt+Ct*pt)/(cy(Pt*Pt+Ct*Ct)*cy(Yt*Yt+pt*pt)))/2),kt=cy(gt[0]*gt[0]+gt[1]*gt[1]);_e=OC(ue,(P-kt)/(Rt-1)),se=OC(ue,(F-kt)/(Rt+1))}else _e=se=0}fe>Yo?se>Yo?(me=Mb(at,nt,Pe,et,F,se,Z),be=Mb(Ce,Ge,Be,dt,F,se,Z),b.moveTo(me.cx+me.x01,me.cy+me.y01),se<ue?b.arc(me.cx,me.cy,se,Zo(me.y01,me.x01),Zo(be.y01,be.x01),!Z):(b.arc(me.cx,me.cy,se,Zo(me.y01,me.x01),Zo(me.y11,me.x11),!Z),b.arc(0,0,F,Zo(me.cy+me.y11,me.cx+me.x11),Zo(be.cy+be.y11,be.cx+be.x11),!Z),b.arc(be.cx,be.cy,se,Zo(be.y11,be.x11),Zo(be.y01,be.x01),!Z))):(b.moveTo(Pe,et),b.arc(0,0,F,Q,Y,!Z)):b.moveTo(Pe,et),!(P>Yo)||!(ae>Yo)?b.lineTo(Be,dt):_e>Yo?(me=Mb(Be,dt,Ce,Ge,P,-_e,Z),be=Mb(Pe,et,at,nt,P,-_e,Z),b.lineTo(me.cx+me.x01,me.cy+me.y01),_e<ue?b.arc(me.cx,me.cy,_e,Zo(me.y01,me.x01),Zo(be.y01,be.x01),!Z):(b.arc(me.cx,me.cy,_e,Zo(me.y01,me.x01),Zo(me.y11,me.x11),!Z),b.arc(0,0,P,Zo(me.cy+me.y11,me.cx+me.x11),Zo(be.cy+be.y11,be.cx+be.x11),Z),b.arc(be.cx,be.cy,_e,Zo(be.y11,be.x11),Zo(be.y01,be.x01),!Z))):b.arc(0,0,P,re,J,Z)}if(b.closePath(),R)return b=null,R+""||null}return E.centroid=function(){var R=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,L=(+h.apply(this,arguments)+ +p.apply(this,arguments))/2-Sv/2;return[om(L)*R,Ju(L)*R]},E.innerRadius=function(R){return arguments.length?(e=typeof R=="function"?R:ia(+R),E):e},E.outerRadius=function(R){return arguments.length?(t=typeof R=="function"?R:ia(+R),E):t},E.cornerRadius=function(R){return arguments.length?(r=typeof R=="function"?R:ia(+R),E):r},E.padRadius=function(R){return arguments.length?(c=R==null?null:typeof R=="function"?R:ia(+R),E):c},E.startAngle=function(R){return arguments.length?(h=typeof R=="function"?R:ia(+R),E):h},E.endAngle=function(R){return arguments.length?(p=typeof R=="function"?R:ia(+R),E):p},E.padAngle=function(R){return arguments.length?(y=typeof R=="function"?R:ia(+R),E):y},E.context=function(R){return arguments.length?(b=R??null,E):b},E}function d5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lF(e){this._context=e}lF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function cF(e){return new lF(e)}function mJ(e){return e[0]}function gJ(e){return e[1]}function yJ(e,t){var r=ia(!0),c=null,h=cF,p=null,y=sF(b);e=typeof e=="function"?e:e===void 0?mJ:ia(e),t=typeof t=="function"?t:t===void 0?gJ:ia(t);function b(a){var E,R=(a=d5(a)).length,L,P=!1,F;for(c==null&&(p=h(F=y())),E=0;E<=R;++E)!(E<R&&r(L=a[E],E,a))===P&&((P=!P)?p.lineStart():p.lineEnd()),P&&p.point(+e(L,E,a),+t(L,E,a));if(F)return p=null,F+""||null}return b.x=function(a){return arguments.length?(e=typeof a=="function"?a:ia(+a),b):e},b.y=function(a){return arguments.length?(t=typeof a=="function"?a:ia(+a),b):t},b.defined=function(a){return arguments.length?(r=typeof a=="function"?a:ia(!!a),b):r},b.curve=function(a){return arguments.length?(h=a,c!=null&&(p=h(c)),b):h},b.context=function(a){return arguments.length?(a==null?c=p=null:p=h(c=a),b):c},b}function _J(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function vJ(e){return e}function xJ(){var e=vJ,t=_J,r=null,c=ia(0),h=ia(Vb),p=ia(0);function y(b){var a,E=(b=d5(b)).length,R,L,P=0,F=new Array(E),U=new Array(E),N=+c.apply(this,arguments),q=Math.min(Vb,Math.max(-Vb,h.apply(this,arguments)-N)),Z,Q=Math.min(Math.abs(q)/E,p.apply(this,arguments)),Y=Q*(q<0?-1:1),J;for(a=0;a<E;++a)(J=U[F[a]=a]=+e(b[a],a,b))>0&&(P+=J);for(t!=null?F.sort(function(re,ae){return t(U[re],U[ae])}):r!=null&&F.sort(function(re,ae){return r(b[re],b[ae])}),a=0,L=P?(q-E*Y)/P:0;a<E;++a,N=Z)R=F[a],J=U[R],Z=N+(J>0?J*L:0)+Y,U[R]={data:b[R],index:a,value:J,startAngle:N,endAngle:Z,padAngle:Q};return U}return y.value=function(b){return arguments.length?(e=typeof b=="function"?b:ia(+b),y):e},y.sortValues=function(b){return arguments.length?(t=b,r=null,y):t},y.sort=function(b){return arguments.length?(r=b,t=null,y):r},y.startAngle=function(b){return arguments.length?(c=typeof b=="function"?b:ia(+b),y):c},y.endAngle=function(b){return arguments.length?(h=typeof b=="function"?b:ia(+b),y):h},y.padAngle=function(b){return arguments.length?(p=typeof b=="function"?b:ia(+b),y):p},y}function Qd(){}function p1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function kw(e){this._context=e}kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bJ(e){return new kw(e)}function uF(e){this._context=e}uF.prototype={areaStart:Qd,areaEnd:Qd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wJ(e){return new uF(e)}function fF(e){this._context=e}fF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,c=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,c):this._context.moveTo(r,c);break;case 3:this._point=4;default:p1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SJ(e){return new fF(e)}function hF(e,t){this._basis=new kw(e),this._beta=t}hF.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var c=e[0],h=t[0],p=e[r]-c,y=t[r]-h,b=-1,a;++b<=r;)a=b/r,this._basis.point(this._beta*e[b]+(1-this._beta)*(c+a*p),this._beta*t[b]+(1-this._beta)*(h+a*y));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const TJ=(function e(t){function r(c){return t===1?new kw(c):new hF(c,t)}return r.beta=function(c){return e(+c)},r})(.85);function m1(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function p5(e,t){this._context=e,this._k=(1-t)/6}p5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:m1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:m1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const EJ=(function e(t){function r(c){return new p5(c,t)}return r.tension=function(c){return e(+c)},r})(0);function m5(e,t){this._context=e,this._k=(1-t)/6}m5.prototype={areaStart:Qd,areaEnd:Qd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:m1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const CJ=(function e(t){function r(c){return new m5(c,t)}return r.tension=function(c){return e(+c)},r})(0);function g5(e,t){this._context=e,this._k=(1-t)/6}g5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:m1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const MJ=(function e(t){function r(c){return new g5(c,t)}return r.tension=function(c){return e(+c)},r})(0);function y5(e,t,r){var c=e._x1,h=e._y1,p=e._x2,y=e._y2;if(e._l01_a>Yo){var b=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,a=3*e._l01_a*(e._l01_a+e._l12_a);c=(c*b-e._x0*e._l12_2a+e._x2*e._l01_2a)/a,h=(h*b-e._y0*e._l12_2a+e._y2*e._l01_2a)/a}if(e._l23_a>Yo){var E=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,R=3*e._l23_a*(e._l23_a+e._l12_a);p=(p*E+e._x1*e._l23_2a-t*e._l12_2a)/R,y=(y*E+e._y1*e._l23_2a-r*e._l12_2a)/R}e._context.bezierCurveTo(c,h,p,y,e._x2,e._y2)}function dF(e,t){this._context=e,this._alpha=t}dF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,c=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+c*c,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:y5(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const AJ=(function e(t){function r(c){return t?new dF(c,t):new p5(c,0)}return r.alpha=function(c){return e(+c)},r})(.5);function pF(e,t){this._context=e,this._alpha=t}pF.prototype={areaStart:Qd,areaEnd:Qd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,c=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+c*c,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:y5(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RJ=(function e(t){function r(c){return t?new pF(c,t):new m5(c,0)}return r.alpha=function(c){return e(+c)},r})(.5);function mF(e,t){this._context=e,this._alpha=t}mF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,c=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+c*c,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:y5(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kJ=(function e(t){function r(c){return t?new mF(c,t):new g5(c,0)}return r.alpha=function(c){return e(+c)},r})(.5);function gF(e){this._context=e}gF.prototype={areaStart:Qd,areaEnd:Qd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function IJ(e){return new gF(e)}function bP(e){return e<0?-1:1}function wP(e,t,r){var c=e._x1-e._x0,h=t-e._x1,p=(e._y1-e._y0)/(c||h<0&&-0),y=(r-e._y1)/(h||c<0&&-0),b=(p*h+y*c)/(c+h);return(bP(p)+bP(y))*Math.min(Math.abs(p),Math.abs(y),.5*Math.abs(b))||0}function SP(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function BC(e,t,r){var c=e._x0,h=e._y0,p=e._x1,y=e._y1,b=(p-c)/3;e._context.bezierCurveTo(c+b,h+b*t,p-b,y-b*r,p,y)}function g1(e){this._context=e}g1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BC(this,this._t0,SP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,BC(this,SP(this,r=wP(this,e,t)),r);break;default:BC(this,this._t0,r=wP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function yF(e){this._context=new _F(e)}(yF.prototype=Object.create(g1.prototype)).point=function(e,t){g1.prototype.point.call(this,t,e)};function _F(e){this._context=e}_F.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,c,h,p){this._context.bezierCurveTo(t,e,c,r,p,h)}};function zJ(e){return new g1(e)}function LJ(e){return new yF(e)}function vF(e){this._context=e}vF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var c=TP(e),h=TP(t),p=0,y=1;y<r;++p,++y)this._context.bezierCurveTo(c[0][p],h[0][p],c[1][p],h[1][p],e[y],t[y]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function TP(e){var t,r=e.length-1,c,h=new Array(r),p=new Array(r),y=new Array(r);for(h[0]=0,p[0]=2,y[0]=e[0]+2*e[1],t=1;t<r-1;++t)h[t]=1,p[t]=4,y[t]=4*e[t]+2*e[t+1];for(h[r-1]=2,p[r-1]=7,y[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)c=h[t]/p[t-1],p[t]-=c,y[t]-=c*y[t-1];for(h[r-1]=y[r-1]/p[r-1],t=r-2;t>=0;--t)h[t]=(y[t]-h[t+1])/p[t];for(p[r-1]=(e[r]+h[r-1])/2,t=0;t<r-1;++t)p[t]=2*e[t+1]-h[t+1];return[h,p]}function PJ(e){return new vF(e)}function Iw(e,t){this._context=e,this._t=t}Iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function DJ(e){return new Iw(e,.5)}function OJ(e){return new Iw(e,0)}function BJ(e){return new Iw(e,1)}function EP(e,t){if((y=e.length)>1)for(var r=1,c,h,p=e[t[0]],y,b=p.length;r<y;++r)for(h=p,p=e[t[r]],c=0;c<b;++c)p[c][1]+=p[c][0]=isNaN(h[c][1])?h[c][0]:h[c][1]}function CP(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function FJ(e,t){return e[t]}function jJ(e){const t=[];return t.key=e,t}function NJ(){var e=ia([]),t=CP,r=EP,c=FJ;function h(p){var y=Array.from(e.apply(this,arguments),jJ),b,a=y.length,E=-1,R;for(const L of p)for(b=0,++E;b<a;++b)(y[b][E]=[0,+c(L,y[b].key,E,p)]).data=L;for(b=0,R=d5(t(y));b<a;++b)y[R[b]].index=b;return r(y,R),y}return h.keys=function(p){return arguments.length?(e=typeof p=="function"?p:ia(Array.from(p)),h):e},h.value=function(p){return arguments.length?(c=typeof p=="function"?p:ia(+p),h):c},h.order=function(p){return arguments.length?(t=p==null?CP:typeof p=="function"?p:ia(Array.from(p)),h):t},h.offset=function(p){return arguments.length?(r=p??EP,h):r},h}function UJ(e,t){if((a=e.length)>0)for(var r,c=0,h,p,y,b,a,E=e[t[0]].length;c<E;++c)for(y=b=0,r=0;r<a;++r)(p=(h=e[t[r]][c])[1]-h[0])>0?(h[0]=y,h[1]=y+=p):p<0?(h[1]=b,h[0]=b+=p):(h[0]=0,h[1]=p)}function xF(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _5(e){let t=e,r=e;e.length===1&&(t=(y,b)=>e(y)-b,r=$J(e));function c(y,b,a,E){for(a==null&&(a=0),E==null&&(E=y.length);a<E;){const R=a+E>>>1;r(y[R],b)<0?a=R+1:E=R}return a}function h(y,b,a,E){for(a==null&&(a=0),E==null&&(E=y.length);a<E;){const R=a+E>>>1;r(y[R],b)>0?E=R:a=R+1}return a}function p(y,b,a,E){a==null&&(a=0),E==null&&(E=y.length);const R=c(y,b,a,E-1);return R>a&&t(y[R-1],b)>-t(y[R],b)?R-1:R}return{left:c,center:p,right:h}}function $J(e){return(t,r)=>xF(e(t),r)}function qJ(e){return e===null?NaN:+e}const VJ=_5(xF),GJ=VJ.right;_5(qJ).center;class MP extends Map{constructor(t,r=ZJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[c,h]of t)this.set(c,h)}get(t){return super.get(AP(this,t))}has(t){return super.has(AP(this,t))}set(t,r){return super.set(HJ(this,t),r)}delete(t){return super.delete(WJ(this,t))}}function AP({_intern:e,_key:t},r){const c=t(r);return e.has(c)?e.get(c):r}function HJ({_intern:e,_key:t},r){const c=t(r);return e.has(c)?e.get(c):(e.set(c,r),r)}function WJ({_intern:e,_key:t},r){const c=t(r);return e.has(c)&&(r=e.get(r),e.delete(c)),r}function ZJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}var E3=Math.sqrt(50),C3=Math.sqrt(10),M3=Math.sqrt(2);function A3(e,t,r){var c,h=-1,p,y,b;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((c=t<e)&&(p=e,e=t,t=p),(b=bF(e,t,r))===0||!isFinite(b))return[];if(b>0){let a=Math.round(e/b),E=Math.round(t/b);for(a*b<e&&++a,E*b>t&&--E,y=new Array(p=E-a+1);++h<p;)y[h]=(a+h)*b}else{b=-b;let a=Math.round(e*b),E=Math.round(t*b);for(a/b<e&&++a,E/b>t&&--E,y=new Array(p=E-a+1);++h<p;)y[h]=(a+h)/b}return c&&y.reverse(),y}function bF(e,t,r){var c=(t-e)/Math.max(0,r),h=Math.floor(Math.log(c)/Math.LN10),p=c/Math.pow(10,h);return h>=0?(p>=E3?10:p>=C3?5:p>=M3?2:1)*Math.pow(10,h):-Math.pow(10,-h)/(p>=E3?10:p>=C3?5:p>=M3?2:1)}function R3(e,t,r){var c=Math.abs(t-e)/Math.max(0,r),h=Math.pow(10,Math.floor(Math.log(c)/Math.LN10)),p=c/h;return p>=E3?h*=10:p>=C3?h*=5:p>=M3&&(h*=2),t<e?-h:h}function XJ(e,t,r){e=+e,t=+t,r=(h=arguments.length)<2?(t=e,e=0,1):h<3?1:+r;for(var c=-1,h=Math.max(0,Math.ceil((t-e)/r))|0,p=new Array(h);++c<h;)p[c]=e+c*r;return p}function jm(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const RP=Symbol("implicit");function ym(){var e=new MP,t=[],r=[],c=RP;function h(p){let y=e.get(p);if(y===void 0){if(c!==RP)return c;e.set(p,y=t.push(p)-1)}return r[y%r.length]}return h.domain=function(p){if(!arguments.length)return t.slice();t=[],e=new MP;for(const y of p)e.has(y)||e.set(y,t.push(y)-1);return h},h.range=function(p){return arguments.length?(r=Array.from(p),h):r.slice()},h.unknown=function(p){return arguments.length?(c=p,h):c},h.copy=function(){return ym(t,r).unknown(c)},jm.apply(h,arguments),h}function v5(){var e=ym().unknown(void 0),t=e.domain,r=e.range,c=0,h=1,p,y,b=!1,a=0,E=0,R=.5;delete e.unknown;function L(){var P=t().length,F=h<c,U=F?h:c,N=F?c:h;p=(N-U)/Math.max(1,P-a+E*2),b&&(p=Math.floor(p)),U+=(N-U-p*(P-a))*R,y=p*(1-a),b&&(U=Math.round(U),y=Math.round(y));var q=XJ(P).map(function(Z){return U+p*Z});return r(F?q.reverse():q)}return e.domain=function(P){return arguments.length?(t(P),L()):t()},e.range=function(P){return arguments.length?([c,h]=P,c=+c,h=+h,L()):[c,h]},e.rangeRound=function(P){return[c,h]=P,c=+c,h=+h,b=!0,L()},e.bandwidth=function(){return y},e.step=function(){return p},e.round=function(P){return arguments.length?(b=!!P,L()):b},e.padding=function(P){return arguments.length?(a=Math.min(1,E=+P),L()):a},e.paddingInner=function(P){return arguments.length?(a=Math.min(1,P),L()):a},e.paddingOuter=function(P){return arguments.length?(E=+P,L()):E},e.align=function(P){return arguments.length?(R=Math.max(0,Math.min(1,P)),L()):R},e.copy=function(){return v5(t(),[c,h]).round(b).paddingInner(a).paddingOuter(E).align(R)},jm.apply(L(),arguments)}function wF(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return wF(t())},e}function YJ(){return wF(v5.apply(null,arguments).paddingInner(1))}function KJ(e){return function(){return e}}function QJ(e){return+e}var kP=[0,1];function uy(e){return e}function k3(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:KJ(isNaN(t)?NaN:.5)}function JJ(e,t){var r;return e>t&&(r=e,e=t,t=r),function(c){return Math.max(e,Math.min(t,c))}}function eee(e,t,r){var c=e[0],h=e[1],p=t[0],y=t[1];return h<c?(c=k3(h,c),p=r(y,p)):(c=k3(c,h),p=r(p,y)),function(b){return p(c(b))}}function tee(e,t,r){var c=Math.min(e.length,t.length)-1,h=new Array(c),p=new Array(c),y=-1;for(e[c]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++y<c;)h[y]=k3(e[y],e[y+1]),p[y]=r(t[y],t[y+1]);return function(b){var a=GJ(e,b,1,c)-1;return p[a](h[a](b))}}function zw(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function x5(){var e=kP,t=kP,r=c5,c,h,p,y=uy,b,a,E;function R(){var P=Math.min(e.length,t.length);return y!==uy&&(y=JJ(e[0],e[P-1])),b=P>2?tee:eee,a=E=null,L}function L(P){return P==null||isNaN(P=+P)?p:(a||(a=b(e.map(c),t,r)))(c(y(P)))}return L.invert=function(P){return y(h((E||(E=b(t,e.map(c),wv)))(P)))},L.domain=function(P){return arguments.length?(e=Array.from(P,QJ),R()):e.slice()},L.range=function(P){return arguments.length?(t=Array.from(P),R()):t.slice()},L.rangeRound=function(P){return t=Array.from(P),r=tF,R()},L.clamp=function(P){return arguments.length?(y=P?!0:uy,R()):y!==uy},L.interpolate=function(P){return arguments.length?(r=P,R()):r},L.unknown=function(P){return arguments.length?(p=P,L):p},function(P,F){return c=P,h=F,R()}}function SF(){return x5()(uy,uy)}function nee(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function y1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,c=e.slice(0,r);return[c.length>1?c[0]+c.slice(2):c,+e.slice(r+1)]}function My(e){return e=y1(Math.abs(e)),e?e[1]:NaN}function ree(e,t){return function(r,c){for(var h=r.length,p=[],y=0,b=e[0],a=0;h>0&&b>0&&(a+b+1>c&&(b=Math.max(1,c-a)),p.push(r.substring(h-=b,h+b)),!((a+=b+1)>c));)b=e[y=(y+1)%e.length];return p.reverse().join(t)}}function iee(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var aee=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tv(e){if(!(t=aee.exec(e)))throw new Error("invalid format: "+e);var t;return new b5({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tv.prototype=b5.prototype;function b5(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}b5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oee(e){e:for(var t=e.length,r=1,c=-1,h;r<t;++r)switch(e[r]){case".":c=h=r;break;case"0":c===0&&(c=r),h=r;break;default:if(!+e[r])break e;c>0&&(c=0);break}return c>0?e.slice(0,c)+e.slice(h+1):e}var TF;function see(e,t){var r=y1(e,t);if(!r)return e+"";var c=r[0],h=r[1],p=h-(TF=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,y=c.length;return p===y?c:p>y?c+new Array(p-y+1).join("0"):p>0?c.slice(0,p)+"."+c.slice(p):"0."+new Array(1-p).join("0")+y1(e,Math.max(0,t+p-1))[0]}function IP(e,t){var r=y1(e,t);if(!r)return e+"";var c=r[0],h=r[1];return h<0?"0."+new Array(-h).join("0")+c:c.length>h+1?c.slice(0,h+1)+"."+c.slice(h+1):c+new Array(h-c.length+2).join("0")}const zP={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:nee,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return IP(e*100,t)},r:IP,s:see,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function LP(e){return e}var PP=Array.prototype.map,DP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function lee(e){var t=e.grouping===void 0||e.thousands===void 0?LP:ree(PP.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",c=e.currency===void 0?"":e.currency[1]+"",h=e.decimal+"",p=e.numerals===void 0?LP:iee(PP.call(e.numerals,String)),y=e.percent===void 0?"%":e.percent+"",b=e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function E(L){L=Tv(L);var P=L.fill,F=L.align,U=L.sign,N=L.symbol,q=L.zero,Z=L.width,Q=L.comma,Y=L.precision,J=L.trim,re=L.type;re==="n"?(Q=!0,re="g"):zP[re]||(Y===void 0&&(Y=12),J=!0,re="g"),(q||P==="0"&&F==="=")&&(q=!0,P="0",F="=");var ae=N==="$"?r:N==="#"&&/[boxX]/.test(re)?"0"+re.toLowerCase():"",fe=N==="$"?c:/[%p]/.test(re)?y:"",Se=zP[re],Te=/[defgprs%]/.test(re);Y=Y===void 0?6:/[gprs]/.test(re)?Math.max(1,Math.min(21,Y)):Math.max(0,Math.min(20,Y));function ue(_e){var se=ae,me=fe,be,Ie,pe;if(re==="c")me=Se(_e)+me,_e="";else{_e=+_e;var Pe=_e<0||1/_e<0;if(_e=isNaN(_e)?a:Se(Math.abs(_e),Y),J&&(_e=oee(_e)),Pe&&+_e==0&&U!=="+"&&(Pe=!1),se=(Pe?U==="("?U:b:U==="-"||U==="("?"":U)+se,me=(re==="s"?DP[8+TF/3]:"")+me+(Pe&&U==="("?")":""),Te){for(be=-1,Ie=_e.length;++be<Ie;)if(pe=_e.charCodeAt(be),48>pe||pe>57){me=(pe===46?h+_e.slice(be+1):_e.slice(be))+me,_e=_e.slice(0,be);break}}}Q&&!q&&(_e=t(_e,1/0));var et=se.length+_e.length+me.length,Be=et<Z?new Array(Z-et+1).join(P):"";switch(Q&&q&&(_e=t(Be+_e,Be.length?Z-me.length:1/0),Be=""),F){case"<":_e=se+_e+me+Be;break;case"=":_e=se+Be+_e+me;break;case"^":_e=Be.slice(0,et=Be.length>>1)+se+_e+me+Be.slice(et);break;default:_e=Be+se+_e+me;break}return p(_e)}return ue.toString=function(){return L+""},ue}function R(L,P){var F=E((L=Tv(L),L.type="f",L)),U=Math.max(-8,Math.min(8,Math.floor(My(P)/3)))*3,N=Math.pow(10,-U),q=DP[8+U/3];return function(Z){return F(N*Z)+q}}return{format:E,formatPrefix:R}}var Ab,Zv,EF;cee({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function cee(e){return Ab=lee(e),Zv=Ab.format,EF=Ab.formatPrefix,Ab}function uee(e){return Math.max(0,-My(Math.abs(e)))}function fee(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(My(t)/3)))*3-My(Math.abs(e)))}function hee(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,My(t)-My(e))+1}function dee(e,t,r,c){var h=R3(e,t,r),p;switch(c=Tv(c??",f"),c.type){case"s":{var y=Math.max(Math.abs(e),Math.abs(t));return c.precision==null&&!isNaN(p=fee(h,y))&&(c.precision=p),EF(c,y)}case"":case"e":case"g":case"p":case"r":{c.precision==null&&!isNaN(p=hee(h,Math.max(Math.abs(e),Math.abs(t))))&&(c.precision=p-(c.type==="e"));break}case"f":case"%":{c.precision==null&&!isNaN(p=uee(h))&&(c.precision=p-(c.type==="%")*2);break}}return Zv(c)}function CF(e){var t=e.domain;return e.ticks=function(r){var c=t();return A3(c[0],c[c.length-1],r??10)},e.tickFormat=function(r,c){var h=t();return dee(h[0],h[h.length-1],r??10,c)},e.nice=function(r){r==null&&(r=10);var c=t(),h=0,p=c.length-1,y=c[h],b=c[p],a,E,R=10;for(b<y&&(E=y,y=b,b=E,E=h,h=p,p=E);R-- >0;){if(E=bF(y,b,r),E===a)return c[h]=y,c[p]=b,t(c);if(E>0)y=Math.floor(y/E)*E,b=Math.ceil(b/E)*E;else if(E<0)y=Math.ceil(y*E)/E,b=Math.floor(b*E)/E;else break;a=E}return e},e}function MF(){var e=SF();return e.copy=function(){return zw(e,MF())},jm.apply(e,arguments),CF(e)}function AF(e,t){e=e.slice();var r=0,c=e.length-1,h=e[r],p=e[c],y;return p<h&&(y=r,r=c,c=y,y=h,h=p,p=y),e[r]=t.floor(h),e[c]=t.ceil(p),e}function OP(e){return Math.log(e)}function BP(e){return Math.exp(e)}function pee(e){return-Math.log(-e)}function mee(e){return-Math.exp(-e)}function gee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yee(e){return e===10?gee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function _ee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FP(e){return(t,r)=>-e(-t,r)}function vee(e){const t=e(OP,BP),r=t.domain;let c=10,h,p;function y(){return h=_ee(c),p=yee(c),r()[0]<0?(h=FP(h),p=FP(p),e(pee,mee)):e(OP,BP),t}return t.base=function(b){return arguments.length?(c=+b,y()):c},t.domain=function(b){return arguments.length?(r(b),y()):r()},t.ticks=b=>{const a=r();let E=a[0],R=a[a.length-1];const L=R<E;L&&([E,R]=[R,E]);let P=h(E),F=h(R),U,N;const q=b==null?10:+b;let Z=[];if(!(c%1)&&F-P<q){if(P=Math.floor(P),F=Math.ceil(F),E>0){for(;P<=F;++P)for(U=1;U<c;++U)if(N=P<0?U/p(-P):U*p(P),!(N<E)){if(N>R)break;Z.push(N)}}else for(;P<=F;++P)for(U=c-1;U>=1;--U)if(N=P>0?U/p(-P):U*p(P),!(N<E)){if(N>R)break;Z.push(N)}Z.length*2<q&&(Z=A3(E,R,q))}else Z=A3(P,F,Math.min(F-P,q)).map(p);return L?Z.reverse():Z},t.tickFormat=(b,a)=>{if(b==null&&(b=10),a==null&&(a=c===10?"s":","),typeof a!="function"&&(!(c%1)&&(a=Tv(a)).precision==null&&(a.trim=!0),a=Zv(a)),b===1/0)return a;const E=Math.max(1,c*b/t.ticks().length);return R=>{let L=R/p(Math.round(h(R)));return L*c<c-.5&&(L*=c),L<=E?a(R):""}},t.nice=()=>r(AF(r(),{floor:b=>p(Math.floor(h(b))),ceil:b=>p(Math.ceil(h(b)))})),t}function RF(){const e=vee(x5()).domain([1,10]);return e.copy=()=>zw(e,RF()).base(e.base()),jm.apply(e,arguments),e}function jP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function xee(e){var t=1,r=e(jP(t),NP(t));return r.constant=function(c){return arguments.length?e(jP(t=+c),NP(t)):t},CF(r)}function kF(){var e=xee(x5());return e.copy=function(){return zw(e,kF()).constant(e.constant())},jm.apply(e,arguments)}var FC=new Date,jC=new Date;function go(e,t,r,c){function h(p){return e(p=arguments.length===0?new Date:new Date(+p)),p}return h.floor=function(p){return e(p=new Date(+p)),p},h.ceil=function(p){return e(p=new Date(p-1)),t(p,1),e(p),p},h.round=function(p){var y=h(p),b=h.ceil(p);return p-y<b-p?y:b},h.offset=function(p,y){return t(p=new Date(+p),y==null?1:Math.floor(y)),p},h.range=function(p,y,b){var a=[],E;if(p=h.ceil(p),b=b==null?1:Math.floor(b),!(p<y)||!(b>0))return a;do a.push(E=new Date(+p)),t(p,b),e(p);while(E<p&&p<y);return a},h.filter=function(p){return go(function(y){if(y>=y)for(;e(y),!p(y);)y.setTime(y-1)},function(y,b){if(y>=y)if(b<0)for(;++b<=0;)for(;t(y,-1),!p(y););else for(;--b>=0;)for(;t(y,1),!p(y););})},r&&(h.count=function(p,y){return FC.setTime(+p),jC.setTime(+y),e(FC),e(jC),Math.floor(r(FC,jC))},h.every=function(p){return p=Math.floor(p),!isFinite(p)||!(p>0)?null:p>1?h.filter(c?function(y){return c(y)%p===0}:function(y){return h.count(0,y)%p===0}):h}),h}var _1=go(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});_1.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?go(function(t){t.setTime(Math.floor(t/e)*e)},function(t,r){t.setTime(+t+r*e)},function(t,r){return(r-t)/e}):_1};_1.range;const Sh=1e3,Hl=Sh*60,Th=Hl*60,km=Th*24,w5=km*7,UP=km*30,NC=km*365;var _m=go(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Sh)},function(e,t){return(t-e)/Sh},function(e){return e.getUTCSeconds()});_m.range;var S5=go(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sh)},function(e,t){e.setTime(+e+t*Hl)},function(e,t){return(t-e)/Hl},function(e){return e.getMinutes()});S5.range;var T5=go(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sh-e.getMinutes()*Hl)},function(e,t){e.setTime(+e+t*Th)},function(e,t){return(t-e)/Th},function(e){return e.getHours()});T5.range;var E5=go(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hl)/km,e=>e.getDate()-1);E5.range;function Nm(e){return go(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,r){t.setDate(t.getDate()+r*7)},function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Hl)/w5})}var C5=Nm(0),bee=Nm(1),wee=Nm(2),See=Nm(3),Tee=Nm(4),Eee=Nm(5),Cee=Nm(6);C5.range;bee.range;wee.range;See.range;Tee.range;Eee.range;Cee.range;var M5=go(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});M5.range;var Lw=go(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Lw.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:go(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)})};Lw.range;var A5=go(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Hl)},function(e,t){return(t-e)/Hl},function(e){return e.getUTCMinutes()});A5.range;var R5=go(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*Th)},function(e,t){return(t-e)/Th},function(e){return e.getUTCHours()});R5.range;var k5=go(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/km},function(e){return e.getUTCDate()-1});k5.range;function Um(e){return go(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r*7)},function(t,r){return(r-t)/w5})}var I5=Um(0),Mee=Um(1),Aee=Um(2),Ree=Um(3),kee=Um(4),Iee=Um(5),zee=Um(6);I5.range;Mee.range;Aee.range;Ree.range;kee.range;Iee.range;zee.range;var z5=go(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});z5.range;var Pw=go(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Pw.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:go(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})};Pw.range;function IF(e,t,r,c,h,p){const y=[[_m,1,Sh],[_m,5,5*Sh],[_m,15,15*Sh],[_m,30,30*Sh],[p,1,Hl],[p,5,5*Hl],[p,15,15*Hl],[p,30,30*Hl],[h,1,Th],[h,3,3*Th],[h,6,6*Th],[h,12,12*Th],[c,1,km],[c,2,2*km],[r,1,w5],[t,1,UP],[t,3,3*UP],[e,1,NC]];function b(E,R,L){const P=R<E;P&&([E,R]=[R,E]);const F=L&&typeof L.range=="function"?L:a(E,R,L),U=F?F.range(E,+R+1):[];return P?U.reverse():U}function a(E,R,L){const P=Math.abs(R-E)/L,F=_5(([,,q])=>q).right(y,P);if(F===y.length)return e.every(R3(E/NC,R/NC,L));if(F===0)return _1.every(Math.max(R3(E,R,L),1));const[U,N]=y[P/y[F-1][2]<y[F][2]/P?F-1:F];return U.every(N)}return[b,a]}const[Lee,Pee]=IF(Pw,z5,I5,k5,R5,A5),[Dee,Oee]=IF(Lw,M5,C5,E5,T5,S5);var UC=new Date,$C=new Date;function Za(e,t,r,c){function h(p){return e(p=arguments.length===0?new Date:new Date(+p)),p}return h.floor=function(p){return e(p=new Date(+p)),p},h.ceil=function(p){return e(p=new Date(p-1)),t(p,1),e(p),p},h.round=function(p){var y=h(p),b=h.ceil(p);return p-y<b-p?y:b},h.offset=function(p,y){return t(p=new Date(+p),y==null?1:Math.floor(y)),p},h.range=function(p,y,b){var a=[],E;if(p=h.ceil(p),b=b==null?1:Math.floor(b),!(p<y)||!(b>0))return a;do a.push(E=new Date(+p)),t(p,b),e(p);while(E<p&&p<y);return a},h.filter=function(p){return Za(function(y){if(y>=y)for(;e(y),!p(y);)y.setTime(y-1)},function(y,b){if(y>=y)if(b<0)for(;++b<=0;)for(;t(y,-1),!p(y););else for(;--b>=0;)for(;t(y,1),!p(y););})},r&&(h.count=function(p,y){return UC.setTime(+p),$C.setTime(+y),e(UC),e($C),Math.floor(r(UC,$C))},h.every=function(p){return p=Math.floor(p),!isFinite(p)||!(p>0)?null:p>1?h.filter(c?function(y){return c(y)%p===0}:function(y){return h.count(0,y)%p===0}):h}),h}var Ev=Za(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Ev.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Za(function(t){t.setTime(Math.floor(t/e)*e)},function(t,r){t.setTime(+t+r*e)},function(t,r){return(r-t)/e}):Ev};Ev.range;var v1=1e3,Im=6e4,x1=36e5,zF=864e5,LF=6048e5,I3=Za(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*v1)},function(e,t){return(t-e)/v1},function(e){return e.getUTCSeconds()});I3.range;var PF=Za(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*v1)},function(e,t){e.setTime(+e+t*Im)},function(e,t){return(t-e)/Im},function(e){return e.getMinutes()});PF.range;var DF=Za(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*v1-e.getMinutes()*Im)},function(e,t){e.setTime(+e+t*x1)},function(e,t){return(t-e)/x1},function(e){return e.getHours()});DF.range;var L5=Za(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Im)/zF},function(e){return e.getDate()-1});L5.range;function $m(e){return Za(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,r){t.setDate(t.getDate()+r*7)},function(t,r){return(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Im)/LF})}var b1=$m(0),Cv=$m(1),OF=$m(2),BF=$m(3),zm=$m(4),FF=$m(5),jF=$m(6);b1.range;Cv.range;OF.range;BF.range;zm.range;FF.range;jF.range;var NF=Za(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});NF.range;var Jd=Za(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Jd.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Za(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r*e)})};Jd.range;var UF=Za(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Im)},function(e,t){return(t-e)/Im},function(e){return e.getUTCMinutes()});UF.range;var $F=Za(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*x1)},function(e,t){return(t-e)/x1},function(e){return e.getUTCHours()});$F.range;var P5=Za(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/zF},function(e){return e.getUTCDate()-1});P5.range;function qm(e){return Za(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r*7)},function(t,r){return(r-t)/LF})}var w1=qm(0),Mv=qm(1),qF=qm(2),VF=qm(3),Lm=qm(4),GF=qm(5),HF=qm(6);w1.range;Mv.range;qF.range;VF.range;Lm.range;GF.range;HF.range;var WF=Za(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});WF.range;var ep=Za(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ep.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Za(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})};ep.range;function qC(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function VC(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function k0(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Bee(e){var t=e.dateTime,r=e.date,c=e.time,h=e.periods,p=e.days,y=e.shortDays,b=e.months,a=e.shortMonths,E=I0(h),R=z0(h),L=I0(p),P=z0(p),F=I0(y),U=z0(y),N=I0(b),q=z0(b),Z=I0(a),Q=z0(a),Y={a:Pe,A:et,b:Be,B:dt,c:null,d:WP,e:WP,f:ote,g:gte,G:_te,H:rte,I:ite,j:ate,L:ZF,m:ste,M:lte,p:Ce,q:Ge,Q:YP,s:KP,S:cte,u:ute,U:fte,V:hte,w:dte,W:pte,x:null,X:null,y:mte,Y:yte,Z:vte,"%":XP},J={a:at,A:nt,b:gt,B:Pt,c:null,d:ZP,e:ZP,f:Ste,g:Lte,G:Dte,H:xte,I:bte,j:wte,L:YF,m:Tte,M:Ete,p:Ct,q:Yt,Q:YP,s:KP,S:Cte,u:Mte,U:Ate,V:Rte,w:kte,W:Ite,x:null,X:null,y:zte,Y:Pte,Z:Ote,"%":XP},re={a:ue,A:_e,b:se,B:me,c:be,d:GP,e:GP,f:Jee,g:VP,G:qP,H:HP,I:HP,j:Xee,L:Qee,m:Zee,M:Yee,p:Te,q:Wee,Q:tte,s:nte,S:Kee,u:$ee,U:qee,V:Vee,w:Uee,W:Gee,x:Ie,X:pe,y:VP,Y:qP,Z:Hee,"%":ete};Y.x=ae(r,Y),Y.X=ae(c,Y),Y.c=ae(t,Y),J.x=ae(r,J),J.X=ae(c,J),J.c=ae(t,J);function ae(pt,Rt){return function(kt){var Xe=[],xn=-1,Vt=0,Kt=pt.length,sn,Jt,zn;for(kt instanceof Date||(kt=new Date(+kt));++xn<Kt;)pt.charCodeAt(xn)===37&&(Xe.push(pt.slice(Vt,xn)),(Jt=$P[sn=pt.charAt(++xn)])!=null?sn=pt.charAt(++xn):Jt=sn==="e"?" ":"0",(zn=Rt[sn])&&(sn=zn(kt,Jt)),Xe.push(sn),Vt=xn+1);return Xe.push(pt.slice(Vt,xn)),Xe.join("")}}function fe(pt,Rt){return function(kt){var Xe=k0(1900,void 0,1),xn=Se(Xe,pt,kt+="",0),Vt,Kt;if(xn!=kt.length)return null;if("Q"in Xe)return new Date(Xe.Q);if("s"in Xe)return new Date(Xe.s*1e3+("L"in Xe?Xe.L:0));if(Rt&&!("Z"in Xe)&&(Xe.Z=0),"p"in Xe&&(Xe.H=Xe.H%12+Xe.p*12),Xe.m===void 0&&(Xe.m="q"in Xe?Xe.q:0),"V"in Xe){if(Xe.V<1||Xe.V>53)return null;"w"in Xe||(Xe.w=1),"Z"in Xe?(Vt=VC(k0(Xe.y,0,1)),Kt=Vt.getUTCDay(),Vt=Kt>4||Kt===0?Mv.ceil(Vt):Mv(Vt),Vt=P5.offset(Vt,(Xe.V-1)*7),Xe.y=Vt.getUTCFullYear(),Xe.m=Vt.getUTCMonth(),Xe.d=Vt.getUTCDate()+(Xe.w+6)%7):(Vt=qC(k0(Xe.y,0,1)),Kt=Vt.getDay(),Vt=Kt>4||Kt===0?Cv.ceil(Vt):Cv(Vt),Vt=L5.offset(Vt,(Xe.V-1)*7),Xe.y=Vt.getFullYear(),Xe.m=Vt.getMonth(),Xe.d=Vt.getDate()+(Xe.w+6)%7)}else("W"in Xe||"U"in Xe)&&("w"in Xe||(Xe.w="u"in Xe?Xe.u%7:"W"in Xe?1:0),Kt="Z"in Xe?VC(k0(Xe.y,0,1)).getUTCDay():qC(k0(Xe.y,0,1)).getDay(),Xe.m=0,Xe.d="W"in Xe?(Xe.w+6)%7+Xe.W*7-(Kt+5)%7:Xe.w+Xe.U*7-(Kt+6)%7);return"Z"in Xe?(Xe.H+=Xe.Z/100|0,Xe.M+=Xe.Z%100,VC(Xe)):qC(Xe)}}function Se(pt,Rt,kt,Xe){for(var xn=0,Vt=Rt.length,Kt=kt.length,sn,Jt;xn<Vt;){if(Xe>=Kt)return-1;if(sn=Rt.charCodeAt(xn++),sn===37){if(sn=Rt.charAt(xn++),Jt=re[sn in $P?Rt.charAt(xn++):sn],!Jt||(Xe=Jt(pt,kt,Xe))<0)return-1}else if(sn!=kt.charCodeAt(Xe++))return-1}return Xe}function Te(pt,Rt,kt){var Xe=E.exec(Rt.slice(kt));return Xe?(pt.p=R.get(Xe[0].toLowerCase()),kt+Xe[0].length):-1}function ue(pt,Rt,kt){var Xe=F.exec(Rt.slice(kt));return Xe?(pt.w=U.get(Xe[0].toLowerCase()),kt+Xe[0].length):-1}function _e(pt,Rt,kt){var Xe=L.exec(Rt.slice(kt));return Xe?(pt.w=P.get(Xe[0].toLowerCase()),kt+Xe[0].length):-1}function se(pt,Rt,kt){var Xe=Z.exec(Rt.slice(kt));return Xe?(pt.m=Q.get(Xe[0].toLowerCase()),kt+Xe[0].length):-1}function me(pt,Rt,kt){var Xe=N.exec(Rt.slice(kt));return Xe?(pt.m=q.get(Xe[0].toLowerCase()),kt+Xe[0].length):-1}function be(pt,Rt,kt){return Se(pt,t,Rt,kt)}function Ie(pt,Rt,kt){return Se(pt,r,Rt,kt)}function pe(pt,Rt,kt){return Se(pt,c,Rt,kt)}function Pe(pt){return y[pt.getDay()]}function et(pt){return p[pt.getDay()]}function Be(pt){return a[pt.getMonth()]}function dt(pt){return b[pt.getMonth()]}function Ce(pt){return h[+(pt.getHours()>=12)]}function Ge(pt){return 1+~~(pt.getMonth()/3)}function at(pt){return y[pt.getUTCDay()]}function nt(pt){return p[pt.getUTCDay()]}function gt(pt){return a[pt.getUTCMonth()]}function Pt(pt){return b[pt.getUTCMonth()]}function Ct(pt){return h[+(pt.getUTCHours()>=12)]}function Yt(pt){return 1+~~(pt.getUTCMonth()/3)}return{format:function(pt){var Rt=ae(pt+="",Y);return Rt.toString=function(){return pt},Rt},parse:function(pt){var Rt=fe(pt+="",!1);return Rt.toString=function(){return pt},Rt},utcFormat:function(pt){var Rt=ae(pt+="",J);return Rt.toString=function(){return pt},Rt},utcParse:function(pt){var Rt=fe(pt+="",!0);return Rt.toString=function(){return pt},Rt}}}var $P={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,Fee=/^%/,jee=/[\\^$*+?|[\]().{}]/g;function pi(e,t,r){var c=e<0?"-":"",h=(c?-e:e)+"",p=h.length;return c+(p<r?new Array(r-p+1).join(t)+h:h)}function Nee(e){return e.replace(jee,"\\$&")}function I0(e){return new RegExp("^(?:"+e.map(Nee).join("|")+")","i")}function z0(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Uee(e,t,r){var c=yo.exec(t.slice(r,r+1));return c?(e.w=+c[0],r+c[0].length):-1}function $ee(e,t,r){var c=yo.exec(t.slice(r,r+1));return c?(e.u=+c[0],r+c[0].length):-1}function qee(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.U=+c[0],r+c[0].length):-1}function Vee(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.V=+c[0],r+c[0].length):-1}function Gee(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.W=+c[0],r+c[0].length):-1}function qP(e,t,r){var c=yo.exec(t.slice(r,r+4));return c?(e.y=+c[0],r+c[0].length):-1}function VP(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.y=+c[0]+(+c[0]>68?1900:2e3),r+c[0].length):-1}function Hee(e,t,r){var c=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return c?(e.Z=c[1]?0:-(c[2]+(c[3]||"00")),r+c[0].length):-1}function Wee(e,t,r){var c=yo.exec(t.slice(r,r+1));return c?(e.q=c[0]*3-3,r+c[0].length):-1}function Zee(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.m=c[0]-1,r+c[0].length):-1}function GP(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.d=+c[0],r+c[0].length):-1}function Xee(e,t,r){var c=yo.exec(t.slice(r,r+3));return c?(e.m=0,e.d=+c[0],r+c[0].length):-1}function HP(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.H=+c[0],r+c[0].length):-1}function Yee(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.M=+c[0],r+c[0].length):-1}function Kee(e,t,r){var c=yo.exec(t.slice(r,r+2));return c?(e.S=+c[0],r+c[0].length):-1}function Qee(e,t,r){var c=yo.exec(t.slice(r,r+3));return c?(e.L=+c[0],r+c[0].length):-1}function Jee(e,t,r){var c=yo.exec(t.slice(r,r+6));return c?(e.L=Math.floor(c[0]/1e3),r+c[0].length):-1}function ete(e,t,r){var c=Fee.exec(t.slice(r,r+1));return c?r+c[0].length:-1}function tte(e,t,r){var c=yo.exec(t.slice(r));return c?(e.Q=+c[0],r+c[0].length):-1}function nte(e,t,r){var c=yo.exec(t.slice(r));return c?(e.s=+c[0],r+c[0].length):-1}function WP(e,t){return pi(e.getDate(),t,2)}function rte(e,t){return pi(e.getHours(),t,2)}function ite(e,t){return pi(e.getHours()%12||12,t,2)}function ate(e,t){return pi(1+L5.count(Jd(e),e),t,3)}function ZF(e,t){return pi(e.getMilliseconds(),t,3)}function ote(e,t){return ZF(e,t)+"000"}function ste(e,t){return pi(e.getMonth()+1,t,2)}function lte(e,t){return pi(e.getMinutes(),t,2)}function cte(e,t){return pi(e.getSeconds(),t,2)}function ute(e){var t=e.getDay();return t===0?7:t}function fte(e,t){return pi(b1.count(Jd(e)-1,e),t,2)}function XF(e){var t=e.getDay();return t>=4||t===0?zm(e):zm.ceil(e)}function hte(e,t){return e=XF(e),pi(zm.count(Jd(e),e)+(Jd(e).getDay()===4),t,2)}function dte(e){return e.getDay()}function pte(e,t){return pi(Cv.count(Jd(e)-1,e),t,2)}function mte(e,t){return pi(e.getFullYear()%100,t,2)}function gte(e,t){return e=XF(e),pi(e.getFullYear()%100,t,2)}function yte(e,t){return pi(e.getFullYear()%1e4,t,4)}function _te(e,t){var r=e.getDay();return e=r>=4||r===0?zm(e):zm.ceil(e),pi(e.getFullYear()%1e4,t,4)}function vte(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pi(t/60|0,"0",2)+pi(t%60,"0",2)}function ZP(e,t){return pi(e.getUTCDate(),t,2)}function xte(e,t){return pi(e.getUTCHours(),t,2)}function bte(e,t){return pi(e.getUTCHours()%12||12,t,2)}function wte(e,t){return pi(1+P5.count(ep(e),e),t,3)}function YF(e,t){return pi(e.getUTCMilliseconds(),t,3)}function Ste(e,t){return YF(e,t)+"000"}function Tte(e,t){return pi(e.getUTCMonth()+1,t,2)}function Ete(e,t){return pi(e.getUTCMinutes(),t,2)}function Cte(e,t){return pi(e.getUTCSeconds(),t,2)}function Mte(e){var t=e.getUTCDay();return t===0?7:t}function Ate(e,t){return pi(w1.count(ep(e)-1,e),t,2)}function KF(e){var t=e.getUTCDay();return t>=4||t===0?Lm(e):Lm.ceil(e)}function Rte(e,t){return e=KF(e),pi(Lm.count(ep(e),e)+(ep(e).getUTCDay()===4),t,2)}function kte(e){return e.getUTCDay()}function Ite(e,t){return pi(Mv.count(ep(e)-1,e),t,2)}function zte(e,t){return pi(e.getUTCFullYear()%100,t,2)}function Lte(e,t){return e=KF(e),pi(e.getUTCFullYear()%100,t,2)}function Pte(e,t){return pi(e.getUTCFullYear()%1e4,t,4)}function Dte(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Lm(e):Lm.ceil(e),pi(e.getUTCFullYear()%1e4,t,4)}function Ote(){return"+0000"}function XP(){return"%"}function YP(e){return+e}function KP(e){return Math.floor(+e/1e3)}var ny,Dw,QF,JF,ej;Bte({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bte(e){return ny=Bee(e),Dw=ny.format,QF=ny.parse,JF=ny.utcFormat,ej=ny.utcParse,ny}function Fte(e){return new Date(e)}function jte(e){return e instanceof Date?+e:+new Date(+e)}function D5(e,t,r,c,h,p,y,b,a,E){var R=SF(),L=R.invert,P=R.domain,F=E(".%L"),U=E(":%S"),N=E("%I:%M"),q=E("%I %p"),Z=E("%a %d"),Q=E("%b %d"),Y=E("%B"),J=E("%Y");function re(ae){return(a(ae)<ae?F:b(ae)<ae?U:y(ae)<ae?N:p(ae)<ae?q:c(ae)<ae?h(ae)<ae?Z:Q:r(ae)<ae?Y:J)(ae)}return R.invert=function(ae){return new Date(L(ae))},R.domain=function(ae){return arguments.length?P(Array.from(ae,jte)):P().map(Fte)},R.ticks=function(ae){var fe=P();return e(fe[0],fe[fe.length-1],ae??10)},R.tickFormat=function(ae,fe){return fe==null?re:E(fe)},R.nice=function(ae){var fe=P();return(!ae||typeof ae.range!="function")&&(ae=t(fe[0],fe[fe.length-1],ae??10)),ae?P(AF(fe,ae)):R},R.copy=function(){return zw(R,D5(e,t,r,c,h,p,y,b,a,E))},R}function Nte(){return jm.apply(D5(Dee,Oee,Lw,M5,C5,E5,T5,S5,_m,Dw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ute(){return jm.apply(D5(Lee,Pee,Pw,z5,I5,k5,R5,A5,_m,JF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ar(e){for(var t=e.length/6|0,r=new Array(t),c=0;c<t;)r[c]="#"+e.slice(c*6,++c*6);return r}const $te=Ar("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),qte=Ar("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Vte=Ar("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Gte=Ar("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Hte=Ar("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Wte=Ar("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Zte=Ar("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Xte=Ar("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),tj=Ar("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Yte=Ar("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Xi=e=>NQ(e[e.length-1]);var Ow=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ar);const Kte=Xi(Ow);var Bw=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ar);const Qte=Xi(Bw);var Fw=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ar);const Jte=Xi(Fw);var jw=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ar);const ene=Xi(jw);var Nw=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ar);const tne=Xi(Nw);var Uw=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ar);const nne=Xi(Uw);var $w=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ar);const rne=Xi($w);var qw=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ar);const ine=Xi(qw);var Vw=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ar);const ane=Xi(Vw);var Gw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ar);const one=Xi(Gw);var Hw=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ar);const sne=Xi(Hw);var Ww=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ar);const lne=Xi(Ww);var Zw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ar);const cne=Xi(Zw);var Xw=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ar);const une=Xi(Xw);var Yw=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ar);const fne=Xi(Yw);var Kw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ar);const hne=Xi(Kw);var Qw=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ar);const dne=Xi(Qw);var Jw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ar);const pne=Xi(Jw);var eS=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ar);const mne=Xi(eS);var tS=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ar);const gne=Xi(tS);var nS=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ar);const yne=Xi(nS);var rS=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ar);const _ne=Xi(rS);var iS=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ar);const vne=Xi(iS);var aS=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ar);const xne=Xi(aS);var oS=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ar);const bne=Xi(oS);var sS=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ar);const wne=Xi(sS);var lS=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ar);const Sne=Xi(lS);function Tne(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Ene=u5(mf(300,.5,0),mf(-240,.5,1));var Cne=u5(mf(-100,.75,.35),mf(80,1.5,.8)),Mne=u5(mf(260,.75,.35),mf(80,1.5,.8)),Rb=mf();function Ane(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Rb.h=360*e-100,Rb.s=1.5-1.5*t,Rb.l=.8-.9*t,Rb+""}var kb=Cy(),Rne=Math.PI/3,kne=Math.PI*2/3;function Ine(e){var t;return e=(.5-e)*Math.PI,kb.r=255*(t=Math.sin(e))*t,kb.g=255*(t=Math.sin(e+Rne))*t,kb.b=255*(t=Math.sin(e+kne))*t,kb+""}function zne(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function cS(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}const Lne=cS(Ar("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Pne=cS(Ar("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Dne=cS(Ar("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),One=cS(Ar("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),GC,QP;function nj(){if(QP)return GC;QP=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return GC=e,GC}var Bne=nj();const Zn=Ro(Bne);gs();var Fne=mw();const rj=Ro(Fne);var jne=t5();const O5=Ro(jne);var HC,JP;function Nne(){if(JP)return HC;JP=1;var e=Wv(),t=q8(),r=qy();function c(h,p,y){for(var b=-1,a=p.length,E={};++b<a;){var R=p[b],L=e(h,R);y(L,R)&&t(E,r(R,h),L)}return E}return HC=c,HC}var WC,eD;function Une(){if(eD)return WC;eD=1;function e(t,r){return t!=null&&r in Object(t)}return WC=e,WC}var ZC,tD;function $ne(){if(tD)return ZC;tD=1;var e=qy(),t=vw(),r=gs(),c=ww(),h=e5(),p=Vy();function y(b,a,E){a=e(a,b);for(var R=-1,L=a.length,P=!1;++R<L;){var F=p(a[R]);if(!(P=b!=null&&E(b,F)))break;b=b[F]}return P||++R!=L?P:(L=b==null?0:b.length,!!L&&h(L)&&c(F,L)&&(r(b)||t(b)))}return ZC=y,ZC}var XC,nD;function ij(){if(nD)return XC;nD=1;var e=Une(),t=$ne();function r(c,h){return c!=null&&t(c,h,e)}return XC=r,XC}var YC,rD;function qne(){if(rD)return YC;rD=1;var e=Nne(),t=ij();function r(c,h){return e(c,h,function(p,y){return t(c,y)})}return YC=r,YC}var KC,iD;function B5(){if(iD)return KC;iD=1;function e(t,r){for(var c=-1,h=r.length,p=t.length;++c<h;)t[p+c]=r[c];return t}return KC=e,KC}var QC,aD;function Vne(){if(aD)return QC;aD=1;var e=jy(),t=vw(),r=gs(),c=e?e.isConcatSpreadable:void 0;function h(p){return r(p)||t(p)||!!(c&&p&&p[c])}return QC=h,QC}var JC,oD;function aj(){if(oD)return JC;oD=1;var e=B5(),t=Vne();function r(c,h,p,y,b){var a=-1,E=c.length;for(p||(p=t),b||(b=[]);++a<E;){var R=c[a];h>0&&p(R)?h>1?r(R,h-1,p,y,b):e(b,R):y||(b[b.length]=R)}return b}return JC=r,JC}var eM,sD;function Gne(){if(sD)return eM;sD=1;var e=aj();function t(r){var c=r==null?0:r.length;return c?e(r,1):[]}return eM=t,eM}var tM,lD;function oj(){if(lD)return tM;lD=1;var e=Gne(),t=F8(),r=j8();function c(h){return r(t(h,void 0,e),h+"")}return tM=c,tM}var nM,cD;function Hne(){if(cD)return nM;cD=1;var e=qne(),t=oj(),r=t(function(c,h){return c==null?{}:e(c,h)});return nM=r,nM}var Wne=Hne();const Zne=Ro(Wne);var rM,uD;function Xne(){if(uD)return rM;uD=1;function e(t,r){for(var c=-1,h=t==null?0:t.length;++c<h;)if(r(t[c],c,t))return!0;return!1}return rM=e,rM}var iM,fD;function sj(){if(fD)return iM;fD=1;var e=f5(),t=Xne(),r=h5(),c=1,h=2;function p(y,b,a,E,R,L){var P=a&c,F=y.length,U=b.length;if(F!=U&&!(P&&U>F))return!1;var N=L.get(y),q=L.get(b);if(N&&q)return N==b&&q==y;var Z=-1,Q=!0,Y=a&h?new e:void 0;for(L.set(y,b),L.set(b,y);++Z<F;){var J=y[Z],re=b[Z];if(E)var ae=P?E(re,J,Z,b,y,L):E(J,re,Z,y,b,L);if(ae!==void 0){if(ae)continue;Q=!1;break}if(Y){if(!t(b,function(fe,Se){if(!r(Y,Se)&&(J===fe||R(J,fe,a,E,L)))return Y.push(Se)})){Q=!1;break}}else if(!(J===re||R(J,re,a,E,L))){Q=!1;break}}return L.delete(y),L.delete(b),Q}return iM=p,iM}var aM,hD;function Yne(){if(hD)return aM;hD=1;function e(t){var r=-1,c=Array(t.size);return t.forEach(function(h,p){c[++r]=[p,h]}),c}return aM=e,aM}var oM,dD;function F5(){if(dD)return oM;dD=1;function e(t){var r=-1,c=Array(t.size);return t.forEach(function(h){c[++r]=h}),c}return oM=e,oM}var sM,pD;function Kne(){if(pD)return sM;pD=1;var e=jy(),t=k8(),r=Gv(),c=sj(),h=Yne(),p=F5(),y=1,b=2,a="[object Boolean]",E="[object Date]",R="[object Error]",L="[object Map]",P="[object Number]",F="[object RegExp]",U="[object Set]",N="[object String]",q="[object Symbol]",Z="[object ArrayBuffer]",Q="[object DataView]",Y=e?e.prototype:void 0,J=Y?Y.valueOf:void 0;function re(ae,fe,Se,Te,ue,_e,se){switch(Se){case Q:if(ae.byteLength!=fe.byteLength||ae.byteOffset!=fe.byteOffset)return!1;ae=ae.buffer,fe=fe.buffer;case Z:return!(ae.byteLength!=fe.byteLength||!_e(new t(ae),new t(fe)));case a:case E:case P:return r(+ae,+fe);case R:return ae.name==fe.name&&ae.message==fe.message;case F:case N:return ae==fe+"";case L:var me=h;case U:var be=Te&y;if(me||(me=p),ae.size!=fe.size&&!be)return!1;var Ie=se.get(ae);if(Ie)return Ie==fe;Te|=b,se.set(ae,fe);var pe=c(me(ae),me(fe),Te,ue,_e,se);return se.delete(ae),pe;case q:if(J)return J.call(ae)==J.call(fe)}return!1}return sM=re,sM}var lM,mD;function lj(){if(mD)return lM;mD=1;var e=B5(),t=gs();function r(c,h,p){var y=h(c);return t(c)?y:e(y,p(c))}return lM=r,lM}var cM,gD;function cj(){if(gD)return cM;gD=1;function e(t,r){for(var c=-1,h=t==null?0:t.length,p=0,y=[];++c<h;){var b=t[c];r(b,c,t)&&(y[p++]=b)}return y}return cM=e,cM}var uM,yD;function uj(){if(yD)return uM;yD=1;function e(){return[]}return uM=e,uM}var fM,_D;function j5(){if(_D)return fM;_D=1;var e=cj(),t=uj(),r=Object.prototype,c=r.propertyIsEnumerable,h=Object.getOwnPropertySymbols,p=h?function(y){return y==null?[]:(y=Object(y),e(h(y),function(b){return c.call(y,b)}))}:t;return fM=p,fM}var hM,vD;function Qne(){if(vD)return hM;vD=1;var e=L8(),t=e(Object.keys,Object);return hM=t,hM}var dM,xD;function Jne(){if(xD)return dM;xD=1;var e=JR(),t=Qne(),r=Object.prototype,c=r.hasOwnProperty;function h(p){if(!e(p))return t(p);var y=[];for(var b in Object(p))c.call(p,b)&&b!="constructor"&&y.push(b);return y}return dM=h,dM}var pM,bD;function Xv(){if(bD)return pM;bD=1;var e=B8(),t=Jne(),r=Ny();function c(h){return r(h)?e(h):t(h)}return pM=c,pM}var mM,wD;function fj(){if(wD)return mM;wD=1;var e=lj(),t=j5(),r=Xv();function c(h){return e(h,r,t)}return mM=c,mM}var gM,SD;function ere(){if(SD)return gM;SD=1;var e=fj(),t=1,r=Object.prototype,c=r.hasOwnProperty;function h(p,y,b,a,E,R){var L=b&t,P=e(p),F=P.length,U=e(y),N=U.length;if(F!=N&&!L)return!1;for(var q=F;q--;){var Z=P[q];if(!(L?Z in y:c.call(y,Z)))return!1}var Q=R.get(p),Y=R.get(y);if(Q&&Y)return Q==y&&Y==p;var J=!0;R.set(p,y),R.set(y,p);for(var re=L;++q<F;){Z=P[q];var ae=p[Z],fe=y[Z];if(a)var Se=L?a(fe,ae,Z,y,p,R):a(ae,fe,Z,p,y,R);if(!(Se===void 0?ae===fe||E(ae,fe,b,a,R):Se)){J=!1;break}re||(re=Z=="constructor")}if(J&&!re){var Te=p.constructor,ue=y.constructor;Te!=ue&&"constructor"in p&&"constructor"in y&&!(typeof Te=="function"&&Te instanceof Te&&typeof ue=="function"&&ue instanceof ue)&&(J=!1)}return R.delete(p),R.delete(y),J}return gM=h,gM}var yM,TD;function tre(){if(TD)return yM;TD=1;var e=Fm(),t=vf(),r=e(t,"DataView");return yM=r,yM}var _M,ED;function nre(){if(ED)return _M;ED=1;var e=Fm(),t=vf(),r=e(t,"Promise");return _M=r,_M}var vM,CD;function hj(){if(CD)return vM;CD=1;var e=Fm(),t=vf(),r=e(t,"Set");return vM=r,vM}var xM,MD;function rre(){if(MD)return xM;MD=1;var e=Fm(),t=vf(),r=e(t,"WeakMap");return xM=r,xM}var bM,AD;function uS(){if(AD)return bM;AD=1;var e=tre(),t=ZR(),r=nre(),c=hj(),h=rre(),p=Dh(),y=E8(),b="[object Map]",a="[object Object]",E="[object Promise]",R="[object Set]",L="[object WeakMap]",P="[object DataView]",F=y(e),U=y(t),N=y(r),q=y(c),Z=y(h),Q=p;return(e&&Q(new e(new ArrayBuffer(1)))!=P||t&&Q(new t)!=b||r&&Q(r.resolve())!=E||c&&Q(new c)!=R||h&&Q(new h)!=L)&&(Q=function(Y){var J=p(Y),re=J==a?Y.constructor:void 0,ae=re?y(re):"";if(ae)switch(ae){case F:return P;case U:return b;case N:return E;case q:return R;case Z:return L}return J}),bM=Q,bM}var wM,RD;function ire(){if(RD)return wM;RD=1;var e=_w(),t=sj(),r=Kne(),c=ere(),h=uS(),p=gs(),y=xw(),b=n5(),a=1,E="[object Arguments]",R="[object Array]",L="[object Object]",P=Object.prototype,F=P.hasOwnProperty;function U(N,q,Z,Q,Y,J){var re=p(N),ae=p(q),fe=re?R:h(N),Se=ae?R:h(q);fe=fe==E?L:fe,Se=Se==E?L:Se;var Te=fe==L,ue=Se==L,_e=fe==Se;if(_e&&y(N)){if(!y(q))return!1;re=!0,Te=!1}if(_e&&!Te)return J||(J=new e),re||b(N)?t(N,q,Z,Q,Y,J):r(N,q,fe,Z,Q,Y,J);if(!(Z&a)){var se=Te&&F.call(N,"__wrapped__"),me=ue&&F.call(q,"__wrapped__");if(se||me){var be=se?N.value():N,Ie=me?q.value():q;return J||(J=new e),Y(be,Ie,Z,Q,J)}}return _e?(J||(J=new e),c(N,q,Z,Q,Y,J)):!1}return wM=U,wM}var SM,kD;function N5(){if(kD)return SM;kD=1;var e=ire(),t=nc();function r(c,h,p,y,b){return c===h?!0:c==null||h==null||!t(c)&&!t(h)?c!==c&&h!==h:e(c,h,p,y,r,b)}return SM=r,SM}var TM,ID;function are(){if(ID)return TM;ID=1;var e=N5();function t(r,c){return e(r,c)}return TM=t,TM}var ore=are();const sre=Ro(ore);var dj=V.createContext(),lre=function(e){var t=e.children,r=e.animate,c=r===void 0||r,h=e.config,p=h===void 0?"default":h,y=V.useMemo((function(){var b=pQ(p)?l8[p]:p;return{animate:c,config:b}}),[c,p]);return X.jsx(dj.Provider,{value:y,children:t})},js=function(){return V.useContext(dj)},cre=function(e){var t=e.children,r=e.condition,c=e.wrapper;return r?V.cloneElement(c,{},t):t},ure={position:"relative"},fS=function(e){var t=e.children,r=e.theme,c=e.renderWrapper,h=c===void 0||c,p=e.isInteractive,y=p===void 0||p,b=e.animate,a=e.motionConfig,E=V.useRef(null);return X.jsx(eQ,{theme:r,children:X.jsx(lre,{animate:b,config:a,children:X.jsx(fQ,{container:E,children:X.jsxs(cre,{condition:h,wrapper:X.jsx("div",{style:ure,ref:E}),children:[t,y&&X.jsx(uQ,{})]})})})})},fre=function(e,t){return e.width===t.width&&e.height===t.height},hre=function(e){var t=e.children,r=e.width,c=e.height,h=e.onResize,p=e.debounceResize,y=vQ({width:r,height:c},p,{equalityFn:fre})[0];return V.useEffect((function(){h?.(y)}),[y,h]),X.jsx(X.Fragment,{children:t(y)})},hS=function(e){var t=e.children,r=e.defaultWidth,c=e.defaultHeight,h=e.onResize,p=e.debounceResize,y=p===void 0?0:p;return X.jsx(gQ,{defaultWidth:r,defaultHeight:c,children:function(b){var a=b.width,E=b.height;return X.jsx(hre,{width:a,height:E,onResize:h,debounceResize:y,children:t})}})};function zD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,c=Array(t);r<t;r++)c[r]=e[r];return c}function dre(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=(function(h,p){if(h){if(typeof h=="string")return zD(h,p);var y={}.toString.call(h).slice(8,-1);return y==="Object"&&h.constructor&&(y=h.constructor.name),y==="Map"||y==="Set"?Array.from(h):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?zD(h,p):void 0}})(e))||t){r&&(e=r);var c=0;return function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hf(){return hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},hf.apply(null,arguments)}function pj(e,t){if(e==null)return{};var r={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;r[c]=e[c]}return r}var pre=["id","colors"],mre=function(e){var t=e.id,r=e.colors,c=pj(e,pre);return X.jsx("linearGradient",hf({id:t,x1:0,x2:0,y1:0,y2:1},c,{children:r.map((function(h){var p=h.offset,y=h.color,b=h.opacity;return X.jsx("stop",{offset:p+"%",stopColor:y,stopOpacity:b!==void 0?b:1},p)}))}))},mj={linearGradient:mre},L0={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},gre=V.memo((function(e){var t=e.id,r=e.background,c=r===void 0?L0.background:r,h=e.color,p=h===void 0?L0.color:h,y=e.size,b=y===void 0?L0.size:y,a=e.padding,E=a===void 0?L0.padding:a,R=e.stagger,L=R===void 0?L0.stagger:R,P=b+E,F=b/2,U=E/2;return L===!0&&(P=2*b+2*E),X.jsxs("pattern",{id:t,width:P,height:P,patternUnits:"userSpaceOnUse",children:[X.jsx("rect",{width:P,height:P,fill:c}),X.jsx("circle",{cx:U+F,cy:U+F,r:F,fill:p}),L&&X.jsx("circle",{cx:1.5*E+b+F,cy:1.5*E+b+F,r:F,fill:p})]})})),Xl=function(e){return e*Math.PI/180},Yv=function(e){return 180*e/Math.PI},yre=function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},wm=function(e,t){return{x:Math.cos(e)*t,y:Math.sin(e)*t}},_re=function(e){var t=e%360;return t<0&&(t+=360),t},gj={svg:{align:{left:"start",center:"middle",right:"end",start:"start",middle:"middle",end:"end"},baseline:{top:"text-before-edge",center:"central",bottom:"alphabetic"}},canvas:{align:{left:"left",center:"center",right:"right",start:"left",middle:"center",end:"right"},baseline:{top:"top",center:"middle",bottom:"bottom"}}},P0={spacing:5,rotation:0,background:"#000000",color:"#ffffff",lineWidth:2},vre=V.memo((function(e){var t=e.id,r=e.spacing,c=r===void 0?P0.spacing:r,h=e.rotation,p=h===void 0?P0.rotation:h,y=e.background,b=y===void 0?P0.background:y,a=e.color,E=a===void 0?P0.color:a,R=e.lineWidth,L=R===void 0?P0.lineWidth:R,P=Math.round(p)%360,F=Math.abs(c);P>180?P-=360:P>90?P-=180:P<-180?P+=360:P<-90&&(P+=180);var U,N=F,q=F;return P===0?U=`
                M 0 0 L `+N+` 0
                M 0 `+q+" L "+N+" "+q+`
            `:P===90?U=`
                M 0 0 L 0 `+q+`
                M `+N+" 0 L "+N+" "+q+`
            `:(N=Math.abs(F/Math.sin(Xl(P))),q=F/Math.sin(Xl(90-P)),U=P>0?`
                    M 0 `+-q+" L "+2*N+" "+q+`
                    M `+-N+" "+-q+" L "+N+" "+q+`
                    M `+-N+" 0 L "+N+" "+2*q+`
                `:`
                    M `+-N+" "+q+" L "+N+" "+-q+`
                    M `+-N+" "+2*q+" L "+2*N+" "+-q+`
                    M 0 `+2*q+" L "+2*N+` 0
                `),X.jsxs("pattern",{id:t,width:N,height:q,patternUnits:"userSpaceOnUse",children:[X.jsx("rect",{width:N,height:q,fill:b,stroke:"rgba(255, 0, 0, 0.1)",strokeWidth:0}),X.jsx("path",{d:U,strokeWidth:L,stroke:E,strokeLinecap:"square"})]})})),D0={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},xre=V.memo((function(e){var t=e.id,r=e.color,c=r===void 0?D0.color:r,h=e.background,p=h===void 0?D0.background:h,y=e.size,b=y===void 0?D0.size:y,a=e.padding,E=a===void 0?D0.padding:a,R=e.stagger,L=R===void 0?D0.stagger:R,P=b+E,F=E/2;return L===!0&&(P=2*b+2*E),X.jsxs("pattern",{id:t,width:P,height:P,patternUnits:"userSpaceOnUse",children:[X.jsx("rect",{width:P,height:P,fill:p}),X.jsx("rect",{x:F,y:F,width:b,height:b,fill:c}),L&&X.jsx("rect",{x:1.5*E+b,y:1.5*E+b,width:b,height:b,fill:c})]})})),yj={patternDots:gre,patternLines:vre,patternSquares:xre},bre=["type"],LD=hf({},mj,yj),wre=V.memo((function(e){var t=e.defs;return!t||t.length<1?null:X.jsx("defs",{"aria-hidden":!0,children:t.map((function(r){var c=r.type,h=pj(r,bre);return LD[c]?V.createElement(LD[c],hf({key:h.id},h)):null}))})})),_j=V.forwardRef((function(e,t){var r=e.width,c=e.height,h=e.margin,p=e.defs,y=e.children,b=e.role,a=e.ariaLabel,E=e.ariaLabelledBy,R=e.ariaDescribedBy,L=e.isFocusable,P=Zi();return X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:c,role:b,"aria-label":a,"aria-labelledby":E,"aria-describedby":R,focusable:L,tabIndex:L?0:void 0,ref:t,children:[X.jsx(wre,{defs:p}),X.jsx("rect",{width:r,height:c,fill:P.background}),X.jsx("g",{transform:"translate("+h.left+","+h.top+")",children:y})]})})),Sre=V.memo((function(e){var t=e.size,r=e.color,c=e.borderWidth,h=e.borderColor;return X.jsx("circle",{r:t/2,fill:r,stroke:h,strokeWidth:c,style:{pointerEvents:"none"}})}));V.memo((function(e){var t=e.x,r=e.y,c=e.symbol,h=c===void 0?Sre:c,p=e.size,y=e.datum,b=e.color,a=e.borderWidth,E=e.borderColor,R=e.label,L=e.labelTextAnchor,P=L===void 0?"middle":L,F=e.labelYOffset,U=F===void 0?-12:F,N=e.ariaLabel,q=e.ariaLabelledBy,Z=e.ariaDescribedBy,Q=e.ariaHidden,Y=e.ariaDisabled,J=e.isFocusable,re=J!==void 0&&J,ae=e.tabIndex,fe=ae===void 0?0:ae,Se=e.onFocus,Te=e.onBlur,ue=e.testId,_e=Zi(),se=js(),me=se.animate,be=se.config,Ie=Ph({transform:"translate("+t+", "+r+")",config:be,immediate:!me}),pe=V.useCallback((function(et){Se?.(y,et)}),[Se,y]),Pe=V.useCallback((function(et){Te?.(y,et)}),[Te,y]);return X.jsxs(aa.g,{transform:Ie.transform,style:{pointerEvents:"none"},focusable:re,tabIndex:re?fe:void 0,"aria-label":N,"aria-labelledby":q,"aria-describedby":Z,"aria-disabled":Y,"aria-hidden":Q,onFocus:re&&Se?pe:void 0,onBlur:re&&Te?Pe:void 0,"data-testid":ue,children:[V.createElement(h,{size:p,color:b,datum:y,borderWidth:a,borderColor:E}),R&&X.jsx("text",{textAnchor:P,y:U,style:HK(_e.dots.text),children:R})]})}));var Tre=V.memo((function(e){var t=e.width,r=e.height,c=e.axis,h=e.scale,p=e.value,y=e.lineStyle,b=e.textStyle,a=e.legend,E=e.legendNode,R=e.legendPosition,L=R===void 0?"top-right":R,P=e.legendOffsetX,F=P===void 0?14:P,U=e.legendOffsetY,N=U===void 0?14:U,q=e.legendOrientation,Z=q===void 0?"horizontal":q,Q=Zi(),Y=0,J=0,re=0,ae=0;if(c==="y"?(re=h(p),J=t):(Y=h(p),ae=r),a&&!E){var fe=(function(Se){var Te=Se.axis,ue=Se.width,_e=Se.height,se=Se.position,me=Se.offsetX,be=Se.offsetY,Ie=Se.orientation,pe=0,Pe=0,et=Ie==="vertical"?-90:0,Be="start";if(Te==="x")switch(se){case"top-left":pe=-me,Pe=be,Be="end";break;case"top":Pe=-be,Be=Ie==="horizontal"?"middle":"start";break;case"top-right":pe=me,Pe=be,Be=Ie==="horizontal"?"start":"end";break;case"right":pe=me,Pe=_e/2,Be=Ie==="horizontal"?"start":"middle";break;case"bottom-right":pe=me,Pe=_e-be,Be="start";break;case"bottom":Pe=_e+be,Be=Ie==="horizontal"?"middle":"end";break;case"bottom-left":Pe=_e-be,pe=-me,Be=Ie==="horizontal"?"end":"start";break;case"left":pe=-me,Pe=_e/2,Be=Ie==="horizontal"?"end":"middle"}else switch(se){case"top-left":pe=me,Pe=-be,Be="start";break;case"top":pe=ue/2,Pe=-be,Be=Ie==="horizontal"?"middle":"start";break;case"top-right":pe=ue-me,Pe=-be,Be=Ie==="horizontal"?"end":"start";break;case"right":pe=ue+me,Be=Ie==="horizontal"?"start":"middle";break;case"bottom-right":pe=ue-me,Pe=be,Be="end";break;case"bottom":pe=ue/2,Pe=be,Be=Ie==="horizontal"?"middle":"end";break;case"bottom-left":pe=me,Pe=be,Be=Ie==="horizontal"?"start":"end";break;case"left":pe=-me,Be=Ie==="horizontal"?"end":"middle"}return{x:pe,y:Pe,rotation:et,textAnchor:Be}})({axis:c,width:t,height:r,position:L,offsetX:F,offsetY:N,orientation:Z});E=X.jsx("text",{transform:"translate("+fe.x+", "+fe.y+") rotate("+fe.rotation+")",textAnchor:fe.textAnchor,dominantBaseline:"central",style:b,children:a})}return X.jsxs("g",{transform:"translate("+Y+", "+re+")",children:[X.jsx("line",{x1:0,x2:J,y1:0,y2:ae,stroke:Q.markers.lineColor,strokeWidth:Q.markers.lineStrokeWidth,style:y}),E]})})),Ere=V.memo((function(e){var t=e.markers,r=e.width,c=e.height,h=e.xScale,p=e.yScale;return t&&t.length!==0?t.map((function(y,b){return X.jsx(Tre,hf({},y,{width:r,height:c,scale:y.axis==="y"?p:h}),b)})):null})),Cre=function(e){var t=js(),r=t.animate,c=t.config,h=(function(b){var a=V.useRef();return V.useEffect((function(){a.current=b}),[b]),a.current})(e),p=V.useMemo((function(){return eF(h,e)}),[h,e]),y=Ph({from:{value:0},to:{value:1},reset:!0,config:c,immediate:!r}).value;return Kd(y,p)};V.createContext(void 0);var Mre={basis:bJ,basisClosed:wJ,basisOpen:SJ,bundle:TJ,cardinal:EJ,cardinalClosed:CJ,cardinalOpen:MJ,catmullRom:AJ,catmullRomClosed:RJ,catmullRomOpen:kJ,linear:cF,linearClosed:IJ,monotoneX:zJ,monotoneY:LJ,natural:PJ,step:DJ,stepAfter:BJ,stepBefore:OJ},U5=Object.keys(Mre);U5.filter((function(e){return e.endsWith("Closed")}));aF(U5,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");aF(U5,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");Zn(Ow),Zn(Bw),Zn(Fw),Zn(jw),Zn(Nw),Zn(Uw),Zn($w),Zn(qw),Zn(Vw),Zn(rS),Zn(iS),Zn(aS),Zn(lS),Zn(oS),Zn(sS),Zn(Gw),Zn(Hw),Zn(Ww),Zn(Zw),Zn(Xw),Zn(Yw),Zn(Kw),Zn(Qw),Zn(Jw),Zn(eS),Zn(tS),Zn(nS);Zn(Ow),Zn(Bw),Zn(Fw),Zn(jw),Zn(Nw),Zn(Uw),Zn($w),Zn(qw),Zn(Vw),Zn(rS),Zn(iS),Zn(aS),Zn(lS),Zn(oS),Zn(sS),Zn(Gw),Zn(Hw),Zn(Ww),Zn(Zw),Zn(Xw),Zn(Yw),Zn(Kw),Zn(Qw),Zn(Jw),Zn(eS),Zn(tS),Zn(nS);ym(tj);var Are={top:0,right:0,bottom:0,left:0},dS=function(e,t,r){return r===void 0&&(r={}),V.useMemo((function(){var c=hf({},Are,r);return{margin:c,innerWidth:e-c.left-c.right,innerHeight:t-c.top-c.bottom,outerWidth:e,outerHeight:t}}),[e,t,r])},Rre=function(){var e=V.useRef(null),t=V.useState({left:0,top:0,width:0,height:0}),r=t[0],c=t[1],h=V.useState((function(){return typeof ResizeObserver>"u"?null:new ResizeObserver((function(p){var y=p[0];return c(y.contentRect)}))}))[0];return V.useEffect((function(){return e.current&&h!==null&&h.observe(e.current),function(){h!==null&&h.disconnect()}}),[h]),[e,r]},kre=function(e){return typeof e=="function"?e:typeof e=="string"?e.indexOf("time:")===0?Dw(e.slice("5")):Zv(e):function(t){return""+t}},pS=function(e){return V.useMemo((function(){return kre(e)}),[e])},vj=function(e){return rj(e)?e:function(t){return Lh(t,e)}},Mh=function(e){return V.useMemo((function(){return vj(e)}),[e])},Ire=function(e,t,r,c){return Math.sqrt(Math.pow(r-e,2)+Math.pow(c-t,2))},zre=function(e,t,r,c){var h=Math.atan2(c-t,r-e)-Math.PI/2;return h>0?h:2*Math.PI+h},Lre=function(e,t,r,c,h,p){return e<=h&&h<=e+r&&t<=p&&p<=t+c},Gb=function(e,t){var r,c="touches"in t?t.touches[0]:t,h=c.clientX,p=c.clientY,y=e.getBoundingClientRect(),b=(r=e.getBBox!==void 0?e.getBBox():{width:e.offsetWidth||0,height:e.offsetHeight||0}).width===y.width?1:r.width/y.width;return[(h-y.left)*b,(p-y.top)*b]},Pre=Object.keys(mj),Dre=Object.keys(yj),Ore=function(e,t,r){if(e==="*")return!0;if(rj(e))return e(t);if(O5(e)){var c=r?Lh(t,r):t;return sre(Zne(c,Object.keys(e)),e)}return!1},xj=function(e,t,r,c){var h=c===void 0?{}:c,p=h.dataKey,y=h.colorKey,b=y===void 0?"color":y,a=h.targetKey,E=a===void 0?"fill":a,R=[],L={};return e.length&&t.length&&(R=[].concat(e),t.forEach((function(P){for(var F,U=function(){var q=F.value,Z=q.id,Q=q.match;if(Ore(Q,P,p)){var Y=e.find((function(_e){return _e.id===Z}));if(Y){if(Dre.includes(Y.type))if(Y.background==="inherit"||Y.color==="inherit"){var J=Lh(P,b),re=Y.background,ae=Y.color,fe=Z;Y.background==="inherit"&&(fe=fe+".bg."+J,re=J),Y.color==="inherit"&&(fe=fe+".fg."+J,ae=J),q0(P,E,"url(#"+fe+")"),L[fe]||(R.push(hf({},Y,{id:fe,background:re,color:ae})),L[fe]=1)}else q0(P,E,"url(#"+Z+")");else if(Pre.includes(Y.type))if(Y.colors.map((function(_e){return _e.color})).includes("inherit")){var Se=Lh(P,b),Te=Z,ue=hf({},Y,{colors:Y.colors.map((function(_e,se){return _e.color!=="inherit"?_e:(Te=Te+"."+se+"."+Se,hf({},_e,{color:_e.color==="inherit"?Se:_e.color}))}))});ue.id=Te,q0(P,E,"url(#"+Te+")"),L[Te]||(R.push(ue),L[Te]=1)}else q0(P,E,"url(#"+Z+")")}return 1}},N=dre(r);!(F=N()).done&&!U(););}))),R};function bj(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(c){for(var h=0,p=t;h<p.length;h++){var y=p[h];typeof y=="function"?y(c):y!=null&&(y.current=c)}}}var Pm=function(e,t){e.font=(t.fontWeight?t.fontWeight+" ":"")+t.fontSize+"px "+t.fontFamily},Dm=function(e,t,r,c,h){c===void 0&&(c=0),h===void 0&&(h=0),t.outlineWidth>0&&(e.strokeStyle=t.outlineColor,e.lineWidth=2*t.outlineWidth,e.lineJoin="round",e.strokeText(r,c,h)),e.fillStyle=t.fill,e.fillText(r,c,h)};function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},ev.apply(null,arguments)}function PD(e,t){if(e==null)return{};var r={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;r[c]=e[c]}return r}var Bre=["style","children"],Fre=["outlineWidth","outlineColor","outlineOpacity"],Hy=function(e){var t=e.style,r=e.children,c=PD(e,Bre),h=t.outlineWidth,p=t.outlineColor,y=t.outlineOpacity,b=PD(t,Fre);return X.jsxs(X.Fragment,{children:[h>0&&X.jsx(aa.text,ev({},c,{style:ev({},b,{strokeWidth:2*h,stroke:p,strokeOpacity:y,strokeLinejoin:"round"}),children:r})),X.jsx(aa.text,ev({},c,{style:b,children:r}))]})},EM,DD;function jre(){if(DD)return EM;DD=1;function e(){}return EM=e,EM}var CM,OD;function Nre(){if(OD)return CM;OD=1;var e=hj(),t=jre(),r=F5(),c=1/0,h=e&&1/r(new e([,-0]))[1]==c?function(p){return new e(p)}:t;return CM=h,CM}var MM,BD;function wj(){if(BD)return MM;BD=1;var e=f5(),t=rF(),r=iF(),c=h5(),h=Nre(),p=F5(),y=200;function b(a,E,R){var L=-1,P=t,F=a.length,U=!0,N=[],q=N;if(R)U=!1,P=r;else if(F>=y){var Z=E?null:h(a);if(Z)return p(Z);U=!1,P=c,q=new e}else q=E?[]:N;e:for(;++L<F;){var Q=a[L],Y=E?E(Q):Q;if(Q=R||Q!==0?Q:0,U&&Y===Y){for(var J=q.length;J--;)if(q[J]===Y)continue e;E&&q.push(Y),N.push(Q)}else P(q,Y,R)||(q!==N&&q.push(Y),N.push(Q))}return N}return MM=b,MM}var AM,FD;function Ure(){if(FD)return AM;FD=1;var e=wj();function t(r){return r&&r.length?e(r):[]}return AM=t,AM}Ure();var RM,jD;function $re(){if(jD)return RM;jD=1;var e=_w(),t=N5(),r=1,c=2;function h(p,y,b,a){var E=b.length,R=E,L=!a;if(p==null)return!R;for(p=Object(p);E--;){var P=b[E];if(L&&P[2]?P[1]!==p[P[0]]:!(P[0]in p))return!1}for(;++E<R;){P=b[E];var F=P[0],U=p[F],N=P[1];if(L&&P[2]){if(U===void 0&&!(F in p))return!1}else{var q=new e;if(a)var Z=a(U,N,F,p,y,q);if(!(Z===void 0?t(N,U,r|c,a,q):Z))return!1}}return!0}return RM=h,RM}var kM,ND;function Sj(){if(ND)return kM;ND=1;var e=xf();function t(r){return r===r&&!e(r)}return kM=t,kM}var IM,UD;function qre(){if(UD)return IM;UD=1;var e=Sj(),t=Xv();function r(c){for(var h=t(c),p=h.length;p--;){var y=h[p],b=c[y];h[p]=[y,b,e(b)]}return h}return IM=r,IM}var zM,$D;function Tj(){if($D)return zM;$D=1;function e(t,r){return function(c){return c==null?!1:c[t]===r&&(r!==void 0||t in Object(c))}}return zM=e,zM}var LM,qD;function Vre(){if(qD)return LM;qD=1;var e=$re(),t=qre(),r=Tj();function c(h){var p=t(h);return p.length==1&&p[0][2]?r(p[0][0],p[0][1]):function(y){return y===h||e(y,h,p)}}return LM=c,LM}var PM,VD;function Gre(){if(VD)return PM;VD=1;var e=N5(),t=$8(),r=ij(),c=a5(),h=Sj(),p=Tj(),y=Vy(),b=1,a=2;function E(R,L){return c(R)&&h(L)?p(y(R),L):function(P){var F=t(P,R);return F===void 0&&F===L?r(P,R):e(L,F,b|a)}}return PM=E,PM}var DM,GD;function Hre(){if(GD)return DM;GD=1;function e(t){return function(r){return r?.[t]}}return DM=e,DM}var OM,HD;function Wre(){if(HD)return OM;HD=1;var e=Wv();function t(r){return function(c){return e(c,r)}}return OM=t,OM}var BM,WD;function Zre(){if(WD)return BM;WD=1;var e=Hre(),t=Wre(),r=a5(),c=Vy();function h(p){return r(p)?e(c(p)):t(p)}return BM=h,BM}var FM,ZD;function $5(){if(ZD)return FM;ZD=1;var e=Vre(),t=Gre(),r=Sw(),c=gs(),h=Zre();function p(y){return typeof y=="function"?y:y==null?r:typeof y=="object"?c(y)?t(y[0],y[1]):e(y):h(y)}return FM=p,FM}var jM,XD;function Xre(){if(XD)return jM;XD=1;var e=$5(),t=wj();function r(c,h){return c&&c.length?t(c,e(h,2)):[]}return jM=r,jM}var Yre=Xre();const YD=Ro(Yre);var NM,KD;function Kre(){if(KD)return NM;KD=1;var e=A8(),t=Xv();function r(c,h){return c&&e(c,h,t)}return NM=r,NM}var UM,QD;function Qre(){if(QD)return UM;QD=1;var e=Ny();function t(r,c){return function(h,p){if(h==null)return h;if(!e(h))return r(h,p);for(var y=h.length,b=c?y:-1,a=Object(h);(c?b--:++b<y)&&p(a[b],b,a)!==!1;);return h}}return UM=t,UM}var $M,JD;function Ej(){if(JD)return $M;JD=1;var e=Kre(),t=Qre(),r=t(e);return $M=r,$M}var qM,eO;function Jre(){if(eO)return qM;eO=1;var e=Ej(),t=Ny();function r(c,h){var p=-1,y=t(c)?Array(c.length):[];return e(c,function(b,a,E){y[++p]=h(b,a,E)}),y}return qM=r,qM}var VM,tO;function eie(){if(tO)return VM;tO=1;function e(t,r){var c=t.length;for(t.sort(r);c--;)t[c]=t[c].value;return t}return VM=e,VM}var GM,nO;function tie(){if(nO)return GM;nO=1;var e=Tw();function t(r,c){if(r!==c){var h=r!==void 0,p=r===null,y=r===r,b=e(r),a=c!==void 0,E=c===null,R=c===c,L=e(c);if(!E&&!L&&!b&&r>c||b&&a&&R&&!E&&!L||p&&a&&R||!h&&R||!y)return 1;if(!p&&!b&&!L&&r<c||L&&h&&y&&!p&&!b||E&&h&&y||!a&&y||!R)return-1}return 0}return GM=t,GM}var HM,rO;function nie(){if(rO)return HM;rO=1;var e=tie();function t(r,c,h){for(var p=-1,y=r.criteria,b=c.criteria,a=y.length,E=h.length;++p<a;){var R=e(y[p],b[p]);if(R){if(p>=E)return R;var L=h[p];return R*(L=="desc"?-1:1)}}return r.index-c.index}return HM=t,HM}var WM,iO;function rie(){if(iO)return WM;iO=1;var e=Ew(),t=Wv(),r=$5(),c=Jre(),h=eie(),p=Uy(),y=nie(),b=Sw(),a=gs();function E(R,L,P){L.length?L=e(L,function(N){return a(N)?function(q){return t(q,N.length===1?N[0]:N)}:N}):L=[b];var F=-1;L=e(L,p(r));var U=c(R,function(N,q,Z){var Q=e(L,function(Y){return Y(N)});return{criteria:Q,index:++F,value:N}});return h(U,function(N,q){return y(N,q,P)})}return WM=E,WM}var ZM,aO;function iie(){if(aO)return ZM;aO=1;var e=aj(),t=rie(),r=i5(),c=N8(),h=r(function(p,y){if(p==null)return[];var b=y.length;return b>1&&c(p,y[0],y[1])?y=[]:b>2&&c(y[0],y[1],y[2])&&(y=[y[0]]),t(p,e(y,1),[])});return ZM=h,ZM}iie();var XM,oO;function aie(){if(oO)return XM;oO=1;var e=Dh(),t=nc(),r="[object Date]";function c(h){return t(h)&&e(h)==r}return XM=c,XM}var YM,sO;function oie(){if(sO)return YM;sO=1;var e=aie(),t=Uy(),r=bw(),c=r&&r.isDate,h=c?t(c):e;return YM=h,YM}oie();var ry=[function(e){return e.setMilliseconds(0)},function(e){return e.setSeconds(0)},function(e){return e.setMinutes(0)},function(e){return e.setHours(0)},function(e){return e.setDate(1)},function(e){return e.setMonth(0)}],sie={millisecond:[],second:ry.slice(0,1),minute:ry.slice(0,2),hour:ry.slice(0,3),day:ry.slice(0,4),month:ry.slice(0,5),year:ry.slice(0,6)},lie=function(e){return function(t){return sie[e].forEach((function(r){r(t)})),t}},cie=function(e){var t=e.format,r=t===void 0?"native":t,c=e.precision,h=c===void 0?"millisecond":c,p=e.useUTC,y=p===void 0||p,b=lie(h);return function(a){if(a===void 0)return a;if(r==="native"||a instanceof Date)return b(a);var E=y?ej(r):QF(r);return b(E(a))}},sm={min:0,max:"auto",stacked:!1,reverse:!1,clamp:!1,nice:!0,round:!1},uie=function(e,t,r,c){var h,p,y,b,a=e.min,E=a===void 0?sm.min:a,R=e.max,L=R===void 0?sm.max:R,P=e.stacked,F=P===void 0?sm.stacked:P,U=e.reverse,N=U===void 0?sm.reverse:U,q=e.clamp,Z=q===void 0?sm.clamp:q,Q=e.nice,Y=Q===void 0?sm.nice:Q,J=e.round,re=J===void 0?sm.round:J;E==="auto"?h=F===!0?(p=t.minStacked)!=null?p:0:t.min:h=E,L==="auto"?y=F===!0?(b=t.maxStacked)!=null?b:0:t.max:y=L;var ae=MF().range(c==="x"?[0,r]:[r,0]).interpolate(re?tF:wv).domain(N?[y,h]:[h,y]).clamp(Z);return Y===!0?ae.nice():typeof Y=="number"&&ae.nice(Y),fie(ae,F)},fie=function(e,t){t===void 0&&(t=!1);var r=e;return r.type="linear",r.stacked=t,r},hie=function(e,t,r){var c=YJ().range([0,r]).domain(t.all);return c.type="point",c},die={round:!1},pie=function(e,t,r,c){var h=e.round,p=h===void 0?die.round:h,y=v5().range(c==="x"?[0,r]:[r,0]).domain(t.all).round(p);return mie(y)},mie=function(e){var t=e;return t.type="band",t},iy={format:"native",precision:"millisecond",min:"auto",max:"auto",useUTC:!0,nice:!1},gie=function(e,t,r){var c,h,p=e.format,y=p===void 0?iy.format:p,b=e.precision,a=b===void 0?iy.precision:b,E=e.min,R=E===void 0?iy.min:E,L=e.max,P=L===void 0?iy.max:L,F=e.useUTC,U=F===void 0?iy.useUTC:F,N=e.nice,q=N===void 0?iy.nice:N,Z=cie({format:y,precision:a,useUTC:U});c=R==="auto"?Z(t.min):y!=="native"?Z(R):R,h=P==="auto"?Z(t.max):y!=="native"?Z(P):P;var Q=U?Ute():Nte();Q.range([0,r]),c&&h&&Q.domain([c,h]),q===!0?Q.nice():typeof q!="object"&&typeof q!="number"||Q.nice(q);var Y=Q;return Y.type="time",Y.useUTC=U,Y},ay={base:10,min:"auto",max:"auto",round:!1,reverse:!1,nice:!0},yie=function(e,t,r,c){var h,p=e.base,y=p===void 0?ay.base:p,b=e.min,a=b===void 0?ay.min:b,E=e.max,R=E===void 0?ay.max:E,L=e.round,P=L===void 0?ay.round:L,F=e.reverse,U=F===void 0?ay.reverse:F,N=e.nice,q=N===void 0?ay.nice:N;if(t.all.some((function(fe){return fe===0})))throw new Error("a log scale domain must not include or cross zero");var Z,Q,Y=!1;if(t.all.filter((function(fe){return fe!=null})).forEach((function(fe){Y||(h===void 0?h=Math.sign(fe):Math.sign(fe)!==h&&(Y=!0))})),Y)throw new Error("a log scale domain must be strictly-positive or strictly-negative");Z=a==="auto"?t.min:a,Q=R==="auto"?t.max:R;var J=RF().base(y),re=c==="x"?[0,r]:[r,0];P===!0?J.rangeRound(re):J.range(re),U===!0?J.domain([Q,Z]):J.domain([Z,Q]),q===!0?J.nice():typeof q=="number"&&J.nice(q);var ae=J;return ae.type="log",ae},oy={constant:1,min:"auto",max:"auto",round:!1,reverse:!1,nice:!0},_ie=function(e,t,r,c){var h,p,y=e.constant,b=y===void 0?oy.constant:y,a=e.min,E=a===void 0?oy.min:a,R=e.max,L=R===void 0?oy.max:R,P=e.round,F=P===void 0?oy.round:P,U=e.reverse,N=U===void 0?oy.reverse:U,q=e.nice,Z=q===void 0?oy.nice:q;h=E==="auto"?t.min:E,p=L==="auto"?t.max:L;var Q=kF().constant(b),Y=c==="x"?[0,r]:[r,0];F===!0?Q.rangeRound(Y):Q.range(Y),N===!0?Q.domain([p,h]):Q.domain([h,p]),Z===!0?Q.nice():typeof Z=="number"&&Q.nice(Z);var J=Q;return J.type="symlog",J};function q5(e,t,r,c){switch(e.type){case"linear":return uie(e,t,r,c);case"point":return hie(0,t,r);case"band":return pie(e,t,r,c);case"time":return gie(e,t,r);case"log":return yie(e,t,r,c);case"symlog":return _ie(e,t,r,c);default:throw new Error("invalid scale spec")}}var Cj=function(e){var t=e.bandwidth();if(t===0)return e;var r=t/2;return e.round()&&(r=Math.round(r)),function(c){var h;return((h=e(c))!=null?h:0)+r}},Mj={millisecond:[Ev,Ev],second:[I3,I3],minute:[PF,UF],hour:[DF,$F],day:[Za((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t.getTime()-e.getTime())/864e5}),(function(e){return Math.floor(e.getTime()/864e5)})),Za((function(e){return e.setUTCHours(0,0,0,0)}),(function(e,t){return e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t.getTime()-e.getTime())/864e5}),(function(e){return Math.floor(e.getTime()/864e5)}))],week:[b1,w1],sunday:[b1,w1],monday:[Cv,Mv],tuesday:[OF,qF],wednesday:[BF,VF],thursday:[zm,Lm],friday:[FF,GF],saturday:[jF,HF],month:[NF,WF],year:[Jd,ep]},vie=Object.keys(Mj),xie=new RegExp("^every\\s*(\\d+)?\\s*("+vie.join("|")+")s?$","i"),Aj=function(e,t){if(Array.isArray(t))return t;if(typeof t=="string"&&"useUTC"in e){var r=t.match(xie);if(r){var c=r[1],h=r[2],p=Mj[h][e.useUTC?1:0];if(h==="day"){var y,b,a=e.domain(),E=a[0],R=a[1],L=new Date(R);return L.setDate(L.getDate()+1),(y=(b=p.every(Number(c??1)))==null?void 0:b.range(E,L))!=null?y:[]}if(c===void 0)return e.ticks(p);var P=p.every(Number(c));if(P)return e.ticks(P)}throw new Error("Invalid tickValues: "+t)}if("ticks"in e){if(t===void 0)return e.ticks();if(typeof(F=t)=="number"&&isFinite(F)&&Math.floor(F)===F)return e.ticks(t)}var F;return e.domain()};function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},Jc.apply(null,arguments)}var Rj=function(e){var t,r=e.axis,c=e.scale,h=e.ticksPosition,p=e.tickValues,y=e.tickSize,b=e.tickPadding,a=e.tickRotation,E=e.truncateTickAt,R=e.engine,L=R===void 0?"svg":R,P=Aj(c,p),F=gj[L],U="bandwidth"in c?Cj(c):c,N={lineX:0,lineY:0},q={textX:0,textY:0},Z=typeof document=="object"&&document.dir==="rtl",Q=F.align.center,Y=F.baseline.center;return r==="x"?(t=function(J){var re;return{x:(re=U(J))!=null?re:0,y:0}},N.lineY=y*(h==="after"?1:-1),q.textY=(y+b)*(h==="after"?1:-1),Y=h==="after"?F.baseline.top:F.baseline.bottom,a===0?Q=F.align.center:h==="after"&&a<0||h==="before"&&a>0?(Q=F.align[Z?"left":"right"],Y=F.baseline.center):(h==="after"&&a>0||h==="before"&&a<0)&&(Q=F.align[Z?"right":"left"],Y=F.baseline.center)):(t=function(J){var re;return{x:0,y:(re=U(J))!=null?re:0}},N.lineX=y*(h==="after"?1:-1),q.textX=(y+b)*(h==="after"?1:-1),Q=h==="after"?F.align.left:F.align.right),{ticks:P.map((function(J){var re=typeof J=="string"?(function(ae){var fe=String(ae).length;return E&&E>0&&fe>E?""+String(ae).slice(0,E).concat("..."):""+ae})(J):J;return Jc({key:J instanceof Date?""+J.valueOf():""+J,value:re},t(J),N,q)})),textAlign:Q,textBaseline:Y}},kj=function(e,t){if(e===void 0||typeof e=="function")return e;if(t.type==="time"){var r=Dw(e);return function(c){return r(c instanceof Date?c:new Date(c))}}return Zv(e)},z3=function(e){var t,r=e.width,c=e.height,h=e.scale,p=e.axis,y=e.values,b=(t=y,(Array.isArray(t)?y:void 0)||Aj(h,y)),a="bandwidth"in h?Cj(h):h,E=p==="x"?b.map((function(R){var L,P;return{key:R instanceof Date?""+R.valueOf():""+R,x1:(L=a(R))!=null?L:0,x2:(P=a(R))!=null?P:0,y1:0,y2:c}})):b.map((function(R){var L,P;return{key:R instanceof Date?""+R.valueOf():""+R,x1:0,x2:r,y1:(L=a(R))!=null?L:0,y2:(P=a(R))!=null?P:0}}));return E},bie=V.memo((function(e){var t,r=e.value,c=e.format,h=e.lineX,p=e.lineY,y=e.onClick,b=e.textBaseline,a=e.textAnchor,E=e.theme,R=e.animatedProps,L=(t=c?.(r))!=null?t:r,P=V.useMemo((function(){var F={opacity:R.opacity};return y?{style:Jc({},F,{cursor:"pointer"}),onClick:function(U){return y(U,L)}}:{style:F}}),[R.opacity,y,L]);return X.jsxs(aa.g,Jc({transform:R.transform},P,{children:[X.jsx("line",{x1:0,x2:h,y1:0,y2:p,style:E.line}),X.jsx(Hy,{dominantBaseline:b,textAnchor:a,transform:R.textTransform,style:E.text,children:""+L})]}))})),of={tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:0},wie=function(e){var t=e.axis,r=e.scale,c=e.x,h=c===void 0?0:c,p=e.y,y=p===void 0?0:p,b=e.length,a=e.ticksPosition,E=e.tickValues,R=e.tickSize,L=R===void 0?of.tickSize:R,P=e.tickPadding,F=P===void 0?of.tickPadding:P,U=e.tickRotation,N=U===void 0?of.tickRotation:U,q=e.format,Z=e.renderTick,Q=Z===void 0?bie:Z,Y=e.truncateTickAt,J=e.legend,re=e.legendPosition,ae=re===void 0?of.legendPosition:re,fe=e.legendOffset,Se=fe===void 0?of.legendOffset:fe,Te=e.style,ue=e.onClick,_e=e.ariaHidden,se=Zi(),me=QK(se.axis,Te),be=V.useMemo((function(){return kj(q,r)}),[q,r]),Ie=Rj({axis:t,scale:r,ticksPosition:a,tickValues:E,tickSize:L,tickPadding:F,tickRotation:N,truncateTickAt:Y}),pe=Ie.ticks,Pe=Ie.textAlign,et=Ie.textBaseline,Be=null;if(J!==void 0){var dt,Ce=0,Ge=0,at=0;t==="y"?(at=-90,Ce=Se,ae==="start"?(dt="start",Ge=b):ae==="middle"?(dt="middle",Ge=b/2):ae==="end"&&(dt="end")):(Ge=Se,ae==="start"?dt="start":ae==="middle"?(dt="middle",Ce=b/2):ae==="end"&&(dt="end",Ce=b)),Be=X.jsx(X.Fragment,{children:X.jsx(Hy,{transform:"translate("+Ce+", "+Ge+") rotate("+at+")",textAnchor:dt,style:Jc({},me.legend.text,{dominantBaseline:"central"}),children:J})})}var nt=js(),gt=nt.animate,Pt=nt.config,Ct=Ph({transform:"translate("+h+","+y+")",lineX2:t==="x"?b:0,lineY2:t==="x"?0:b,config:Pt,immediate:!gt}),Yt=V.useCallback((function(kt){return{opacity:1,transform:"translate("+kt.x+","+kt.y+")",textTransform:"translate("+kt.textX+","+kt.textY+") rotate("+N+")"}}),[N]),pt=V.useCallback((function(kt){return{opacity:0,transform:"translate("+kt.x+","+kt.y+")",textTransform:"translate("+kt.textX+","+kt.textY+") rotate("+N+")"}}),[N]),Rt=Bm(pe,{keys:function(kt){return kt.key},initial:Yt,from:pt,enter:Yt,update:Yt,leave:{opacity:0},config:Pt,immediate:!gt});return X.jsxs(aa.g,{transform:Ct.transform,"aria-hidden":_e,children:[Rt((function(kt,Xe,xn,Vt){return V.createElement(Q,Jc({tickIndex:Vt,format:be,rotate:N,textBaseline:et,textAnchor:Pe,truncateTickAt:Y,animatedProps:kt,theme:me.ticks},Xe,ue?{onClick:ue}:{}))})),X.jsx(aa.line,{style:me.domain.line,x1:0,x2:Ct.lineX2,y1:0,y2:Ct.lineY2}),Be]})},Sie=V.memo(wie),Ij=["top","right","bottom","left"],Tie=V.memo((function(e){var t=e.xScale,r=e.yScale,c=e.width,h=e.height,p={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return X.jsx(X.Fragment,{children:Ij.map((function(y){var b=p[y];if(!b)return null;var a=y==="top"||y==="bottom";return X.jsx(Sie,Jc({},b,{axis:a?"x":"y",x:y==="right"?c:0,y:y==="bottom"?h:0,scale:a?t:r,length:a?c:h,ticksPosition:y==="top"||y==="left"?"before":"after",truncateTickAt:b.truncateTickAt}),y)}))})})),Eie=V.memo((function(e){var t=e.animatedProps,r=Zi();return X.jsx(aa.line,Jc({},t,r.grid.line))})),lO=V.memo((function(e){var t=e.lines,r=js(),c=r.animate,h=r.config,p=Bm(t,{keys:function(y){return y.key},initial:function(y){return{opacity:1,x1:y.x1,x2:y.x2,y1:y.y1,y2:y.y2}},from:function(y){return{opacity:0,x1:y.x1,x2:y.x2,y1:y.y1,y2:y.y2}},enter:function(y){return{opacity:1,x1:y.x1,x2:y.x2,y1:y.y1,y2:y.y2}},update:function(y){return{opacity:1,x1:y.x1,x2:y.x2,y1:y.y1,y2:y.y2}},leave:{opacity:0},config:h,immediate:!c});return X.jsx("g",{children:p((function(y,b){return V.createElement(Eie,Jc({},b,{key:b.key,animatedProps:y}))}))})})),Cie=V.memo((function(e){var t=e.width,r=e.height,c=e.xScale,h=e.yScale,p=e.xValues,y=e.yValues,b=V.useMemo((function(){return!!c&&z3({width:t,height:r,scale:c,axis:"x",values:p})}),[c,p,t,r]),a=V.useMemo((function(){return!!h&&z3({width:t,height:r,scale:h,axis:"y",values:y})}),[r,t,h,y]);return X.jsxs(X.Fragment,{children:[b&&X.jsx(lO,{lines:b}),a&&X.jsx(lO,{lines:a})]})})),Mie=function(e,t){var r,c,h=t.axis,p=t.scale,y=t.x,b=y===void 0?0:y,a=t.y,E=a===void 0?0:a,R=t.length,L=t.ticksPosition,P=t.tickValues,F=t.tickSize,U=F===void 0?of.tickSize:F,N=t.tickPadding,q=N===void 0?of.tickPadding:N,Z=t.tickRotation,Q=Z===void 0?of.tickRotation:Z,Y=t.format,J=t.legend,re=t.legendPosition,ae=re===void 0?of.legendPosition:re,fe=t.legendOffset,Se=fe===void 0?of.legendOffset:fe,Te=t.theme,ue=t.style,_e=Rj({axis:h,scale:p,ticksPosition:L,tickValues:P,tickSize:U,tickPadding:q,tickRotation:Q,engine:"canvas"}),se=_e.ticks,me=_e.textAlign,be=_e.textBaseline;e.save(),e.translate(b,E);var Ie=V8(Te.axis,ue);e.textAlign=me,e.textBaseline=be,Pm(e,Ie.ticks.text);var pe=(r=Ie.domain.line.strokeWidth)!=null?r:0;typeof pe!="string"&&pe>0&&(e.lineWidth=pe,e.lineCap="square",Ie.domain.line.stroke&&(e.strokeStyle=Ie.domain.line.stroke),e.beginPath(),e.moveTo(0,0),e.lineTo(h==="x"?R:0,h==="x"?0:R),e.stroke());var Pe=typeof Y=="function"?Y:function(nt){return""+nt},et=(c=Ie.ticks.line.strokeWidth)!=null?c:0,Be=typeof et!="string"&&et>0;if(se.forEach((function(nt){Be&&(e.lineWidth=et,e.lineCap="square",Ie.ticks.line.stroke&&(e.strokeStyle=Ie.ticks.line.stroke),e.beginPath(),e.moveTo(nt.x,nt.y),e.lineTo(nt.x+nt.lineX,nt.y+nt.lineY),e.stroke());var gt=Pe(nt.value);e.save(),e.translate(nt.x+nt.textX,nt.y+nt.textY),e.rotate(Xl(Q)),Dm(e,Ie.ticks.text,""+gt),e.fillText(""+gt,0,0),e.restore()})),J!==void 0){var dt=0,Ce=0,Ge=0,at="center";h==="y"?(Ge=-90,dt=Se,ae==="start"?(at="start",Ce=R):ae==="middle"?(at="center",Ce=R/2):ae==="end"&&(at="end")):(Ce=Se,ae==="start"?at="start":ae==="middle"?(at="center",dt=R/2):ae==="end"&&(at="end",dt=R)),e.translate(dt,Ce),e.rotate(Xl(Ge)),Pm(e,Ie.legend.text),Ie.legend.text.fill&&(e.fillStyle=Ie.legend.text.fill),e.textAlign=at,e.textBaseline="middle",Dm(e,Ie.legend.text,J)}e.restore()},Aie=function(e,t){var r=t.xScale,c=t.yScale,h=t.width,p=t.height,y=t.top,b=t.right,a=t.bottom,E=t.left,R=t.theme,L={top:y,right:b,bottom:a,left:E};Ij.forEach((function(P){var F=L[P];if(!F)return null;var U=P==="top"||P==="bottom",N=P==="top"||P==="left"?"before":"after",q=U?r:c,Z=kj(F.format,q);Mie(e,Jc({},F,{axis:U?"x":"y",x:P==="right"?h:0,y:P==="bottom"?p:0,scale:q,format:Z,length:U?h:p,ticksPosition:N,theme:R}))}))},cO=function(e,t){var r=t.width,c=t.height,h=t.scale,p=t.axis,y=t.values;z3({width:r,height:c,scale:h,axis:p,values:y}).forEach((function(b){e.beginPath(),e.moveTo(b.x1,b.y1),e.lineTo(b.x2,b.y2),e.stroke()}))},KM,uO;function Rie(){if(uO)return KM;uO=1;var e=Ej();function t(r,c){var h=[];return e(r,function(p,y,b){c(p,y,b)&&h.push(p)}),h}return KM=t,KM}var QM,fO;function kie(){if(fO)return QM;fO=1;var e=cj(),t=Rie(),r=$5(),c=gs();function h(p,y){var b=c(p)?e:t;return b(p,r(y,3))}return QM=h,QM}var Iie=kie();const zie=Ro(Iie);var JM,hO;function Lie(){if(hO)return JM;hO=1;var e=Dh(),t=nc(),r="[object Number]";function c(h){return typeof h=="number"||t(h)&&e(h)==r}return JM=c,JM}var Pie=Lie();const dO=Ro(Pie);var eA,pO;function Die(){if(pO)return eA;pO=1;function e(t,r){for(var c=-1,h=t==null?0:t.length;++c<h&&r(t[c],c,t)!==!1;);return t}return eA=e,eA}var tA,mO;function Oie(){if(mO)return tA;mO=1;var e=$y(),t=Xv();function r(c,h){return c&&e(h,t(h),c)}return tA=r,tA}var nA,gO;function Bie(){if(gO)return nA;gO=1;var e=$y(),t=Hv();function r(c,h){return c&&e(h,t(h),c)}return nA=r,nA}var rA,yO;function Fie(){if(yO)return rA;yO=1;var e=$y(),t=j5();function r(c,h){return e(c,t(c),h)}return rA=r,rA}var iA,_O;function zj(){if(_O)return iA;_O=1;var e=B5(),t=QR(),r=j5(),c=uj(),h=Object.getOwnPropertySymbols,p=h?function(y){for(var b=[];y;)e(b,r(y)),y=t(y);return b}:c;return iA=p,iA}var aA,vO;function jie(){if(vO)return aA;vO=1;var e=$y(),t=zj();function r(c,h){return e(c,t(c),h)}return aA=r,aA}var oA,xO;function Lj(){if(xO)return oA;xO=1;var e=lj(),t=zj(),r=Hv();function c(h){return e(h,r,t)}return oA=c,oA}var sA,bO;function Nie(){if(bO)return sA;bO=1;var e=Object.prototype,t=e.hasOwnProperty;function r(c){var h=c.length,p=new c.constructor(h);return h&&typeof c[0]=="string"&&t.call(c,"index")&&(p.index=c.index,p.input=c.input),p}return sA=r,sA}var lA,wO;function Uie(){if(wO)return lA;wO=1;var e=KR();function t(r,c){var h=c?e(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.byteLength)}return lA=t,lA}var cA,SO;function $ie(){if(SO)return cA;SO=1;var e=/\w*$/;function t(r){var c=new r.constructor(r.source,e.exec(r));return c.lastIndex=r.lastIndex,c}return cA=t,cA}var uA,TO;function qie(){if(TO)return uA;TO=1;var e=jy(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function c(h){return r?Object(r.call(h)):{}}return uA=c,uA}var fA,EO;function Vie(){if(EO)return fA;EO=1;var e=KR(),t=Uie(),r=$ie(),c=qie(),h=I8(),p="[object Boolean]",y="[object Date]",b="[object Map]",a="[object Number]",E="[object RegExp]",R="[object Set]",L="[object String]",P="[object Symbol]",F="[object ArrayBuffer]",U="[object DataView]",N="[object Float32Array]",q="[object Float64Array]",Z="[object Int8Array]",Q="[object Int16Array]",Y="[object Int32Array]",J="[object Uint8Array]",re="[object Uint8ClampedArray]",ae="[object Uint16Array]",fe="[object Uint32Array]";function Se(Te,ue,_e){var se=Te.constructor;switch(ue){case F:return e(Te);case p:case y:return new se(+Te);case U:return t(Te,_e);case N:case q:case Z:case Q:case Y:case J:case re:case ae:case fe:return h(Te,_e);case b:return new se;case a:case L:return new se(Te);case E:return r(Te);case R:return new se;case P:return c(Te)}}return fA=Se,fA}var hA,CO;function Gie(){if(CO)return hA;CO=1;var e=uS(),t=nc(),r="[object Map]";function c(h){return t(h)&&e(h)==r}return hA=c,hA}var dA,MO;function Hie(){if(MO)return dA;MO=1;var e=Gie(),t=Uy(),r=bw(),c=r&&r.isMap,h=c?t(c):e;return dA=h,dA}var pA,AO;function Wie(){if(AO)return pA;AO=1;var e=uS(),t=nc(),r="[object Set]";function c(h){return t(h)&&e(h)==r}return pA=c,pA}var mA,RO;function Zie(){if(RO)return mA;RO=1;var e=Wie(),t=Uy(),r=bw(),c=r&&r.isSet,h=c?t(c):e;return mA=h,mA}var gA,kO;function Xie(){if(kO)return gA;kO=1;var e=_w(),t=Die(),r=r5(),c=Oie(),h=Bie(),p=R8(),y=z8(),b=Fie(),a=jie(),E=fj(),R=Lj(),L=uS(),P=Nie(),F=Vie(),U=P8(),N=gs(),q=xw(),Z=Hie(),Q=xf(),Y=Zie(),J=Xv(),re=Hv(),ae=1,fe=2,Se=4,Te="[object Arguments]",ue="[object Array]",_e="[object Boolean]",se="[object Date]",me="[object Error]",be="[object Function]",Ie="[object GeneratorFunction]",pe="[object Map]",Pe="[object Number]",et="[object Object]",Be="[object RegExp]",dt="[object Set]",Ce="[object String]",Ge="[object Symbol]",at="[object WeakMap]",nt="[object ArrayBuffer]",gt="[object DataView]",Pt="[object Float32Array]",Ct="[object Float64Array]",Yt="[object Int8Array]",pt="[object Int16Array]",Rt="[object Int32Array]",kt="[object Uint8Array]",Xe="[object Uint8ClampedArray]",xn="[object Uint16Array]",Vt="[object Uint32Array]",Kt={};Kt[Te]=Kt[ue]=Kt[nt]=Kt[gt]=Kt[_e]=Kt[se]=Kt[Pt]=Kt[Ct]=Kt[Yt]=Kt[pt]=Kt[Rt]=Kt[pe]=Kt[Pe]=Kt[et]=Kt[Be]=Kt[dt]=Kt[Ce]=Kt[Ge]=Kt[kt]=Kt[Xe]=Kt[xn]=Kt[Vt]=!0,Kt[me]=Kt[be]=Kt[at]=!1;function sn(Jt,zn,gn,yn,Cn,Xt){var jn,_n=zn&ae,er=zn&fe,tr=zn&Se;if(gn&&(jn=Cn?gn(Jt,yn,Cn,Xt):gn(Jt)),jn!==void 0)return jn;if(!Q(Jt))return Jt;var Tn=N(Jt);if(Tn){if(jn=P(Jt),!_n)return y(Jt,jn)}else{var Ln=L(Jt),Xn=Ln==be||Ln==Ie;if(q(Jt))return p(Jt,_n);if(Ln==et||Ln==Te||Xn&&!Cn){if(jn=er||Xn?{}:U(Jt),!_n)return er?a(Jt,h(jn,Jt)):b(Jt,c(jn,Jt))}else{if(!Kt[Ln])return Cn?Jt:{};jn=F(Jt,Ln,_n)}}Xt||(Xt=new e);var lr=Xt.get(Jt);if(lr)return lr;Xt.set(Jt,jn),Y(Jt)?Jt.forEach(function(cr){jn.add(sn(cr,zn,gn,cr,Jt,Xt))}):Z(Jt)&&Jt.forEach(function(cr,un){jn.set(un,sn(cr,zn,gn,un,Jt,Xt))});var Sn=tr?er?R:E:er?re:J,zr=Tn?void 0:Sn(Jt);return t(zr||Jt,function(cr,un){zr&&(un=cr,cr=Jt[un]),r(jn,un,sn(cr,zn,gn,un,Jt,Xt))}),jn}return gA=sn,gA}var yA,IO;function Yie(){if(IO)return yA;IO=1;function e(t,r,c){var h=-1,p=t.length;r<0&&(r=-r>p?0:p+r),c=c>p?p:c,c<0&&(c+=p),p=r>c?0:c-r>>>0,r>>>=0;for(var y=Array(p);++h<p;)y[h]=t[h+r];return y}return yA=e,yA}var _A,zO;function Kie(){if(zO)return _A;zO=1;var e=Wv(),t=Yie();function r(c,h){return h.length<2?c:e(c,t(h,0,-1))}return _A=r,_A}var vA,LO;function Qie(){if(LO)return vA;LO=1;var e=qy(),t=nj(),r=Kie(),c=Vy();function h(p,y){return y=e(y,p),p=r(p,y),p==null||delete p[c(t(y))]}return vA=h,vA}var xA,PO;function Jie(){if(PO)return xA;PO=1;var e=t5();function t(r){return e(r)?void 0:r}return xA=t,xA}var bA,DO;function eae(){if(DO)return bA;DO=1;var e=Ew(),t=Xie(),r=Qie(),c=qy(),h=$y(),p=Jie(),y=oj(),b=Lj(),a=1,E=2,R=4,L=y(function(P,F){var U={};if(P==null)return U;var N=!1;F=e(F,function(Z){return Z=c(Z,P),N||(N=Z.length>1),Z}),h(P,b(P),U),N&&(U=t(U,a|E|R,p));for(var q=F.length;q--;)r(U,F[q]);return U});return bA=L,bA}var tae=eae();const Pj=Ro(tae);function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},gf.apply(null,arguments)}var L3={dotSize:4,noteWidth:120,noteTextOffset:8},nae=function(e){var t=typeof e;return V.isValidElement(e)||t==="string"||t==="function"||t==="object"},rae=function(e){var t=typeof e;return t==="string"||t==="function"},Av=function(e){return e.type==="circle"},P3=function(e){return e.type==="dot"},Rv=function(e){return e.type==="rect"},iae=function(e){var t=e.data,r=e.annotations,c=e.getPosition,h=e.getDimensions;return r.reduce((function(p,y){var b=y.offset||0;return[].concat(p,zie(t,y.match).map((function(a){var E=c(a),R=h(a);return(Av(y)||Rv(y))&&(R.size=R.size+2*b,R.width=R.width+2*b,R.height=R.height+2*b),gf({},Pj(y,["match","offset"]),E,R,{size:y.size||R.size,datum:a})})))}),[])},aae=function(e,t,r,c){var h=Math.atan2(c-t,r-e);return _re(Yv(h))},Dj=function(e){var t,r,c=e.x,h=e.y,p=e.noteX,y=e.noteY,b=e.noteWidth,a=b===void 0?L3.noteWidth:b,E=e.noteTextOffset,R=E===void 0?L3.noteTextOffset:E;if(dO(p))t=c+p;else{if(p.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");t=p.abs}if(dO(y))r=h+y;else{if(y.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");r=y.abs}var L=c,P=h,F=aae(c,h,t,r);if(Av(e)){var U=wm(Xl(F),e.size/2);L+=U.x,P+=U.y}if(Rv(e)){var N=Math.round((F+90)/45)%8;N===0&&(P-=e.height/2),N===1&&(L+=e.width/2,P-=e.height/2),N===2&&(L+=e.width/2),N===3&&(L+=e.width/2,P+=e.height/2),N===4&&(P+=e.height/2),N===5&&(L-=e.width/2,P+=e.height/2),N===6&&(L-=e.width/2),N===7&&(L-=e.width/2,P-=e.height/2)}var q=t,Z=t;return(F+90)%360>180?(q-=a,Z-=a):Z+=a,{points:[[L,P],[t,r],[Z,r]],text:[q,r-R],angle:F+90}},Oj=function(e){var t=e.data,r=e.annotations,c=e.getPosition,h=e.getDimensions;return V.useMemo((function(){return iae({data:t,annotations:r,getPosition:c,getDimensions:h})}),[t,r,c,h])},oae=function(e){var t=e.annotations;return V.useMemo((function(){return t.map((function(r){return gf({},r,{computed:Dj(gf({},r))})}))}),[t])},sae=function(e){return V.useMemo((function(){return Dj(e)}),[e])},lae=function(e){var t=e.datum,r=e.x,c=e.y,h=e.note,p=Zi(),y=js(),b=y.animate,a=y.config,E=Ph({x:r,y:c,config:a,immediate:!b});return typeof h=="function"?V.createElement(h,{x:r,y:c,datum:t}):X.jsxs(X.Fragment,{children:[p.annotations.text.outlineWidth>0&&X.jsx(aa.text,{x:E.x,y:E.y,style:gf({},p.annotations.text,{strokeLinejoin:"round",strokeWidth:2*p.annotations.text.outlineWidth,stroke:p.annotations.text.outlineColor}),children:h}),X.jsx(aa.text,{x:E.x,y:E.y,style:Pj(p.annotations.text,["outlineWidth","outlineColor"]),children:h})]})},OO=function(e){var t=e.points,r=e.isOutline,c=r!==void 0&&r,h=Zi(),p=V.useMemo((function(){var a=t[0];return t.slice(1).reduce((function(E,R){return E+" L"+R[0]+","+R[1]}),"M"+a[0]+","+a[1])}),[t]),y=Cre(p);if(c&&h.annotations.link.outlineWidth<=0)return null;var b=gf({},h.annotations.link);return c&&(b.strokeLinecap="square",b.strokeWidth=h.annotations.link.strokeWidth+2*h.annotations.link.outlineWidth,b.stroke=h.annotations.link.outlineColor,b.opacity=h.annotations.link.outlineOpacity),X.jsx(aa.path,{fill:"none",d:y,style:b})},cae=function(e){var t=e.x,r=e.y,c=e.size,h=Zi(),p=js(),y=p.animate,b=p.config,a=Ph({x:t,y:r,radius:c/2,config:b,immediate:!y});return X.jsxs(X.Fragment,{children:[h.annotations.outline.outlineWidth>0&&X.jsx(aa.circle,{cx:a.x,cy:a.y,r:a.radius,style:gf({},h.annotations.outline,{fill:"none",strokeWidth:h.annotations.outline.strokeWidth+2*h.annotations.outline.outlineWidth,stroke:h.annotations.outline.outlineColor,opacity:h.annotations.outline.outlineOpacity})}),X.jsx(aa.circle,{cx:a.x,cy:a.y,r:a.radius,style:h.annotations.outline})]})},uae=function(e){var t=e.x,r=e.y,c=e.size,h=c===void 0?L3.dotSize:c,p=Zi(),y=js(),b=y.animate,a=y.config,E=Ph({x:t,y:r,radius:h/2,config:a,immediate:!b});return X.jsxs(X.Fragment,{children:[p.annotations.outline.outlineWidth>0&&X.jsx(aa.circle,{cx:E.x,cy:E.y,r:E.radius,style:gf({},p.annotations.outline,{fill:"none",strokeWidth:2*p.annotations.outline.outlineWidth,stroke:p.annotations.outline.outlineColor,opacity:p.annotations.outline.outlineOpacity})}),X.jsx(aa.circle,{cx:E.x,cy:E.y,r:E.radius,style:p.annotations.symbol})]})},fae=function(e){var t=e.x,r=e.y,c=e.width,h=e.height,p=e.borderRadius,y=p===void 0?6:p,b=Zi(),a=js(),E=a.animate,R=a.config,L=Ph({x:t-c/2,y:r-h/2,width:c,height:h,config:R,immediate:!E});return X.jsxs(X.Fragment,{children:[b.annotations.outline.outlineWidth>0&&X.jsx(aa.rect,{x:L.x,y:L.y,rx:y,ry:y,width:L.width,height:L.height,style:gf({},b.annotations.outline,{fill:"none",strokeWidth:b.annotations.outline.strokeWidth+2*b.annotations.outline.outlineWidth,stroke:b.annotations.outline.outlineColor,opacity:b.annotations.outline.outlineOpacity})}),X.jsx(aa.rect,{x:L.x,y:L.y,rx:y,ry:y,width:L.width,height:L.height,style:b.annotations.outline})]})},hae=function(e){var t=e.datum,r=e.x,c=e.y,h=e.note,p=sae(e);if(!nae(h))throw new Error("note should be a valid react element");return X.jsxs(X.Fragment,{children:[X.jsx(OO,{points:p.points,isOutline:!0}),Av(e)&&X.jsx(cae,{x:r,y:c,size:e.size}),P3(e)&&X.jsx(uae,{x:r,y:c,size:e.size}),Rv(e)&&X.jsx(fae,{x:r,y:c,width:e.width,height:e.height,borderRadius:e.borderRadius}),X.jsx(OO,{points:p.points}),X.jsx(lae,{datum:t,x:p.text[0],y:p.text[1],note:h})]})},BO=function(e,t){t.forEach((function(r,c){var h=r[0],p=r[1];c===0?e.moveTo(h,p):e.lineTo(h,p)}))},dae=function(e,t){var r=t.annotations,c=t.theme;r.length!==0&&(e.save(),r.forEach((function(h){if(!rae(h.note))throw new Error("note is invalid for canvas implementation");c.annotations.link.outlineWidth>0&&(e.lineCap="square",e.strokeStyle=c.annotations.link.outlineColor,e.lineWidth=c.annotations.link.strokeWidth+2*c.annotations.link.outlineWidth,e.beginPath(),BO(e,h.computed.points),e.stroke(),e.lineCap="butt"),Av(h)&&c.annotations.outline.outlineWidth>0&&(e.strokeStyle=c.annotations.outline.outlineColor,e.lineWidth=c.annotations.outline.strokeWidth+2*c.annotations.outline.outlineWidth,e.beginPath(),e.arc(h.x,h.y,h.size/2,0,2*Math.PI),e.stroke()),P3(h)&&c.annotations.symbol.outlineWidth>0&&(e.strokeStyle=c.annotations.symbol.outlineColor,e.lineWidth=2*c.annotations.symbol.outlineWidth,e.beginPath(),e.arc(h.x,h.y,h.size/2,0,2*Math.PI),e.stroke()),Rv(h)&&c.annotations.outline.outlineWidth>0&&(e.strokeStyle=c.annotations.outline.outlineColor,e.lineWidth=c.annotations.outline.strokeWidth+2*c.annotations.outline.outlineWidth,e.beginPath(),e.rect(h.x-h.width/2,h.y-h.height/2,h.width,h.height),e.stroke()),e.strokeStyle=c.annotations.link.stroke,e.lineWidth=c.annotations.link.strokeWidth,e.beginPath(),BO(e,h.computed.points),e.stroke(),Av(h)&&(e.strokeStyle=c.annotations.outline.stroke,e.lineWidth=c.annotations.outline.strokeWidth,e.beginPath(),e.arc(h.x,h.y,h.size/2,0,2*Math.PI),e.stroke()),P3(h)&&(e.fillStyle=c.annotations.symbol.fill,e.beginPath(),e.arc(h.x,h.y,h.size/2,0,2*Math.PI),e.fill()),Rv(h)&&(e.strokeStyle=c.annotations.outline.stroke,e.lineWidth=c.annotations.outline.strokeWidth,e.beginPath(),e.rect(h.x-h.width/2,h.y-h.height/2,h.width,h.height),e.stroke()),typeof h.note=="function"?h.note(e,{datum:h.datum,x:h.computed.text[0],y:h.computed.text[1],theme:c}):(e.font=c.annotations.text.fontSize+"px "+c.annotations.text.fontFamily,e.textAlign="left",e.textBaseline="alphabetic",e.fillStyle=c.annotations.text.fill,e.strokeStyle=c.annotations.text.outlineColor,e.lineWidth=2*c.annotations.text.outlineWidth,c.annotations.text.outlineWidth>0&&(e.lineJoin="round",e.strokeText(h.note,h.computed.text[0],h.computed.text[1]),e.lineJoin="miter"),e.fillText(h.note,h.computed.text[0],h.computed.text[1]))})),e.restore())};function FO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,c=Array(t);r<t;r++)c[r]=e[r];return c}function pae(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=(function(h,p){if(h){if(typeof h=="string")return FO(h,p);var y={}.toString.call(h).slice(8,-1);return y==="Object"&&h.constructor&&(y=h.constructor.name),y==="Map"||y==="Set"?Array.from(h):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?FO(h,p):void 0}})(e))||t){r&&(e=r);var c=0;return function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S1(){return S1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},S1.apply(null,arguments)}var Bj={nivo:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"],category10:$te,accent:qte,dark2:Vte,paired:Gte,pastel1:Hte,pastel2:Wte,set1:Zte,set2:Xte,set3:tj,tableau10:Yte},mae=Object.keys(Bj),Fj={brown_blueGreen:Ow,purpleRed_green:Bw,pink_yellowGreen:Fw,purple_orange:jw,red_blue:Nw,red_grey:Uw,red_yellow_blue:$w,red_yellow_green:qw,spectral:Vw},gae=Object.keys(Fj),yae={brown_blueGreen:Kte,purpleRed_green:Qte,pink_yellowGreen:Jte,purple_orange:ene,red_blue:tne,red_grey:nne,red_yellow_blue:rne,red_yellow_green:ine,spectral:ane},jj={blues:rS,greens:iS,greys:aS,oranges:lS,purples:oS,reds:sS,blue_green:Gw,blue_purple:Hw,green_blue:Ww,orange_red:Zw,purple_blue_green:Xw,purple_blue:Yw,purple_red:Kw,red_purple:Qw,yellow_green_blue:Jw,yellow_green:eS,yellow_orange_brown:tS,yellow_orange_red:nS},_ae=Object.keys(jj),vae={blues:_ne,greens:vne,greys:xne,oranges:Sne,purples:bne,reds:wne,turbo:zne,viridis:Lne,inferno:Dne,magma:Pne,plasma:One,cividis:Tne,warm:Cne,cool:Mne,cubehelixDefault:Ene,blue_green:one,blue_purple:sne,green_blue:lne,orange_red:cne,purple_blue_green:une,purple_blue:fne,purple_red:hne,red_purple:dne,yellow_green_blue:pne,yellow_green:mne,yellow_orange_brown:gne,yellow_orange_red:yne},wA=S1({},Bj,Fj,jj),xae=function(e){return mae.includes(e)},bae=function(e){return gae.includes(e)},wae=function(e){return _ae.includes(e)},Sae={rainbow:Ane,sinebow:Ine};S1({},yae,vae,Sae);var Tae=function(e){return e.theme!==void 0},Eae=function(e){return e.from!==void 0},Cae=function(e,t){if(typeof e=="function")return e;if(O5(e)){if(Tae(e)){if(t===void 0)throw new Error("Unable to use color from theme as no theme was provided");var r=Lh(t,e.theme);if(r===void 0)throw new Error("Color from theme is undefined at path: '"+e.theme+"'");return function(){return r}}if(Eae(e)){var c=function(a){return Lh(a,e.from)};if(Array.isArray(e.modifiers)){for(var h,p=[],y=function(){var a=h.value,E=a[0],R=a[1];if(E==="brighter")p.push((function(L){return L.brighter(R)}));else if(E==="darker")p.push((function(L){return L.darker(R)}));else{if(E!=="opacity")throw new Error("Invalid color modifier: '"+E+"', must be one of: 'brighter', 'darker', 'opacity'");p.push((function(L){return L.opacity=R,L}))}},b=pae(e.modifiers);!(h=b()).done;)y();return p.length===0?c:function(a){return p.reduce((function(E,R){return R(E)}),Cy(c(a))).toString()}}return c}throw new Error("Invalid color spec, you should either specify 'theme' or 'from' when using a config object")}return function(){return e}},yf=function(e,t){return V.useMemo((function(){return Cae(e,t)}),[e,t])},Mae=function(e,t){if(typeof e=="function")return e;var r=typeof t=="function"?t:function(L){return Lh(L,t)};if(Array.isArray(e)){var c=ym(e),h=function(L){return c(r(L))};return h.scale=c,h}if(O5(e)){if((function(L){return L.datum!==void 0})(e))return function(L){return Lh(L,e.datum)};if((function(L){return L.scheme!==void 0})(e)){if(xae(e.scheme)){var p=ym(wA[e.scheme]),y=function(L){return p(r(L))};return y.scale=p,y}if(bae(e.scheme)){if(e.size!==void 0&&(e.size<3||e.size>11))throw new Error("Invalid size '"+e.size+"' for diverging color scheme '"+e.scheme+"', must be between 3~11");var b=ym(wA[e.scheme][e.size||11]),a=function(L){return b(r(L))};return a.scale=b,a}if(wae(e.scheme)){if(e.size!==void 0&&(e.size<3||e.size>9))throw new Error("Invalid size '"+e.size+"' for sequential color scheme '"+e.scheme+"', must be between 3~9");var E=ym(wA[e.scheme][e.size||9]),R=function(L){return E(r(L))};return R.scale=E,R}}throw new Error("Invalid colors, when using an object, you should either pass a 'datum' or a 'scheme' property")}return function(){return e}},Nj=function(e,t){return V.useMemo((function(){return Mae(e,t)}),[e,t])},Aae=function(e){var t=e.x,r=e.y,c=e.size,h=e.fill,p=e.opacity,y=p===void 0?1:p,b=e.borderWidth,a=b===void 0?0:b,E=e.borderColor;return X.jsx("circle",{r:c/2,cx:t+c/2,cy:r+c/2,fill:h,opacity:y,strokeWidth:a,stroke:E===void 0?"transparent":E,style:{pointerEvents:"none"}})},Rae=function(e){var t=e.x,r=e.y,c=e.size,h=e.fill,p=e.opacity,y=p===void 0?1:p,b=e.borderWidth,a=b===void 0?0:b,E=e.borderColor;return X.jsx("g",{transform:"translate("+t+","+r+")",children:X.jsx("path",{d:`
                    M`+c/2+` 0
                    L`+.8*c+" "+c/2+`
                    L`+c/2+" "+c+`
                    L`+.2*c+" "+c/2+`
                    L`+c/2+` 0
                `,fill:h,opacity:y,strokeWidth:a,stroke:E===void 0?"transparent":E,style:{pointerEvents:"none"}})})},kae=function(e){var t=e.x,r=e.y,c=e.size,h=e.fill,p=e.opacity,y=p===void 0?1:p,b=e.borderWidth,a=b===void 0?0:b,E=e.borderColor;return X.jsx("rect",{x:t,y:r,fill:h,opacity:y,strokeWidth:a,stroke:E===void 0?"transparent":E,width:c,height:c,style:{pointerEvents:"none"}})},Iae=function(e){var t=e.x,r=e.y,c=e.size,h=e.fill,p=e.opacity,y=p===void 0?1:p,b=e.borderWidth,a=b===void 0?0:b,E=e.borderColor;return X.jsx("g",{transform:"translate("+t+","+r+")",children:X.jsx("path",{d:`
                M`+c/2+` 0
                L`+c+" "+c+`
                L0 `+c+`
                L`+c/2+` 0
            `,fill:h,opacity:y,strokeWidth:a,stroke:E===void 0?"transparent":E,style:{pointerEvents:"none"}})})};function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},Gd.apply(null,arguments)}var Vl={translateX:0,translateY:0,padding:0,itemsSpacing:0,itemDirection:"left-to-right",justify:!1,symbolShape:"square",symbolSize:16,symbolSpacing:8},zae={top:0,right:0,bottom:0,left:0},V5=function(e){var t,r=e.direction,c=e.itemsSpacing,h=e.padding,p=e.itemCount,y=e.itemWidth,b=e.itemHeight;if(typeof h!="number"&&(typeof(t=h)!="object"||Array.isArray(t)||t===null))throw new Error("Invalid property padding, must be one of: number, object");var a=typeof h=="number"?{top:h,right:h,bottom:h,left:h}:Gd({},zae,h),E=a.left+a.right,R=a.top+a.bottom,L=y+E,P=b+R,F=(p-1)*c;return r==="row"?L=y*p+F+E:r==="column"&&(P=b*p+F+R),{width:L,height:P,padding:a}},Uj=function(e){var t=e.anchor,r=e.translateX,c=e.translateY,h=e.containerWidth,p=e.containerHeight,y=e.width,b=e.height,a=r,E=c;switch(t){case"top":a+=(h-y)/2;break;case"top-right":a+=h-y;break;case"right":a+=h-y,E+=(p-b)/2;break;case"bottom-right":a+=h-y,E+=p-b;break;case"bottom":a+=(h-y)/2,E+=p-b;break;case"bottom-left":E+=p-b;break;case"left":E+=(p-b)/2;break;case"center":a+=(h-y)/2,E+=(p-b)/2}return{x:a,y:E}},$j=function(e){var t,r,c,h,p,y,b=e.direction,a=e.justify,E=e.symbolSize,R=e.symbolSpacing,L=e.width,P=e.height;switch(b){case"left-to-right":t=0,r=(P-E)/2,h=P/2,y="central",a?(c=L,p="end"):(c=E+R,p="start");break;case"right-to-left":t=L-E,r=(P-E)/2,h=P/2,y="central",a?(c=0,p="start"):(c=L-E-R,p="end");break;case"top-to-bottom":t=(L-E)/2,r=0,c=L/2,p="middle",a?(h=P,y="alphabetic"):(h=E+R,y="text-before-edge");break;case"bottom-to-top":t=(L-E)/2,r=P-E,c=L/2,p="middle",a?(h=0,y="text-before-edge"):(h=P-E-R,y="alphabetic")}return{symbolX:t,symbolY:r,labelX:c,labelY:h,labelAnchor:p,labelAlignment:y}},Lae={circle:Aae,diamond:Rae,square:kae,triangle:Iae},Pae=function(e){var t,r,c,h,p,y,b,a,E,R,L,P=e.x,F=e.y,U=e.width,N=e.height,q=e.data,Z=e.direction,Q=Z===void 0?Vl.itemDirection:Z,Y=e.justify,J=Y===void 0?Vl.justify:Y,re=e.textColor,ae=e.background,fe=ae===void 0?"transparent":ae,Se=e.opacity,Te=Se===void 0?1:Se,ue=e.symbolShape,_e=ue===void 0?Vl.symbolShape:ue,se=e.symbolSize,me=se===void 0?Vl.symbolSize:se,be=e.symbolSpacing,Ie=be===void 0?Vl.symbolSpacing:be,pe=e.symbolBorderWidth,Pe=pe===void 0?0:pe,et=e.symbolBorderColor,Be=et===void 0?"transparent":et,dt=e.onClick,Ce=e.onMouseEnter,Ge=e.onMouseLeave,at=e.toggleSerie,nt=e.effects,gt=V.useState({}),Pt=gt[0],Ct=gt[1],Yt=Zi(),pt=V.useCallback((function(yn){if(nt){var Cn=nt.filter((function(Xt){return Xt.on==="hover"})).reduce((function(Xt,jn){return Gd({},Xt,jn.style)}),{});Ct(Cn)}Ce?.(q,yn)}),[Ce,q,nt]),Rt=V.useCallback((function(yn){if(nt){var Cn=nt.filter((function(Xt){return Xt.on!=="hover"})).reduce((function(Xt,jn){return Gd({},Xt,jn.style)}),{});Ct(Cn)}Ge?.(q,yn)}),[Ge,q,nt]),kt=$j({direction:Q,justify:J,symbolSize:(t=Pt.symbolSize)!=null?t:me,symbolSpacing:Ie,width:U,height:N}),Xe=kt.symbolX,xn=kt.symbolY,Vt=kt.labelX,Kt=kt.labelY,sn=kt.labelAnchor,Jt=kt.labelAlignment,zn=[dt,Ce,Ge,at].some((function(yn){return yn!==void 0})),gn=typeof _e=="function"?_e:Lae[_e];return X.jsxs("g",{transform:"translate("+P+","+F+")",style:{opacity:(r=Pt.itemOpacity)!=null?r:Te},children:[X.jsx("rect",{width:U,height:N,fill:(c=Pt.itemBackground)!=null?c:fe,style:{cursor:zn?"pointer":"auto"},onClick:function(yn){dt?.(q,yn),at?.(q.id)},onMouseEnter:pt,onMouseLeave:Rt}),V.createElement(gn,Gd({id:q.id,x:Xe,y:xn,size:(h=Pt.symbolSize)!=null?h:me,fill:(p=(y=q.fill)!=null?y:q.color)!=null?p:"black",borderWidth:(b=Pt.symbolBorderWidth)!=null?b:Pe,borderColor:(a=Pt.symbolBorderColor)!=null?a:Be},q.hidden?Yt.legends.hidden.symbol:void 0)),X.jsx(Hy,{textAnchor:sn,style:Gd({},Yt.legends.text,{fill:(E=(R=(L=Pt.itemTextColor)!=null?L:re)!=null?R:Yt.legends.text.fill)!=null?E:"black",dominantBaseline:Jt,pointerEvents:"none",userSelect:"none"},q.hidden?Yt.legends.hidden.text:void 0),x:Vt,y:Kt,children:q.label})]})},Dae=function(e){var t=e.data,r=e.x,c=e.y,h=e.direction,p=e.padding,y=p===void 0?Vl.padding:p,b=e.justify,a=e.effects,E=e.itemWidth,R=e.itemHeight,L=e.itemDirection,P=L===void 0?Vl.itemDirection:L,F=e.itemsSpacing,U=F===void 0?Vl.itemsSpacing:F,N=e.itemTextColor,q=e.itemBackground,Z=q===void 0?"transparent":q,Q=e.itemOpacity,Y=Q===void 0?1:Q,J=e.symbolShape,re=e.symbolSize,ae=e.symbolSpacing,fe=e.symbolBorderWidth,Se=e.symbolBorderColor,Te=e.onClick,ue=e.onMouseEnter,_e=e.onMouseLeave,se=e.toggleSerie,me=V5({itemCount:t.length,itemWidth:E,itemHeight:R,itemsSpacing:U,direction:h,padding:y}).padding,be=h==="row"?E+U:0,Ie=h==="column"?R+U:0;return X.jsx("g",{transform:"translate("+r+","+c+")",children:t.map((function(pe,Pe){return X.jsx(Pae,{data:pe,x:Pe*be+me.left,y:Pe*Ie+me.top,width:E,height:R,direction:P,justify:b,effects:a,textColor:N,background:Z,opacity:Y,symbolShape:J,symbolSize:re,symbolSpacing:ae,symbolBorderWidth:fe,symbolBorderColor:Se,onClick:Te,onMouseEnter:ue,onMouseLeave:_e,toggleSerie:se},Pe)}))})},qj=function(e){var t=e.data,r=e.containerWidth,c=e.containerHeight,h=e.translateX,p=h===void 0?Vl.translateX:h,y=e.translateY,b=y===void 0?Vl.translateY:y,a=e.anchor,E=e.direction,R=e.padding,L=R===void 0?Vl.padding:R,P=e.justify,F=e.itemsSpacing,U=F===void 0?Vl.itemsSpacing:F,N=e.itemWidth,q=e.itemHeight,Z=e.itemDirection,Q=e.itemTextColor,Y=e.itemBackground,J=e.itemOpacity,re=e.symbolShape,ae=e.symbolSize,fe=e.symbolSpacing,Se=e.symbolBorderWidth,Te=e.symbolBorderColor,ue=e.onClick,_e=e.onMouseEnter,se=e.onMouseLeave,me=e.toggleSerie,be=e.effects,Ie=V5({itemCount:t.length,itemsSpacing:U,itemWidth:N,itemHeight:q,direction:E,padding:L}),pe=Ie.width,Pe=Ie.height,et=Uj({anchor:a,translateX:p,translateY:b,containerWidth:r,containerHeight:c,width:pe,height:Pe}),Be=et.x,dt=et.y;return X.jsx(Dae,{data:t,x:Be,y:dt,direction:E,padding:L,justify:P,effects:be,itemsSpacing:U,itemWidth:N,itemHeight:q,itemDirection:Z,itemTextColor:Q,itemBackground:Y,itemOpacity:J,symbolShape:re,symbolSize:ae,symbolSpacing:fe,symbolBorderWidth:Se,symbolBorderColor:Te,onClick:ue,onMouseEnter:_e,onMouseLeave:se,toggleSerie:typeof me=="boolean"?void 0:me})},Oae={start:"left",middle:"center",end:"right"},Vj=function(e,t){var r=t.data,c=t.containerWidth,h=t.containerHeight,p=t.translateX,y=p===void 0?0:p,b=t.translateY,a=b===void 0?0:b,E=t.anchor,R=t.direction,L=t.padding,P=L===void 0?0:L,F=t.justify,U=F!==void 0&&F,N=t.itemsSpacing,q=N===void 0?0:N,Z=t.itemWidth,Q=t.itemHeight,Y=t.itemDirection,J=Y===void 0?"left-to-right":Y,re=t.itemTextColor,ae=t.symbolSize,fe=ae===void 0?16:ae,Se=t.symbolSpacing,Te=Se===void 0?8:Se,ue=t.theme,_e=V5({itemCount:r.length,itemWidth:Z,itemHeight:Q,itemsSpacing:q,direction:R,padding:P}),se=_e.width,me=_e.height,be=_e.padding,Ie=Uj({anchor:E,translateX:y,translateY:a,containerWidth:c,containerHeight:h,width:se,height:me}),pe=Ie.x,Pe=Ie.y,et=R==="row"?Z+q:0,Be=R==="column"?Q+q:0;e.save(),e.translate(pe,Pe),Pm(e,ue.legends.text),r.forEach((function(dt,Ce){var Ge,at=Ce*et+be.left,nt=Ce*Be+be.top,gt=$j({direction:J,justify:U,symbolSize:fe,symbolSpacing:Te,width:Z,height:Q}),Pt=gt.symbolX,Ct=gt.symbolY,Yt=gt.labelX,pt=gt.labelY,Rt=gt.labelAnchor,kt=gt.labelAlignment;e.fillStyle=(Ge=dt.color)!=null?Ge:"black",e.fillRect(at+Pt,nt+Ct,fe,fe),e.textAlign=Oae[Rt],kt==="central"&&(e.textBaseline="middle"),Dm(e,Gd({},ue.legends.text,{fill:re??ue.legends.text.fill}),String(dt.label),at+Yt,nt+pt)})),e.restore()},Bae=function(e,t,r,c,h,p){p>0?(e.moveTo(t+p,r),e.lineTo(t+c-p,r),e.quadraticCurveTo(t+c,r,t+c,r+p),e.lineTo(t+c,r+h-p),e.quadraticCurveTo(t+c,r+h,t+c-p,r+h),e.lineTo(t+p,r+h),e.quadraticCurveTo(t,r+h,t,r+h-p),e.lineTo(t,r+p),e.quadraticCurveTo(t,r,t+p,r),e.closePath()):e.rect(t,r,c,h)};function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},di.apply(null,arguments)}function rp(e,t){if(e==null)return{};var r={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;r[c]=e[c]}return r}var jO,Fae=function(e){var t=e.bars,r=e.annotations,c=Oj({data:t,annotations:r,getPosition:function(h){return{x:h.x+h.width/2,y:h.y+h.height/2}},getDimensions:function(h){var p=h.height,y=h.width;return{width:y,height:p,size:Math.max(y,p)}}});return X.jsx(X.Fragment,{children:c.map((function(h,p){return X.jsx(hae,di({},h),p)}))})},jae=function(e){var t=e.width,r=e.height,c=e.legends,h=e.toggleSerie;return X.jsx(X.Fragment,{children:c.map((function(p,y){var b,a=p[0],E=p[1];return X.jsx(qj,di({},a,{containerWidth:t,containerHeight:r,data:(b=a.data)!=null?b:E,toggleSerie:a.toggleSerie&&a.dataFrom==="keys"?h:void 0}),y)}))})},Nae=["data"],Uae=function(e){var t,r=e.bar,c=r.data,h=rp(r,Nae),p=e.style,y=p.borderColor,b=p.color,a=p.height,E=p.labelColor,R=p.labelOpacity,L=p.labelX,P=p.labelY,F=p.transform,U=p.width,N=p.textAnchor,q=e.borderRadius,Z=e.borderWidth,Q=e.label,Y=e.shouldRenderLabel,J=e.isInteractive,re=e.onClick,ae=e.onMouseEnter,fe=e.onMouseLeave,Se=e.tooltip,Te=e.isFocusable,ue=e.ariaLabel,_e=e.ariaLabelledBy,se=e.ariaDescribedBy,me=e.ariaDisabled,be=e.ariaHidden,Ie=Zi(),pe=Cw(),Pe=pe.showTooltipFromEvent,et=pe.showTooltipAt,Be=pe.hideTooltip,dt=V.useMemo((function(){return function(){return V.createElement(Se,di({},h,c))}}),[Se,h,c]),Ce=V.useCallback((function(Ct){re?.(di({color:h.color},c),Ct)}),[h,c,re]),Ge=V.useCallback((function(Ct){return Pe(dt(),Ct)}),[Pe,dt]),at=V.useCallback((function(Ct){ae?.(c,Ct),Pe(dt(),Ct)}),[c,ae,Pe,dt]),nt=V.useCallback((function(Ct){fe?.(c,Ct),Be()}),[c,Be,fe]),gt=V.useCallback((function(){et(dt(),[h.absX+h.width/2,h.absY])}),[et,dt,h]),Pt=V.useCallback((function(){Be()}),[Be]);return X.jsxs(aa.g,{transform:F,children:[X.jsx(aa.rect,{width:Kd(U,(function(Ct){return Math.max(Ct,0)})),height:Kd(a,(function(Ct){return Math.max(Ct,0)})),rx:q,ry:q,fill:(t=c.fill)!=null?t:b,strokeWidth:Z,stroke:y,focusable:Te,tabIndex:Te?0:void 0,"aria-label":ue?ue(c):void 0,"aria-labelledby":_e?_e(c):void 0,"aria-describedby":se?se(c):void 0,"aria-disabled":me?me(c):void 0,"aria-hidden":be?be(c):void 0,onMouseEnter:J?at:void 0,onMouseMove:J?Ge:void 0,onMouseLeave:J?nt:void 0,onClick:J?Ce:void 0,onFocus:J&&Te?gt:void 0,onBlur:J&&Te?Pt:void 0,"data-testid":"bar.item."+c.id+"."+c.index}),Y&&X.jsx(Hy,{x:L,y:P,textAnchor:N,dominantBaseline:"central",fillOpacity:R,style:di({},Ie.labels.text,{pointerEvents:"none",fill:E}),children:Q})]})},$ae=["color","label"],qae=function(e){var t=e.color,r=e.label,c=rp(e,$ae);return X.jsx(W8,{id:r,value:c.formattedValue,enableChip:!0,color:t})},Hi={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",valueScale:{type:"linear",nice:!0,round:!1},indexScale:{type:"band",round:!1},padding:.1,innerPadding:0,enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:qae,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],enableTotals:!1,totalsOffset:10},Gi=di({},Hi,{layers:["grid","axes","bars","totals","markers","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},barComponent:Uae,defs:[],fill:[],markers:[],animate:!0,animateOnMount:!1,motionConfig:"default",role:"img",isFocusable:!1}),Ha=di({},Hi,{layers:["grid","axes","bars","totals","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},renderBar:function(e,t){var r=t.bar,c=r.color,h=r.height,p=r.width,y=r.x,b=r.y,a=t.borderColor,E=t.borderRadius,R=t.borderWidth,L=t.label,P=t.shouldRenderLabel,F=t.labelStyle,U=t.labelX,N=t.labelY,q=t.textAnchor;e.fillStyle=c,R>0&&(e.strokeStyle=a,e.lineWidth=R),e.beginPath(),Bae(e,y,b,p,h,Math.min(E,h)),e.fill(),R>0&&e.stroke(),P&&(e.textBaseline="middle",e.textAlign=q==="middle"?"center":q,Dm(e,F,L,y+U,b+N))},pixelRatio:typeof window<"u"&&(jO=window.devicePixelRatio)!=null?jO:1}),Gj=function(e,t,r,c,h,p){return q5(c,{all:e.map(t),min:0,max:0},h,p).padding(r)},Hj=function(e,t){return e.map((function(r){return di({},t.reduce((function(c,h){return c[h]=null,c}),{}),r)}))},mS=function(e){return Object.keys(e).reduce((function(t,r){return e[r]&&(t[r]=e[r]),t}),{})},gS=function(e){return[e,Number(e)]};function Wj(e,t,r,c){return e===void 0&&(e=Hi.layout),r===void 0&&(r=Hi.labelPosition),c===void 0&&(c=Hi.labelOffset),function(h,p){var y=c*(t?-1:1);if(e==="horizontal"){var b=h/2;return r==="start"?b=t?h:0:r==="end"&&(b=t?0:h),{labelX:b+y,labelY:p/2,textAnchor:r==="middle"?"middle":t?"end":"start"}}var a=p/2;return r==="start"?a=t?0:p:r==="end"&&(a=t?p:0),{labelX:h/2,labelY:a-y,textAnchor:"middle"}}}var Vae=["layout","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],G5=function(e,t){return e>t},Zj=function(e,t){return e<t},Xj=function(e,t){return Array.from(" ".repeat(t-e),(function(r,c){return e+c}))},Gae=function(e){return G5(e,0)?0:e},Hae=function(e,t,r,c){var h=e.data,p=e.formatValue,y=e.getColor,b=e.getIndex,a=e.getTooltipLabel,E=e.innerPadding,R=E===void 0?0:E,L=e.keys,P=e.xScale,F=e.yScale,U=e.margin,N=r?Zj:G5,q=h.map(mS),Z=[];return L.forEach((function(Q,Y){return Xj(0,P.domain().length).forEach((function(J){var re,ae,fe,Se=gS(h[J][Q]),Te=Se[0],ue=Se[1],_e=b(h[J]),se=((re=P(_e))!=null?re:0)+t*Y+R*Y,me=N(ae=ue,0)?(fe=F(ae))!=null?fe:0:c,be=(function(pe,Pe){var et;return N(pe,0)?c-Pe:((et=F(pe))!=null?et:0)-c})(ue,me),Ie={id:Q,value:Te===null?Te:ue,formattedValue:p(ue),hidden:!1,index:J,indexValue:_e,data:q[J]};Z.push({key:Q+"."+Ie.indexValue,index:Z.length,data:Ie,x:se,y:me,absX:U.left+se,absY:U.top+me,width:t,height:be,color:y(Ie),label:a(Ie)})}))})),Z},Wae=function(e,t,r,c){var h=e.data,p=e.formatValue,y=e.getIndex,b=e.getColor,a=e.getTooltipLabel,E=e.keys,R=e.innerPadding,L=R===void 0?0:R,P=e.xScale,F=e.yScale,U=e.margin,N=r?Zj:G5,q=h.map(mS),Z=[];return E.forEach((function(Q,Y){return Xj(0,F.domain().length).forEach((function(J){var re,ae,fe,Se=gS(h[J][Q]),Te=Se[0],ue=Se[1],_e=y(h[J]),se=N(ae=ue,0)?c:(fe=P(ae))!=null?fe:0,me=((re=F(_e))!=null?re:0)+t*Y+L*Y,be=(function(pe,Pe){var et;return N(pe,0)?((et=P(pe))!=null?et:0)-c:c-Pe})(ue,se),Ie={id:Q,value:Te===null?Te:ue,formattedValue:p(ue),hidden:!1,index:J,indexValue:_e,data:q[J]};Z.push({key:Q+"."+Ie.indexValue,index:Z.length,data:Ie,x:se,y:me,absX:U.left+se,absY:U.top+me,width:be,height:t,color:b(Ie),label:a(Ie)})}))})),Z},Zae=function(e){var t,r,c,h=e.layout,p=e.width,y=e.height,b=e.padding,a=b===void 0?0:b,E=e.innerPadding,R=E===void 0?0:E,L=e.valueScale,P=e.indexScale,F=e.hiddenIds,U=F===void 0?[]:F,N=rp(e,Vae),q=N.keys.filter((function(Pe){return!U.includes(Pe)})),Z=Hj(N.data,q),Q=h==="vertical"?["y","x",p]:["x","y",y],Y=Q[0],J=Q[1],re=Q[2],ae=Gj(Z,N.getIndex,a,P,re,J),fe=L.min==="auto"?Gae:function(Pe){return Pe},Se=Z.reduce((function(Pe,et){return[].concat(Pe,q.map((function(Be){return et[Be]})))}),[]).filter(Boolean),Te=fe(Math.min.apply(Math,Se)),ue=(c=Math.max.apply(Math,Se),isFinite(c)?c:0),_e=q5(L,{all:Se,min:Te,max:ue},Y==="x"?p:y,Y),se=h==="vertical"?[ae,_e]:[_e,ae],me=se[0],be=se[1],Ie=(ae.bandwidth()-R*(q.length-1))/q.length,pe=[di({},N,{data:Z,keys:q,innerPadding:R,xScale:me,yScale:be}),Ie,(t=L.reverse)!=null&&t,(r=_e(0))!=null?r:0];return{xScale:me,yScale:be,bars:Ie>0?h==="vertical"?Hae.apply(void 0,pe):Wae.apply(void 0,pe):[]}},Xae=["data","layout","width","height","padding","valueScale","indexScale","hiddenIds"],Yj=function(e){var t;return e.some(Array.isArray)?Yj((t=[]).concat.apply(t,e)):e},Yae=function(e,t,r){var c=e.formatValue,h=e.getColor,p=e.getIndex,y=e.getTooltipLabel,b=e.innerPadding,a=e.stackedData,E=e.xScale,R=e.yScale,L=e.margin,P=[];return a.forEach((function(F){return E.domain().forEach((function(U,N){var q,Z,Q=F[N],Y=(q=E(p(Q.data)))!=null?q:0,J=((Z=(function(ue){return R(ue[r?0:1])})(Q))!=null?Z:0)+.5*b,re=(function(ue,_e){var se;return((se=R(ue[r?1:0]))!=null?se:0)-_e})(Q,J)-b,ae=gS(Q.data[F.key]),fe=ae[0],Se=ae[1],Te={id:F.key,value:fe===null?fe:Se,formattedValue:c(Se),hidden:!1,index:N,indexValue:U,data:mS(Q.data)};P.push({key:F.key+"."+U,index:P.length,data:Te,x:Y,y:J,absX:L.left+Y,absY:L.top+J,width:t,height:re,color:h(Te),label:y(Te)})}))})),P},Kae=function(e,t,r){var c=e.formatValue,h=e.getColor,p=e.getIndex,y=e.getTooltipLabel,b=e.innerPadding,a=e.stackedData,E=e.xScale,R=e.yScale,L=e.margin,P=[];return a.forEach((function(F){return R.domain().forEach((function(U,N){var q,Z,Q=F[N],Y=(q=R(p(Q.data)))!=null?q:0,J=((Z=(function(ue){return E(ue[r?1:0])})(Q))!=null?Z:0)+.5*b,re=(function(ue,_e){var se;return((se=E(ue[r?0:1]))!=null?se:0)-_e})(Q,J)-b,ae=gS(Q.data[F.key]),fe=ae[0],Se=ae[1],Te={id:F.key,value:fe===null?fe:Se,formattedValue:c(Se),hidden:!1,index:N,indexValue:U,data:mS(Q.data)};P.push({key:F.key+"."+U,index:P.length,data:Te,x:J,y:Y,absX:L.left+J,absY:L.top+Y,width:re,height:t,color:h(Te),label:y(Te)})}))})),P},Qae=function(e){var t,r,c=e.data,h=e.layout,p=e.width,y=e.height,b=e.padding,a=b===void 0?0:b,E=e.valueScale,R=e.indexScale,L=e.hiddenIds,P=L===void 0?[]:L,F=rp(e,Xae),U=F.keys.filter((function(Ie){return!P.includes(Ie)})),N=NJ().keys(U).offset(UJ)(Hj(c,U)),q=h==="vertical"?["y","x",p]:["x","y",y],Z=q[0],Q=q[1],Y=q[2],J=Gj(c,F.getIndex,a,R,Y,Q),re=(r=Yj(N),E.type==="log"?r.filter((function(Ie){return Ie!==0})):r),ae=Math.min.apply(Math,re),fe=Math.max.apply(Math,re),Se=q5(E,{all:re,min:ae,max:fe},Z==="x"?p:y,Z),Te=h==="vertical"?[J,Se]:[Se,J],ue=Te[0],_e=Te[1],se=F.innerPadding>0?F.innerPadding:0,me=J.bandwidth(),be=[di({},F,{innerPadding:se,stackedData:N,xScale:ue,yScale:_e}),me,(t=E.reverse)!=null&&t];return{xScale:ue,yScale:_e,bars:me>0?h==="vertical"?Yae.apply(void 0,be):Kae.apply(void 0,be):[]}},Jae=function(e){var t=e.bars,r=e.direction,c=e.from,h=e.groupMode,p=e.layout,y=e.legendLabel,b=e.reverse,a=vj(y??(c==="indexes"?"indexValue":"id"));return c==="indexes"?(function(E,R,L){var P=YD(E.map((function(F){var U,N;return{id:(U=F.data.indexValue)!=null?U:"",label:L(F.data),hidden:F.data.hidden,color:(N=F.color)!=null?N:"#000"}})),(function(F){return F.id}));return R==="horizontal"&&P.reverse(),P})(t,p,a):(function(E,R,L,P,F,U){var N=YD(E.map((function(q){var Z;return{id:q.data.id,label:U(q.data),hidden:q.data.hidden,color:(Z=q.color)!=null?Z:"#000"}})),(function(q){return q.id}));return(R==="vertical"&&P==="stacked"&&L==="column"&&F!==!0||R==="horizontal"&&P==="stacked"&&F===!0)&&N.reverse(),N})(t,p,r,h,b,a)},NO=function(e,t,r){var c=e.get(t)||0;e.set(t,c+r)},eoe=function(e,t,r){var c=e.get(t)||0;e.set(t,c+(r>0?r:0))},toe=function(e,t,r){var c=e.get(t)||0;e.set(t,Math.max(c,Number(r)))},noe=function(e,t){var r=e.get(t)||0;e.set(t,r+1)},Kj=function(e){var t,r=e.indexBy,c=r===void 0?Hi.indexBy:r,h=e.keys,p=h===void 0?Hi.keys:h,y=e.label,b=y===void 0?Hi.label:y,a=e.tooltipLabel,E=a===void 0?Hi.tooltipLabel:a,R=e.valueFormat,L=e.colors,P=L===void 0?Hi.colors:L,F=e.colorBy,U=F===void 0?Hi.colorBy:F,N=e.borderColor,q=N===void 0?Hi.borderColor:N,Z=e.labelTextColor,Q=Z===void 0?Hi.labelTextColor:Z,Y=e.groupMode,J=Y===void 0?Hi.groupMode:Y,re=e.layout,ae=re===void 0?Hi.layout:re,fe=e.data,Se=e.margin,Te=e.width,ue=e.height,_e=e.padding,se=_e===void 0?Hi.padding:_e,me=e.innerPadding,be=me===void 0?Hi.innerPadding:me,Ie=e.valueScale,pe=Ie===void 0?Hi.valueScale:Ie,Pe=e.indexScale,et=Pe===void 0?Hi.indexScale:Pe,Be=e.initialHiddenIds,dt=Be===void 0?Hi.initialHiddenIds:Be,Ce=e.enableLabel,Ge=Ce===void 0?Hi.enableLabel:Ce,at=e.labelSkipWidth,nt=at===void 0?Hi.labelSkipWidth:at,gt=e.labelSkipHeight,Pt=gt===void 0?Hi.labelSkipHeight:gt,Ct=e.legends,Yt=Ct===void 0?Hi.legends:Ct,pt=e.legendLabel,Rt=e.totalsOffset,kt=Rt===void 0?Hi.totalsOffset:Rt,Xe=V.useState(dt??[]),xn=Xe[0],Vt=Xe[1],Kt=V.useCallback((function(un){Vt((function(Wt){return Wt.indexOf(un)>-1?Wt.filter((function(fn){return fn!==un})):[].concat(Wt,[un])}))}),[]),sn=Mh(c),Jt=Mh(b),zn=Mh(E),gn=pS(R),yn=Zi(),Cn=Nj(P,U),Xt=yf(q,yn),jn=yf(Q,yn),_n=(J==="grouped"?Zae:Qae)({layout:ae,data:fe,getIndex:sn,keys:p,width:Te,height:ue,getColor:Cn,padding:se,innerPadding:be,valueScale:pe,indexScale:et,hiddenIds:xn,formatValue:gn,getTooltipLabel:zn,margin:Se}),er=_n.bars,tr=_n.xScale,Tn=_n.yScale,Ln=V.useMemo((function(){return er.filter((function(un){return un.data.value!==null})).map((function(un,Wt){return di({},un,{index:Wt})}))}),[er]),Xn=V.useCallback((function(un){var Wt=un.width,fn=un.height;return!!Ge&&!(nt>0&&Wt<nt)&&!(Pt>0&&fn<Pt)}),[Ge,nt,Pt]),lr=V.useMemo((function(){return p.map((function(un){var Wt=er.find((function(fn){return fn.data.id===un}));return di({},Wt,{data:di({id:un},Wt?.data,{hidden:xn.includes(un)})})}))}),[xn,p,er]),Sn=(t=pe.reverse)!=null&&t,zr=V.useMemo((function(){return Yt.map((function(un){return[un,Jae({bars:un.dataFrom==="keys"?lr:er,direction:un.direction,from:un.dataFrom,groupMode:J,layout:ae,legendLabel:pt,reverse:Sn})]}))}),[Yt,lr,er,J,ae,pt,Sn]),cr=V.useMemo((function(){return(function(un,Wt,fn,Nn,fr,Zr,Le){Nn===void 0&&(Nn=Hi.layout),fr===void 0&&(fr=Hi.groupMode);var le=[];if(un.length===0)return le;var ce=new Map,Me=un[0].width,Oe=un[0].height;if(fr==="stacked"){var Ue=new Map;un.forEach((function(je){var tt=je.data,Tt=tt.indexValue,Lt=tt.value;NO(ce,Tt,Number(Lt)),eoe(Ue,Tt,Number(Lt))})),Ue.forEach((function(je,tt){var Tt,Lt,Mt,dn=ce.get(tt)||0;Nn==="vertical"?(Tt=Wt(tt),Lt=fn(je),Mt=fn(je/2)):(Tt=Wt(je),Lt=fn(tt),Mt=Wt(je/2)),Tt+=Nn==="vertical"?Me/2:Zr,Lt+=Nn==="vertical"?-Zr:Oe/2,le.push({key:"total_"+tt,x:Tt,y:Lt,value:dn,formattedValue:Le(dn),animationOffset:Mt})}))}else if(fr==="grouped"){var Qe=new Map,qe=new Map;un.forEach((function(je){var tt=je.data,Tt=tt.indexValue,Lt=tt.value;NO(ce,Tt,Number(Lt)),toe(Qe,Tt,Number(Lt)),noe(qe,Tt)})),Qe.forEach((function(je,tt){var Tt,Lt,Mt,dn=ce.get(tt)||0,bn=qe.get(tt);Nn==="vertical"?(Tt=Wt(tt),Lt=fn(je),Mt=fn(je/2)):(Tt=Wt(je),Lt=fn(tt),Mt=Wt(je/2)),Tt+=Nn==="vertical"?bn*Me/2:Zr,Lt+=Nn==="vertical"?-Zr:bn*Oe/2,le.push({key:"total_"+tt,x:Tt,y:Lt,value:dn,formattedValue:Le(dn),animationOffset:Mt})}))}return le})(er,tr,Tn,ae,J,kt,gn)}),[er,tr,Tn,ae,J,kt,gn]);return{bars:er,barsWithValue:Ln,xScale:tr,yScale:Tn,getIndex:sn,getLabel:Jt,getTooltipLabel:zn,formatValue:gn,getColor:Cn,getBorderColor:Xt,getLabelColor:jn,shouldRenderBarLabel:Xn,hiddenIds:xn,toggleSerie:Kt,legendsWithData:zr,barTotals:cr}},roe=function(e){var t=e.data,r=e.springConfig,c=e.animate,h=e.layout,p=h===void 0?Gi.layout:h,y=Zi();return Bm(t,{keys:function(b){return b.key},from:function(b){return{x:p==="vertical"?b.x:b.animationOffset,y:p==="vertical"?b.animationOffset:b.y,labelOpacity:0}},enter:function(b){return{x:b.x,y:b.y,labelOpacity:1}},update:function(b){return{x:b.x,y:b.y,labelOpacity:1}},leave:function(b){return{x:p==="vertical"?b.x:b.animationOffset,y:p==="vertical"?b.animationOffset:b.y,labelOpacity:0}},config:r,immediate:!c,initial:c?void 0:null})((function(b,a){return X.jsx(aa.text,{x:b.x,y:b.y,fillOpacity:b.labelOpacity,style:di({},y.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:y.labels.text.fontSize,fontFamily:y.labels.text.fontFamily,textAnchor:p==="vertical"?"middle":"start",alignmentBaseline:p==="vertical"?"alphabetic":"middle",children:a.formattedValue},a.key)}))},ioe=["isInteractive","animate","motionConfig","theme","renderWrapper"],aoe=function(e){var t,r=e.data,c=e.indexBy,h=e.keys,p=e.margin,y=e.width,b=e.height,a=e.groupMode,E=e.layout,R=e.valueScale,L=e.indexScale,P=e.padding,F=e.innerPadding,U=e.axisTop,N=e.axisRight,q=e.axisBottom,Z=q===void 0?Gi.axisBottom:q,Q=e.axisLeft,Y=Q===void 0?Gi.axisLeft:Q,J=e.enableGridX,re=J===void 0?Gi.enableGridX:J,ae=e.enableGridY,fe=ae===void 0?Gi.enableGridY:ae,Se=e.gridXValues,Te=e.gridYValues,ue=e.layers,_e=ue===void 0?Gi.layers:ue,se=e.barComponent,me=se===void 0?Gi.barComponent:se,be=e.enableLabel,Ie=be===void 0?Gi.enableLabel:be,pe=e.label,Pe=e.labelSkipWidth,et=Pe===void 0?Gi.labelSkipWidth:Pe,Be=e.labelSkipHeight,dt=Be===void 0?Gi.labelSkipHeight:Be,Ce=e.labelTextColor,Ge=e.labelPosition,at=Ge===void 0?Gi.labelPosition:Ge,nt=e.labelOffset,gt=nt===void 0?Gi.labelOffset:nt,Pt=e.markers,Ct=Pt===void 0?Gi.markers:Pt,Yt=e.colorBy,pt=e.colors,Rt=e.defs,kt=Rt===void 0?Gi.defs:Rt,Xe=e.fill,xn=Xe===void 0?Gi.fill:Xe,Vt=e.borderRadius,Kt=Vt===void 0?Gi.borderRadius:Vt,sn=e.borderWidth,Jt=sn===void 0?Gi.borderWidth:sn,zn=e.borderColor,gn=e.annotations,yn=gn===void 0?Gi.annotations:gn,Cn=e.legendLabel,Xt=e.tooltipLabel,jn=e.valueFormat,_n=e.isInteractive,er=_n===void 0?Gi.isInteractive:_n,tr=e.tooltip,Tn=tr===void 0?Gi.tooltip:tr,Ln=e.onClick,Xn=e.onMouseEnter,lr=e.onMouseLeave,Sn=e.legends,zr=e.role,cr=zr===void 0?Gi.role:zr,un=e.ariaLabel,Wt=e.ariaLabelledBy,fn=e.ariaDescribedBy,Nn=e.isFocusable,fr=Nn===void 0?Gi.isFocusable:Nn,Zr=e.barAriaLabel,Le=e.barAriaLabelledBy,le=e.barAriaDescribedBy,ce=e.barAriaHidden,Me=e.barAriaDisabled,Oe=e.initialHiddenIds,Ue=e.enableTotals,Qe=Ue===void 0?Gi.enableTotals:Ue,qe=e.totalsOffset,je=qe===void 0?Gi.totalsOffset:qe,tt=e.forwardedRef,Tt=js(),Lt=Tt.animate,Mt=Tt.config,dn=dS(y,b,p),bn=dn.outerWidth,In=dn.outerHeight,Bn=dn.margin,Mn=dn.innerWidth,nr=dn.innerHeight,Fn=Kj({indexBy:c,label:pe,tooltipLabel:Xt,valueFormat:jn,colors:pt,colorBy:Yt,borderColor:zn,labelTextColor:Ce,groupMode:a,layout:E,data:r,keys:h,margin:Bn,width:Mn,height:nr,padding:P,innerPadding:F,valueScale:R,indexScale:L,enableLabel:Ie,labelSkipWidth:et,labelSkipHeight:dt,legends:Sn,legendLabel:Cn,initialHiddenIds:Oe,totalsOffset:je}),pr=Fn.bars,Rr=Fn.barsWithValue,Ci=Fn.xScale,Kr=Fn.yScale,Xr=Fn.getLabel,qn=Fn.getTooltipLabel,kr=Fn.getBorderColor,gr=Fn.getLabelColor,On=Fn.shouldRenderBarLabel,Er=Fn.toggleSerie,Wn=Fn.legendsWithData,Ur=Fn.barTotals,mi=Fn.getColor,Ji=Wj(E,(t=R?.reverse)!=null&&t,at,gt),Aa=Bm(Rr,{keys:function(Rn){return Rn.key},from:function(Rn){return di({borderColor:kr(Rn),color:Rn.color,height:0,labelColor:gr(Rn),labelOpacity:0},Ji(Rn.width,Rn.height),{transform:"translate("+Rn.x+", "+(Rn.y+Rn.height)+")",width:Rn.width},E==="vertical"?{}:{height:Rn.height,transform:"translate("+Rn.x+", "+Rn.y+")",width:0})},enter:function(Rn){return di({borderColor:kr(Rn),color:Rn.color,height:Rn.height,labelColor:gr(Rn),labelOpacity:1},Ji(Rn.width,Rn.height),{transform:"translate("+Rn.x+", "+Rn.y+")",width:Rn.width})},update:function(Rn){return di({borderColor:kr(Rn),color:Rn.color,height:Rn.height,labelColor:gr(Rn),labelOpacity:1},Ji(Rn.width,Rn.height),{transform:"translate("+Rn.x+", "+Rn.y+")",width:Rn.width})},leave:function(Rn){return di({borderColor:kr(Rn),color:Rn.color,height:0,labelColor:gr(Rn),labelOpacity:0},Ji(Rn.width,Rn.height),{labelY:0,transform:"translate("+Rn.x+", "+(Rn.y+Rn.height)+")",width:Rn.width},E==="vertical"?{}:di({},Ji(Rn.width,Rn.height),{labelX:0,height:Rn.height,transform:"translate("+Rn.x+", "+Rn.y+")",width:0}))},config:Mt,immediate:!Lt,initial:Lt?void 0:null}),ea=V.useMemo((function(){return{borderRadius:Kt,borderWidth:Jt,enableLabel:Ie,isInteractive:er,labelSkipWidth:et,labelSkipHeight:dt,onClick:Ln,onMouseEnter:Xn,onMouseLeave:lr,getTooltipLabel:qn,tooltip:Tn,isFocusable:fr,ariaLabel:Zr,ariaLabelledBy:Le,ariaDescribedBy:le,ariaHidden:ce,ariaDisabled:Me}}),[Kt,Jt,Ie,qn,er,dt,et,Ln,Xn,lr,Tn,fr,Zr,Le,le,ce,Me]),ko=xj(kt,pr,xn,{dataKey:"data",targetKey:"data.fill"}),Yi={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};_e.includes("annotations")&&(Yi.annotations=X.jsx(Fae,{bars:pr,annotations:yn},"annotations")),_e.includes("axes")&&(Yi.axes=X.jsx(Tie,{xScale:Ci,yScale:Kr,width:Mn,height:nr,top:U,right:N,bottom:Z,left:Y},"axes")),_e.includes("bars")&&(Yi.bars=X.jsx(V.Fragment,{children:Aa((function(Rn,_t){return V.createElement(me,di({},ea,{bar:_t,style:Rn,shouldRenderLabel:On(_t),label:Xr(_t.data)}))}))},"bars")),_e.includes("grid")&&(Yi.grid=X.jsx(Cie,{width:Mn,height:nr,xScale:re?Ci:null,yScale:fe?Kr:null,xValues:Se,yValues:Te},"grid")),_e.includes("legends")&&(Yi.legends=X.jsx(jae,{width:Mn,height:nr,legends:Wn,toggleSerie:Er},"legends")),_e.includes("markers")&&(Yi.markers=X.jsx(Ere,{markers:Ct,width:Mn,height:nr,xScale:Ci,yScale:Kr},"markers")),_e.includes("totals")&&Qe&&(Yi.totals=X.jsx(roe,{data:Ur,springConfig:Mt,animate:Lt,layout:E},"totals"));var oo=di({},ea,{margin:Bn,width:y,height:b,innerWidth:Mn,innerHeight:nr,bars:pr,legendData:Wn,enableLabel:Ie,xScale:Ci,yScale:Kr,tooltip:Tn,getTooltipLabel:qn,onClick:Ln,onMouseEnter:Xn,onMouseLeave:lr,getColor:mi});return X.jsx(_j,{width:bn,height:In,margin:Bn,defs:ko,role:cr,ariaLabel:un,ariaLabelledBy:Wt,ariaDescribedBy:fn,isFocusable:fr,ref:tt,children:_e.map((function(Rn,_t){var Xa;return typeof Rn=="function"?X.jsx(V.Fragment,{children:V.createElement(Rn,oo)},_t):(Xa=Yi?.[Rn])!=null?Xa:null}))})},Qj=V.forwardRef((function(e,t){var r=e.isInteractive,c=r===void 0?Gi.isInteractive:r,h=e.animate,p=h===void 0?Gi.animate:h,y=e.motionConfig,b=y===void 0?Gi.motionConfig:y,a=e.theme,E=e.renderWrapper,R=rp(e,ioe);return X.jsx(fS,{animate:p,isInteractive:c,motionConfig:b,renderWrapper:E,theme:a,children:X.jsx(aoe,di({},R,{isInteractive:c,forwardedRef:t}))})})),ooe=["isInteractive","renderWrapper","theme"],SA=function(e,t,r,c){return e.find((function(h){return Lre(h.x+t.left,h.y+t.top,h.width,h.height,r,c)}))},soe=function(e){var t,r=e.data,c=e.indexBy,h=e.keys,p=e.margin,y=e.width,b=e.height,a=e.groupMode,E=e.layout,R=e.valueScale,L=e.indexScale,P=e.padding,F=e.innerPadding,U=e.axisTop,N=e.axisRight,q=e.axisBottom,Z=q===void 0?Ha.axisBottom:q,Q=e.axisLeft,Y=Q===void 0?Ha.axisLeft:Q,J=e.enableGridX,re=J===void 0?Ha.enableGridX:J,ae=e.enableGridY,fe=ae===void 0?Ha.enableGridY:ae,Se=e.gridXValues,Te=e.gridYValues,ue=e.labelPosition,_e=ue===void 0?Ha.labelPosition:ue,se=e.labelOffset,me=se===void 0?Ha.labelOffset:se,be=e.layers,Ie=be===void 0?Ha.layers:be,pe=e.renderBar,Pe=pe===void 0?Ha.renderBar:pe,et=e.enableLabel,Be=et===void 0?Ha.enableLabel:et,dt=e.label,Ce=e.labelSkipWidth,Ge=Ce===void 0?Ha.labelSkipWidth:Ce,at=e.labelSkipHeight,nt=at===void 0?Ha.labelSkipHeight:at,gt=e.labelTextColor,Pt=e.colorBy,Ct=e.colors,Yt=e.borderRadius,pt=Yt===void 0?Ha.borderRadius:Yt,Rt=e.borderWidth,kt=Rt===void 0?Ha.borderWidth:Rt,Xe=e.borderColor,xn=e.annotations,Vt=xn===void 0?Ha.annotations:xn,Kt=e.legendLabel,sn=e.tooltipLabel,Jt=e.valueFormat,zn=e.isInteractive,gn=zn===void 0?Ha.isInteractive:zn,yn=e.tooltip,Cn=yn===void 0?Ha.tooltip:yn,Xt=e.onClick,jn=e.onMouseEnter,_n=e.onMouseLeave,er=e.legends,tr=e.pixelRatio,Tn=tr===void 0?Ha.pixelRatio:tr,Ln=e.role,Xn=e.forwardedRef,lr=e.enableTotals,Sn=lr===void 0?Ha.enableTotals:lr,zr=e.totalsOffset,cr=zr===void 0?Ha.totalsOffset:zr,un=V.useRef(null),Wt=Zi(),fn=dS(y,b,p),Nn=fn.margin,fr=fn.innerWidth,Zr=fn.innerHeight,Le=fn.outerWidth,le=fn.outerHeight,ce=Kj({indexBy:c,label:dt,tooltipLabel:sn,valueFormat:Jt,colors:Ct,colorBy:Pt,borderColor:Xe,labelTextColor:gt,groupMode:a,layout:E,data:r,keys:h,margin:Nn,width:fr,height:Zr,padding:P,innerPadding:F,valueScale:R,indexScale:L,enableLabel:Be,labelSkipWidth:Ge,labelSkipHeight:nt,legends:er,legendLabel:Kt,totalsOffset:cr}),Me=ce.bars,Oe=ce.barsWithValue,Ue=ce.xScale,Qe=ce.yScale,qe=ce.getLabel,je=ce.getTooltipLabel,tt=ce.getBorderColor,Tt=ce.getLabelColor,Lt=ce.shouldRenderBarLabel,Mt=ce.legendsWithData,dn=ce.barTotals,bn=ce.getColor,In=Cw(),Bn=In.showTooltipFromEvent,Mn=In.hideTooltip,nr=oae({annotations:Oj({data:Me,annotations:Vt,getPosition:function(qn){return{x:qn.x,y:qn.y}},getDimensions:function(qn){var kr=qn.width,gr=qn.height;return{width:kr,height:gr,size:Math.max(kr,gr)}}})}),Fn=V.useMemo((function(){return{borderRadius:pt,borderWidth:kt,isInteractive:gn,isFocusable:!1,labelSkipWidth:Ge,labelSkipHeight:nt,margin:Nn,width:y,height:b,innerWidth:fr,innerHeight:Zr,bars:Me,legendData:Mt,enableLabel:Be,xScale:Ue,yScale:Qe,tooltip:Cn,getTooltipLabel:je,onClick:Xt,onMouseEnter:jn,onMouseLeave:_n,getColor:bn}}),[pt,kt,gn,Ge,nt,Nn,y,b,fr,Zr,Me,Mt,Be,Ue,Qe,Cn,je,Xt,jn,_n,bn]),pr=pS(Jt),Rr=Wj(E,(t=R?.reverse)!=null&&t,_e,me);V.useEffect((function(){if(un.current){un.current.width=Le*Tn,un.current.height=le*Tn;var qn=un.current.getContext("2d");qn.scale(Tn,Tn),qn.fillStyle=Wt.background,qn.fillRect(0,0,Le,le),qn.translate(Nn.left,Nn.top),Ie.forEach((function(kr){kr==="grid"?typeof Wt.grid.line.strokeWidth=="number"&&Wt.grid.line.strokeWidth>0&&(qn.lineWidth=Wt.grid.line.strokeWidth,qn.strokeStyle=Wt.grid.line.stroke,re&&cO(qn,{width:fr,height:Zr,scale:Ue,axis:"x",values:Se}),fe&&cO(qn,{width:fr,height:Zr,scale:Qe,axis:"y",values:Te})):kr==="axes"?Aie(qn,{xScale:Ue,yScale:Qe,width:fr,height:Zr,top:U,right:N,bottom:Z,left:Y,theme:Wt}):kr==="bars"?(Pm(qn,Wt.text),Oe.forEach((function(gr){Pe(qn,di({bar:gr,borderColor:tt(gr),borderRadius:pt,borderWidth:kt,label:qe(gr.data),shouldRenderLabel:Lt(gr),labelStyle:di({},Wt.labels.text,{fill:Tt(gr)})},Rr(gr.width,gr.height)))}))):kr==="legends"?Mt.forEach((function(gr){var On=gr[0],Er=gr[1];Vj(qn,di({},On,{data:Er,containerWidth:fr,containerHeight:Zr,theme:Wt}))})):kr==="annotations"?dae(qn,{annotations:nr,theme:Wt}):kr==="totals"&&Sn?(function(gr,On,Er,Wn){Wn===void 0&&(Wn=Ha.layout),Pm(gr,Er.labels.text),gr.textBaseline=Wn==="vertical"?"alphabetic":"middle",gr.textAlign=Wn==="vertical"?"center":"start",On.forEach((function(Ur){Dm(gr,Er.labels.text,Ur.formattedValue,Ur.x,Ur.y)}))})(qn,dn,Wt,E):typeof kr=="function"&&kr(qn,Fn)})),qn.save()}}),[Z,Y,N,U,Oe,pt,kt,nr,re,fe,tt,qe,Tt,Se,Te,a,b,Zr,fr,Fn,Ie,E,Mt,Nn.left,Nn.top,le,Le,Tn,Pe,Ue,Qe,Lt,Wt,y,dn,Sn,pr,Rr]);var Ci=V.useCallback((function(qn){if(Me&&un.current){var kr=Gb(un.current,qn),gr=kr[0],On=kr[1],Er=SA(Me,Nn,gr,On);Er!==void 0?(Bn(V.createElement(Cn,di({},Er.data,{color:Er.color,label:Er.label,value:Number(Er.data.value)})),qn),qn.type==="mouseenter"&&jn?.(Er.data,qn)):Mn()}}),[Mn,Nn,jn,Me,Bn,Cn]),Kr=V.useCallback((function(qn){if(Me&&un.current){Mn();var kr=Gb(un.current,qn),gr=kr[0],On=kr[1],Er=SA(Me,Nn,gr,On);Er&&_n?.(Er.data,qn)}}),[Mn,Nn,_n,Me]),Xr=V.useCallback((function(qn){if(Me&&un.current){var kr=Gb(un.current,qn),gr=kr[0],On=kr[1],Er=SA(Me,Nn,gr,On);Er!==void 0&&Xt?.(di({},Er.data,{color:Er.color}),qn)}}),[Nn,Xt,Me]);return X.jsx("canvas",{ref:bj(un,Xn),width:Le*Tn,height:le*Tn,style:{width:Le,height:le,cursor:gn?"auto":"normal"},onMouseEnter:gn?Ci:void 0,onMouseMove:gn?Ci:void 0,onMouseLeave:gn?Kr:void 0,onClick:gn?Xr:void 0,role:Ln})},loe=V.forwardRef((function(e,t){var r=e.isInteractive,c=e.renderWrapper,h=e.theme,p=rp(e,ooe);return X.jsx(fS,{isInteractive:r,renderWrapper:c,theme:h,animate:!1,children:X.jsx(soe,di({},p,{isInteractive:r,forwardedRef:t}))})})),coe=["defaultWidth","defaultHeight","onResize","debounceResize"];V.forwardRef((function(e,t){var r=e.defaultWidth,c=e.defaultHeight,h=e.onResize,p=e.debounceResize,y=rp(e,coe);return X.jsx(hS,{defaultWidth:r,defaultHeight:c,onResize:h,debounceResize:p,children:function(b){var a=b.width,E=b.height;return X.jsx(Qj,di({},y,{width:a,height:E,ref:t}))}})}));var uoe=["defaultWidth","defaultHeight","onResize","debounceResize"];V.forwardRef((function(e,t){var r=e.defaultWidth,c=e.defaultHeight,h=e.onResize,p=e.debounceResize,y=rp(e,uoe);return X.jsx(hS,{defaultWidth:r,defaultHeight:c,onResize:h,debounceResize:p,children:function(b){var a=b.width,E=b.height;return X.jsx(loe,di({},y,{width:a,height:E,ref:t}))}})}));function Ei(){return Ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},Ei.apply(null,arguments)}var foe={pointerEvents:"none"},hoe=function(e){var t=e.label,r=e.style,c=Zi();return X.jsx(aa.g,{transform:r.transform,opacity:r.progress,style:foe,children:X.jsx(Hy,{textAnchor:"middle",dominantBaseline:"central",style:Ei({},c.labels.text,{fill:r.textColor}),children:t})})},Jj=function(e){var t=e%(2*Math.PI);return t<0&&(t+=2*Math.PI),t},e7=function(e,t){return e.filter((function(r){return Math.abs(Yv(r.arc.endAngle-r.arc.startAngle))>=t}))},doe={startAngle:{enter:function(e){return Ei({},e,{endAngle:e.startAngle})},update:function(e){return e},leave:function(e){return Ei({},e,{startAngle:e.endAngle})}},middleAngle:{enter:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return Ei({},e,{startAngle:t,endAngle:t})},update:function(e){return e},leave:function(e){var t=e.startAngle+(e.endAngle-e.startAngle)/2;return Ei({},e,{startAngle:t,endAngle:t})}},endAngle:{enter:function(e){return Ei({},e,{startAngle:e.endAngle})},update:function(e){return e},leave:function(e){return Ei({},e,{endAngle:e.startAngle})}},innerRadius:{enter:function(e){return Ei({},e,{outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return Ei({},e,{innerRadius:e.outerRadius})}},centerRadius:{enter:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return Ei({},e,{innerRadius:t,outerRadius:t})},update:function(e){return e},leave:function(e){var t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;return Ei({},e,{innerRadius:t,outerRadius:t})}},outerRadius:{enter:function(e){return Ei({},e,{innerRadius:e.outerRadius})},update:function(e){return e},leave:function(e){return Ei({},e,{outerRadius:e.innerRadius})}},pushIn:{enter:function(e){return Ei({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})},update:function(e){return e},leave:function(e){return Ei({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})}},pushOut:{enter:function(e){return Ei({},e,{innerRadius:e.outerRadius,outerRadius:e.outerRadius+e.outerRadius-e.innerRadius})},update:function(e){return e},leave:function(e){return Ei({},e,{innerRadius:e.innerRadius-e.outerRadius+e.innerRadius,outerRadius:e.innerRadius})}}},t7=function(e,t){return V.useMemo((function(){var r=doe[e];return{enter:function(c){return Ei({progress:0},r.enter(c.arc),t?t.enter(c):{})},update:function(c){return Ei({progress:1},r.update(c.arc),t?t.update(c):{})},leave:function(c){return Ei({progress:0},r.leave(c.arc),t?t.leave(c):{})}}}),[e,t])},n7=function(e,t){var r=yre(e)-Math.PI/2,c=e.innerRadius+(e.outerRadius-e.innerRadius)*t;return wm(r,c)},poe=function(e){return function(t,r,c,h){return Kd([t,r,c,h],(function(p,y,b,a){var E=n7({startAngle:p,endAngle:y,innerRadius:b,outerRadius:a},e);return"translate("+E.x+","+E.y+")"}))}},moe=function(e,t,r,c){t===void 0&&(t=.5),r===void 0&&(r="innerRadius");var h=js(),p=h.animate,y=h.config,b=t7(r,c);return{transition:Bm(e,{keys:function(a){return a.id},initial:b.update,from:b.enter,enter:b.update,update:b.update,leave:b.leave,config:y,immediate:!p}),interpolate:poe(t)}},goe=function(e){var t=e.data,r=e.offset,c=r===void 0?.5:r,h=e.skipAngle,p=h===void 0?0:h,y=e.computeExtraProps,b=y===void 0?function(){return{}}:y;return V.useMemo((function(){return e7(t,p).map((function(a){var E=n7(a.arc,c);return Ei({},b(a),{x:E.x,y:E.y,data:a})}))}),[t,c,p,b])},yoe=function(e){var t=e.center,r=e.data,c=e.transitionMode,h=e.label,p=e.radiusOffset,y=e.skipAngle,b=e.skipRadius,a=e.textColor,E=e.component,R=E===void 0?hoe:E,L=Mh(h),P=Zi(),F=yf(a,P),U=V.useMemo((function(){return r.filter((function(Y){var J=Math.abs(Yv(Y.arc.endAngle-Y.arc.startAngle)),re=Math.abs(Y.arc.outerRadius-Y.arc.innerRadius);return J>=y&&re>=b}))}),[r,y,b]),N=moe(U,p,c),q=N.transition,Z=N.interpolate,Q=R;return X.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:q((function(Y,J){return V.createElement(Q,{key:J.id,datum:J,label:L(J),style:{progress:Y.progress,transform:Z(Y.startAngle,Y.endAngle,Y.innerRadius,Y.outerRadius),textColor:F(J)}})}))})},_oe=function(e,t,r){Pm(e,r.labels.text),e.textAlign="center",e.textBaseline="middle",t.forEach((function(c){Dm(e,Ei({},r.labels.text,{fill:c.textColor}),String(c.label),c.x,c.y)}))},voe=function(e){var t=e.data,r=e.offset,c=e.skipAngle,h=e.label,p=e.textColor,y=Mh(h),b=Zi(),a=yf(p,b),E=V.useCallback((function(R){return{label:y(R),textColor:a(R)}}),[y,a]);return goe({data:t,offset:r,skipAngle:c,computeExtraProps:E})},xoe=function(e){var t=e.label,r=e.style,c=Zi();return X.jsxs(aa.g,{opacity:r.opacity,children:[X.jsx(aa.path,{fill:"none",stroke:r.linkColor,strokeWidth:r.thickness,d:r.path}),X.jsx(Hy,{transform:r.textPosition,textAnchor:r.textAnchor,dominantBaseline:"central",style:Ei({},c.labels.text,{fill:r.textColor}),children:t})]})},boe=function(e){var t=Jj(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2);return t<Math.PI/2||t>1.5*Math.PI?"start":"end"},H5=function(e,t,r,c){var h,p,y=Jj(e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2),b=wm(y,e.outerRadius+t),a=wm(y,e.outerRadius+t+r);return y<Math.PI/2||y>1.5*Math.PI?(h="after",p={x:a.x+c,y:a.y}):(h="before",p={x:a.x-c,y:a.y}),{side:h,points:[b,a,p]}},woe=yJ().x((function(e){return e.x})).y((function(e){return e.y})),Soe=function(e,t,r,c,h,p,y){return Kd([e,t,r,c,h,p,y],(function(b,a,E,R,L,P,F){var U=H5({startAngle:b,endAngle:a,outerRadius:R},L,P,F).points;return woe(U)}))},Toe=function(e,t,r,c){return Kd([e,t,r,c],(function(h,p,y,b){return boe({startAngle:h,endAngle:p})}))},Eoe=function(e,t,r,c,h,p,y,b){return Kd([e,t,r,c,h,p,y,b],(function(a,E,R,L,P,F,U,N){var q=H5({startAngle:a,endAngle:E,outerRadius:L},P,F,U),Z=q.points,Q=q.side,Y=Z[2];return Q==="before"?Y.x-=N:Y.x+=N,"translate("+Y.x+","+Y.y+")"}))},Coe=function(e){var t=e.data,r=e.offset,c=r===void 0?0:r,h=e.diagonalLength,p=e.straightLength,y=e.skipAngle,b=y===void 0?0:y,a=e.textOffset,E=e.linkColor,R=e.textColor,L=js(),P=L.animate,F=L.config,U=Zi(),N=yf(E,U),q=yf(R,U),Z=(function(Y,J){return V.useMemo((function(){return e7(Y,J)}),[Y,J])})(t,b),Q=(function(Y){var J=Y.offset,re=Y.diagonalLength,ae=Y.straightLength,fe=Y.textOffset,Se=Y.getLinkColor,Te=Y.getTextColor;return V.useMemo((function(){return{enter:function(ue){return{startAngle:ue.arc.startAngle,endAngle:ue.arc.endAngle,innerRadius:ue.arc.innerRadius,outerRadius:ue.arc.outerRadius,offset:J,diagonalLength:0,straightLength:0,textOffset:fe,linkColor:Se(ue),textColor:Te(ue),opacity:0}},update:function(ue){return{startAngle:ue.arc.startAngle,endAngle:ue.arc.endAngle,innerRadius:ue.arc.innerRadius,outerRadius:ue.arc.outerRadius,offset:J,diagonalLength:re,straightLength:ae,textOffset:fe,linkColor:Se(ue),textColor:Te(ue),opacity:1}},leave:function(ue){return{startAngle:ue.arc.startAngle,endAngle:ue.arc.endAngle,innerRadius:ue.arc.innerRadius,outerRadius:ue.arc.outerRadius,offset:J,diagonalLength:0,straightLength:0,textOffset:fe,linkColor:Se(ue),textColor:Te(ue),opacity:0}}}}),[re,ae,fe,Se,Te,J])})({offset:c,diagonalLength:h,straightLength:p,textOffset:a,getLinkColor:N,getTextColor:q});return{transition:Bm(Z,{keys:function(Y){return Y.id},initial:Q.update,from:Q.enter,enter:Q.update,update:Q.update,leave:Q.leave,config:F,immediate:!P}),interpolateLink:Soe,interpolateTextAnchor:Toe,interpolateTextPosition:Eoe}},Moe=function(e){var t=e.center,r=e.data,c=e.label,h=e.skipAngle,p=e.offset,y=e.diagonalLength,b=e.straightLength,a=e.strokeWidth,E=e.textOffset,R=e.textColor,L=e.linkColor,P=e.component,F=P===void 0?xoe:P,U=Mh(c),N=Coe({data:r,skipAngle:h,offset:p,diagonalLength:y,straightLength:b,textOffset:E,linkColor:L,textColor:R}),q=N.transition,Z=N.interpolateLink,Q=N.interpolateTextAnchor,Y=N.interpolateTextPosition,J=F;return X.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:q((function(re,ae){return V.createElement(J,{key:ae.id,datum:ae,label:U(ae),style:Ei({},re,{thickness:a,path:Z(re.startAngle,re.endAngle,re.innerRadius,re.outerRadius,re.offset,re.diagonalLength,re.straightLength),textAnchor:Q(re.startAngle,re.endAngle,re.innerRadius,re.outerRadius),textPosition:Y(re.startAngle,re.endAngle,re.innerRadius,re.outerRadius,re.offset,re.diagonalLength,re.straightLength,re.textOffset)})})}))})},Aoe=function(e,t,r,c){e.textBaseline="middle",Pm(e,r.labels.text),t.forEach((function(h){e.textAlign=gj.canvas.align[h.textAnchor],Dm(e,Ei({},r.labels.text,{fill:h.textColor}),String(h.label),h.x,h.y),e.beginPath(),e.strokeStyle=h.linkColor,e.lineWidth=c,h.points.forEach((function(p,y){y===0?e.moveTo(p.x,p.y):e.lineTo(p.x,p.y)})),e.stroke()}))},Roe=function(e){var t=e.data,r=e.skipAngle,c=r===void 0?0:r,h=e.offset,p=h===void 0?.5:h,y=e.diagonalLength,b=e.straightLength,a=e.computeExtraProps,E=a===void 0?function(){return{}}:a,R=V.useMemo((function(){return t.filter((function(L){return Math.abs(Yv(L.arc.endAngle-L.arc.startAngle))>=c})).map((function(L){return Ei({},H5(L.arc,p,y,b),{data:L})}))}),[t,c,p,y,b]);return V.useMemo((function(){return R.map((function(L){return Ei({},E(L),L)}))}),[R,E])},koe=function(e){var t=e.data,r=e.skipAngle,c=e.offset,h=e.diagonalLength,p=e.straightLength,y=e.textOffset,b=y===void 0?0:y,a=e.label,E=e.linkColor,R=e.textColor,L=Mh(a),P=Zi(),F=yf(E,P),U=yf(R,P),N=V.useCallback((function(q){var Z,Q={x:q.points[2].x,y:q.points[2].y};return q.side==="before"?(Q.x-=b,Z="end"):(Q.x+=b,Z="start"),Ei({},Q,{label:L(q.data),linkColor:F(q.data),textAnchor:Z,textColor:U(q.data)})}),[L,F,U,b]);return Roe({data:t,skipAngle:r,offset:c,diagonalLength:h,straightLength:p,computeExtraProps:N})},Ioe=function(e){var t=e.datum,r=e.style,c=e.onClick,h=e.onMouseEnter,p=e.onMouseMove,y=e.onMouseLeave,b=V.useCallback((function(L){return c?.(t,L)}),[c,t]),a=V.useCallback((function(L){return h?.(t,L)}),[h,t]),E=V.useCallback((function(L){return p?.(t,L)}),[p,t]),R=V.useCallback((function(L){return y?.(t,L)}),[y,t]);return X.jsx(aa.path,{d:r.path,opacity:r.opacity,fill:t.fill||r.color,stroke:r.borderColor,strokeWidth:r.borderWidth,onClick:c?b:void 0,onMouseEnter:h?a:void 0,onMouseMove:p?E:void 0,onMouseLeave:y?R:void 0,"data-testid":"arc."+t.id})},zoe=function(e,t,r,c,h){return Kd([e,t,r,c],(function(p,y,b,a){return h({startAngle:p,endAngle:y,innerRadius:Math.max(0,b),outerRadius:Math.max(0,a)})}))},Loe=function(e,t,r){t===void 0&&(t="innerRadius");var c=js(),h=c.animate,p=c.config,y=t7(t,r);return{transition:Bm(e,{keys:function(b){return b.id},initial:y.update,from:y.enter,enter:y.update,update:y.update,leave:y.leave,config:p,immediate:!h}),interpolate:zoe}},Poe=function(e){var t=e.center,r=e.data,c=e.arcGenerator,h=e.borderWidth,p=e.borderColor,y=e.onClick,b=e.onMouseEnter,a=e.onMouseMove,E=e.onMouseLeave,R=e.transitionMode,L=e.component,P=L===void 0?Ioe:L,F=Zi(),U=yf(p,F),N=Loe(r,R,{enter:function(Y){return{opacity:0,color:Y.color,borderColor:U(Y)}},update:function(Y){return{opacity:1,color:Y.color,borderColor:U(Y)}},leave:function(Y){return{opacity:0,color:Y.color,borderColor:U(Y)}}}),q=N.transition,Z=N.interpolate,Q=P;return X.jsx("g",{transform:"translate("+t[0]+","+t[1]+")",children:q((function(Y,J){return V.createElement(Q,{key:J.id,datum:J,style:Ei({},Y,{borderWidth:h,path:Z(Y.startAngle,Y.endAngle,Y.innerRadius,Y.outerRadius,c)}),onClick:y,onMouseEnter:b,onMouseMove:a,onMouseLeave:E})}))})},Doe=function(e,t,r,c,h,p){p===void 0&&(p=!0);var y=[],b=wm(Xl(c),r);y.push([b.x,b.y]);var a=wm(Xl(h),r);y.push([a.x,a.y]);for(var E=Math.round(Math.min(c,h));E<=Math.round(Math.max(c,h));E++)if(E%90==0){var R=wm(Xl(E),r);y.push([R.x,R.y])}y=y.map((function(q){var Z=q[0],Q=q[1];return[e+Z,t+Q]})),p&&y.push([e,t]);var L=y.map((function(q){return q[0]})),P=y.map((function(q){return q[1]})),F=Math.min.apply(Math,L),U=Math.max.apply(Math,L),N=Math.min.apply(Math,P);return{points:y,x:F,y:N,width:U-F,height:Math.max.apply(Math,P)-N}},Ooe=function(e,t,r,c,h,p){var y=Ire(h,p,e,t);return y<r&&y>c},Boe=function(e,t,r,c,h,p,y){if(Ooe(e,t,r,c,p,y)){var b=zre(p,y,e,t);return h.find((function(a){var E=a.startAngle,R=a.endAngle;return b>=E&&b<R}))}},Foe=function(e){var t=e===void 0?{}:e,r=t.cornerRadius,c=r===void 0?0:r,h=t.padAngle,p=h===void 0?0:h;return V.useMemo((function(){return pJ().innerRadius((function(y){return y.innerRadius})).outerRadius((function(y){return y.outerRadius})).cornerRadius(c).padAngle(p)}),[c,p])};function Jl(){return Jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)({}).hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e},Jl.apply(null,arguments)}function Kv(e,t){if(e==null)return{};var r={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;r[c]=e[c]}return r}var UO,joe=function(e){var t=e.width,r=e.height,c=e.legends,h=e.data,p=e.toggleSerie;return X.jsx(X.Fragment,{children:c.map((function(y,b){var a;return X.jsx(qj,Jl({},y,{containerWidth:t,containerHeight:r,data:(a=y.data)!=null?a:h,toggleSerie:y.toggleSerie?p:void 0}),b)}))})},cn={id:"id",value:"value",sortByValue:!1,innerRadius:0,padAngle:0,cornerRadius:0,layers:["arcs","arcLinkLabels","arcLabels","legends"],startAngle:0,endAngle:360,fit:!0,activeInnerRadiusOffset:0,activeOuterRadiusOffset:0,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableArcLabels:!0,arcLabel:"formattedValue",arcLabelsSkipAngle:0,arcLabelsSkipRadius:0,arcLabelsRadiusOffset:.5,arcLabelsTextColor:{theme:"labels.text.fill"},enableArcLinkLabels:!0,arcLinkLabel:"id",arcLinkLabelsSkipAngle:0,arcLinkLabelsOffset:0,arcLinkLabelsDiagonalLength:16,arcLinkLabelsStraightLength:24,arcLinkLabelsThickness:1,arcLinkLabelsTextOffset:6,arcLinkLabelsTextColor:{theme:"labels.text.fill"},arcLinkLabelsColor:{theme:"axis.ticks.line.stroke"},colors:{scheme:"nivo"},defs:[],fill:[],isInteractive:!0,animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",tooltip:function(e){var t=e.datum;return X.jsx(W8,{id:t.id,value:t.formattedValue,enableChip:!0,color:t.color})},legends:[],role:"img",pixelRatio:typeof window<"u"&&(UO=window.devicePixelRatio)!=null?UO:1},Noe=["points"],r7=function(e){var t=e.data,r=e.id,c=r===void 0?cn.id:r,h=e.value,p=h===void 0?cn.value:h,y=e.valueFormat,b=e.colors,a=b===void 0?cn.colors:b,E=Mh(c),R=Mh(p),L=pS(y),P=Nj(a,"id");return V.useMemo((function(){return t.map((function(F){var U,N=E(F),q=R(F),Z={id:N,label:(U=F.label)!=null?U:N,hidden:!1,value:q,formattedValue:L(q),data:F};return Jl({},Z,{color:P(Z)})}))}),[t,E,R,L,P])},Uoe=function(e){var t=e.data,r=e.startAngle,c=e.endAngle,h=e.innerRadius,p=e.outerRadius,y=e.padAngle,b=e.sortByValue,a=e.activeId,E=e.activeInnerRadiusOffset,R=e.activeOuterRadiusOffset,L=e.hiddenIds,P=e.forwardLegendData,F=V.useMemo((function(){var Z=xJ().value((function(Q){return Q.value})).startAngle(Xl(r)).endAngle(Xl(c)).padAngle(Xl(y));return b||Z.sortValues(null),Z}),[r,c,y,b]),U=V.useMemo((function(){var Z=t.filter((function(Q){return!L.includes(Q.id)}));return{dataWithArc:F(Z).map((function(Q){var Y=Math.abs(Q.endAngle-Q.startAngle);return Jl({},Q.data,{arc:{index:Q.index,startAngle:Q.startAngle,endAngle:Q.endAngle,innerRadius:a===Q.data.id?h-E:h,outerRadius:a===Q.data.id?p+R:p,thickness:p-h,padAngle:Q.padAngle,angle:Y,angleDeg:Yv(Y)}})})),legendData:t.map((function(Q){return{id:Q.id,label:Q.label,color:Q.color,hidden:L.includes(Q.id),data:Q}}))}}),[F,t,L,a,h,E,p,R]),N=U.legendData,q=V.useRef(P);return V.useEffect((function(){typeof q.current=="function"&&q.current(N)}),[q,N]),U},$oe=function(e){var t=e.activeId,r=e.onActiveIdChange,c=e.defaultActiveId,h=t!==void 0,p=V.useState(h||c===void 0?null:c),y=p[0],b=p[1];return{activeId:h?t:y,setActiveId:V.useCallback((function(a){r&&r(a),h||b(a)}),[h,r,b])}},i7=function(e){var t=e.data,r=e.width,c=e.height,h=e.innerRadius,p=h===void 0?cn.innerRadius:h,y=e.startAngle,b=y===void 0?cn.startAngle:y,a=e.endAngle,E=a===void 0?cn.endAngle:a,R=e.padAngle,L=R===void 0?cn.padAngle:R,P=e.sortByValue,F=P===void 0?cn.sortByValue:P,U=e.cornerRadius,N=U===void 0?cn.cornerRadius:U,q=e.fit,Z=q===void 0?cn.fit:q,Q=e.activeInnerRadiusOffset,Y=Q===void 0?cn.activeInnerRadiusOffset:Q,J=e.activeOuterRadiusOffset,re=J===void 0?cn.activeOuterRadiusOffset:J,ae=e.activeId,fe=e.onActiveIdChange,Se=e.defaultActiveId,Te=e.forwardLegendData,ue=$oe({activeId:ae,onActiveIdChange:fe,defaultActiveId:Se}),_e=ue.activeId,se=ue.setActiveId,me=V.useState([]),be=me[0],Ie=me[1],pe=V.useMemo((function(){var Be,dt=Math.min(r,c)/2,Ce=dt*Math.min(p,1),Ge=r/2,at=c/2;if(Z){var nt=Doe(Ge,at,dt,b-90,E-90),gt=nt.points,Pt=Kv(nt,Noe),Ct=Math.min(r/Pt.width,c/Pt.height),Yt={width:Pt.width*Ct,height:Pt.height*Ct};Yt.x=(r-Yt.width)/2,Yt.y=(c-Yt.height)/2,Ge=(Ge-Pt.x)/Pt.width*Pt.width*Ct+Yt.x,at=(at-Pt.y)/Pt.height*Pt.height*Ct+Yt.y,Be={box:Pt,ratio:Ct,points:gt},dt*=Ct,Ce*=Ct}return{centerX:Ge,centerY:at,radius:dt,innerRadius:Ce,debug:Be}}),[r,c,p,b,E,Z]),Pe=Uoe({data:t,startAngle:b,endAngle:E,innerRadius:pe.innerRadius,outerRadius:pe.radius,padAngle:L,sortByValue:F,activeId:_e,activeInnerRadiusOffset:Y,activeOuterRadiusOffset:re,hiddenIds:be,forwardLegendData:Te}),et=V.useCallback((function(Be){Ie((function(dt){return dt.indexOf(Be)>-1?dt.filter((function(Ce){return Ce!==Be})):[].concat(dt,[Be])}))}),[]);return Jl({arcGenerator:Foe({cornerRadius:N,padAngle:Xl(L)}),activeId:_e,setActiveId:se,toggleSerie:et},Pe,pe)},qoe=function(e){var t=e.dataWithArc,r=e.arcGenerator,c=e.centerX,h=e.centerY,p=e.radius,y=e.innerRadius;return V.useMemo((function(){return{dataWithArc:t,arcGenerator:r,centerX:c,centerY:h,radius:p,innerRadius:y}}),[t,r,c,h,p,y])},Voe=function(e){var t=e.center,r=e.data,c=e.arcGenerator,h=e.borderWidth,p=e.borderColor,y=e.isInteractive,b=e.onClick,a=e.onMouseEnter,E=e.onMouseMove,R=e.onMouseLeave,L=e.setActiveId,P=e.tooltip,F=e.transitionMode,U=Cw(),N=U.showTooltipFromEvent,q=U.hideTooltip,Z=V.useMemo((function(){if(y)return function(re,ae){b?.(re,ae)}}),[y,b]),Q=V.useMemo((function(){if(y)return function(re,ae){N(V.createElement(P,{datum:re}),ae),L(re.id),a?.(re,ae)}}),[y,N,L,a,P]),Y=V.useMemo((function(){if(y)return function(re,ae){N(V.createElement(P,{datum:re}),ae),E?.(re,ae)}}),[y,N,E,P]),J=V.useMemo((function(){if(y)return function(re,ae){q(),L(null),R?.(re,ae)}}),[y,q,L,R]);return X.jsx(Poe,{center:t,data:r,arcGenerator:c,borderWidth:h,borderColor:p,transitionMode:F,onClick:Z,onMouseEnter:Q,onMouseMove:Y,onMouseLeave:J})},Goe=["isInteractive","animate","motionConfig","theme","renderWrapper"],Hoe=function(e){var t=e.data,r=e.id,c=r===void 0?cn.id:r,h=e.value,p=h===void 0?cn.value:h,y=e.valueFormat,b=e.sortByValue,a=b===void 0?cn.sortByValue:b,E=e.layers,R=E===void 0?cn.layers:E,L=e.startAngle,P=L===void 0?cn.startAngle:L,F=e.endAngle,U=F===void 0?cn.endAngle:F,N=e.padAngle,q=N===void 0?cn.padAngle:N,Z=e.fit,Q=Z===void 0?cn.fit:Z,Y=e.innerRadius,J=Y===void 0?cn.innerRadius:Y,re=e.cornerRadius,ae=re===void 0?cn.cornerRadius:re,fe=e.activeInnerRadiusOffset,Se=fe===void 0?cn.activeInnerRadiusOffset:fe,Te=e.activeOuterRadiusOffset,ue=Te===void 0?cn.activeOuterRadiusOffset:Te,_e=e.width,se=e.height,me=e.margin,be=e.colors,Ie=be===void 0?cn.colors:be,pe=e.borderWidth,Pe=pe===void 0?cn.borderWidth:pe,et=e.borderColor,Be=et===void 0?cn.borderColor:et,dt=e.enableArcLabels,Ce=dt===void 0?cn.enableArcLabels:dt,Ge=e.arcLabel,at=Ge===void 0?cn.arcLabel:Ge,nt=e.arcLabelsSkipAngle,gt=nt===void 0?cn.arcLabelsSkipAngle:nt,Pt=e.arcLabelsSkipRadius,Ct=Pt===void 0?cn.arcLabelsSkipRadius:Pt,Yt=e.arcLabelsTextColor,pt=Yt===void 0?cn.arcLabelsTextColor:Yt,Rt=e.arcLabelsRadiusOffset,kt=Rt===void 0?cn.arcLabelsRadiusOffset:Rt,Xe=e.arcLabelsComponent,xn=e.enableArcLinkLabels,Vt=xn===void 0?cn.enableArcLinkLabels:xn,Kt=e.arcLinkLabel,sn=Kt===void 0?cn.arcLinkLabel:Kt,Jt=e.arcLinkLabelsSkipAngle,zn=Jt===void 0?cn.arcLinkLabelsSkipAngle:Jt,gn=e.arcLinkLabelsOffset,yn=gn===void 0?cn.arcLinkLabelsOffset:gn,Cn=e.arcLinkLabelsDiagonalLength,Xt=Cn===void 0?cn.arcLinkLabelsDiagonalLength:Cn,jn=e.arcLinkLabelsStraightLength,_n=jn===void 0?cn.arcLinkLabelsStraightLength:jn,er=e.arcLinkLabelsThickness,tr=er===void 0?cn.arcLinkLabelsThickness:er,Tn=e.arcLinkLabelsTextOffset,Ln=Tn===void 0?cn.arcLinkLabelsTextOffset:Tn,Xn=e.arcLinkLabelsTextColor,lr=Xn===void 0?cn.arcLinkLabelsTextColor:Xn,Sn=e.arcLinkLabelsColor,zr=Sn===void 0?cn.arcLinkLabelsColor:Sn,cr=e.arcLinkLabelComponent,un=e.defs,Wt=un===void 0?cn.defs:un,fn=e.fill,Nn=fn===void 0?cn.fill:fn,fr=e.isInteractive,Zr=fr===void 0?cn.isInteractive:fr,Le=e.onClick,le=e.onMouseEnter,ce=e.onMouseMove,Me=e.onMouseLeave,Oe=e.tooltip,Ue=Oe===void 0?cn.tooltip:Oe,Qe=e.activeId,qe=e.onActiveIdChange,je=e.defaultActiveId,tt=e.transitionMode,Tt=tt===void 0?cn.transitionMode:tt,Lt=e.legends,Mt=Lt===void 0?cn.legends:Lt,dn=e.forwardLegendData,bn=e.role,In=bn===void 0?cn.role:bn,Bn=e.forwardedRef,Mn=dS(_e,se,me),nr=Mn.outerWidth,Fn=Mn.outerHeight,pr=Mn.margin,Rr=Mn.innerWidth,Ci=Mn.innerHeight,Kr=r7({data:t,id:c,value:p,valueFormat:y,colors:Ie}),Xr=i7({data:Kr,width:Rr,height:Ci,fit:Q,innerRadius:J,startAngle:P,endAngle:U,padAngle:q,sortByValue:a,cornerRadius:ae,activeInnerRadiusOffset:Se,activeOuterRadiusOffset:ue,activeId:Qe,onActiveIdChange:qe,defaultActiveId:je,forwardLegendData:dn}),qn=Xr.dataWithArc,kr=Xr.legendData,gr=Xr.arcGenerator,On=Xr.centerX,Er=Xr.centerY,Wn=Xr.radius,Ur=Xr.innerRadius,mi=Xr.setActiveId,Ji=Xr.toggleSerie,Aa=xj(Wt,qn,Nn),ea={arcs:null,arcLinkLabels:null,arcLabels:null,legends:null};R.includes("arcs")&&(ea.arcs=X.jsx(Voe,{center:[On,Er],data:qn,arcGenerator:gr,borderWidth:Pe,borderColor:Be,isInteractive:Zr,onClick:Le,onMouseEnter:le,onMouseMove:ce,onMouseLeave:Me,setActiveId:mi,tooltip:Ue,transitionMode:Tt},"arcs")),Vt&&R.includes("arcLinkLabels")&&(ea.arcLinkLabels=X.jsx(Moe,{center:[On,Er],data:qn,label:sn,skipAngle:zn,offset:yn,diagonalLength:Xt,straightLength:_n,strokeWidth:tr,textOffset:Ln,textColor:lr,linkColor:zr,component:cr},"arcLinkLabels")),Ce&&R.includes("arcLabels")&&(ea.arcLabels=X.jsx(yoe,{center:[On,Er],data:qn,label:at,radiusOffset:kt,skipAngle:gt,skipRadius:Ct,textColor:pt,transitionMode:Tt,component:Xe},"arcLabels")),Mt.length>0&&R.includes("legends")&&(ea.legends=X.jsx(joe,{width:Rr,height:Ci,data:kr,legends:Mt,toggleSerie:Ji},"legends"));var ko=qoe({dataWithArc:qn,arcGenerator:gr,centerX:On,centerY:Er,radius:Wn,innerRadius:Ur});return X.jsx(_j,{width:nr,height:Fn,margin:pr,defs:Aa,role:In,ref:Bn,children:R.map((function(Yi,oo){return ea[Yi]!==void 0?ea[Yi]:typeof Yi=="function"?X.jsx(V.Fragment,{children:V.createElement(Yi,ko)},oo):null}))})},a7=V.forwardRef((function(e,t){var r=e.isInteractive,c=r===void 0?cn.isInteractive:r,h=e.animate,p=h===void 0?cn.animate:h,y=e.motionConfig,b=y===void 0?cn.motionConfig:y,a=e.theme,E=e.renderWrapper,R=Kv(e,Goe);return X.jsx(fS,{animate:p,isInteractive:c,motionConfig:b,renderWrapper:E,theme:a,children:X.jsx(Hoe,Jl({isInteractive:c},R,{forwardedRef:t}))})})),Woe=["defaultWidth","defaultHeight","onResize","debounceResize"];V.forwardRef((function(e,t){var r=e.defaultWidth,c=e.defaultHeight,h=e.onResize,p=e.debounceResize,y=Kv(e,Woe);return X.jsx(hS,{defaultWidth:r,defaultHeight:c,onResize:h,debounceResize:p,children:function(b){var a=b.width,E=b.height;return X.jsx(a7,Jl({width:a,height:E},y,{ref:t}))}})}));var Zoe=["isInteractive","theme","renderWrapper"],Xoe=function(e){var t=e.data,r=e.id,c=r===void 0?cn.id:r,h=e.value,p=h===void 0?cn.value:h,y=e.valueFormat,b=e.sortByValue,a=b===void 0?cn.sortByValue:b,E=e.startAngle,R=E===void 0?cn.startAngle:E,L=e.endAngle,P=L===void 0?cn.endAngle:L,F=e.padAngle,U=F===void 0?cn.padAngle:F,N=e.fit,q=N===void 0?cn.fit:N,Z=e.innerRadius,Q=Z===void 0?cn.innerRadius:Z,Y=e.cornerRadius,J=Y===void 0?cn.cornerRadius:Y,re=e.activeInnerRadiusOffset,ae=re===void 0?cn.activeInnerRadiusOffset:re,fe=e.activeOuterRadiusOffset,Se=fe===void 0?cn.activeOuterRadiusOffset:fe,Te=e.width,ue=e.height,_e=e.margin,se=e.pixelRatio,me=se===void 0?cn.pixelRatio:se,be=e.colors,Ie=be===void 0?cn.colors:be,pe=e.borderWidth,Pe=pe===void 0?cn.borderWidth:pe,et=e.borderColor,Be=et===void 0?cn.borderColor:et,dt=e.enableArcLabels,Ce=dt===void 0?cn.enableArcLabels:dt,Ge=e.arcLabel,at=Ge===void 0?cn.arcLabel:Ge,nt=e.arcLabelsSkipAngle,gt=nt===void 0?cn.arcLabelsSkipAngle:nt,Pt=e.arcLabelsTextColor,Ct=Pt===void 0?cn.arcLabelsTextColor:Pt,Yt=e.arcLabelsRadiusOffset,pt=Yt===void 0?cn.arcLabelsRadiusOffset:Yt,Rt=e.enableArcLinkLabels,kt=Rt===void 0?cn.enableArcLinkLabels:Rt,Xe=e.arcLinkLabel,xn=Xe===void 0?cn.arcLinkLabel:Xe,Vt=e.arcLinkLabelsSkipAngle,Kt=Vt===void 0?cn.arcLinkLabelsSkipAngle:Vt,sn=e.arcLinkLabelsOffset,Jt=sn===void 0?cn.arcLinkLabelsOffset:sn,zn=e.arcLinkLabelsDiagonalLength,gn=zn===void 0?cn.arcLinkLabelsDiagonalLength:zn,yn=e.arcLinkLabelsStraightLength,Cn=yn===void 0?cn.arcLinkLabelsStraightLength:yn,Xt=e.arcLinkLabelsThickness,jn=Xt===void 0?cn.arcLinkLabelsThickness:Xt,_n=e.arcLinkLabelsTextOffset,er=_n===void 0?cn.arcLinkLabelsTextOffset:_n,tr=e.arcLinkLabelsTextColor,Tn=tr===void 0?cn.arcLinkLabelsTextColor:tr,Ln=e.arcLinkLabelsColor,Xn=Ln===void 0?cn.arcLinkLabelsColor:Ln,lr=e.isInteractive,Sn=lr===void 0?cn.isInteractive:lr,zr=e.onClick,cr=e.onMouseMove,un=e.tooltip,Wt=un===void 0?cn.tooltip:un,fn=e.activeId,Nn=e.onActiveIdChange,fr=e.defaultActiveId,Zr=e.legends,Le=Zr===void 0?cn.legends:Zr,le=e.forwardLegendData,ce=e.role,Me=e.forwardedRef,Oe=V.useRef(null),Ue=Zi(),Qe=dS(Te,ue,_e),qe=Qe.margin,je=Qe.innerWidth,tt=Qe.innerHeight,Tt=Qe.outerWidth,Lt=Qe.outerHeight,Mt=r7({data:t,id:c,value:p,valueFormat:y,colors:Ie}),dn=i7({data:Mt,width:je,height:tt,fit:q,innerRadius:Q,startAngle:R,endAngle:P,padAngle:U,sortByValue:a,cornerRadius:J,activeInnerRadiusOffset:ae,activeOuterRadiusOffset:Se,activeId:fn,onActiveIdChange:Nn,defaultActiveId:fr,forwardLegendData:le}),bn=dn.dataWithArc,In=dn.arcGenerator,Bn=dn.centerX,Mn=dn.centerY,nr=dn.radius,Fn=dn.innerRadius,pr=dn.setActiveId,Rr=yf(Be,Ue),Ci=voe({data:bn,label:at,skipAngle:gt,offset:pt,textColor:Ct}),Kr=koe({data:bn,skipAngle:Kt,offset:Jt,diagonalLength:gn,straightLength:Cn,label:xn,linkColor:Xn,textOffset:er,textColor:Tn});V.useEffect((function(){if(Oe.current){Oe.current.width=Tt*me,Oe.current.height=Lt*me;var Wn=Oe.current.getContext("2d");Wn.scale(me,me),Wn.fillStyle=Ue.background,Wn.fillRect(0,0,Tt,Lt),Wn.save(),Wn.translate(qe.left,qe.top),In.context(Wn),Wn.save(),Wn.translate(Bn,Mn),bn.forEach((function(Ur){Wn.beginPath(),Wn.fillStyle=Ur.color,Wn.strokeStyle=Rr(Ur),Wn.lineWidth=Pe,In(Ur.arc),Wn.fill(),Pe>0&&Wn.stroke()})),kt===!0&&Aoe(Wn,Kr,Ue,jn),Ce===!0&&_oe(Wn,Ci,Ue),Wn.restore(),Le.forEach((function(Ur){Vj(Wn,Jl({},Ur,{data:bn,containerWidth:je,containerHeight:tt,theme:Ue}))}))}}),[Oe,je,tt,Tt,Lt,qe.top,qe.left,me,Bn,Mn,In,bn,Pe,Rr,Ce,Ci,kt,Kr,jn,Le,Ue]);var Xr=V.useMemo((function(){return bn.map((function(Wn){return Jl({id:Wn.id},Wn.arc)}))}),[bn]),qn=function(Wn){if(!Oe.current)return null;var Ur=Gb(Oe.current,Wn),mi=Ur[0],Ji=Ur[1],Aa=Boe(qe.left+Bn,qe.top+Mn,nr,Fn,Xr,mi,Ji);return Aa?bn.find((function(ea){return ea.id===Aa.id})):null},kr=Cw(),gr=kr.showTooltipFromEvent,On=kr.hideTooltip,Er=function(Wn){var Ur=qn(Wn);Ur?(cr?.(Ur,Wn),pr(Ur.id),gr(V.createElement(Wt,{datum:Ur}),Wn)):(pr(null),On())};return X.jsx("canvas",{ref:bj(Oe,Me),width:Tt*me,height:Lt*me,style:{width:Tt,height:Lt,cursor:Sn?"auto":"normal"},onMouseEnter:Sn?Er:void 0,onMouseMove:Sn?Er:void 0,onMouseLeave:Sn?function(){On()}:void 0,onClick:Sn?function(Wn){if(zr){var Ur=qn(Wn);Ur&&zr(Ur,Wn)}}:void 0,role:ce})},Yoe=V.forwardRef((function(e,t){var r=e.isInteractive,c=r===void 0?cn.isInteractive:r,h=e.theme,p=e.renderWrapper,y=Kv(e,Zoe);return X.jsx(fS,{isInteractive:c,renderWrapper:p,theme:h,children:X.jsx(Xoe,Jl({isInteractive:c},y,{forwardedRef:t}))})})),Koe=["defaultWidth","defaultHeight","onResize","debounceResize"];V.forwardRef((function(e,t){var r=e.defaultWidth,c=e.defaultHeight,h=e.onResize,p=e.debounceResize,y=Kv(e,Koe);return X.jsx(hS,{defaultWidth:r,defaultHeight:c,onResize:h,debounceResize:p,children:function(b){var a=b.width,E=b.height;return X.jsx(Yoe,Jl({width:a,height:E},y,{ref:t}))}})}));const o7=()=>{const[e,t]=V.useState({width:void 0,height:void 0});return V.useEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e},Qoe=({school:e})=>{const[t,r]=V.useState(),c=o7(),[h,p]=V.useMemo(()=>{if(!c)return[0,0];const a=t?.clientWidth||0,E=t?.clientHeight||0;return[a,E]},[t?.clientWidth,t?.clientHeight,c]),y=[{color:"#b2cefe",label:"Māori",value:e?.maori||0,id:"Māori"},{color:"#fea3aa",label:"Pacific",value:e?.pacific||0,id:"Pacific"},{color:"#cb9eff",label:"European",value:e?.european||0,id:"European"},{color:"#baed91",label:"Asian",value:e?.asian||0,id:"Asian"},{color:"#f8b88b",label:"MELAA",value:e?.melaa||0,id:"MELAA"},{color:"#faf884",label:"International",value:e?.international||0,id:"International"},{color:"#f2a2e8",label:"Other",value:e?.other||0,id:"Other"}].filter(a=>a.value>0),b=e?.total??0;return X.jsxs(J1,{sx:{p:2},children:[X.jsx(Li,{variant:"h5",component:"h2",children:`Enrolments (${b})`}),X.jsx(By,{ref:a=>r(a),px:2,py:0,sx:{minHeight:"450px",maxHeight:"600px"},children:b>0?window.innerWidth>640?X.jsx(a7,{width:h,height:p,isInteractive:!1,margin:{top:80,right:120,bottom:80,left:120},data:y,colors:{datum:"data.color"},startAngle:-90,innerRadius:.6,padAngle:.5,cornerRadius:5,enableArcLabels:!0,enableArcLinkLabels:!0,arcLabel:a=>{const E=Math.round(a.value/e?.total*100);return E>2?`${E}%`:""},arcLinkLabel:a=>`${a.id}: ${a.value}`,arcLinkLabelsColor:{from:"color"},arcLinkLabelsThickness:3,arcLinkLabelsTextColor:{from:"color",modifiers:[["darker",1.2]]}}):X.jsx(Qj,{layout:"horizontal",enableGridX:!1,enableGridY:!1,labelTextColor:"#fff",enableLabel:!0,width:t?.clientWidth||0,height:t?.clientHeight||0,data:y,colors:{datum:"data.color"},margin:{top:10,right:10,bottom:10,left:10}}):X.jsx(Gl,{height:p,justifyContent:"center",alignItems:"center",pb:5,children:X.jsx(Li,{fontSize:"large",children:"No Enrolment Data"})})})]})},Joe=({lat:e,lng:t,zoom:r,width:c,height:h})=>{const p=V.useRef(null),[y,b]=V.useState(null),[a,E]=V.useState(null),[R,L]=V.useState("");return V.useEffect(()=>{pm.accessToken="pk.eyJ1Ijoic2FtLWh1bnQiLCJhIjoiY2trczR5bm11MHhmbDJwbnhnbmU0a2t3ciJ9.maCODbXshwiacsDdDCTy2g";const P=({setMap:U,mapContainer:N})=>{const q=new pm.Map({container:N.current,style:"mapbox://styles/mapbox/dark-v10",center:[t,e],zoom:r});q.on("load",()=>{U(q),q.resize(),F(q)}),q.dragPan.disable(),q.keyboard.disable(),q.scrollZoom.disable(),q.touchZoomRotate.disable(),q.doubleClickZoom.disable();const Z=new pm.NavigationControl;q.addControl(Z,"top-right")},F=U=>{const N=new pm.Marker().setLngLat([t,e]).addTo(U);E(N),L(`${e},${t}`)};y&&a&&R!==`${e},${t}`&&(a.remove(),F(y)),y||P({setMap:b,mapContainer:p})},[y,e,t,r,a,R]),X.jsx("div",{className:"mapboxgl-container",ref:P=>{p.current=P},style:{height:h,width:c}})},ese=({school:e})=>{const[t,r]=V.useState(),c=o7(),[h,p]=V.useMemo(()=>{if(!c)return[0,0];const y=t?.clientWidth||0,b=t?.clientHeight||0;return[y,b]},[t?.clientWidth,t?.clientHeight,c]);return X.jsx(By,{ref:y=>r(y),sx:{minHeight:"450px",maxHeight:"600px"},children:X.jsx(Joe,{width:h,height:p,lat:e.latitude,lng:e.longitude,zoom:6.5})})},tse=()=>{const{schoolId:e}=o9(),{data:t,error:r,isPending:c}=MX(e),h=c?"Loading School...":r?"Error loading school":t?.orgName;return X.jsxs(ew,{component:"section",maxWidth:"xl",children:[X.jsx(Li,{variant:"h4",component:"h1",mt:3,mb:3,children:h}),c&&X.jsx(Gl,{height:"50vh",direction:"column",alignItems:"center",justifyContent:"center",children:X.jsx(H1,{})}),r&&X.jsx(Li,{color:"error",fontWeight:"bold",children:JSON.stringify(r)}),t&&X.jsxs(fT,{container:!0,spacing:4,children:[X.jsx(fT,{size:{md:5,sm:12},children:X.jsxs(Gl,{direction:"column",spacing:4,children:[X.jsx(AX,{school:t}),X.jsx(RX,{school:t}),X.jsx(kX,{school:t})]})}),X.jsx(fT,{size:{md:7,sm:12},children:X.jsxs(Gl,{direction:"column",spacing:4,children:[X.jsx(Qoe,{school:t}),X.jsx(ese,{school:t})]})})]})]})},s7=Qo(X.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),$O=Qo(X.jsx("path",{d:"M18.41 16.59 13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),qO=Qo(X.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"})),VO=Qo(X.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"})),GO=Qo(X.jsx("path",{d:"M5.59 7.41 10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),nse=e=>{const t=Om(),{count:r,page:c,rowsPerPage:h,onPageChange:p}=e,y=R=>{p(R,0)},b=R=>{p(R,c-1)},a=R=>{p(R,c+1)},E=R=>{p(R,Math.max(0,Math.ceil(r/h)-1))};return X.jsxs(By,{sx:{flexShrink:0,ml:2.5},children:[X.jsx(wh,{onClick:y,disabled:c===0,"aria-label":"first page",children:t.direction==="rtl"?X.jsx(GO,{}):X.jsx($O,{})}),X.jsx(wh,{onClick:b,disabled:c===0,"aria-label":"previous page",children:t.direction==="rtl"?X.jsx(VO,{}):X.jsx(qO,{})}),X.jsx(wh,{onClick:a,disabled:c>=Math.ceil(r/h)-1,"aria-label":"next page",children:t.direction==="rtl"?X.jsx(qO,{}):X.jsx(VO,{})}),X.jsx(wh,{onClick:E,disabled:c>=Math.ceil(r/h)-1,"aria-label":"last page",children:t.direction==="rtl"?X.jsx($O,{}):X.jsx(GO,{})})]})},TA={textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},rse=({schools:e})=>{const[t,r]=V.useState(0),[c,h]=V.useState(12);V.useEffect(()=>r(0),[e]);const p=t>0?Math.max(0,(1+t)*c-e.length):0,y=(a,E)=>{r(E)},b=a=>{h(parseInt(a.target.value,10)),r(0)};return X.jsxs(nw,{sx:{minWidth:300,p:0},"aria-label":"custom pagination table",children:[X.jsx(DZ,{children:X.jsxs(Ma,{children:[X.jsx(or,{align:"left",children:"Name"}),X.jsx(or,{align:"left",children:"City"}),X.jsx(or,{align:"right",children:"Students"}),X.jsx(or,{align:"right",children:"Website"})]})}),X.jsxs(rw,{children:[(c>0?e.slice(t*c,t*c+c):e).map(a=>X.jsxs(Ma,{children:[X.jsx(or,{sx:{width:300},scope:"row",children:X.jsx(C1,{to:"/schools/"+a.schoolId,className:"school-list-item",children:X.jsx(Li,{sx:TA,children:a.name})},a.schoolId)}),X.jsx(or,{sx:{width:100},scope:"row",children:X.jsx(Li,{sx:TA,children:a.city})}),X.jsx(or,{sx:{width:100},align:"right",children:a.total}),X.jsx(or,{sx:{width:100},align:"right",children:X.jsx(Li,{sx:TA,children:X.jsx("a",{href:a.url,children:a.url})})})]},a.schoolId)),p>0&&X.jsx(Ma,{style:{height:53*p},children:X.jsx(or,{colSpan:6})})]}),X.jsx(kZ,{children:X.jsx(Ma,{children:X.jsx(nX,{rowsPerPageOptions:[12,24],colSpan:4,count:e.length,rowsPerPage:c,page:t,slotProps:{select:{inputProps:{"aria-label":"rows per page"},native:!0},actions:nse},onPageChange:y,onRowsPerPageChange:b})})})]})},ise=()=>{const[e,t]=V.useState(""),{data:r,error:c,isPending:h}=FB(),p=V.useMemo(()=>r?.reduce((E,R)=>E.set(R.schoolId,R),new Map),[r]),y=V.useMemo(()=>r?.map((E,R)=>({id:E.schoolId,i:R,name:E.name.replace(/[.,/#!$%^&*;:{}=\-_'`~()]/g,"").toLowerCase()}))??[],[r]),b=V.useMemo(()=>e.replace(/[.,/#!$%^&*;:{}=\-_'`~()]/g,"").toLowerCase(),[e]),a=V.useMemo(()=>y.filter(E=>E.name.includes(b)).map(E=>p?.get(E.id)).filter(E=>E!==void 0),[y,b,p]);return X.jsxs(ew,{id:"schools-list-section",component:"section",maxWidth:"xl",children:[X.jsxs(Gl,{direction:"row",my:3,alignItems:"center",children:[X.jsx(Li,{variant:"h4",component:"h1",children:"Find a school"}),X.jsx(By,{flexGrow:1}),X.jsx(uX,{value:e,onChange:E=>t(E.target.value.toLowerCase()),sx:{minWidth:300},placeholder:"Search",slotProps:{input:{startAdornment:X.jsx(s7,{sx:{mr:1}})}},size:"small"})]}),c&&X.jsx(Li,{variant:"h3",color:"error",children:c.toString()}),a.length>0&&X.jsx(rse,{schools:a}),h&&X.jsx(Gl,{height:"50vh",direction:"column",alignItems:"center",justifyContent:"center",children:X.jsx(H1,{})})]})},ase=Qo(X.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),ose=Qo(X.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),sse=Qo([X.jsx("circle",{cx:"7.2",cy:"14.4",r:"3.2"},"0"),X.jsx("circle",{cx:"14.8",cy:"18",r:"2"},"1"),X.jsx("circle",{cx:"15.2",cy:"8.8",r:"4.8"},"2")]),lse=Qo(X.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"})),cse=Qo(X.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"})),use=()=>{const{toggleTheme:e}=V.useContext(BB),t=Om(),r=t.palette.mode==="dark",c={color:"white",textDecoration:"none"},h={...c,color:r?t.palette.primary.main:t.palette.secondary.main};return X.jsx(DV,{position:"static",children:X.jsxs(OB,{children:[X.jsx(ose,{sx:{mr:2,width:32,height:32}}),X.jsx(Li,{variant:"h5",component:"div",children:"School Viewer"}),X.jsxs(Gl,{direction:"row",ml:6,spacing:2,alignItems:"center",children:[X.jsx(Lb,{to:"/schools",style:({isActive:p})=>p?h:c,children:X.jsxs(Gl,{direction:"row",alignItems:"center",spacing:.5,children:[X.jsx(s7,{}),X.jsx(Li,{variant:"h6",component:"div",children:"Schools"})]})}),X.jsx(Lb,{to:"/clusters",style:({isActive:p})=>p?h:c,children:X.jsxs(Gl,{direction:"row",alignItems:"center",spacing:.5,children:[X.jsx(sse,{}),X.jsx(Li,{variant:"h6",component:"div",children:"Clusters"})]})}),X.jsx(Lb,{to:"/about",style:({isActive:p})=>p?h:c,children:X.jsxs(Gl,{direction:"row",alignItems:"center",spacing:.5,children:[X.jsx(ase,{}),X.jsx(Li,{variant:"h6",component:"div",children:"About"})]})})]}),X.jsx(By,{flexGrow:"1"}),X.jsx(PB,{title:"Toggle Dark Mode",children:X.jsx(wh,{sx:{ml:1},onClick:e,color:"inherit",children:t.palette.mode==="light"?X.jsx(lse,{}):X.jsx(cse,{})})})]})})},fse=()=>X.jsxs(X.Fragment,{children:[X.jsx(use,{}),X.jsx("div",{style:{padding:"0px",height:"calc(100vh - 90px)",overflowY:"scroll"},children:X.jsx(b9,{})}),X.jsx("footer",{style:{height:"18px",textAlign:"right",marginRight:"8px"},children:X.jsx(Li,{variant:"body2",component:"div",children:`Sam Hunt ${new Date().getFullYear()}`})})]}),hse=()=>X.jsxs("div",{children:[X.jsx("h1",{children:"Page not found"}),X.jsx(C1,{to:"/",children:"Get me home"})]}),dse=new TN({defaultOptions:{queries:{staleTime:1440*60*1e3,gcTime:1440*60*1e3,retry:1,refetchOnWindowFocus:!1}}});function pse(){return X.jsxs(CN,{client:dse,children:[X.jsx(dX,{children:X.jsx(H9,{basename:"/school-viewer/",children:X.jsx(S9,{children:X.jsxs($d,{path:"/",element:X.jsx(fse,{}),children:[X.jsx($d,{path:"",element:X.jsx(x9,{replace:!0,to:"/schools"})}),X.jsx($d,{path:"/schools",element:X.jsx(ise,{})}),X.jsx($d,{path:"/schools/:schoolId",element:X.jsx(tse,{})}),X.jsx($d,{path:"/clusters",element:X.jsx(SX,{})}),X.jsx($d,{path:"/about",element:X.jsx(pX,{})}),X.jsx($d,{path:"*",element:X.jsx(hse,{})})]})})})}),X.jsx(FN,{initialIsOpen:!1})]})}A7.createRoot(document.getElementById("root")).render(X.jsx(V.StrictMode,{children:X.jsx(pse,{})}));
